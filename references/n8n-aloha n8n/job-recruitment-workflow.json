{
  "name": "ğŸ¢ æª€é¦™å±±æ±‚èŒæ‹›è˜å†…å®¹ç”Ÿæˆå™¨",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "cronExpression": "0 2 * * *"
            }
          ]
        }
      },
      "id": "job-data-trigger",
      "name": "èŒä½æ•°æ®æ”¶é›†è§¦å‘å™¨",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://api.indeed.com/ads/apisearch",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "publisher",
              "value": "{{ $vars.INDEED_PUBLISHER_ID }}"
            },
            {
              "name": "q",
              "value": ""
            },
            {
              "name": "l",
              "value": "Honolulu, HI"
            },
            {
              "name": "sort",
              "value": "date"
            },
            {
              "name": "radius",
              "value": "25"
            },
            {
              "name": "st",
              "value": "jobsite"
            },
            {
              "name": "jt",
              "value": "fulltime"
            },
            {
              "name": "start",
              "value": "0"
            },
            {
              "name": "limit",
              "value": "25"
            },
            {
              "name": "fromage",
              "value": "1"
            },
            {
              "name": "format",
              "value": "json"
            },
            {
              "name": "v",
              "value": "2"
            }
          ]
        }
      },
      "id": "indeed-jobs",
      "name": "IndeedèŒä½æŠ“å–",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 200]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://www.governmentjobs.com/careers/honolulu.rss",
        "options": {
          "headers": {
            "User-Agent": "JobBot/1.0"
          }
        }
      },
      "id": "government-jobs",
      "name": "æ”¿åºœèŒä½æŠ“å–",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "method": "GET",
        "url": "https://www.hawaiipacifichealth.org/careers/search-openings/api/jobs",
        "options": {
          "headers": {
            "User-Agent": "JobBot/1.0"
          }
        }
      },
      "id": "healthcare-jobs",
      "name": "åŒ»ç–—èŒä½æŠ“å–",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 400]
    },
    {
      "parameters": {
        "jsCode": "// èŒä½æ•°æ®å¤„ç†å’Œè´¨é‡è¯„åˆ†\nconst allJobs = [];\n\n// å¤„ç†Indeedæ•°æ®\nconst indeedData = $('indeed-jobs').first().json;\nif (indeedData && indeedData.results) {\n  for (const job of indeedData.results) {\n    allJobs.push({\n      source: 'Indeed',\n      title: job.jobtitle,\n      company: job.company,\n      location: job.formattedLocation,\n      snippet: job.snippet,\n      url: job.url,\n      posted_date: job.date,\n      salary: job.salary || 'Not specified',\n      job_type: 'Full-time',\n      raw_data: job\n    });\n  }\n}\n\n// å¤„ç†æ”¿åºœèŒä½æ•°æ®\nconst govData = $('government-jobs').first().json;\n// RSSè§£æé€»è¾‘...\n\n// å¤„ç†åŒ»ç–—èŒä½æ•°æ®\nconst healthData = $('healthcare-jobs').first().json;\n// APIæ•°æ®è§£æé€»è¾‘...\n\n// èŒä½è´¨é‡è¯„åˆ†ç®—æ³•\nfunction calculateJobScore(job) {\n  let score = 0;\n  \n  // è–ªèµ„é€æ˜åº¦ (30åˆ†)\n  if (job.salary && job.salary !== 'Not specified') {\n    score += 30;\n  }\n  \n  // å…¬å¸çŸ¥ååº¦ (25åˆ†)\n  const famousCompanies = [\n    'Hawaii Pacific Health', 'Hawaiian Airlines', 'Bank of Hawaii',\n    'University of Hawaii', 'City and County of Honolulu',\n    'State of Hawaii', 'Kaiser Permanente', 'Queen\\'s Health'\n  ];\n  \n  if (famousCompanies.some(company => \n    job.company.toLowerCase().includes(company.toLowerCase())\n  )) {\n    score += 25;\n  }\n  \n  // èŒä½æè¿°å®Œæ•´åº¦ (20åˆ†)\n  if (job.snippet && job.snippet.length > 100) {\n    score += 20;\n  }\n  \n  // åäººå‹å¥½å…³é”®è¯ (15åˆ†)\n  const chineseFriendlyKeywords = [\n    'bilingual', 'chinese', 'mandarin', 'cantonese', \n    'multicultural', 'diverse', 'international'\n  ];\n  \n  const jobText = (job.title + ' ' + job.snippet + ' ' + job.company).toLowerCase();\n  if (chineseFriendlyKeywords.some(keyword => jobText.includes(keyword))) {\n    score += 15;\n  }\n  \n  // å‘å¸ƒæ—¶æ•ˆæ€§ (10åˆ†)\n  const postedDate = new Date(job.posted_date);\n  const now = new Date();\n  const daysDiff = (now - postedDate) / (1000 * 60 * 60 * 24);\n  \n  if (daysDiff <= 1) {\n    score += 10;\n  } else if (daysDiff <= 3) {\n    score += 5;\n  }\n  \n  return score;\n}\n\n// ä¸ºæ‰€æœ‰èŒä½è®¡ç®—è¯„åˆ†\nfor (const job of allJobs) {\n  job.quality_score = calculateJobScore(job);\n  job.chinese_friendly = job.quality_score >= 15; // å¦‚æœæœ‰åäººå‹å¥½å…³é”®è¯\n}\n\n// æŒ‰è¯„åˆ†æ’åºï¼Œå–å‰20ä¸ª\nallJobs.sort((a, b) => b.quality_score - a.quality_score);\nconst topJobs = allJobs.slice(0, 20);\n\n// æŒ‰è¡Œä¸šåˆ†ç±»\nconst jobsByIndustry = {\n  healthcare: [],\n  government: [],\n  education: [],\n  tourism: [],\n  finance: [],\n  technology: [],\n  other: []\n};\n\nfor (const job of topJobs) {\n  const jobText = (job.title + ' ' + job.company).toLowerCase();\n  \n  if (jobText.includes('nurse') || jobText.includes('medical') || jobText.includes('health')) {\n    jobsByIndustry.healthcare.push(job);\n  } else if (jobText.includes('government') || jobText.includes('city') || jobText.includes('state')) {\n    jobsByIndustry.government.push(job);\n  } else if (jobText.includes('teacher') || jobText.includes('education') || jobText.includes('university')) {\n    jobsByIndustry.education.push(job);\n  } else if (jobText.includes('hotel') || jobText.includes('tourism') || jobText.includes('restaurant')) {\n    jobsByIndustry.tourism.push(job);\n  } else if (jobText.includes('bank') || jobText.includes('finance') || jobText.includes('accounting')) {\n    jobsByIndustry.finance.push(job);\n  } else if (jobText.includes('software') || jobText.includes('developer') || jobText.includes('IT')) {\n    jobsByIndustry.technology.push(job);\n  } else {\n    jobsByIndustry.other.push(job);\n  }\n}\n\nreturn [{\n  json: {\n    total_jobs: allJobs.length,\n    top_jobs: topJobs,\n    jobs_by_industry: jobsByIndustry,\n    collection_date: new Date().toISOString(),\n    next_update: new Date(Date.now() + 24*60*60*1000).toISOString()\n  }\n}];"
      },
      "id": "job-processor",
      "name": "èŒä½æ•°æ®å¤„ç†å™¨",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "operation": "insert",
        "table": "jobs",
        "columns": "title, company, location, description, salary, job_type, industry, source_url, quality_score, chinese_friendly, posted_date, created_at",
        "additionalFields": {
          "mode": "upsert",
          "upsertFields": ["title", "company"]
        }
      },
      "id": "save-jobs",
      "name": "ä¿å­˜èŒä½æ•°æ®",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [900, 300],
      "credentials": {
        "postgres": {
          "id": "postgres-jobs",
          "name": "Jobs PostgreSQL"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "cronExpression": "0 6 * * *"
            }
          ]
        }
      },
      "id": "content-trigger",
      "name": "å†…å®¹ç”Ÿæˆè§¦å‘å™¨",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [240, 600]
    },
    {
      "parameters": {
        "jsCode": "// æ ¹æ®æ˜ŸæœŸç¡®å®šå†…å®¹ç­–ç•¥\nconst today = new Date();\nconst dayOfWeek = today.getDay(); // 0=Sunday, 1=Monday, etc.\nconst dateStr = today.toISOString().split('T')[0];\n\n// å†…å®¹ç­–ç•¥æ˜ å°„\nconst contentStrategy = {\n  1: { // Monday\n    type: \"çƒ­é—¨èŒä½æ¨è\",\n    title_template: \"æœ¬å‘¨çƒ­æ‹› | æª€é¦™å±±æœ€æ–°é«˜è–ªèŒä½\",\n    focus: \"high_salary\",\n    job_count: 6,\n    target_audience: \"ä¸»åŠ¨æ±‚èŒè€…\"\n  },\n  2: { // Tuesday\n    type: \"è¡Œä¸šæ·±åº¦åˆ†æ\",\n    title_template: \"è¡Œä¸šæ´å¯Ÿ | {industry}å°±ä¸šå¸‚åœºè¶‹åŠ¿åˆ†æ\",\n    focus: \"industry_analysis\",\n    job_count: 4,\n    target_audience: \"èŒä¸šè§„åˆ’è€…\"\n  },\n  3: { // Wednesday\n    type: \"æ±‚èŒæŠ€å·§åˆ†äº«\",\n    title_template: \"æ±‚èŒå®å…¸ | é¢è¯•æŠ€å·§ä¸ç®€å†ä¼˜åŒ–\",\n    focus: \"job_tips\",\n    job_count: 3,\n    target_audience: \"æ±‚èŒæ–°æ‰‹\"\n  },\n  4: { // Thursday\n    type: \"é›‡ä¸»ä¸“è®¿\",\n    title_template: \"é›‡ä¸»è¯´ | {company}æ‹›è˜å†…å¹•å¤§æ­ç§˜\",\n    focus: \"employer_interview\",\n    job_count: 2,\n    target_audience: \"æ±‚èŒè€…å’ŒHR\"\n  },\n  5: { // Friday\n    type: \"è–ªèµ„ç¦åˆ©è§£æ\",\n    title_template: \"è–ªèµ„é€æ˜ | å¤å¨å¤·{industry}è–ªèµ„æ°´å¹³å¤§æ­ç§˜\",\n    focus: \"salary_analysis\",\n    job_count: 5,\n    target_audience: \"è–ªèµ„æ•æ„Ÿæ±‚èŒè€…\"\n  },\n  6: { // Saturday\n    type: \"èŒåœºç”Ÿæ´»åˆ†äº«\",\n    title_template: \"èŒåœºæ•…äº‹ | åœ¨å¤å¨å¤·{industry}å·¥ä½œæ˜¯ä»€ä¹ˆä½“éªŒ\",\n    focus: \"workplace_culture\",\n    job_count: 3,\n    target_audience: \"æ–°ç§»æ°‘å’Œå¤–æ¥æ±‚èŒè€…\"\n  },\n  0: { // Sunday\n    type: \"ä¸‹å‘¨é¢„å‘Š+äº’åŠ¨\",\n    title_template: \"ä¸‹å‘¨é¢„å‘Š | å³å°†å‘å¸ƒçš„æ‹›è˜ä¿¡æ¯\",\n    focus: \"preview_interaction\",\n    job_count: 8,\n    target_audience: \"å¿ å®è¯»è€…\"\n  }\n};\n\n// è·å–ä»Šæ—¥ç­–ç•¥\nconst todayStrategy = contentStrategy[dayOfWeek];\n\n// ç¡®å®šé‡ç‚¹è¡Œä¸š (è½®æ¢)\nconst industries = ['healthcare', 'government', 'education', 'tourism', 'finance', 'technology'];\nconst weekNumber = Math.floor(today.getTime() / (7 * 24 * 60 * 60 * 1000));\nconst focusIndustry = industries[weekNumber % industries.length];\n\nreturn [{\n  json: {\n    date: dateStr,\n    day_of_week: dayOfWeek,\n    content_type: todayStrategy.type,\n    title_template: todayStrategy.title_template,\n    focus: todayStrategy.focus,\n    job_count: todayStrategy.job_count,\n    target_audience: todayStrategy.target_audience,\n    focus_industry: focusIndustry,\n    publish_time: \"08:00\"\n  }\n}];"
      },
      "id": "content-strategy",
      "name": "å†…å®¹ç­–ç•¥è§„åˆ’",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 600]
    },
    {
      "parameters": {
        "operation": "select",
        "table": "jobs",
        "where": {
          "conditions": [
            {
              "column": "created_at",
              "operator": "greaterEqual",
              "value": "={{ new Date(Date.now() - 7*24*60*60*1000).toISOString() }}"
            },
            {
              "column": "quality_score",
              "operator": "greaterEqual",
              "value": 60
            }
          ]
        },
        "sort": {
          "values": [
            {
              "column": "quality_score",
              "direction": "DESC"
            }
          ]
        },
        "limit": "={{ $json.job_count }}"
      },
      "id": "get-featured-jobs",
      "name": "è·å–ç²¾é€‰èŒä½",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [680, 600],
      "credentials": {
        "postgres": {
          "id": "postgres-jobs",
          "name": "Jobs PostgreSQL"
        }
      }
    },
    {
      "parameters": {
        "resource": "chat",
        "operation": "message",
        "model": "gpt-4",
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "ä½ æ˜¯ä¸€ä½èµ„æ·±çš„å¤å¨å¤·å°±ä¸šé¡¾é—®ï¼Œä¸“é—¨ä¸ºåäººæ±‚èŒè€…æä¾›ä¸“ä¸šå»ºè®®ã€‚ä½ å¯¹æª€é¦™å±±çš„å°±ä¸šå¸‚åœºéå¸¸äº†è§£ï¼Œèƒ½å¤Ÿæä¾›å®ç”¨çš„æ±‚èŒå»ºè®®å’Œè¡Œä¸šæ´å¯Ÿã€‚\n\nè¯·åŸºäºæä¾›çš„èŒä½ä¿¡æ¯å’Œå†…å®¹ç­–ç•¥ï¼Œç”Ÿæˆä¸€ç¯‡é«˜è´¨é‡çš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ã€‚\n\nè¦æ±‚ï¼š\n1. æ ‡é¢˜å¸å¼•äººï¼Œçªå‡ºè–ªèµ„æˆ–æœºä¼šäº®ç‚¹\n2. å¼€å¤´ç®€æ´æœ‰åŠ›ï¼Œç›´å‡»æ±‚èŒè€…ç—›ç‚¹\n3. èŒä½ä¿¡æ¯ç»“æ„åŒ–å±•ç¤ºï¼Œæ˜“äºé˜…è¯»\n4. åŒ…å«å®ç”¨çš„ç”³è¯·å»ºè®®å’Œæ³¨æ„äº‹é¡¹\n5. èå…¥å¤å¨å¤·æœ¬åœ°æ–‡åŒ–å’Œç”Ÿæ´»å…ƒç´ \n6. è¯­è¨€ä¸“ä¸šä½†é€šä¿—æ˜“æ‡‚\n7. å­—æ•°æ§åˆ¶åœ¨1200-1800å­—\n8. åŒ…å«æ˜ç¡®çš„è¡ŒåŠ¨å·å¬\n9. é€‚å½“ä½¿ç”¨emojiå¢åŠ å¯è¯»æ€§\n\nè¾“å‡ºæ ¼å¼ï¼š\næ ‡é¢˜: [åŒ…å«emojiçš„å¸å¼•äººæ ‡é¢˜]\n\næ­£æ–‡: [å®Œæ•´æ–‡ç« å†…å®¹ï¼ŒåŒ…å«å°æ ‡é¢˜]"
            },
            {
              "role": "user",
              "content": "è¯·åŸºäºä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆæ–‡ç« ï¼š\n\nå†…å®¹ç±»å‹: {{ $('content-strategy').item.json.content_type }}\nç›®æ ‡è¯»è€…: {{ $('content-strategy').item.json.target_audience }}\né‡ç‚¹è¡Œä¸š: {{ $('content-strategy').item.json.focus_industry }}\næ ‡é¢˜æ¨¡æ¿: {{ $('content-strategy').item.json.title_template }}\n\nç²¾é€‰èŒä½ä¿¡æ¯:\n{{ JSON.stringify($('get-featured-jobs').all(), null, 2) }}\n\nè¯·ç”Ÿæˆä¸€ç¯‡ä¸“ä¸šä¸”å®ç”¨çš„æ±‚èŒæ‹›è˜æ–‡ç« ã€‚"
            }
          ]
        },
        "options": {
          "temperature": 0.7
        }
      },
      "id": "generate-content",
      "name": "AIå†…å®¹ç”Ÿæˆ",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.3,
      "position": [900, 600]
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "generate",
        "model": "dall-e-3",
        "prompt": "Create a professional job recruitment image for Hawaii/Honolulu. Style: Clean, modern, welcoming. Elements: {{ $('content-strategy').item.json.focus_industry }} industry elements, Hawaiian tropical background, professional people. Colors: Professional blue, warm orange, tropical green. Mood: Opportunity, growth, island lifestyle. Size: 1024x1024. No text overlay needed.",
        "options": {
          "quality": "standard",
          "size": "1024x1024",
          "style": "natural"
        }
      },
      "id": "generate-image",
      "name": "ç”Ÿæˆé…å›¾",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.3,
      "position": [900, 800]
    }
  ],
  "connections": {
    "èŒä½æ•°æ®æ”¶é›†è§¦å‘å™¨": {
      "main": [
        [
          {
            "node": "IndeedèŒä½æŠ“å–",
            "type": "main",
            "index": 0
          },
          {
            "node": "æ”¿åºœèŒä½æŠ“å–",
            "type": "main",
            "index": 0
          },
          {
            "node": "åŒ»ç–—èŒä½æŠ“å–",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IndeedèŒä½æŠ“å–": {
      "main": [
        [
          {
            "node": "èŒä½æ•°æ®å¤„ç†å™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ”¿åºœèŒä½æŠ“å–": {
      "main": [
        [
          {
            "node": "èŒä½æ•°æ®å¤„ç†å™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åŒ»ç–—èŒä½æŠ“å–": {
      "main": [
        [
          {
            "node": "èŒä½æ•°æ®å¤„ç†å™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èŒä½æ•°æ®å¤„ç†å™¨": {
      "main": [
        [
          {
            "node": "ä¿å­˜èŒä½æ•°æ®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å†…å®¹ç”Ÿæˆè§¦å‘å™¨": {
      "main": [
        [
          {
            "node": "å†…å®¹ç­–ç•¥è§„åˆ’",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å†…å®¹ç­–ç•¥è§„åˆ’": {
      "main": [
        [
          {
            "node": "è·å–ç²¾é€‰èŒä½",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·å–ç²¾é€‰èŒä½": {
      "main": [
        [
          {
            "node": "AIå†…å®¹ç”Ÿæˆ",
            "type": "main",
            "index": 0
          },
          {
            "node": "ç”Ÿæˆé…å›¾",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-01-04T16:00:00.000Z",
      "updatedAt": "2025-01-04T16:00:00.000Z",
      "id": "job-recruitment",
      "name": "æ±‚èŒæ‹›è˜"
    }
  ],
  "triggerCount": 2,
  "updatedAt": "2025-01-04T16:00:00.000Z",
  "versionId": "1"
}
