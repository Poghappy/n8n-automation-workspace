<!-- 优惠券 s-->
<div :class="['rightCon',{'show':currEditPart === 14}] " >
    <div class="modBox quanContainer ">
        <div class="title" v-if="currEditPart == 14">优惠券

            <el-popover popper-class="alertPop resetPop" :value="currEditPart === 14 && showResetPop" @show="showResetPop = true" v-if="checkHasIn('quan',14) && (!checkModelHasIn() || !checkCompInModel())">
                <div class="text_con">
                    <h4>确认重置该组件为默认样式？</h4>
                </div>
                <div class="alertBtn">
                    <a href="javascript:;" class="cancel" @click="showResetPop = false"><s></s><span>取消</span></a>
                    <a href="javascript:;" class="sure" @click="resetItem('quan')"><s></s><span>确定</span></a>
                </div>
                <span class="reset_btn" slot="reference" ><s></s>重置此项</span>
            </el-popover>
            <div class="reset_btn" v-else>
                <span class="btn"><s></s>重置此项</span>
                <div class="smPop">
                    <ul class="subtit_options">
                        <el-popover popper-class="alertPop resetPop maskPop" :value="currEditPart === 14 && showResetPop" @show="showResetPop = true" :visible-arrow="false" placement="top-end">
                            <div class="text_con">
                                <h4>确认恢复上次保存样式？</h4>
                            </div>
                            <div class="alertBtn">
                                <a href="javascript:;" class="cancel" @click="showResetPop = false"><s></s><span>取消</span></a>
                                <a href="javascript:;" class="sure" @click="resetItem('quan',1)"><s></s><span>确定</span></a>
                            </div>
                            <li class="text" slot="reference">恢复上次保存</li> 
                        </el-popover>
                        <el-popover popper-class="alertPop resetPop maskPop" :value="currEditPart === 14 && showResetPop" v-if="checkModelHasIn() && checkCompInModel()" @show="showResetPop = true" :visible-arrow="false" placement="top-end">
                            <div class="text_con">
                                <h4>确认将该组件恢复成模板样式？</h4>
                            </div>
                            <div class="alertBtn">
                                <a href="javascript:;" class="cancel" @click="showResetPop = false"><s></s><span>取消</span></a>
                                <a href="javascript:;" class="sure" @click="reChangeToModel('quan',14)"><s></s><span>确定</span></a>
                            </div>
                            <li class="text" slot="reference">重置模板样式</li> 
                        </el-popover>
                        <el-popover popper-class="alertPop resetPop maskPop" :value="currEditPart === 14 && showResetPop" @show="showResetPop = true" :visible-arrow="false" placement="top-end">
                            <div class="text_con">
                                <h4>确认将该组件恢复默认样式？</h4>
                            </div>
                            <div class="alertBtn">
                                <a href="javascript:;" class="cancel" @click="showResetPop = false"><s></s><span>取消</span></a>
                                <a href="javascript:;" class="sure" @click="resetItem('quan',0)"><s></s><span>确定</span></a>
                            </div>
                            <li class="text" slot="reference">重置默认样式</li> 
                        </el-popover>
                    </ul>
                </div>
            </div>

        </div>
        <div class="modInfoStyle">
            <div class="modstyleBox">
                <h2 class="stitle">组件设置</h2>
                <div class="sContent">
                    <!-- 边框背景 -->
                    <div class="broderBgBox flexItem ">
                        <div class="borderSet cPicker">
                            <label for="">边框</label>
                            <el-color-picker class="colorPicker" popper-class="borderColorPicker" @change="value => pickerChangeColor(value,'quanFormData.style.borderColor')" v-model="quanFormData.style.borderColor" @active-change="(value) => activeChangeColor(value,'quanFormData.style.borderColor')"></el-color-picker>
                        </div>

                        <!-- 需要修改 -->

                        <div class="colorPickerBox bgSet cPicker">
                            <label for="">背景</label>
                            <div class="colorPicker">
                                <div class="color_picker"  data-type="3">
                                    <div class="color bgimg" v-show="quanFormData.bgType == 'image' ">
                                        <div class="imgShow" v-if="quanFormData.bgType == 'image'"><img :src="quanFormData.style.bgImage" alt=""></div>
                                        <div class="imgShow" v-else :style="'background:'+ quanFormData.style.bgColor +';'"></div>
                                    </div>
                                    <el-color-picker v-model="quanFormData.style.bgColor" popper-class="borderColorPicker"  @active-change="value => {activeChangeColor(value,'quanFormData.style.bgColor'); quanFormData.bgType = 'color'}" @change="value => {resetColor('quanFormData.style.bgColor',value); quanFormData.bgType = 'color';}"></el-color-picker>
                                </div>
                            </div>
                            <a href="javascript:;" class="uploadBtn"> <input type="file" name="Filedata" accept=".png,.jpg,.jpeg" class="fileUp" id="quanBg_filedata" data-type="quanBg"></a>
                        </div>
                    </div>
                    <el-checkbox v-model="quanFormData.more.show" style="margin-top:10px; margin-bottom: -20px;">显示查看更多</el-checkbox>
                </div>
            </div>
            <div class="modstyleBox contentSetBox">
                <h2 class="stitle">优惠券设置 <span> *添加较多时可左右滑动</span></h2>
                <div class="sContent">
                    <div  class="btnsBox btn_item btnsSort sortBox" data-sort="quanFormData.quanList" data-drag=".item" data-filter="input">
                        <div class="option_item item" v-for="(btn,ind) in quanFormData.quanList" :key="'quanList_' + btn.id" :data-id="ind">
                            <s class="del_item" @click="delTopBtns('quanFormData',ind)"></s>
                            <s class="left_icon"><img src="/static/images/admin/order_icon.png" alt=""></s>
                            <div class="item_con flex_r">
                                <div class="img_up fn-clear">
                                    <div class="imgText">
                                        <div class="inpbox flexItem" >
                                            <el-input    placeholder="券名、描述等" :class="['iconName',{'hasBtn': !btn.label}]" v-model="btn.desc" ></el-input>
                                            <a href="javascript:;" class="add_label" @click="btn.label = true" v-if="!btn.label"><i class="el-icon-plus" ></i>标签</a>
                                        </div>
                                        <div :class="['inpbox linkbox linkChose']" v-if="!btn.label" @click="changeQuChose(ind)">
                                            <s>
                                                <img  src="/static/images/admin/link.png">
                                            </s>
                                            <input type="text" placeholder="请选择链接" class="iconLink" readonly :value="btn.quanInfo.name">
                                            <!-- <input type="text" placeholder="请选择链接" class="iconLink" readonly v-model="btn.linkInfo.linkText"> -->
                                        </div>
                                        <!-- <div :class="['inpbox linkbox linkChose']" v-if="!btn.label"  @click="changeLink('quanFormData.quanList.' + ind + '.link')">
                                            <s>
                                                <img v-if="btn.linkInfo.type == 4"  src="/static/images/admin/siteMemberPage/tel.png">
                                                <img v-else src="/static/images/admin/link.png">
                                            </s>
                                            <input type="text" placeholder="请选择链接" class="iconLink" readonly v-model="btn.linkInfo.linkText">
                                        </div> -->
                                        <div class="inpbox canDelInp " v-else>
                                            <el-input placeholder="标签" v-model="btn.labelText"></el-input>
                                            <a href="javascript:;" class="delBtn" @click="btn.label = false"></a>
                                        </div>
                                       
                                    </div>
                                </div>
                                <div :class="['inpbox linkbox linkChose fullLink']" v-if="btn.label" @click="changeQuChose(ind)">
                                    <s>
                                        <!-- <img v-if="btn.linkInfo.type == 4"  src="/static/images/admin/siteMemberPage/tel.png"> -->
                                        <img  src="/static/images/admin/link.png">
                                    </s>
                                    <input type="text" placeholder="请选择链接" class="iconLink" readonly :value="btn.quanInfo.name">
                                </div>
                                
                            </div>
                        </div>
                        <!-- @click="addNewTopBtns('quanFormData')"  -->
                        <a href="javascript:;" v-show="quanFormData.quanList.length < 8 || !quanFormData.quanList" class="add_more" @click="showQuanPop" ><s></s>添加优惠券<span>{{quanFormData.quanList.length > 0 ? ('(' + quanFormData.quanList.length + '/8)' ) : ''}}</span></a>
                    </div>
                </div>
            </div>

            <div class="modstyleBox contentSetBox">
                <h2 class="stitle">样式设置</h2>
                <div class="sContent">
                    <div class="style_item">
                        <div class="style_options">
                            <label for="">组件标题：</label>
                            <div class="inpbox">
                                <div class="imgShow hasUpBtn" v-if="quanFormData.title.type == 'image'" >
                                    <div class="flex_l">
                                        <img  alt="" :src="quanFormData.title.image">
                                        <span class="clearPath" @click="delTitlePath(1,'quanFormData.title.image')"></span>
                                    </div>
                                    <i class="btn_upload">
                                        <input type="file" name="Filedata" accept=".png,.jpg,.jpeg" class="fileUp"  id="quanTitle_filedata" data-type="quanTitle">
                                    </i>
                                </div>
                                <el-input placeholder="" class="hasUpBtn" v-model="quanFormData.title.text" v-else >
                                    <i slot="suffix" class="btn_upload">
                                        <input type="file" name="Filedata" accept=".png,.jpg,.jpeg" class="fileUp"  id="quanTitle_filedata" data-type="quanTitle">
                                    </i>
                                </el-input>
                            </div>
                        </div>
                        <div class="style_options">
                            <label for="">副标题：</label>
                            <div class="inpbox">
                                <el-input placeholder="请输入" v-model="quanFormData.stitle.text"></el-input>
                            </div>
                        </div>
                        <div class="style_options" v-if="quanFormData.title.type !== 'image'" >
                            <label for="">标题颜色：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.title.style.color')" v-model="quanFormData.title.style.color"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.title.style.color.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.title.style.color')">
                                <button @click="resetColor('quanFormData.title.style.color')">重置</button>
                            </div>
                            <!-- <div class="opciatyBox">
                                <input type="text" class="opciatySet" v-model="labelFormData.style.chose_sub_bgOpacity">
                                <span  class="single back">%</span>
                            </div> -->
                        </div>
                        <div class="style_options" >
                            <label for="">副标题：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.stitle.style.color')" v-model="quanFormData.stitle.style.color"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.stitle.style.color.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.stitle.style.color')">
                                <button @click="resetColor('quanFormData.stitle.style.color')">重置</button>
                            </div>
                        </div>
                    </div>

                    <div class="style_item marginTopSetBox">
                        <div class="style_options" >
                            <label for="">券颜色：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.bgColor')" v-model="quanFormData.quanstyle.bgColor"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.bgColor.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.chose_sub_bgColor')">
                                <button @click="resetColor('quanFormData.quanstyle.bgColor')">重置</button>
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">券边框：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.borderColor')" v-model="quanFormData.quanstyle.borderColor"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.borderColor.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.borderColor')">
                                <button @click="resetColor('quanFormData.quanstyle.borderColor')">重置</button>
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">金额/折扣：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.discount')" v-model="quanFormData.quanstyle.discount"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.discount.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.discount')">
                                <button  @click="resetColor('quanFormData.quanstyle.discount')">重置</button>
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">门槛：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.threshold')" v-model="quanFormData.quanstyle.threshold"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.threshold.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.threshold')">
                                <button @click="resetColor('quanFormData.quanstyle.threshold')">重置</button>
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">券名/描述：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.desc')" v-model="quanFormData.quanstyle.desc"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.desc.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.desc')">
                                <button @click="resetColor('quanFormData.quanstyle.bgColor')">重置</button>
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">标签文本：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.labColor')" v-model="quanFormData.quanstyle.labColor"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.labColor.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.labColor')">
                                <button @click="resetColor('quanFormData.quanstyle.desc')">重置</button>
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">标签背景：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.labBgColor')" v-model="quanFormData.quanstyle.labBgColor"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.labBgColor.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.labBgColor')">
                                <button @click="resetColor('quanFormData.quanstyle.labBgColor')">重置</button>
                            </div>
                        </div>
                        <div class="style_options" v-if="quanFormData.quanList.length == 1" >
                            <label for="">抢购按钮：</label>
                            <div class="colorpickerBox">
                                <el-color-picker class="colorpicker" @active-change="(value) => activeChangeColor(value,'quanFormData.quanstyle.btnBgColor')" v-model="quanFormData.quanstyle.btnBgColor"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="quanFormData.quanstyle.btnBgColor.replace('#','')" spellcheck="false" maxlength="6"  @change="changeColor('quanFormData.quanstyle.btnBgColor')">
                                <button @click="resetColor('quanFormData.quanstyle.btnBgColor')">重置</button>
                            </div>
                        </div>
                    </div>
                  
                </div>
            </div>

            <!-- 查看更多 滚动加载不显示-->
            <div class="modstyleBox contentSetBox" >
                <h2 class="stitle">查看更多</h2>
                <div class="sContent">
                    <div class="style_options" style="display: flex; align-items: center;">
                        <label for="">查看更多：</label>
                        <div class="radioBox split_options ">
                            <span :class="[{'onChose':quanFormData.more.show}]" @click="quanFormData.more.show = true"><s></s>显示</span>
                            <span :class="[{'onChose':!quanFormData.more.show}]" @click="quanFormData.more.show = false"><s></s>不显示</span>
                        </div>
                    </div>
                    <div class="item style_item " v-if=" quanFormData && quanFormData.more && quanFormData.more.show">
                        <div class="style_options" >
                            <label for="">显示文本：</label>
                            <div class="textSetBox">
                                <el-input placeholder="请输入文本" maxlength="8" show-word-limit v-model="quanFormData.more.text"></el-input>
                            </div>
                            <span :class="['showArr',{'noColor':!quanFormData.more.arr}] " @click="quanFormData.more.arr = !quanFormData.more.arr"></span>
                        </div>
                        <div class="style_options" @click="changeLink('quanFormData.more.link')">
                            <label for="">链接：</label>
                            <div class="inpbox linkbox">
                                <s><img src="/static/images/admin/link.png" alt=""></s>
                                <input type="text" placeholder="请选择链接" readonly class="iconLink" v-model="quanFormData.more.link"  :value="quanFormData.more.linkInfo && quanFormData.more.linkInfo.linkText ? quanFormData.more.linkInfo.linkText : quanFormData.more.link ">
                            </div>
                        </div>

                        <div class="style_options" >
                            <label for="">文本颜色：</label>
                            <div class="colorpickerBox">
                                <el-color-picker  class="colorpicker" v-model="quanFormData.more.style.color" @active-change="(value) => activeChangeColor(value,'quanFormData.more.style.color')"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="(quanFormData.more.style.color).replace('#','')" @change="changeColor('quanFormData.more.style.color')" maxlength="6">
                                <button @click="resetColor('quanFormData.more.style.color')">重置</button>
                            </div>
                        </div>
                        <div class="style_options" >
                            <label for="">箭头颜色：</label>
                            <div :class="['colorpickerBox',{'noColor':!quanFormData.more.style.arrColor}]">
                                <el-color-picker  class="colorpicker" v-model="quanFormData.more.style.arrColor" @active-change="(value) => activeChangeColor(value,'quanFormData.more.style.arrColor')"></el-color-picker>
                            </div>
                            <div :class="['colorShowBox']">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="(quanFormData.more.style.arrColor).replace('#','')" @change="changeColor('quanFormData.more.style.arrColor')" maxlength="6">
                                <button @click="resetColor('quanFormData.more.style.arrColor')">重置</button>
                            </div>
                        </div>
                        <div class="style_options" >
                            <label for="">按钮颜色：</label>
                            <div class="colorpickerBox">
                                <el-color-picker  class="colorpicker" v-model="quanFormData.more.style.btnBg" @active-change="(value) => activeChangeColor(value,'quanFormData.more.style.btnBg')"></el-color-picker>
                            </div>
                            <div class="colorShowBox">
                                <span class="single">#</span>
                                <input type="text" class="colorShow" :value="(quanFormData.more.style.btnBg).replace('#','')" @change="changeColor('quanFormData.more.style.btnBg')" maxlength="6">
                                <button @click="resetColor('quanFormData.more.style.btnBg')">重置</button>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
            </div>

            <!-- 间距设置 -->
            <div class="marginSetBox modstyleBox" v-if=" quanFormData && quanFormData.style">
                <h2 class="stitle"  @click="showMarginSet = !showMarginSet">间距设置</h2>
                <el-collapse-transition>
                    <div class="style_item">
                        <div class="sContent">
                            <div class="style_options" >
                                <label for="">圆角值：</label>
                                <el-slider :min="0" :max="40" v-model="quanFormData.style.borderRadius" tooltip-class="tooltip_show"  :show-tooltip="showTooltip"></el-slider>
                                <div class="colorShowBox" style="background-color: #E8EAEC;">
                                    <input type="number" class="colorShow" @input="checkMax(0,40,'quanFormData.style.borderRadius')" :value="quanFormData.style.borderRadius"  >
                                    <span class="single back">px</span>
                                </div>
                            </div>
                            <div class="style_options">
                                <label for="">上间距：</label>
                                <el-slider  :min="0" :max="40"  v-model="quanFormData.style.marginTop" tooltip-class="tooltip_show"  :show-tooltip="showTooltip"></el-slider>
                                <div class="colorShowBox" style="background-color: #E8EAEC;">
                                    <input type="number" class="colorShow"  @input="checkMax(0,40,'quanFormData.style.marginTop')" :value="quanFormData.style.marginTop" >
                                    <span class="single back">px</span>
                                </div>
                            </div>
                            

                            <div class="style_options">
                                <label for="">左右间距：</label>
                                <el-slider  :min="0" :max="40"  v-model="quanFormData.style.marginLeft" tooltip-class="tooltip_show"  :show-tooltip="showTooltip"></el-slider>
                                <div class="colorShowBox" style="background-color: #E8EAEC;">
                                    <input type="number" class="colorShow"  @input="checkMax(0,40,'quanFormData.style.marginLeft')" :value="quanFormData.style.marginLeft" >
                                    <span class="single back">px</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </el-collapse-transition>
            </div>
        </div>
    </div>

</div>
<!-- 优惠券 e-->