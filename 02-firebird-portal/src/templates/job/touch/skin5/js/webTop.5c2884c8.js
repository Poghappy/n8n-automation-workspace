import{K as e,o as t,B as a,E as s,F as i,a as l,D as n,G as o,w as r,d as c,t as d,e as p,I as h,ab as u,f as m,i as f,b as g,ad as b,a3 as y,a7 as k,x as _,z as $,H as C,C as D,R as w,T as F,g as S}from"./index-160de7c6.js";import{_ as v}from"./job.cbea1f04.js";import{r as x}from"./uni-app.es.bf317389.js";const q=v({components:{node:v({name:"node",props:{nodeArr:{type:Array,default:[]}}},[["render",function(g,b,y,k,_,$){const C=h,D=u,w=e("node",!0),F=m,S=f;return t(!0),a(i,null,s(y.nodeArr,((e,s)=>(t(),a(i,{key:s},["image"==e.name?(t(),l(C,{key:0,style:n(e.style),src:e.src,mode:"widthFix",onClick:o((t=>e.fn()||""),["stop"])},null,8,["style","src","onClick"])):"video"==e.name?(t(),l(D,{key:1,style:n(e.style),src:e.src,poster:e.poster,"object-fit":"cover",onClick:o((t=>e.fn()||""),["stop"])},null,8,["style","src","poster","onClick"])):"text"==e.name?(t(),l(F,{key:2,style:n(e.style),onClick:o((t=>e.fn()||""),["stop"])},{default:r((()=>[c(d(e.text)+" ",1),e.children?(t(),l(w,{key:0,nodeArr:e.children},null,8,["nodeArr"])):p("",!0)])),_:2},1032,["style","onClick"])):"view"==e.name?(t(),l(S,{key:3,style:n(e.style),onClick:o((t=>e.fn()||""),["stop"])},{default:r((()=>[c(d(e.text)+" ",1),e.children?(t(),l(w,{key:0,nodeArr:e.children},null,8,["nodeArr"])):p("",!0)])),_:2},1032,["style","onClick"])):p("",!0)],64)))),128)}]])},props:{nodeSet:{type:Array,default:[]}}},[["render",function(a,s,i,n,o,c){const d=e("node"),p=f;return t(),l(p,{class:"selfNode"},{default:r((()=>[g(d,{nodeArr:i.nodeSet},null,8,["nodeArr"])])),_:1})}]]);let V=S();const B=v({props:{title:{type:String,default:"标题"},module:{type:String},backFail:{type:String,default:""},searchBar:{type:Array,default:[]},searchState:{type:Boolean,default:!1},index:{type:Boolean,default:!1},appShare:{type:Object,default:{description:"",litpic:"",title:""}},backFail:{type:String,default:""},hideHead:{type:Boolean,default:!1},shareInfo:{type:Object,default:{}},needPoster:{type:Boolean,default:!1}},data:()=>({appConfig:"",masterDomain:V.globalData.masterDomain,imgVersion:V.globalData.imgVersion,siteConfig:V.globalData.siteConfig,imgError:V.globalData.imgError,webdyMini:V.globalData.webdyMini,searchSrc:"",searchText:"",searchStyle:"",moduleData:[],msgData:{},popb:!1,popconb:!1,shareb:!1,shareconb:!1,qrb:!1,qrconb:!1,wxshareb:!1,shareItem:[{id:1,title:"生成海报",src:`${V.globalData.imgPath}/article/poster.png?v=${V.globalData.imgVersion}`,fn:"",need:!1},{id:2,title:"微信好友",src:`${V.globalData.imgPath}/article/wechat.png?v=${V.globalData.imgVersion}`,fn:"",need:!0},{id:3,title:"朋友圈",src:`${V.globalData.imgPath}/article/friends.png?v=${V.globalData.imgVersion}`,fn:"",need:!0},{id:4,title:"微博",src:`${V.globalData.imgPath}/article/weibo.png?v=${V.globalData.imgVersion}`,fn:"",need:!0},{id:5,title:"QQ好友",src:`${V.globalData.imgPath}/article/QQ.png?v=${V.globalData.imgVersion}`,fn:"",need:!0},{id:6,title:"QQ空间",src:`${V.globalData.imgPath}/article/QQspace.png?v=${V.globalData.imgVersion}`,fn:"",need:!0}],shareOperate:[{id:7,title:"复制链接",src:`${V.globalData.imgPath}/article/link.png?v=${V.globalData.imgVersion}`,fn:"",need:!0},{id:8,title:"当面扫码",src:`${V.globalData.imgPath}/article/2Dcode.png?v=${V.globalData.imgVersion}`,fn:"",need:!0}],shareLink:"",appBoolean:!1,copySuccessb:!1,safarib:!1}),mounted(){let e=this;V.watchG("siteConfig",(function(t){e.siteConfig=t})),V.watchG("appConfig",(function(t){e.appConfig=t})),this.getModuleNav(),this.massageFn();let t=this.shareInfo.url?this.shareInfo.url:window.location.href,a=V.globalData.userid?"fromShare="+V.globalData.userid:"";this.shareLink=`${t}${t.includes("?")?"&":"?"}${a}`,this.appBoolean=window.appBoolean,document.querySelector('link[rel="canonical"]').setAttribute("href",e.shareLink);let s=navigator.userAgent.toLowerCase(),i=-1!==s.indexOf("safari")&&-1===s.indexOf("browser")&&-1===s.indexOf("android");for(let o=0;o<this.shareItem.length;o++){switch(this.shareItem[o].id){case 1:this.shareItem[o].need=this.needPoster,this.shareItem[o].fn=()=>{this.$emit("poster",1),this.shareFn(0)},"info"==this.module&&location.href.includes("/detail")&&(this.shareItem[o].need=!0);break;case 2:case 3:this.shareItem[o].fn=()=>{this.appBoolean?l("weixin"):V.globalData.webWeixin?(this.wxshareb=!0,e.shareFn(0)):n()};break;case 4:this.shareItem[o].fn=()=>{this.appBoolean?l("weibo"):this.linkTo(`http://service.weibo.com/share/share.php?url=${encodeURIComponent(this.shareLink)}`)};break;case 5:this.shareItem[o].fn=()=>{this.appBoolean?l("qq"):V.globalData.webWeixin?(this.wxshareb=!0,e.shareFn(0)):n()};break;case 6:this.shareItem[o].fn=()=>{this.appBoolean?l("qzone"):this.linkTo(`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${encodeURIComponent(this.shareLink)}`)}}}for(let o=0;o<this.shareOperate.length;o++){let e=this.shareOperate[o].id;switch(this.shareOperate[o],e){case 7:this.shareOperate[o].fn=()=>{b({data:this.shareLink})};break;case 8:this.shareOperate[o].fn=()=>{this.qrCodeFn(1)}}}function l(t){window.setupWebViewJavascriptBridge((function(a){a.callHandler("appShare",{platform:t,url:e.shareLink,title:e.appShare.title,imageUrl:e.appShare.litpic,summary:e.appShare.description},(function(e){JSON.parse(e)}))}))}function n(){navigator.share?(e.shareFn(0),i?e.safarib=!0:navigator.share({url:document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:e.shareLink,title:e.appShare.title||e.title,text:e.appShare.title||e.title})):b({data:`${e.appShare.title||e.title} ${e.shareLink}`,success:t=>{e.copySuccessb=!0}}),e.shareconb=!1}},methods:{backFn(){if(this.siteConfig==this.module)return!1;if(this.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("goBack",{},(function(e){}))})),!1;{let e=y();e&&e.length>1?k({delta:1}):this.index?location.href=this.masterDomain:location.href=this.backFail||`/${this.module}/index`}},linkTo(e){e&&(e.indexOf("http")>-1?location.href=e:_({url:e}))},getModuleNav(){this.$ajax.post({url:"include/ajax.php?",data:{service:"siteConfig",action:"siteModule",type:1}}).then((e=>{100==e.data.state&&(this.moduleData=e.data.info)}))},popFn(e){e?(this.popb=!0,setTimeout((e=>{this.popconb=!0}),0),this.$emit("popState",!0)):(document.body.style.overflow="auto",this.popconb=!1,setTimeout((e=>{this.popb=!1}),220),this.shareb||this.$emit("popState",!1))},shareFn(e){1==e?(this.shareb=!0,this.popFn(0),setTimeout((e=>{this.shareconb=!0}),0),document.body.style.overflow="hidden"):(this.shareconb=!1,this.copySuccessb=!1,setTimeout((e=>{this.shareb=!1}),200),document.body.style.overflow="auto",this.$emit("popState",!1))},qrCodeFn(e){0==e?(this.qrconb=!1,setTimeout((e=>{this.qrb=!1}),220)):(this.qrb=!0,setTimeout((e=>{this.qrconb=!0}),0))},massageFn(){this.$ajax.post({url:V.encodeUrl("include/ajax.php?"),data:{service:"member",action:"message",type:"tongji",im:1}}).then((e=>{100==e.data.state&&(this.msgData=e.data.info.pageInfo)}))}},watch:{appShare:{deep:!0,handler(e,t){document.querySelector('meta[property="og:title"]').setAttribute("content",e.title||_this.title),document.querySelector('meta[property="og:description"]').setAttribute("content",e.description||""),e.litpic&&document.querySelector('meta[property="og:image"]').setAttribute("content",e.litpic),V.webWeixin||$({title:e.title||_this.title})}},safarib(e,t){document.body.style.overflow=e?"hidden":"auto"}}},[["render",function(e,u,b,y,k,_){const $=h,S=f,v=x(C("selfDom"),q),V=m;return t(),l(S,{class:"component"},{default:r((()=>[g($,{src:b.appShare.litpic||k.imgError,style:{display:"none"}},null,8,["src"]),b.hideHead?p("",!0):(t(),l(S,{key:0,class:"header"},{default:r((()=>[g(S,{class:"h-back",onClick:_.backFn,style:n(k.siteConfig.defaultindex==b.module?"opacity:0":"")},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/header_back.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick","style"]),g(S,{class:"h-text"},{default:r((()=>[c(d(b.title),1)])),_:1}),g(S,{class:"h-order",onClick:u[0]||(u[0]=e=>_.popFn(1))},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/header_la.png?v=${k.imgVersion}`,mode:"aspectFit",class:"ho-more"},null,8,["src"]),k.msgData.total>0?(t(),l(S,{key:0,class:"ho-message"},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/dot.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0)])),_:1}),b.searchBar.length>0?(t(),l(v,{key:0,class:D(["selfSearch",{show:b.searchState}]),nodeSet:b.searchBar},null,8,["class","nodeSet"])):p("",!0)])),_:1})),w(g(S,{class:"order",onClick:u[9]||(u[9]=e=>_.popFn(0))},{default:r((()=>[g(S,{class:"o-content",style:n(`transform:translateY(${k.popconb?"0%":"-100%"});padding:${k.appBoolean?"108rpx":"48rpx"} 0rpx 40rpx`),onClick:u[8]||(u[8]=o((()=>{}),["stop"]))},{default:r((()=>[g(S,{class:"oc-title"},{default:r((()=>[g(V,null,{default:r((()=>[c("全局导航")])),_:1}),g($,{src:`${k.masterDomain}/static/images/close_2.png?v=${k.imgVersion}`,mode:"aspectFit",onClick:u[1]||(u[1]=e=>_.popFn(0))},null,8,["src"])])),_:1}),g(S,{class:"oc-all"},{default:r((()=>[g(S,{class:"item",onClick:u[2]||(u[2]=e=>_.linkTo(k.masterDomain))},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/top_fast1.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(V,null,{default:r((()=>[c("首页")])),_:1})])),_:1}),g(S,{class:"item",onClick:u[3]||(u[3]=e=>_.linkTo(`${k.appConfig.cfg_user_index}/message.html`))},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/top_fast2.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(V,null,{default:r((()=>[c("消息")])),_:1}),k.msgData.total>0?(t(),l(S,{key:0,class:"mgs"},{default:r((()=>[c(d(k.msgData.total),1)])),_:1})):p("",!0)])),_:1}),g(S,{class:"item",onClick:u[4]||(u[4]=e=>_.linkTo(`${k.appConfig.cfg_user_index}?appFullScreen`))},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/top_fast3.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(V,null,{default:r((()=>[c("会员中心")])),_:1})])),_:1}),g(S,{class:"item",onClick:u[5]||(u[5]=e=>_.shareFn(1))},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/top_fast5.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(V,null,{default:r((()=>[c("分享")])),_:1})])),_:1})])),_:1}),g(S,{class:"oc-nav",onTouchmove:u[6]||(u[6]=o((()=>{}),["stop"])),onTouch:u[7]||(u[7]=o((()=>{}),["stop"]))},{default:r((()=>[(t(!0),a(i,null,s(k.moduleData,((e,a)=>(t(),l(S,{class:"item",key:a,onClick:t=>_.linkTo(e.url)},{default:r((()=>[g($,{src:e.icon,mode:"aspectFit"},null,8,["src"]),g(V,null,{default:r((()=>[c(d(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),g(S,{class:"oc-bg"}),g(S,{class:"oc-bar"})])),_:1},8,["style"])])),_:1},512),[[F,k.popb]]),k.shareb?(t(),l(S,{key:1,class:"sharePop",onClick:u[13]||(u[13]=e=>_.shareFn(0))},{default:r((()=>[g(S,{class:"s-content",style:n(`transform:translateY(${k.shareconb?"0%":"100%"})`),onClick:u[10]||(u[10]=o((()=>{}),["stop"]))},{default:r((()=>[g(S,{class:"sc-title"},{default:r((()=>[c("分享")])),_:1}),k.webdyMini?p("",!0):(t(),l(S,{key:0,class:"sc-way"},{default:r((()=>[(t(!0),a(i,null,s(k.shareItem,((e,s)=>(t(),a(i,{key:s},[e.need?(t(),l(S,{key:0,class:"item",onClick:e.fn},{default:r((()=>[g(S,null,{default:r((()=>[g($,{src:e.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),g(V,null,{default:r((()=>[c(d(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):p("",!0)],64)))),128))])),_:1})),g(S,{class:"sc-operate"},{default:r((()=>[(t(!0),a(i,null,s(k.shareOperate,((e,a)=>(t(),l(S,{key:a,class:"item",onClick:e.fn},{default:r((()=>[g(S,null,{default:r((()=>[g($,{src:e.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),g(V,null,{default:r((()=>[c(d(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"]),k.copySuccessb?(t(),l(S,{key:0,class:"c-warn",onClick:u[12]||(u[12]=o((()=>{}),["stop"]))},{default:r((()=>[g(S,{class:"title"},{default:r((()=>[c("已复制链接")])),_:1}),g(S,{class:"tip"},{default:r((()=>[c("快去粘贴给好友吧")])),_:1}),g(S,{class:"btn",onClick:u[11]||(u[11]=e=>_.shareFn(0))},{default:r((()=>[c("我知道了")])),_:1})])),_:1})):p("",!0)])),_:1})):p("",!0),k.qrb?(t(),l(S,{key:2,class:"qrCode",onClick:u[16]||(u[16]=e=>_.qrCodeFn(0))},{default:r((()=>[g(S,{class:"q-content",style:n(`transform:translateY(${k.qrconb?"0%":"100%"})`),onClick:u[15]||(u[15]=o((()=>{}),["stop"]))},{default:r((()=>[g(S,{class:"qc-img"},{default:r((()=>[g($,{src:`${k.masterDomain}/include/qrcode.php?data=${k.shareLink}`,mode:"aspectFit"},null,8,["src"]),g(V,null,{default:r((()=>[c("让朋友扫一扫访问当前网页")])),_:1})])),_:1}),g(S,{class:"qc-btn",onClick:u[14]||(u[14]=o((e=>_.qrCodeFn(0)),["stop"]))},{default:r((()=>[c("取消")])),_:1})])),_:1},8,["style"])])),_:1})):p("",!0),k.wxshareb?(t(),l(S,{key:3,class:"wxShare",onClick:u[17]||(u[17]=e=>k.wxshareb=!1)},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/HN_Public_sharezhi.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0),k.safarib?(t(),l(S,{key:4,class:"safari",onClick:u[18]||(u[18]=e=>k.safarib=!1)},{default:r((()=>[g($,{src:`${k.masterDomain}/static/images/safariShare.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-8f4907b6"]]);export{B as _};
