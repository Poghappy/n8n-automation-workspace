import{o as a,a as e,w as t,b as o,d as n,B as l,E as s,F as i,t as c,D as p,G as d,e as r,g as u,f as m,I as f,i as h,J as b,a6 as _,H as C,C as g}from"./index-160de7c6.js";import{_ as F}from"./popWarn.63e9674a.js";import{r as k}from"./uni-app.es.bf317389.js";import{_ as x}from"./job.cbea1f04.js";var y,j,w=u();const P=x({name:"complain",props:{showPop:{type:Boolean,default:!1},complainList:{type:Array,default:["理由1","理由2"]},infoDetail:{type:Object,default:{service:"member",template:"complain",module:"article",dopost:"detail",aid:-1}}},components:{popWarn:F},data:()=>({imgPath:w.globalData.imgStaticPath,imgVersion:w.globalData.imgVersion,phoneArea:[],activeIndex:0,phone:"",description:"",areaCode:86,complainb:!1,complainConb:!1,phoneb:!1,phoneConb:!1,warningb:!1,info:"",ajaxb:!1}),mounted(){y=this},methods:{warnFn(a=2e3){y.warningb=!0,clearTimeout(j),j=setTimeout((a=>{y.warningb=!1}),a)},popFn(a){a?(y.complainb=!0,setTimeout((a=>{y.complainConb=!0}),0)):(y.complainConb=!1,setTimeout((a=>{y.complainb=!1}),220),y.$emit("hideFn",!1))},secPopFn(a){a?(y.phoneb=!0,setTimeout((a=>{y.phoneConb=!0}),0)):(y.phoneConb=!1,setTimeout((a=>{y.phoneb=!1}),220))},phoneAreaData(){if(0==y.phoneArea.length){let a={service:"siteConfig",action:"internationalPhoneSection"};y.$ajax.post({url:"include/ajax.php?",data:a}).then((a=>{100==a.data.state&&(y.phoneArea=a.data.info)}))}},submitFn(){let a=y.infoDetail;if(a.areaCode=y.areaCode,a.type=y.complainList[y.activeIndex],a.desc=y.description,a.phone=y.phone,"86"==y.areaCode){/^[1-9]\d{10}$/.test(y.phone)?y.ajaxb||(y.ajaxb=!0,y.$ajax.post({url:w.encodeUrl("include/ajax.php?"),data:a}).then((a=>{100==a.data.state&&setTimeout((a=>{y.popFn(0)}),2200),y.info=a.data.info,y.ajaxb=!1}))):y.info="请检查手机号格式"}else""==y.phone?y.info="手机号不能为空":y.ajaxb||(y.ajaxb=!0,y.$ajax.post({url:w.encodeUrl("include/ajax.php?"),data:a}).then((a=>{100==a.data.state&&setTimeout((a=>{y.popFn(0)}),2200),y.info=a.data.info,y.ajaxb=!1})))}},watch:{info(a,e){""!=a&&(y.warnFn(),setTimeout((a=>{y.info=""}),2200))},showPop(a,e){a&&y.popFn(1)}}},[["render",function(u,x,y,j,w,P){const v=m,$=f,V=h,T=b,A=_,D=k(C("popWarn"),F);return w.complainb?(a(),e(V,{key:0,class:"complain",onClick:x[9]||(x[9]=a=>P.popFn(0))},{default:t((()=>[o(V,{class:"c-content",style:p(`transform:translateY(${w.complainConb?"0%":"100%"})`),onClick:x[4]||(x[4]=d((()=>{}),["stop"]))},{default:t((()=>[o(V,{class:"cc-title"},{default:t((()=>[o(v,null,{default:t((()=>[n("举报内容")])),_:1}),o($,{src:`${w.imgPath}/close_2.png?v=${w.imgVersion}`,mode:"aspectFit",onClick:x[0]||(x[0]=a=>P.popFn(0))},null,8,["src"])])),_:1}),o(V,{class:"cc-list"},{default:t((()=>[o(V,{class:"title"},{default:t((()=>[n("选择举报理由")])),_:1}),o(V,{class:"list"},{default:t((()=>[(a(!0),l(i,null,s(y.complainList,((o,l)=>(a(),e(V,{class:g(["item",{active:w.activeIndex==l}]),key:l,onClick:a=>w.activeIndex=l},{default:t((()=>[n(c(o),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),o(V,{class:"cc-phone"},{default:t((()=>[o(V,{class:"title"},{default:t((()=>[n("联系方式")])),_:1}),o(V,{class:"phone"},{default:t((()=>[o(V,{class:"select",onClick:x[1]||(x[1]=a=>P.secPopFn(1))},{default:t((()=>[o(v,null,{default:t((()=>[n("+"+c(w.areaCode),1)])),_:1}),o($,{src:`${w.imgPath}/d_arr.png?v=${w.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),o(T,{type:"tel",placeholder:"输入手机号","placeholder-style":"opacity:.3;font-wei:500",modelValue:w.phone,"onUpdate:modelValue":x[2]||(x[2]=a=>w.phone=a)},null,8,["modelValue"])])),_:1})])),_:1}),o(V,{class:"cc-description"},{default:t((()=>[o(V,{class:"title"},{default:t((()=>[n("举报描述")])),_:1}),o(V,{class:"input"},{default:t((()=>[o(A,{placeholder:"可简述理由，以便快速处理举报","placeholder-style":"opacity:.3",maxlength:"100","auto-height":"",modelValue:w.description,"onUpdate:modelValue":x[3]||(x[3]=a=>w.description=a)},null,8,["modelValue"]),o(V,{class:"number"},{default:t((()=>[n(c(w.description.length)+"/100",1)])),_:1})])),_:1})])),_:1}),o(V,{class:"cc-btn",style:p("background:"+(w.phone?"linear-gradient(-90deg, #F6252F 0%, #FF4621 100%);":"#FFBABA")),onClick:P.submitFn},{default:t((()=>[n("提交")])),_:1},8,["style","onClick"])])),_:1},8,["style"]),w.phoneb?(a(),e(V,{key:0,class:"c-pop",onClick:x[7]||(x[7]=d((a=>P.secPopFn(0)),["stop"]))},{default:t((()=>[o(V,{class:"cp-content",style:p(`transform:translateY(${w.phoneConb?"0%":"100%"})`),onClick:x[6]||(x[6]=d((()=>{}),["stop"]))},{default:t((()=>[o(V,{class:"title"},{default:t((()=>[o(V,{class:"back",onClick:x[5]||(x[5]=a=>P.secPopFn(0))},{default:t((()=>[n("返回")])),_:1}),o(v,null,{default:t((()=>[n("选择地区")])),_:1})])),_:1}),o(V,{class:"list"},{default:t((()=>[(a(!0),l(i,null,s(w.phoneArea,((l,s)=>(a(),e(V,{class:"item",key:s,onClick:a=>{w.areaCode=l.code,P.secPopFn(0)}},{default:t((()=>[o(V,{class:"area"},{default:t((()=>[n(c(l.name),1)])),_:2},1024),o(V,{class:"num"},{default:t((()=>[n("+"+c(l.code),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):r("",!0),o(D,{info:w.info,warningb:w.warningb,onClick:x[8]||(x[8]=d((()=>{}),["stop"]))},null,8,["info","warningb"])])),_:1})):r("",!0)}],["__scopeId","data-v-ff8601ed"]]);export{P as _};
