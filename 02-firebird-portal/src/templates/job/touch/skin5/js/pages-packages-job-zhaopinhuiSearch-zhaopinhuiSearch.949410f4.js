import{m as a,o as t,B as e,b as s,w as l,C as i,F as o,g as n,i as d,a as r,d as c,t as p,D as f,e as y,E as m,G as u,H as h,I as g,J as _,K as x,f as k,Q as b}from"./index-160de7c6.js";import{_ as w}from"./page-meta.97cc335b.js";import{r as C}from"./uni-app.es.bf317389.js";import{_ as I}from"./modelCon.33fae677.js";import{_ as D}from"./toast.b19c5451.js";import{h as T}from"./public_header.cca239c9.js";import{b as P}from"./bottom_pop.36ddb1af.js";import{_ as j,j as F}from"./job.cbea1f04.js";const S=n();const v=j({data:()=>({uniPlatform:"",isApp:!1,type:1,keyword:"",navTop:S.globalData.navTop,masterDomain:S.globalData.masterDomain,imgPath:S.globalData.masterDomain+"/static/images/miniprograme/job",imgVersion:"?v="+S.globalData.imgVersion,showPop:!1,fid:"",filterType:"addr",searchData:"",filterPop:!1,flterCon:!1,pageSize:10,page:"",filterAddr:"",salaryIndex:0,min_salary:"",max_salary:"",addrList:[],addrText:"",salaryText:"薪资范围",addrIndex:0,siteCityInfo:{},salary:[{title:"4000以下",maxSalary:4e3,minSalary:""},{title:"4000-6000",maxSalary:6e3,minSalary:4e3},{title:"6000-8000",maxSalary:8e3,minSalary:6e3},{title:"8000-10000",maxSalary:1e4,minSalary:8e3},{title:"10000-15000",maxSalary:1e4,minSalary:15e3},{title:"15000以上",maxSalary:"",minSalary:15e3}],bottomType:"company",showData:{},showModal:!1,modelInfo:{tipType:"",icon:"",title:{text:"",style:""},tip:[{text:"",style:""}],cancel:{show:!0,text:"取消",style:"",clickFun:function(){}},confirm:{show:!0,text:"确定",style:"",clickFun:function(){}}}}),components:{headerTop:T,bottomPop:P},onLoad(t){const e=this;e.pages=S.pageFn(F),t.keyword&&(e.keyword=t.keyword),t.type&&(e.type=t.type),t.fid&&(e.fid=t.fid);const s=a("cityInfo");e.siteCityInfo=s||{},e.getAddrListArr(),e.listFn(1)},onPageScroll({scrollTop:a}){this.scrollTop=a},onShareAppMessage(){if(S.globalData.cityInfo.name)var a=S.globalData.cityInfo.name;else a="";var t=this.shareDetail.title;if(t=t.replace("$city",a),S.globalData.userid)var e="fromShare="+S.globalData.userid;else e="";return{title:t,description:S.globalData.siteConfig?S.globalData.siteConfig.description:"",path:"/pages/packages/job/zhaopinhuiDetail/zhaopinhuiDetail?id="+this.detaildata.id+(e?"&"+e:"")}},onShareTimeline(){return{title:this.shareDetail.title,description:this.shareDetail.description}},methods:{listFn(a,t=!1){const e=this;let s="";(e.addrList[e.addrIndex]&&e.addrList[e.addrIndex].cityid&&e.addrList[e.addrIndex].id==e.addrList[e.addrIndex].cityid||"object"==typeof e.siteCityInfo&&e.filterAddr==e.siteCityInfo.cityid)&&(e.filterAddr="",s="&cityid="+e.siteCityInfo.cityid);let l=`fid=${e.fid}&keyword=${e.keyword}&page=${a}&pageSize=${e.pageSize}&addrid=${e.filterAddr}&min_salary=${e.min_salary}&max_salary=${e.max_salary}${s}`,i="service=job&action="+(1==e.type?"fairsJoinCJ_xc":"fairsJoinCJ_company")+"&"+l;var o=S.encodeUrl(i);e.$ajax.post({url:"include/ajax.php?"+o}).then((a=>{let s=a.data;100==s.state&&(s.info.list.length<e.pageSize?e.loadingb=!1:e.loadingb=!0,t?e.searchData.list=e.searchData.list.concat(s.info.list):e.searchData=s.info)}))},popFn(a){const t=this;1==a?(t.filterPop=!0,setTimeout((()=>{t.flterCon=!0}),100)):(t.flterCon=!1,setTimeout((()=>{t.filterPop=!1}),100))},searchFn(){let a=this;a.page=1,a.searchData="",a.listFn(1)},toLink(a,t){let e=a.currentTarget.dataset.query,s=this.pages.company+"?id="+t.id+"&"+e;console.log(s),S.linkTo(s)},getAddrListArr(){const a=this;a.filterAddr=a.siteCityInfo.cityid;const t="service=siteConfig&action=addr&son=1&type="+a.siteCityInfo.cityid;var e=S.encodeUrl(t);a.$ajax.post({url:"include/ajax.php?"+e}).then((t=>{let e=t.data;100==e.state&&(a.addrList=e.info,a.addrList.unshift({title:"全"+a.siteCityInfo.name,id:a.siteCityInfo.cityid,cityid:a.siteCityInfo.cityid}),a.addrText=a.siteCityInfo.name)}))},resetFn(){let a=this;"addr"==a.filterType?(a.addrIndex=0,a.filterAddr=a.siteCityInfo.cityid,a.addrText="全"+a.siteCityInfo.name):(a.salaryIndex=0,a.min_salary="",a.max_salary=4e3,a.salaryText="薪资范围")},confirmFn(){let a=this;if(a.popFn(0),a.page=1,"addr"==a.filterType)a.filterAddr=a.addrList[a.addrIndex].id,a.addrText=a.addrList[a.addrIndex].title;else{let t=a.salary[a.salaryIndex].minSalary,e=a.salary[a.salaryIndex].maxSalary;a.min_salary=t,a.max_salary=e,a.salaryText=""+(t&&e?t+"-"+e:t?t+"以上":e+"以下")}a.listFn(1)},showBottomPop(a,t){const e=this;e.bottomType=a,e.showData=e.searchData.list[t],e.showPop=!0},initModalInfo(){this.modelInfo={tipType:"",icon:"",title:{text:"",style:""},tip:[{text:"",style:""}],cancel:{show:!0,text:"取消",style:"",clickFun:function(){}},confirm:{show:!0,text:"确定",style:"",clickFun:function(){}}}}}},[["render",function(a,n,T,P,j,F){const S=C(h("page-meta"),w),v=g,L=_,A=d,V=x("headerTop"),$=k,z=C(h("modelCon"),I),M=x("bottomPop"),B=C(h("toast"),D);return t(),e(o,null,[s(S,{"page-style":"overflow:"+(j.showPop?"hidden":"visible")},null,8,["page-style"]),s(A,{class:i({zhaopinhuiSearch:!0})},{default:l((()=>[s(A,{class:"header"},{default:l((()=>[s(V,{module:"job",show:!0,backOnly:!0,noBorder:!0,rightGrow:!0},{rightbtns:l((()=>[s(A,{class:"ss-input"},{default:l((()=>[s(v,{class:"img",src:j.imgPath+"/searchG.png"+j.imgVersion,mode:"aspectFill"},null,8,["src"]),s(L,{type:"text",placeholder:"请输入公司名称",name:"keyword",modelValue:j.keyword,"onUpdate:modelValue":n[0]||(n[0]=a=>j.keyword=a),onConfirm:F.searchFn},null,8,["modelValue","onConfirm"])])),_:1})])),_:1}),2==j.type?(t(),r(A,{key:0,class:"s-filter",style:f("top:calc("+j.navTop+"px + 88rpx);")},{default:l((()=>[s(A,{onClick:n[1]||(n[1]=a=>{j.filterType="addr",F.popFn(1)}),class:"filter-item"},{default:l((()=>[s($,{class:"span"},{default:l((()=>[c(p(j.addrText?j.addrText:"区域"),1)])),_:1}),s(v,{class:"img",src:j.imgPath+"/d-triangle.png"+j.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1}),s(A,{onClick:n[2]||(n[2]=a=>{j.filterType="salary",F.popFn(1)}),class:"filter-item"},{default:l((()=>[s($,{class:"span"},{default:l((()=>[c(p(j.salaryText?j.salaryText:"薪资范围"),1)])),_:1}),s(v,{class:"img",src:j.imgPath+"/d-triangle.png"+j.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1},8,["style"])):y("",!0)])),_:1}),s(A,{class:"searchData",style:f(2==j.type?"padding-top:100rpx;":"")},{default:l((()=>[j.searchData.list&&0!=j.searchData.list.length?(t(),r(A,{key:0},{default:l((()=>[2==j.type?(t(),r(A,{key:0},{default:l((()=>[(t(!0),e(o,null,m(j.searchData.list,((a,i)=>(t(),r(A,{onClick:t=>F.toLink(t,a),"data-query":"appFullScreen=1&appPage=job&appPath=company&appPathId="+a.id,class:"w-company",key:i},{default:l((()=>[s(A,{class:"wc-title"},{default:l((()=>[s(v,{mode:"aspectFill",class:"wct-left img",src:a.logo,onError:t=>a.logo=j.masterDomain+"/static/images/404.jpg"},null,8,["src","onError"]),s(A,{class:"wct-right"},{default:l((()=>[s(A,{class:"title"},{default:l((()=>[s($,{class:"span"},{default:l((()=>[c(p(a.title),1)])),_:2},1024),a.famous?(t(),r(A,{key:0,class:"label"},{default:l((()=>[s(v,{class:"img",mode:"aspectFill",src:j.imgPath+"/company3.png"+j.imgVersion},null,8,["src"]),s(A,{class:"tit"},{default:l((()=>[c("名企")])),_:1})])),_:1})):y("",!0)])),_:2},1024),s(A,{class:"text"},{default:l((()=>[s(A,{class:"lab"},{default:l((()=>[c(p(a.scale),1)])),_:2},1024),s(A,{class:"lab"},{default:l((()=>[c(p(a.nature),1)])),_:2},1024),s(A,{class:"lab"},{default:l((()=>[c(p(a.industry),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(A,{class:"wc-jobs",style:f("border-width:"+a.plist.length<=1?0:"0.01rem")},{default:l((()=>[(t(!0),e(o,null,m(a.plist.length>3?3:a.plist,((a,e)=>(t(),r(A,{class:"wcj-jobs",href:"javascript:;",key:e},{default:l((()=>[s($,{class:"span"},{default:l((()=>[c(p(a.title),1)])),_:2},1024),s(A,{class:"salary"},{default:l((()=>[c(p(a.show_salary),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["style"]),j.searchData.list.length>3?(t(),r(A,{key:0,class:"wc-all"},{default:l((()=>[c(" 全部"+p(a.pcount)+"个职位 ",1)])),_:2},1024)):y("",!0)])),_:2},1032,["onClick","data-query"])))),128)),s(A,{class:"w-loading"},{default:l((()=>[c(p(a.loadingb?"加载中...":"没有更多咯~"),1)])),_:1})])),_:1})):(t(),r(A,{key:1},{default:l((()=>[(t(!0),e(o,null,m(j.searchData.list,((a,i)=>(t(),r(A,{class:"dpj-company",key:i},{default:l((()=>[s(A,{class:"title"},{default:l((()=>[s(v,{class:"img",mode:"aspectFill",src:j.imgPath+"/company1.png"+j.imgVersion},null,8,["src"]),s($,{class:"span"},{default:l((()=>[c(p(a.company),1)])),_:2},1024)])),_:2},1024),s(A,{class:"jobs"},{default:l((()=>[(t(!0),e(o,null,m(a.jobs,((a,e)=>(t(),r(A,{class:"p",key:e},{default:l((()=>[c(p(a.name),1),s($,{class:"span"},{default:l((()=>[c("（"+p(a.number)+"人）",1)])),_:2},1024)])),_:2},1024)))),128)),s(A,{onClick:a=>F.showBottomPop("company",i),"data-state":"2","data-index":i,class:"all_job"},{default:l((()=>[c("全部"+p(a.jobs.length)+"个职位与要求>",1)])),_:2},1032,["onClick","data-index"])])),_:2},1024),s(A,{class:"number"},{default:l((()=>[c(" 展位号："),s($,{class:"span"},{default:l((()=>[c(p(a.seat),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}))])),_:1})):(t(),r(A,{key:1,class:"s-none"},{default:l((()=>[s(A,null,{default:l((()=>[s(v,{mode:"aspectFill",class:"img",src:j.imgPath+"/nonesearch.png"+j.imgVersion},null,8,["src"]),s(A,{class:"p"},{default:l((()=>[c("抱歉没有找到相关信息")])),_:1})])),_:1})])),_:1}))])),_:1},8,["style"]),s(z,{show:j.showModal,config:j.modelInfo,onHidepop:n[3]||(n[3]=a=>(j.showModal=!1,F.initModalInfo()))},null,8,["show","config"]),s(A,{class:"pop"},{default:l((()=>[s(M,{showPop:j.showPop,maskClick:"showPop",onHidepop:n[6]||(n[6]=a=>j.showPop=!0)},{default:l((()=>["company"==j.bottomType&&j.searchData&&j.searchData.list.length?(t(),r(A,{key:0,class:"p-company"},{default:l((()=>[s(A,{class:"pc-title"},{default:l((()=>[s(A,{class:"title"},{default:l((()=>[s(v,{mode:"aspectFit",class:"img",src:j.imgPath+"/company1.png"+j.imgVersion},null,8,["src"]),s($,{class:"span"},{default:l((()=>[c(p(j.showData.company),1)])),_:1})])),_:1}),s(v,{mode:"aspectFit",class:"img p-close",src:j.imgPath+"/popCloseB.png"+j.imgVersion,onClick:n[4]||(n[4]=a=>{j.showPop=!1})},null,8,["src"])])),_:1}),"1"==j.type?(t(),r(A,{key:0,class:"pc-number"},{default:l((()=>[c("展位号："),s($,{class:"span"},{default:l((()=>[c(p(j.showData.seat),1)])),_:1})])),_:1})):y("",!0),"1"==j.type?(t(),r(A,{key:1,class:"pc-jobs ul"},{default:l((()=>[(t(!0),e(o,null,m(j.showData.jobs,((a,e)=>(t(),r(A,{class:"li",key:e},{default:l((()=>[s(A,{class:"title"},{default:l((()=>[c(p(a.name),1),s($,{class:"span"},{default:l((()=>[c("（"+p(a.number)+"人）",1)])),_:2},1024)])),_:2},1024),s(A,{class:"text"},{default:l((()=>[c(p(a.description),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(t(),r(A,{key:2,class:"pc-jobs ul"},{default:l((()=>[(t(!0),e(o,null,m(j.showData.plist,((a,e)=>(t(),r(A,{class:"li",key:e},{default:l((()=>[s(A,{class:"title"},{default:l((()=>[c(p(a.title),1),b("span",null,"（"+p(a.number)+"人）",1)])),_:2},1024),s(A,{class:"text"},{default:l((()=>[c(p(a.description),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})),s(A,{class:"pc-btn",onClick:n[5]||(n[5]=a=>j.showPop=!1)},{default:l((()=>[c("确定")])),_:1})])),_:1})):y("",!0)])),_:1},8,["showPop"]),s(M,{slideTop:!0,showPop:j.filterPop,maskClick:"filterPop",onHidepop:n[11]||(n[11]=a=>j.filterPop=!1),zIndex:1},{default:l((()=>[s(A,{class:"filterPop",onClick:n[10]||(n[10]=a=>F.popFn(0))},{default:l((()=>[s(A,{class:"f-content",style:f(`padding-top:calc(${j.navTop}px + 168rpx)`),onClick:n[9]||(n[9]=u((()=>{}),["stop"]))},{default:l((()=>["addr"==j.filterType?(t(),r(A,{key:0,class:"fc-addr ul",onTouchmove:n[7]||(n[7]=u((()=>{}),["stop"])),onTouch:n[8]||(n[8]=u((()=>{}),["stop"]))},{default:l((()=>[(t(!0),e(o,null,m(j.addrList,((a,e)=>(t(),r(A,{key:e,onClick:a=>j.addrIndex=e,class:i({active:j.addrIndex==e,li:!0})},{default:l((()=>[c(p(a.title),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})):(t(),r(A,{key:1,class:"fc-salary ul"},{default:l((()=>[(t(!0),e(o,null,m(j.salary,((a,e)=>(t(),r(A,{key:e,class:i({active:j.salaryIndex==e,li:!0}),onClick:a=>{j.salaryIndex=e}},{default:l((()=>[c(p(a.title),1)])),_:2},1032,["class","onClick"])))),128)),s(A,{class:"self li"},{default:l((()=>[c("自定义")])),_:1})])),_:1})),s(A,{class:"fc-btn"},{default:l((()=>[s(A,{class:"reset",onClick:F.resetFn},{default:l((()=>[c("重置")])),_:1},8,["onClick"]),s(A,{class:"confirm",onClick:F.confirmFn},{default:l((()=>[c("确定")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["showPop"])])),_:1}),s(A,{style:{position:"relative","z-index":"9999999999"}},{default:l((()=>[s(B,{id:"toast",ref:"toasts"},null,512)])),_:1})])),_:1})],64)}],["__scopeId","data-v-42182254"]]);export{v as default};
