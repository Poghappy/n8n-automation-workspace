import{A as t,o as e,i,w as a,l as n,m as o,G as s,q as r,y as l,F as c,z as d,x as h,t as f,v as u,j as p,C as g,B as m,k as b,I as y,L as v,M as x,N as w,u as _,O as k,P as S,Q as D,c as P,R as C,T as I,U as z,b as T,f as L,V as F,W as B,p as E,e as M,h as j,a as $,X as A,Y as R,Z as W,_ as O,K as N,J as H,D as U,E as V}from"./index-6ef16ca3.js";import{_ as Y,r as G,p as J,a as X}from"./info.3393217b.js";import{p as q,_ as Z,a as K,c as Q}from"./public_pay.7d85d24e.js";import{_ as et,a as it}from"./popWarn.2421b789.js";var at,nt,ot=p();const st=Y({name:"complain",props:{showPop:{type:Boolean,default:!1},complainList:{type:Array,default:["理由1","理由2"]},infoDetail:{type:Object,default:{service:"member",template:"complain",module:"article",dopost:"detail",aid:-1}}},components:{popWarn:et},data:()=>({imgPath:ot.globalData.imgStaticPath,imgVersion:ot.globalData.imgVersion,phoneArea:[],activeIndex:0,phone:"",description:"",areaCode:86,complainb:!1,complainConb:!1,phoneb:!1,phoneConb:!1,warningb:!1,info:"",ajaxb:!1}),mounted(){at=this},methods:{warnFn(t=2e3){at.warningb=!0,clearTimeout(nt),nt=setTimeout((t=>{at.warningb=!1}),t)},popFn(t){t?(at.complainb=!0,setTimeout((t=>{at.complainConb=!0}),0)):(at.complainConb=!1,setTimeout((t=>{at.complainb=!1}),220),at.$emit("hideFn",!1))},secPopFn(t){t?(at.phoneb=!0,setTimeout((t=>{at.phoneConb=!0}),0)):(at.phoneConb=!1,setTimeout((t=>{at.phoneb=!1}),220))},phoneAreaData(){if(0==at.phoneArea.length){let t={service:"siteConfig",action:"internationalPhoneSection"};at.$ajax.post({url:"include/ajax.php?",data:t}).then((t=>{100==t.data.state&&(at.phoneArea=t.data.info)}))}},submitFn(){let t=at.infoDetail;if(t.areaCode=at.areaCode,t.type=at.complainList[at.activeIndex],t.desc=at.description,t.phone=at.phone,"86"==at.areaCode){/^[1-9]\d{10}$/.test(at.phone)?at.ajaxb||(at.ajaxb=!0,at.$ajax.post({url:ot.encodeUrl("include/ajax.php?"),data:t}).then((t=>{100==t.data.state&&setTimeout((t=>{at.popFn(0)}),2200),at.info=t.data.info,at.ajaxb=!1}))):at.info="请检查手机号格式"}else""==at.phone?at.info="手机号不能为空":at.ajaxb||(at.ajaxb=!0,at.$ajax.post({url:ot.encodeUrl("include/ajax.php?"),data:t}).then((t=>{100==t.data.state&&setTimeout((t=>{at.popFn(0)}),2200),at.info=t.data.info,at.ajaxb=!1})))}},watch:{info(t,e){""!=t&&(at.warnFn(),setTimeout((t=>{at.info=""}),2200))},showPop(t,e){t&&at.popFn(1)}}},[["render",function(p,x,w,_,k,S){const D=g,P=m,C=b,I=y,z=v,T=G(t("popWarn"),et);return k.complainb?(e(),i(C,{key:0,class:"complain",onClick:x[9]||(x[9]=t=>S.popFn(0))},{default:a((()=>[n(C,{class:"c-content",style:o(`transform:translateY(${k.complainConb?"0%":"100%"})`),onClick:x[4]||(x[4]=s((()=>{}),["stop"]))},{default:a((()=>[n(C,{class:"cc-title"},{default:a((()=>[n(D,null,{default:a((()=>[r("举报内容")])),_:1}),n(P,{src:`${k.imgPath}/close_2.png?v=${k.imgVersion}`,mode:"aspectFit",onClick:x[0]||(x[0]=t=>S.popFn(0))},null,8,["src"])])),_:1}),n(C,{class:"cc-list"},{default:a((()=>[n(C,{class:"title"},{default:a((()=>[r("选择举报理由")])),_:1}),n(C,{class:"list"},{default:a((()=>[(e(!0),l(c,null,d(w.complainList,((t,n)=>(e(),i(C,{class:h(["item",{active:k.activeIndex==n}]),key:n,onClick:t=>k.activeIndex=n},{default:a((()=>[r(f(t),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),n(C,{class:"cc-phone"},{default:a((()=>[n(C,{class:"title"},{default:a((()=>[r("联系方式")])),_:1}),n(C,{class:"phone"},{default:a((()=>[n(C,{class:"select",onClick:x[1]||(x[1]=t=>S.secPopFn(1))},{default:a((()=>[n(D,null,{default:a((()=>[r("+"+f(k.areaCode),1)])),_:1}),n(P,{src:`${k.imgPath}/d_arr.png?v=${k.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),n(I,{type:"tel",placeholder:"输入手机号","placeholder-style":"opacity:.3;font-wei:500",modelValue:k.phone,"onUpdate:modelValue":x[2]||(x[2]=t=>k.phone=t)},null,8,["modelValue"])])),_:1})])),_:1}),n(C,{class:"cc-description"},{default:a((()=>[n(C,{class:"title"},{default:a((()=>[r("举报描述")])),_:1}),n(C,{class:"input"},{default:a((()=>[n(z,{placeholder:"可简述理由，以便快速处理举报","placeholder-style":"opacity:.3",maxlength:"100","auto-height":"",modelValue:k.description,"onUpdate:modelValue":x[3]||(x[3]=t=>k.description=t)},null,8,["modelValue"]),n(C,{class:"number"},{default:a((()=>[r(f(k.description.length)+"/100",1)])),_:1})])),_:1})])),_:1}),n(C,{class:"cc-btn",style:o("background:"+(k.phone?"linear-gradient(-90deg, #F6252F 0%, #FF4621 100%);":"#FFBABA")),onClick:S.submitFn},{default:a((()=>[r("提交")])),_:1},8,["style","onClick"])])),_:1},8,["style"]),k.phoneb?(e(),i(C,{key:0,class:"c-pop",onClick:x[7]||(x[7]=s((t=>S.secPopFn(0)),["stop"]))},{default:a((()=>[n(C,{class:"cp-content",style:o(`transform:translateY(${k.phoneConb?"0%":"100%"})`),onClick:x[6]||(x[6]=s((()=>{}),["stop"]))},{default:a((()=>[n(C,{class:"title"},{default:a((()=>[n(C,{class:"back",onClick:x[5]||(x[5]=t=>S.secPopFn(0))},{default:a((()=>[r("返回")])),_:1}),n(D,null,{default:a((()=>[r("选择地区")])),_:1})])),_:1}),n(C,{class:"list"},{default:a((()=>[(e(!0),l(c,null,d(k.phoneArea,((t,o)=>(e(),i(C,{class:"item",key:o,onClick:e=>{k.areaCode=t.code,S.secPopFn(0)}},{default:a((()=>[n(C,{class:"area"},{default:a((()=>[r(f(t.name),1)])),_:2},1024),n(C,{class:"num"},{default:a((()=>[r("+"+f(t.code),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):u("",!0),n(T,{info:k.info,warningb:k.warningb,onClick:x[8]||(x[8]=s((()=>{}),["stop"]))},null,8,["info","warningb"])])),_:1})):u("",!0)}],["__scopeId","data-v-ff8601ed"]]),rt=(t="")=>t.split(";").filter((t=>t&&!/^[\n\s]+$/.test(t))).map((t=>{const e=t.slice(0,t.indexOf(":")),i=t.slice(t.indexOf(":")+1);return{[e.replace(/-([a-z])/g,(function(){return arguments[1].toUpperCase()})).replace(/\s+/g,"")]:i.replace(/^\s+/,"").replace(/\s+$/,"")||""}}));function lt(t){return{provide(){return{[t]:this}},data:()=>({el:{id:null,css:{},views:[]}}),watch:{css:{handler(t){this.canvasId&&(this.el.css=("object"==typeof t?t:t&&Object.assign(...rt(t)))||{},this.canvasWidth=this.el.css&&this.el.css.width||this.canvasWidth,this.canvasHeight=this.el.css&&this.el.css.height||this.canvasHeight)},immediate:!0}}}}function ct(t,e={}){return e.indexKey,{inject:{[t]:{default:null}},watch:{el:{handler(t,e){JSON.stringify(t)!=JSON.stringify(e)&&this.bindRelation()},deep:!0,immediate:!0},src:{handler(t,e){t!=e&&this.bindRelation()},immediate:!0},text:{handler(t,e){t!=e&&this.bindRelation()},immediate:!0},css:{handler(t,e){t!=e&&(this.el.css=("object"==typeof t?t:t&&Object.assign(...rt(t)))||{})},immediate:!0},replace:{handler(t,e){JSON.stringify(t)!=JSON.stringify(e)&&this.bindRelation()},deep:!0,immediate:!0}},created(){this._uid||(this._uid=this._.uid),Object.defineProperty(this,"parent",{get:()=>this[t]||[]}),Object.defineProperty(this,"index",{get:()=>{this.bindRelation();const{parent:{el:{views:t=[]}={}}={}}=this;return t.indexOf(this.el)}}),this.el.type=this.type,this.uid&&(this.el.uid=this.uid),this.bindRelation()},beforeUnmount(){this.removeEl()},methods:{removeEl(){this.parent&&(this.parent.el.views=this.parent.el.views.filter((t=>t._uid!==this._uid)))},bindRelation(){if(this.el._uid||(this.el._uid=this._uid),["text","qrcode"].includes(this.type)&&(this.el.text=this.$slots&&this.$slots.default&&this.$slots.default[0].text||`${this.text||""}`.replace(/\\n/g,"\n")),"image"==this.type&&(this.el.src=this.src),!this.parent)return;let t=this.parent.el.views||[];-1!==t.indexOf(this.el)?this.parent.el.views=t.map((t=>t._uid==this._uid?this.el:t)):this.parent.el.views=[...t,this.el]}},mounted(){}}}const dt=Y({name:"lime-painter-text",mixins:[ct("painter")],props:{uid:String,css:[String,Object],text:[String,Number],replace:Object},data:()=>({type:"text",el:{css:{},text:null}})},[["render",function(t,n,o,s,r,l){const c=g;return e(),i(c,{style:{opacity:"0",height:"0"}},{default:a((()=>[x(t.$slots,"default")])),_:3})}]]);const ht=Y({name:"lime-painter-view",mixins:[ct("painter"),lt("painter")],props:{id:String,css:[String,Object]},data:()=>({type:"view",el:{css:{},views:[]}}),mounted(){}},[["render",function(t,n,o,s,r,l){const c=b;return e(),i(c,null,{default:a((()=>[x(t.$slots,"default")])),_:3})}]]);const ft=Y({name:"lime-painter-image",mixins:[ct("painter")],props:{id:String,css:[String,Object],src:String},data:()=>({type:"image",el:{css:{},src:null}})},[["render",function(t,e,i,a,n,o){return null}]]);const ut=Y({name:"lime-painter-qrcode",mixins:[ct("painter")],props:{id:String,css:[String,Object],text:String},data:()=>({type:"qrcode",el:{css:{},text:null}})},[["render",function(t,e,i,a,n,o){return null}]]),pt={props:{board:Object,pathType:String,fileType:{type:String,default:"png"},hidden:Boolean,quality:{type:Number,default:1},css:[String,Object],width:[Number,String],height:[Number,String],pixelRatio:Number,customStyle:String,isCanvasToTempFilePath:Boolean,sleep:{type:Number,default:1e3/30},beforeDelay:{type:Number,default:100},afterDelay:{type:Number,default:100},performance:Boolean,useCORS:Boolean,hidpi:{type:Boolean,default:!0}}},gt=t=>/^data:image\/(\w+);base64/.test(t);function mt(t){return new Promise((e=>setTimeout(e,t)))}let{platform:bt,SDKVersion:yt}=w();const vt=/windows|mac/.test(bt);let xt={};function wt(t,e,i=!1){if("number"==typeof t)return t;if(function(t){return/^-?\d+(\.\d+)?$/.test(t)}(t))return 1*t;if("string"==typeof t){const a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|px|%)$/g.exec(t);if(!t||!a)return 0;const n=a[3];t=parseFloat(t);let o=0;return"rpx"===n?o=_(t):"px"===n?o=1*t:"%"===n?o=t*wt(e)/100:"em"===n&&(o=t*wt(e||14)),i?1*o.toFixed(2):Math.round(o)}return 0}function _t(t){return/^data:/.test(t)?t:new Promise(((e,i)=>{let a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.onload=function(){let t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(a,0,0);let i=t.toDataURL("image/png");e(i),t.height=t.width=0},a.src=t+"?v="+Math.random(),a.onerror=t=>{i(t)}}))}function kt(t,e){const i=this&&this.canvas&&this.canvas.createImage;return new Promise((async(a,n)=>{let o=t.replace(/^@\//,"/");if(xt[t]&&xt[t].errMsg)a(xt[t]);else{try{e&&(o=await _t(t))}catch(s){n({...s,src:o})}if(i&&!vt){const e=this.canvas.createImage();return e.onload=function(){const i={path:e,width:e.width,height:e.height};xt[t]=i,a(xt[t])},e.onerror=function(e){n({err:e,path:t})},void(e.src=o)}k({src:o,success:e=>{if(i){const i=this.canvas.createImage();return i.onload=function(){e.path=i,xt[t]=e,a(xt[t])},i.onerror=function(e){n({err:e,path:t})},void(i.src=o)}xt[t]=e,a(xt[t])},fail(e){console.error({err:e,path:t}),n({err:e,path:t})}})}}))}var St=function(){return(St=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function Dt(t,e,i,a){return new(i||(i=Promise))((function(n,o){function s(t){try{l(a.next(t))}catch(e){o(e)}}function r(t){try{l(a.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,r)}l((a=a.apply(t,e||[])).next())}))}function Pt(t,e){var i,a,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(r){o=[6,r],a=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}}var Ct={MP_WEIXIN:"mp-weixin",MP_QQ:"mp-qq",MP_ALIPAY:"mp-alipay",MP_BAIDU:"mp-baidu",MP_TOUTIAO:"mp-toutiao",MP_DINGDING:"mp-dingding",H5:"h5",WEB:"web",PLUS:"plus"},It="width",zt=["Top","Right","Bottom","Left"],Tt="right",Lt="bottom",Ft=["contentSize","clientSize","borderSize","offsetSize"],Bt={TOP:"top",MIDDLE:"middle",BOTTOM:Lt},Et={LEFT:"left",CENTER:"center",RIGHT:Tt},Mt="view",jt="text",$t="image",At="qrcode",Rt="block",Wt="absolute",Ot="fixed",Nt={display:Rt,color:"#000000",lineHeight:"1.4em",fontSize:14,fontWeight:400,fontFamily:"sans-serif",lineCap:"butt",flexDirection:"row",flexWrap:"nowrap",textAlign:"left",alignItems:"flex-start",justifyContent:"flex-start",position:"static",transformOrigin:"center center"},Ht={upx2px:function(t){return window.innerWidth/750*t},getSystemInfoSync:function(){return{screenWidth:window.innerWidth,screenHeight:window.innerHeight}},getImageInfo:function(t){var e=t.src,i=t.success,a=t.fail,n=new Image;n.onload=function(){i({width:n.naturalWidth,height:n.naturalHeight,path:n.src,src:e})},n.onerror=a,n.src=e}},Ut="object"==typeof window?"undefined"==typeof uni||"undefined"!=typeof uni&&!D?Ct.WEB:Ct.H5:"object"==typeof swan?Ct.MP_BAIDU:"object"==typeof tt?Ct.MP_TOUTIAO:"object"==typeof plus?Ct.PLUS:"object"==typeof wx?Ct.MP_WEIXIN:void 0,Vt=Ut==Ct.MP_WEIXIN?wx:"undefined"!=typeof uni?k?{upx2px:function(t){return _(t)},getSystemInfoSync:function(){return w()},getImageInfo:function(t){return k(t)},downloadFile:function(t){return S(t)}}:Object.assign(uni,Ht):"undefined"!=typeof window?Ht:uni;if(!Vt.upx2px){var Yt=((Vt.getSystemInfoSync&&Vt.getSystemInfoSync()).screenWidth||375)/750;Vt.upx2px=function(t){return Yt*t}}function Gt(t){return/^-?\d+(\.\d+)?$/.test(t)}function Jt(t,e,i){if(Gt(t))return 1*t;if("string"==typeof t){var a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|vw|vh|px|%)$/g.exec(t);if(!t||!a)return 0;var n=a[3];t=parseFloat(t);var o=0;if("rpx"===n)o=Vt.upx2px(t);else if("px"===n)o=1*t;else if("%"===n&&e)o=t*Jt(e)/100;else if("em"===n&&e)o=t*Jt(e||14);else if(["vw","vh"].includes(n)){var s=Vt.getSystemInfoSync(),r=s.screenWidth,l=s.screenHeight;o=t*("vw"==n?r:l)/100}return 1*o.toFixed(2)}return 0}function Xt(t){return/%$/.test(t)}function qt(t){for(var e=[],i=[],a=0,n=t.substring(0,t.length-1).split("%,");a<n.length;a++){var o=n[a];e.push(o.substring(0,o.lastIndexOf(" ")).trim()),i.push(o.substring(o.lastIndexOf(" "),o.length)/100)}return{colors:e,percents:i}}function Zt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Kt(){return(Kt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function ee(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return te(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?te(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ie(t){return"number"==typeof t}function ae(t){return"auto"===t||null===t}function ne(t){return/%$/.test(t)}var oe=$t,se=jt,re=At,le=Wt,ce=Ot;function de(t){return t.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}))}function he(t){t=t.trim();for(var e=new Array,i="+",a="",n=t.length,o=0;o<n;++o){if("."===t[o]||!isNaN(Number(t[o]))&&" "!==t[o])a+=t[o];else if("("===t[o]){for(var s=1,r=o;s>0;)"("===t[r+=1]&&(s+=1),")"===t[r]&&(s-=1);a=""+he(t.slice(o+1,r)),o=r}if(isNaN(Number(t[o]))&&"."!==t[o]||o===n-1){var l=parseFloat(a);switch(i){case"+":e.push(l);break;case"-":e.push(-l);break;case"*":e.push(e.pop()*l);break;case"/":e.push(e.pop()/l)}i=t[o],a=""}}for(var c=0;e.length;)c+=e.pop();return c}var fe,ue=0,pe=function(){function t(){Zt(this,"elements",[]),Zt(this,"afterElements",[]),Zt(this,"beforeElements",[]),Zt(this,"ids",[]),Zt(this,"width",0),Zt(this,"height",0),Zt(this,"top",0),Zt(this,"left",0),Zt(this,"pre",null),Zt(this,"offsetX",0),Zt(this,"offsetY",0),ue++,this.id=ue}var e=t.prototype;return e.fixedBind=function(t,e){void 0===e&&(e=0),this.container=e?t.parent:t.root,this.container.fixedLine=this,this.fixedAdd(t)},e.fixedAdd=function(t){if(!this.ids.includes(t.id)){this.ids.push(t.id),this.elements.push(t);var e=t.computedStyle.zIndex;(void 0===e?0:e)>=0?this.afterElements.push(t):this.beforeElements.push(t),this.refreshLayout()}},e.bind=function(t){this.container=t.parent,this.container.line=null,this.container.lines?(this.container.lines.push(this),this.pre=this.getPreLine(),this.top=this.pre.top+this.pre.height,this.left=this.container.contentSize.left):(this.top=this.container.contentSize.top,this.left=this.container.contentSize.left,this.container.lines=[this]),this.isInline=t.isInline(),this.container.line=this,this.outerWidth=t.parent&&t.parent.contentSize.width?t.parent.contentSize.width:1/0,this.add(t)},e.getPreLine=function(){return this.container.lines[this.container.lines.length-2]},e.canIEnter=function(t){return!((100*t.offsetSize.width+100*this.width)/100>this.outerWidth&&(this.closeLine(),1))},e.closeLine=function(){delete this.container.line},e.add=function(t){this.ids.includes(t.id)||(this.ids.push(t.id),this.elements.push(t),this.refreshWidthHeight(t))},e.refreshWidthHeight=function(t){t.offsetSize.height>this.height&&(this.height=t.offsetSize.height),this.width+=t.offsetSize.width||0,(this.container.lineMaxWidth||0)<this.width&&(this.container.lineMaxWidth=this.width)},e.refreshXAlign=function(){if(this.isInline){var t=this.container.contentSize.width-this.width,e=this.container.style.textAlign;"center"===e?t/=2:"left"===e&&(t=0),this.offsetX=t}},e.getOffsetY=function(t){if(!t||!t.style)return 0;var e=(t.style||{}).verticalAlign;return e===Lt?this.height-t.contentSize.height:"middle"===e?(this.height-t.contentSize.height)/2:0},e.setIndent=function(t){var e=t.style.textIndent;if(e&&/^calc/.test(e)){var i=/^calc\((.+)\)$/.exec(e);if(i&&i[1]){var a=he(i[1].replace(/([^\s\(\+\-\*\/]+)\.(left|right|bottom|top|width|height)/g,(function(e){var i=e.split("."),a=i[0],n=i[1],o=t.parent.querySelector(a);if(o&&o.offsetSize){var s={right:o.offsetSize.left+o.offsetSize.width,bottom:o.offsetSize.top+o.offsetSize.height};return o.offsetSize[n]||s[n]||0}})).replace(new RegExp(/-?[0-9]+(\.[0-9]+)?(rpx|px|%)/,"g"),Jt));t.style.textIndent=a}}},e.layout=function(t,e){var i=this;this.refreshXAlign(),this.pre?(this.top=this.pre.top+this.pre.height+this.offsetY,this.left=e+this.offsetX):(this.top=Math.max(this.top,this.container.contentSize.top,t)+this.offsetY,this.left=Math.max(this.left,this.container.contentSize.left,e)+this.offsetX),this.elements.forEach((function(t,e){i.setIndent(t);var a=i.elements[e-1],n=i.getOffsetY(t);t.style.top=i.top+n,t.style.left=a?a.offsetSize.left+a.offsetSize.width:i.left,t.getBoxPosition()}))},e.refreshLayout=function(){this.afterElements=this.afterElements.sort((function(t,e){return t.computedStyle.zIndex-e.computedStyle.zIndex})),this.beforeElements=this.beforeElements.sort((function(t,e){return t.computedStyle.zIndex-e.computedStyle.zIndex}))},t}(),ge=((fe={}).row={width:It,contentWidth:It,lineMaxWidth:"lineMaxWidth",left:"left",top:"top",height:"height",lineMaxHeight:"lineMaxHeight",marginLeft:"marginLeft"},fe.column={width:"height",contentWidth:"height",lineMaxWidth:"lineMaxWidth",left:"top",top:"left",height:It,lineMaxHeight:"lineMaxHeight",marginLeft:"marginTop"},fe),me=function(t){var e,i;function a(){var e;return Zt(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e=t.call(this)||this),"outerWidth",0),e.exactValue=0,e.flexTotal=0,e.width=0,e.key=null,e.flexDirection="row",e}i=t,(e=a).prototype=Object.create(i.prototype),e.prototype.constructor=e,Qt(e,i);var n=a.prototype;return n.bind=function(t){this.container=t.parent,this.container.line=this,this.container.lines?(this.container.lines.push(this),this.pre=this.getPreLine(),this.top=this.pre.top+this.pre.height,this.left=this.container.contentSize.left):(this.top=this.container.contentSize.top,this.left=this.container.contentSize.left,this.container.lines=[this]),t.parent&&(this.flexDirection=t.parent.style.flexDirection,this.key=ge[this.flexDirection]),this.initHeight(t),this.outerWidth=t.parent&&t.parent.contentSize[this.key.contentWidth]?t.parent.contentSize[this.key.contentWidth]:1/0,this.add(t)},n.add=function(t){this.ids.push(t.id);var e=t.style.flex;ie(e)?this.flexTotal+=e:ie(this.getWidth(t.style))&&(this.exactValue+=this.getWidth(t.offsetSize)),this.elements.push(t),this.refreshWidthHeight(t),t.next||this.closeLine()},n.closeLine=function(){this.calcFlex()},n.initHeight=function(t){this[this.key.height]=0},n.getWidth=function(t){return t[this.key.width]||0},n.getHeight=function(t){return t[this.key.height]||0},n.setWidth=function(t,e){t[this.key.width]=e},n.setHeight=function(t,e){t[this.key.height]=e},n.calcFlex=function(){var t=this,e=this.container.contentSize[this.key.contentWidth],i=0;this.elements.forEach((function(a){var n=a.style,o=a.contentSize,s=t.getWidth(n)||t.getWidth(o);ie(n.flex)&&(s=n.flex/t.flexTotal*(e-t.exactValue)),t.setWidth(a.computedStyle,s),a.isFlexCalc=!0,delete a.line,delete a.lines,delete a.lineMaxWidth,a.getBoxWidthHeight(),i=Math.max(i,t.getHeight(a.offsetSize))})),this.setHeight(this,i)},n.refreshWidthHeight=function(t){var e=this.container.style.alignItems;e&&!t.style.alignSelf&&(t.style.alignSelf=e);var i=this.getHeight(t.offsetSize);i>this[this.key.height]&&(this.container[this.key.lineMaxHeight]=this[this.key.height]=i),this[this.key.width]+=this.getWidth(t.offsetSize);var a=Math.min(this.getWidth(this),!this.getWidth(this.container.contentSize)&&1/0);(this.container[this.key.lineMaxWidth]||0)<a&&(this.container[this.key.lineMaxWidth]=a)},n.refreshXAlign=function(){var t,e,i=this,a=this.elements.reduce((function(t,e){return t+i.getWidth(e.offsetSize)}),0),n=(this.outerWidth==1/0?0:this.outerWidth-a)||0,o=this.container.style.justifyContent;"center"===o?n/=2:"flex-start"===o?n=0:["space-between","space-around"].includes(o)&&(t="space-between"==o,void 0===(e=n)&&(e=0),e/=i.elements.length+(t?-1:1),i.elements.forEach((function(a,n){var o;t&&!n||(a.style.margin?a.style.margin[i.key.marginLeft]+=e:a.style.margin=((o={})[i.key.marginLeft]=e,o),a.getBoxPosition())})),e=0,n=0),this.offsetX=n||0,this.refreshYAlign()},n.refreshYAlign=function(){var t=this;if(1==this.container.lines.length)return 0;var e=this.container.lines.reduce((function(e,i){return e+t.getHeight(i)}),0),i=this.container.style.alignItems,a=this.getHeight(this.container.contentSize);if("center"===i){var n=(a-e)/(this.container.lines.length+1);this.container.lines.forEach((function(t){t.offsetY=n}))}if("flex-end"===i){var o=a-e;this.container.lines[0].offsetY=o}},n.getOffsetY=function(t){if(this.container.lines.length>1)return 0;var e=t.style.alignSelf,i=this.getHeight(this.container.contentSize),a=i-this.getHeight(t.offsetSize);return"flex-end"===e?a:"center"===e?a/2:"stretch"===e?(a&&t.name==Mt&&(t.style[this.key.width]=this.getWidth(t.offsetSize),t.style[this.key.height]=i,delete t.line,delete t.lines,t.getBoxWidthHeight()),0):0},n.layout=function(t,e){var i=this;this.refreshXAlign(),this.pre?(this.top=this.pre.top+this.pre.height+this.offsetY,this.left=e+this.offsetX):(this.top=Math.max(this.top,this.container.contentSize.top,t)+this.offsetY,this.left=Math.max(this.left,this.container.contentSize.left,e)+this.offsetX),this.elements.forEach((function(t,e){i.setIndent(t);var a=i.elements[e-1],n=i.getOffsetY(t);t.style[i.key.top]=i[i.key.top]+n,t.style[i.key.left]=a?a.offsetSize[i.key.left]+i.getWidth(a.offsetSize):i[i.key.left],t.getBoxPosition()}))},a}(pe),be=jt,ye=Mt,ve=Wt,xe=0,we={left:null,top:null,width:null,height:null},_e=new Map,ke=function(){function t(t,e,i,a){var n=this;Zt(this,"id",xe++),Zt(this,"style",{left:null,top:null,width:null,height:null}),Zt(this,"computedStyle",{}),Zt(this,"originStyle",{}),Zt(this,"children",{}),Zt(this,"layoutBox",Kt({},we)),Zt(this,"contentSize",Kt({},we)),Zt(this,"clientSize",Kt({},we)),Zt(this,"borderSize",Kt({},we)),Zt(this,"offsetSize",Kt({},we)),this.ctx=a,this.root=i,e&&(this.parent=e),this.name=t.type||t.name,this.attributes=this.getAttributes(t);var o=function(t,e){var i,a=["color","fontSize","lineHeight","verticalAlign","fontWeight","textAlign"],n=t.type,o=void 0===n?"view":n,s=t.styles,r=void 0===s?{}:s,l=(e||{}).computedStyle,c=Object.assign({},Nt);if([se,oe,re].includes(o)&&!r.display&&(c.display="inline-block"),l)for(var d=0;d<a.length;d++){var h=a[d];(r[h]||l[h])&&(r[h]=r[(i=h,i.replace(/([A-Z])/g,"-$1").toLowerCase())]||r[h]||l[h])}for(var f=function(t){var e,i,a,n,s=r[t];if(/-/.test(t)&&(t=de(t),c[t]=s),/^(box|text)?shadow$/i.test(t)){var l=[];return s.replace(/((-?\d+(rpx|px|vw|vh)?\s+?){3})(.+)/,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l=t[1].match(/-?\d+(rpx|px|vw|vh)?/g).map((function(t){return Jt(t)})).concat(t[4])})),/^text/.test(t)?c.textShadow=l:c.boxShadow=l,"continue"}if(/^border/i.test(t)&&!/radius$/i.test(t)){var d=t.match(/^border([BTRLa-z]+)?/)[0],h=t.match(/[W|S|C][a-z]+/),f=s.replace(/([\(,])\s+|\s+([\),])/g,"$1$2").split(" ").map((function(t){return/^\d/.test(t)?Jt(t,""):t}));return c[d]||(c[d]={}),1==f.length&&h?c[d][d+h[0]]=f[0]:c[d]=((e={})[d+It]=Gt(f[0])?f[0]:0,e[d+"Style"]=f[1]||"solid",e[d+"Color"]=f[2]||"black",e),"continue"}if(/^background(color)?$/i.test(t))return c.backgroundColor=s,"continue";if(/^objectPosition$/i.test(t))return c[t]=s.split(" "),"continue";if(/padding|margin|radius/i.test(t)){var u=/radius$/i.test(t),p="borderRadius",g=u?p:t.match(/[a-z]+/)[0],m=function(t,e){return"border"+t+e+"Radius"},b=[0,0,0,0].map((function(t,e){return u?[m(zt[0],zt[3]),m(zt[0],zt[1]),m(zt[2],zt[1]),m(zt[2],zt[3])][e]:g+zt[e]}));if("padding"===t||"margin"===t||/^(border)?radius$/i.test(t)){f=(""+s).split(" ").map((function(e){return/^-?\d+(rpx|px|vh|vw)?$/.test(e)?Jt(e):"margin"!=t&&/auto/.test(e)?0:e}),[])||[0];var y=u?p:t,v=f[0],x=f[1],w=f[2],_=f[3];c[y]=((i={})[b[0]]=ae(v)?0:v,i[b[1]]=Gt(x)||ae(x)?x:v,i[b[2]]=ae(Gt(w)?w:v)?0:Gt(w)?w:v,i[b[3]]=Gt(_)?_:x||v,i)}else"object"==typeof c[g]||(c[g]=((a={})[b[0]]=c[g]||0,a[b[1]]=c[g]||0,a[b[2]]=c[g]||0,a[b[3]]=c[g]||0,a)),c[g][t]="margin"==g&&ae(s)||ne(s)?s:Jt(s);return"continue"}if(/^transform$/i.test(t))return c[t]={},s.replace(/([a-zA-Z]+)\(([0-9,-\.%rpxdeg\s]+)\)/g,(function(e,i,a){var n=a.split(",").map((function(t){return t.replace(/(^\s*)|(\s*$)/g,"")})),o=function(t,e){return t.includes("deg")?1*t:e&&!ne(e)?Jt(t,e):t};i.includes("matrix")?c[t][i]=n.map((function(t){return 1*t})):i.includes("rotate")?c[t][i]=1*a.match(/^-?\d+(\.\d+)?/)[0]:/[X, Y]/.test(i)?c[t][i]=/[X]/.test(i)?o(n[0],r.width):o(n[0],r.height):(c[t][i+"X"]=o(n[0],r.width),c[t][i+"Y"]=o(n[1]||n[0],r.height))})),"continue";if(/^font$/i.test(t)&&console.warn("font 不支持简写"),/^textindent/i.test(t)&&(c[t]=/^calc/.test(s)?s:Jt(s)),/^textstroke/i.test(t)){var k=t.match(/color|width|type$/i),S=(d="textStroke",s.split(" ").map((function(t){return/^\d+(rpx|px|vh|vw)?$/.test(t)?Jt(t):t})));return k?c[d]?c[d][k[0]]=S[0]:c[d]=((n={})[k[0]]=S[0],n):c[d]={width:S[0],color:S[1],type:S[2]},"continue"}/^left|top$/i.test(t)&&![le,ce].includes(r.position)?c[t]=0:c[t]=/^-?[\d\.]+(px|rpx|vw|vh)?$/.test(s)?Jt(s):/em$/.test(s)&&o==se?Jt(s,r.fontSize):s},u=0,p=Object.keys(r);u<p.length;u++)f(p[u]);return c}(t,e);this.isAbsolute=o.position==ve,this.isFixed="fixed"==o.position,this.originStyle=o,Object.keys(o).forEach((function(t){Object.defineProperty(n.style,t,{configurable:!0,enumerable:!0,get:function(){return o[t]},set:function(e){o[t]=e}})}));var s={contentSize:Kt({},this.contentSize),clientSize:Kt({},this.clientSize),borderSize:Kt({},this.borderSize),offsetSize:Kt({},this.offsetSize)};Object.keys(s).forEach((function(t){Object.keys(n[t]).forEach((function(e){Object.defineProperty(n[t],e,{configurable:!0,enumerable:!0,get:function(){return s[t][e]},set:function(i){s[t][e]=i}})}))})),this.computedStyle=this.style}var e=t.prototype;return e.add=function(t){t.parent=this,this.children[t.id]=t},e.getChildren=function(){var t=this;return Object.keys(this.children).map((function(e){return t.children[e]}))},e.prev=function(t){void 0===t&&(t=this);var e=t.parent.getChildren();return e[e.findIndex((function(e){return e.id==t.id}))-1]},e.querySelector=function(t){var e=this.getChildren();return"string"!=typeof t?null:e.find((function(e){var i=e.id,a=e.attributes;return i==t||a&&a.uid==t}))||this.parent&&this.parent.querySelector&&this.parent.querySelector(t)||null},e.getLineRect=function(t,e){var i=e?e.lines:this.parent&&this.parent.lines;return i&&i.find((function(e){return e.ids.includes(t)}))||{width:0,height:0}},e.setPosition=function(t,e){var i={left:It,top:"height",right:It,bottom:"height"};Object.keys(i).forEach((function(a){var n=a==Tt?"left":"top";[Tt,Lt].includes(a)&&void 0!==t.style[a]&&!Gt(t.originStyle[n])?t.style[n]=e[i[a]]-t.offsetSize[i[a]]-Jt(t.style[a],e[i[a]]):t.style[a]=Jt(t.style[a],e[i[a]])}))},e.getAttributes=function(t){var e=t.attributes,i=void 0===e?{}:e,a=t.uid,n=t.url,o=t.src,s=t.replace,r=t.text;return a&&(i.uid=a),(n||o)&&(i.src=i.src||n||o),s&&(i.replace=s),r&&(i.text=r),i},e.getOffsetSize=function(t,e,i){void 0===i&&(i=Ft[3]);var a=e||{},n=a.margin,o=(n=void 0===n?{}:n).marginLeft,s=void 0===o?0:o,r=n.marginTop,l=void 0===r?0:r,c=n.marginRight,d=void 0===c?0:c,h=n.marginBottom,f=void 0===h?0:h,u=a.padding,p=(u=void 0===u?{}:u).paddingLeft,g=void 0===p?0:p,m=u.paddingTop,b=void 0===m?0:m,y=u.paddingRight,v=void 0===y?0:y,x=u.paddingBottom,w=void 0===x?0:x,_=a.border,k=(_=void 0===_?{}:_).borderWidth,S=void 0===k?0:k,D=a.borderTop,P=(D=void 0===D?{}:D).borderTopWidth,C=void 0===P?S:P,I=a.borderBottom,z=(I=void 0===I?{}:I).borderBottomWidth,T=void 0===z?S:z,L=a.borderRight,F=(L=void 0===L?{}:L).borderRightWidth,B=void 0===F?S:F,E=a.borderLeft,M=(E=void 0===E?{}:E).borderLeftWidth,j=void 0===M?S:M,$=s<0&&d<0?Math.abs(s+d):0,A=l<0&&f<0?Math.abs(l+f):0,R=s>=0&&d<0,W=l>=0&&f<0;return i==Ft[0]&&(this[i].left=t.left+s+g+j+(R?2*-d:0),this[i].top=t.top+l+b+C+(W?2*-f:0),this[i].width=t.width+(this[i].widthAdd?0:$),this[i].height=t.height+(this[i].heightAdd?0:A),this[i].widthAdd=$,this[i].heightAdd=A),i==Ft[1]&&(this[i].left=t.left+s+j+(R<0?-d:0),this[i].top=t.top+l+C+(W?-f:0),this[i].width=t.width+g+v,this[i].height=t.height+b+w),i==Ft[2]&&(this[i].left=t.left+s+j/2+(R<0?-d:0),this[i].top=t.top+l+C/2+(W?-f:0),this[i].width=t.width+g+v+j/2+B/2,this[i].height=t.height+b+w+T/2+C/2),i==Ft[3]&&(this[i].left=t.left+(R<0?-d:0),this[i].top=t.top+(W?-f:0),this[i].width=t.width+g+v+j+B+s+d,this[i].height=t.height+b+w+T+C+f+l),this[i]},e.layoutBoxUpdate=function(t,e,i,a){var n=this;if(void 0===i&&(i=-1),"border-box"==e.boxSizing){var o=e||{},s=o.border,r=(s=void 0===s?{}:s).borderWidth,l=void 0===r?0:r,c=o.borderTop,d=(c=void 0===c?{}:c).borderTopWidth,h=void 0===d?l:d,f=o.borderBottom,u=(f=void 0===f?{}:f).borderBottomWidth,p=void 0===u?l:u,g=o.borderRight,m=(g=void 0===g?{}:g).borderRightWidth,b=void 0===m?l:m,y=o.borderLeft,v=(y=void 0===y?{}:y).borderLeftWidth,x=void 0===v?l:v,w=o.padding,_=(w=void 0===w?{}:w).paddingTop,k=void 0===_?0:_,S=w.paddingRight,D=void 0===S?0:S,P=w.paddingBottom,C=void 0===P?0:P,I=w.paddingLeft,z=void 0===I?0:I;i||(t.width-=z+D+b+x),1!==i||a||(t.height-=k+C+h+p)}this.layoutBox&&(Ft.forEach((function(i){return n.layoutBox[i]=n.getOffsetSize(t,e,i)})),this.layoutBox=Object.assign({},this.layoutBox,this.layoutBox.borderSize))},e.getBoxPosition=function(){var t=this.computedStyle,e=this.fixedLine,i=this.lines,a=t.left,n=void 0===a?0:a,o=t.top,s=void 0===o?0:o,r=t.padding||{},l=r.paddingBottom,c=void 0===l?0:l,d=r.paddingRight,h=void 0===d?0:d,f=Kt({},this.contentSize,{left:n,top:s}),u=this.contentSize.top-this.offsetSize.top,p=this.contentSize.left-this.offsetSize.left;if(this.root.fixedLine&&!this.root.isDone){this.root.isDone=!0;for(var g,m=ee(this.root.fixedLine.elements);!(g=m()).done;){var b=g.value;b.setPosition(b,this.root.offsetSize),b.getBoxPosition()}}if(e)for(var y,v=ee(e.elements);!(y=v()).done;){var x=y.value;x.setPosition(x,f),x.style.left+=n+p+h,x.style.top+=s+u+c,x.getBoxPosition()}if(i)for(var w,_=ee(i);!(w=_()).done;)w.value.layout(f.top+u,f.left+p);return this.layoutBoxUpdate(f,t),this.layoutBox},e.getBoxState=function(t,e){return this.isBlock(t)||this.isBlock(e)},e.isBlock=function(t){return void 0===t&&(t=this),t&&"block"==t.style.display},e.isFlex=function(t){return void 0===t&&(t=this),t&&"flex"==t.style.display},e.isInFlow=function(){return!(this.isAbsolute||this.isFixed)},e.inFlexBox=function(t){return void 0===t&&(t=this),!!t.isInFlow()&&!!t.parent&&(!(!t.parent||"flex"!==t.parent.style.display)||void 0)},e.isInline=function(t){return void 0===t&&(t=this),t&&"inline-block"==t.style.display},e.contrastSize=function(t,e,i){var a=t;return i&&(a=Math.min(a,i)),e&&(a=Math.max(a,e)),a},e.measureText=function(t,e){var i=this.ctx.measureText(t),a=i.width,n=i.actualBoundingBoxAscent,o=i.actualBoundingBoxDescent;return{ascent:n,descent:o,width:a,fontHeight:n+o||.7*e+1}},e.getParentSize=function(t,e){if(void 0===t&&(t=this),void 0===e&&(e=!1),t&&t.parent){if(t.parent.contentSize.width)return t.parent.contentSize;if(e)return this.getParentSize(t.parent,e)}return null},e.getBoxWidthHeight=function(){var t=this,e=this.name,i=this.computedStyle,a=this.attributes,n=this.parent,o=void 0===n?{}:n,s=this.ctx,r=this.getChildren(),l=i.left,c=void 0===l?0:l,d=i.top,h=void 0===d?0:d,f=i.bottom,u=i.right,p=i.width,g=void 0===p?0:p,m=i.minWidth,b=i.maxWidth,y=i.minHeight,v=i.maxHeight,x=i.height,w=void 0===x?0:x,_=i.fontSize,k=i.fontWeight,S=i.fontFamily,D=i.fontStyle,P=i.position;i.textIndent;var C=i.lineClamp,I=i.lineHeight,z=i.padding,T=void 0===z?{}:z,L=i.margin,F=void 0===L?{}:L,B=i.border,E=(B=void 0===B?{}:B).borderWidth,M=void 0===E?0:E,j=i.borderRight,$=(j=void 0===j?{}:j).borderRightWidth,A=void 0===$?M:$,R=i.borderLeft,W=(R=void 0===R?{}:R).borderLeftWidth,O=void 0===W?M:W,N=o.contentSize&&o.contentSize.width,H=o.contentSize&&o.contentSize.height;if(ne(g)&&N&&(g=Jt(g,N)),ne(g)&&!N&&(g=null),ne(w)&&H&&(w=Jt(w,H)),ne(w)&&!H&&(w=null),ne(m)&&N&&(m=Jt(m,N)),ne(b)&&N&&(b=Jt(b,N)),ne(y)&&H&&(y=Jt(y,H)),ne(v)&&H&&(v=Jt(v,H)),i.padding&&N)for(var U in i.padding)Object.hasOwnProperty.call(T,U)&&(T[U]=Jt(T[U],N));var V=T.paddingRight,Y=void 0===V?0:V,G=T.paddingLeft,J=void 0===G?0:G;if(i.margin&&[F.marginLeft,F.marginRight].includes("auto"))if(g){var X=N&&N-g-Y-J-O-A||0;F.marginLeft==F.marginRight?F.marginLeft=F.marginRight=X/2:ae(F.marginLeft)?F.marginLeft=X:F.marginRight=X}else F.marginLeft=F.marginRight=0;var q=F.marginRight,Z=void 0===q?0:q,K=F.marginLeft,Q={width:g,height:w,left:0,top:0},tt=J+Y+O+A+(void 0===K?0:K)+Z;if(this.offsetWidth=tt,e==be&&!this.attributes.widths){var et=a.text||"";s.save(),s.setFonts({fontFamily:S,fontSize:_,fontWeight:k,fontStyle:D}),et.length,"\n"==et&&(et="",this.isBr=!0),(""+et).split("\n").map((function(e){var i=Array.from(e).map((function(e){var i=""+(/^[\u4e00-\u9fa5]+$/.test(e)?"cn":e)+S+_+k+D,a=_e.get(i);if(a)return{width:a,text:e};var n=t.measureText(e,_).width;return _e.set(i,n),{width:n,text:e}})),a=t.measureText(e,_),n=a.fontHeight,o=a.ascent,s=a.descent;t.attributes.fontHeight=n,t.attributes.ascent=o,t.attributes.descent=s,t.attributes.widths||(t.attributes.widths=[]),t.attributes.widths.push({widths:i,total:i.reduce((function(t,e){return t+e.width}),0)})})),s.restore()}if("image"==e&&null==g){var it=a.width,at=a.height;Q.width=this.contrastSize(Math.round(it*w/at)||0,m,b),this.layoutBoxUpdate(Q,i,0)}if(e==be&&null==g){var nt=this.attributes.widths,ot=Math.max.apply(Math,nt.map((function(t){return t.total})));o&&N>0&&(ot>N||this.isBlock(this))&&!this.isAbsolute&&!this.isFixed&&(ot=N),Q.width=this.contrastSize(ot,m,b),this.layoutBoxUpdate(Q,i,0)}if(e==be&&(o.style.flex||!this.attributes.lines)){var st=this.attributes.widths.length;this.attributes.widths.forEach((function(t){return t.widths.reduce((function(t,e,i){return t+e.width>Q.width?(st++,e.width):t+e.width}),0)})),st=C&&st>C?C:st,this.attributes.lines=st}if("image"==e&&null==w){var rt=a.width,lt=a.height;a.text,Q.height=this.contrastSize(Jt(Q.width*lt/rt)||0,y,v),this.layoutBoxUpdate(Q,i,1)}e==be&&null==w&&(I=Jt(I,_),Q.height=this.contrastSize(Jt(this.attributes.lines*I),y,v),this.layoutBoxUpdate(Q,i,1,!0)),!g&&o&&o.children&&N&&(!this.isFlex(o)||o.isFlexCalc)&&([ye,be].includes(e)&&this.isFlex()||e==ye&&this.isBlock(this)&&this.isInFlow())&&(Q.width=this.contrastSize(N-(o.isFlexCalc?0:tt),m,b),this.layoutBoxUpdate(Q,i)),g&&!ne(g)&&(Q.width=this.contrastSize(g,m,b),this.layoutBoxUpdate(Q,i,0)),w&&!ne(w)&&(Q.height=this.contrastSize(Q.height,y,v),this.layoutBoxUpdate(Q,i,1));var ct=0;if(r.length){var dt=null,ht=!1;r.forEach((function(e,a){e.getBoxWidthHeight();var n=r[a+1];if(n&&n.isInFlow()&&(e.next=n),e.isInFlow()&&!e.inFlexBox()){var o=t.getBoxState(dt,e);if(e.isBr)return ht=!0;t.line&&t.line.canIEnter(e)&&!o&&!ht?t.line.add(e):(ht=!1,(new pe).bind(e)),dt=e}else e.inFlexBox()?t.line&&(t.line.canIEnter(e)||"nowrap"==i.flexWrap)?t.line.add(e):(new me).bind(e):e.isFixed?t.root.fixedLine?t.root.fixedLine.fixedAdd(e):(new pe).fixedBind(e):t.fixedLine?t.fixedLine.fixedAdd(e):(new pe).fixedBind(e,1)})),this.lines&&(ct=this.lines.reduce((function(t,e){return t+e.height}),0))}var ft=0,ut=0;if(!g&&(this.isAbsolute||this.isFixed)&&N){var pt=P==ve?N:this.root.width,gt=pt-(ne(c)?Jt(c,pt):c)-(ne(u)?Jt(u,pt):u);ft=i.left?gt:this.lineMaxWidth}if(!w&&(null!=h?h:this.isAbsolute||this.isFixed&&H)){var mt=P==ve?H:this.root.height,bt=mt-(ne(h)?Jt(h,mt):h)-(ne(f)?Jt(f,mt):f);ut=i.top?bt:0}if(g&&!ne(g)||Q.width||(Q.width=ft||this.contrastSize((this.isBlock(this)&&!this.isInFlow()?N||o.lineMaxWidth:this.lineMaxWidth)||this.lineMaxWidth,m,b),this.layoutBoxUpdate(Q,i,0)),w||!ct&&!ut||(Q.height=ut||this.contrastSize(ct,y,v),this.layoutBoxUpdate(Q,i)),i.borderRadius&&this.borderSize&&this.borderSize.width)for(var yt in i.borderRadius)Object.hasOwnProperty.call(i.borderRadius,yt)&&(i.borderRadius[yt]=Jt(i.borderRadius[yt],this.borderSize.width));return this.layoutBox},e.layout=function(){return this.getBoxWidthHeight(),this.root.offsetSize=this.offsetSize,this.root.contentSize=this.contentSize,this.getBoxPosition(),this.offsetSize},t}(),Se=function(){var t,e,i,a,n,o,s=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],r=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],l=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],c=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],d=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],h=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],f=[],u=[],p=[],g=[],m=[],b=2;function y(t,e){var i;t>e&&(i=t,t=e,e=i),i=e,i*=e,i+=e,i>>=1,g[i+=t]=1}function v(t,i){var a;for(p[t+e*i]=1,a=-2;a<2;a++)p[t+a+e*(i-2)]=1,p[t-2+e*(i+a+1)]=1,p[t+2+e*(i+a)]=1,p[t+a+1+e*(i+2)]=1;for(a=0;a<2;a++)y(t-1,i+a),y(t+1,i-a),y(t-a,i-1),y(t+a,i+1)}function x(t){for(;t>=255;)t=((t-=255)>>8)+(255&t);return t}var w=[];function _(t,e,i,a){var n,o,s;for(n=0;n<a;n++)f[i+n]=0;for(n=0;n<e;n++){if(255!=(s=d[f[t+n]^f[i]]))for(o=1;o<a;o++)f[i+o-1]=f[i+o]^h[x(s+w[a-o])];else for(o=i;o<i+a;o++)f[o]=f[o+1];f[i+a-1]=255==s?0:h[x(s+w[0])]}}function k(t,e){var i;return t>e&&(i=t,t=e,e=i),i=e,i+=e*e,i>>=1,g[i+=t]}function S(t){var i,a,n,o;switch(t){case 0:for(a=0;a<e;a++)for(i=0;i<e;i++)i+a&1||k(i,a)||(p[i+a*e]^=1);break;case 1:for(a=0;a<e;a++)for(i=0;i<e;i++)1&a||k(i,a)||(p[i+a*e]^=1);break;case 2:for(a=0;a<e;a++)for(n=0,i=0;i<e;i++,n++)3==n&&(n=0),n||k(i,a)||(p[i+a*e]^=1);break;case 3:for(o=0,a=0;a<e;a++,o++)for(3==o&&(o=0),n=o,i=0;i<e;i++,n++)3==n&&(n=0),n||k(i,a)||(p[i+a*e]^=1);break;case 4:for(a=0;a<e;a++)for(n=0,o=a>>1&1,i=0;i<e;i++,n++)3==n&&(n=0,o=!o),o||k(i,a)||(p[i+a*e]^=1);break;case 5:for(o=0,a=0;a<e;a++,o++)for(3==o&&(o=0),n=0,i=0;i<e;i++,n++)3==n&&(n=0),(i&a&1)+!(!n|!o)||k(i,a)||(p[i+a*e]^=1);break;case 6:for(o=0,a=0;a<e;a++,o++)for(3==o&&(o=0),n=0,i=0;i<e;i++,n++)3==n&&(n=0),(i&a&1)+(n&&n==o)&1||k(i,a)||(p[i+a*e]^=1);break;case 7:for(o=0,a=0;a<e;a++,o++)for(3==o&&(o=0),n=0,i=0;i<e;i++,n++)3==n&&(n=0),(n&&n==o)+(i+a&1)&1||k(i,a)||(p[i+a*e]^=1)}}function D(t){var e,i=0;for(e=0;e<=t;e++)m[e]>=5&&(i+=3+m[e]-5);for(e=3;e<t-1;e+=2)m[e-2]==m[e+2]&&m[e+2]==m[e-1]&&m[e-1]==m[e+1]&&3*m[e-1]==m[e]&&(0==m[e-3]||e+3>t||3*m[e-3]>=4*m[e]||3*m[e+3]>=4*m[e])&&(i+=40);return i}function P(){var t,i,a,n,o,s=0,r=0;for(i=0;i<e-1;i++)for(t=0;t<e-1;t++)(p[t+e*i]&&p[t+1+e*i]&&p[t+e*(i+1)]&&p[t+1+e*(i+1)]||!(p[t+e*i]||p[t+1+e*i]||p[t+e*(i+1)]||p[t+1+e*(i+1)]))&&(s+=3);for(i=0;i<e;i++){for(m[0]=0,a=n=t=0;t<e;t++)(o=p[t+e*i])==n?m[a]++:m[++a]=1,r+=(n=o)?1:-1;s+=D(a)}r<0&&(r=-r);var l=r,c=0;for(l+=l<<2,l<<=1;l>e*e;)l-=e*e,c++;for(s+=10*c,t=0;t<e;t++){for(m[0]=0,a=n=i=0;i<e;i++)(o=p[t+e*i])==n?m[a]++:m[++a]=1,n=o;s+=D(a)}return s}var C=null;return{api:{get ecclevel(){return b},set ecclevel(t){b=t},get size(){return _size},set size(t){_size=t},get canvas(){return C},set canvas(t){C=t},getFrame:function(m){return function(m){var D,C,I,z,T,L,F,B;z=m.length,t=0;do{if(t++,I=4*(b-1)+16*(t-1),i=c[I++],a=c[I++],n=c[I++],o=c[I],z<=(I=n*(i+a)+a-3+(t<=9)))break}while(t<40);for(e=17+4*t,T=n+(n+o)*(i+a)+a,z=0;z<T;z++)u[z]=0;for(f=m.slice(0),z=0;z<e*e;z++)p[z]=0;for(z=0;z<(e*(e+1)+1)/2;z++)g[z]=0;for(z=0;z<3;z++){for(I=0,C=0,1==z&&(I=e-7),2==z&&(C=e-7),p[C+3+e*(I+3)]=1,D=0;D<6;D++)p[C+D+e*I]=1,p[C+e*(I+D+1)]=1,p[C+6+e*(I+D)]=1,p[C+D+1+e*(I+6)]=1;for(D=1;D<5;D++)y(C+D,I+1),y(C+1,I+D+1),y(C+5,I+D),y(C+D+1,I+5);for(D=2;D<4;D++)p[C+D+e*(I+2)]=1,p[C+2+e*(I+D+1)]=1,p[C+4+e*(I+D)]=1,p[C+D+1+e*(I+4)]=1}if(t>1)for(z=s[t],C=e-7;;){for(D=e-7;D>z-3&&(v(D,C),!(D<z));)D-=z;if(C<=z+9)break;v(6,C-=z),v(C,6)}for(p[8+e*(e-8)]=1,C=0;C<7;C++)y(7,C),y(e-8,C),y(7,C+e-7);for(D=0;D<8;D++)y(D,7),y(D+e-8,7),y(D,e-8);for(D=0;D<9;D++)y(D,8);for(D=0;D<8;D++)y(D+e-8,8),y(8,D);for(C=0;C<7;C++)y(8,C+e-7);for(D=0;D<e-14;D++)1&D?(y(8+D,6),y(6,8+D)):(p[8+D+6*e]=1,p[6+e*(8+D)]=1);if(t>6)for(z=r[t-7],I=17,D=0;D<6;D++)for(C=0;C<3;C++,I--)1&(I>11?t>>I-12:z>>I)?(p[5-D+e*(2-C+e-11)]=1,p[2-C+e-11+e*(5-D)]=1):(y(5-D,2-C+e-11),y(2-C+e-11,5-D));for(C=0;C<e;C++)for(D=0;D<=C;D++)p[D+e*C]&&y(D,C);for(T=f.length,L=0;L<T;L++)u[L]=f.charCodeAt(L);if(f=u.slice(0),T>=(D=n*(i+a)+a)-2&&(T=D-2,t>9&&T--),L=T,t>9){for(f[L+2]=0,f[L+3]=0;L--;)z=f[L],f[L+3]|=255&z<<4,f[L+2]=z>>4;f[2]|=255&T<<4,f[1]=T>>4,f[0]=64|T>>12}else{for(f[L+1]=0,f[L+2]=0;L--;)z=f[L],f[L+2]|=255&z<<4,f[L+1]=z>>4;f[1]|=255&T<<4,f[0]=64|T>>4}for(L=T+3-(t<10);L<D;)f[L++]=236,f[L++]=17;for(w[0]=1,L=0;L<o;L++){for(w[L+1]=1,F=L;F>0;F--)w[F]=w[F]?w[F-1]^h[x(d[w[F]]+L)]:w[F-1];w[0]=h[x(d[w[0]]+L)]}for(L=0;L<=o;L++)w[L]=d[w[L]];for(I=D,C=0,L=0;L<i;L++)_(C,n,I,o),C+=n,I+=o;for(L=0;L<a;L++)_(C,n+1,I,o),C+=n+1,I+=o;for(C=0,L=0;L<n;L++){for(F=0;F<i;F++)u[C++]=f[L+F*n];for(F=0;F<a;F++)u[C++]=f[i*n+L+F*(n+1)]}for(F=0;F<a;F++)u[C++]=f[i*n+L+F*(n+1)];for(L=0;L<o;L++)for(F=0;F<i+a;F++)u[C++]=f[D+L+F*o];for(f=u,D=C=e-1,I=T=1,B=(n+o)*(i+a)+a,L=0;L<B;L++)for(z=f[L],F=0;F<8;F++,z<<=1){128&z&&(p[D+e*C]=1);do{T?D--:(D++,I?0!=C?C--:(I=!I,6==(D-=2)&&(D--,C=9)):C!=e-1?C++:(I=!I,6==(D-=2)&&(D--,C-=8))),T=!T}while(k(D,C))}for(f=p.slice(0),z=0,C=3e4,I=0;I<8&&(S(I),(D=P())<C&&(C=D,z=I),7!=z);I++)p=f.slice(0);for(z!=I&&S(z),C=l[z+(b-1<<3)],I=0;I<8;I++,C>>=1)1&C&&(p[e-1-I+8*e]=1,I<6?p[8+e*I]=1:p[8+e*(I+1)]=1);for(I=0;I<7;I++,C>>=1)1&C&&(p[8+e*(e-7+I)]=1,I?p[6-I+8*e]=1:p[7+8*e]=1);return p}(m)},utf16to8:function(t){var e,i,a,n;for(e="",a=t.length,i=0;i<a;i++)(n=t.charCodeAt(i))>=1&&n<=127?e+=t.charAt(i):n>2047?(e+=String.fromCharCode(224|n>>12&15),e+=String.fromCharCode(128|n>>6&63),e+=String.fromCharCode(128|n>>0&63)):(e+=String.fromCharCode(192|n>>6&31),e+=String.fromCharCode(128|n>>0&63));return e},draw:function(t,i,a,n,o){i.drawView(a,n);var s=i.ctx,r=a.contentSize,l=r.width,c=r.height,d=r.left,h=r.top;n.borderRadius,n.backgroundColor;var f=n.color,u=void 0===f?"#000000":f;if(n.border,a.contentSize.left,a.borderSize.left,a.contentSize.top,a.borderSize.top,b=o||b,s){s.save(),i.setOpacity(n),i.setTransform(a,n);var p=Math.min(l,c);t=this.utf16to8(t);var g=this.getFrame(t),m=p/e;s.setFillStyle(u);for(var y=0;y<e;y++)for(var v=0;v<e;v++)g[v*e+y]&&s.fillRect(d+m*y,h+m*v,m,m);s.restore(),i.setBorder(a,n)}else console.warn("No canvas provided to draw QR code in!")}}}}(),De=$t,Pe=jt,Ce=At,Ie=Mt,ze=Bt.TOP,Te=Bt.MIDDLE,Le=Bt.BOTTOM,Fe=Et.LEFT,Be=Et.CENTER,Ee=Et.RIGHT,Me=function(){function t(t){var e,i=this;this.v="1.9.5.1",this.id=null,this.pixelRatio=1,this.width=0,this.height=0,this.sleep=1e3/30,this.count=0,this.isRate=!1,this.isDraw=!0,this.isCache=!0,this.fixed="",this.useCORS=!1,this.performance=!1,this.imageBus=[],this.createImage=function(t,e){return new Promise((function(a,n){var o=null;window||i.canvas.createImage?(o=i.canvas&&i.canvas.createImage?i.canvas.createImage():new Image,e&&o.setAttribute("crossOrigin","Anonymous"),o.src=t,o.onload=function(){a({width:o.naturalWidth||o.width,height:o.naturalHeight||o.height,path:o,src:this.src})},o.onerror=function(t){n(t)}):n({fail:"getImageInfo fail",src:t})}))},this.options=t,Object.assign(this,t),this.ctx=((e=t.context).setFonts=function(t){var i=t.fontFamily,a=void 0===i?"sans-serif":i,n=t.fontSize,o=void 0===n?14:n,s=t.fontWeight,r=void 0===s?"normal":s,l=t.fontStyle,c=void 0===l?"normal":l;Ut==Ct.MP_TOUTIAO&&(r="bold"==r?"bold":"",c="italic"==c?"italic":""),e.font=c+" "+r+" "+Math.round(o)+"px "+a},e.draw&&e.setFillStyle?e:Object.assign(e,{setStrokeStyle:function(t){e.strokeStyle=t},setLineWidth:function(t){e.lineWidth=t},setLineCap:function(t){e.lineCap=t},setFillStyle:function(t){e.fillStyle=t},setFontSize:function(t){e.font=String(t)+"px sans-serif"},setGlobalAlpha:function(t){e.globalAlpha=t},setLineJoin:function(t){e.lineJoin=t},setTextAlign:function(t){e.textAlign=t},setMiterLimit:function(t){e.miterLimit=t},setShadow:function(t,i,a,n){e.shadowOffsetX=t,e.shadowOffsetY=i,e.shadowBlur=a,e.shadowColor=n},setTextBaseline:function(t){e.textBaseline=t},createCircularGradient:function(){},draw:function(){}})),this.progress=0,this.root={width:t.width,height:t.height,fontSizeRate:1,fixedLine:null},this.size=this.root;var a=0;Object.defineProperty(this,"progress",{configurable:!0,set:function(t){a=t,i.lifecycle("onProgress",t/i.count)},get:function(){return a||0}})}return t.prototype.lifecycle=function(t,e){this.options.listen&&this.options.listen[t]&&this.options.listen[t](e)},t.prototype.setContext=function(t){t&&(this.ctx=t)},t.prototype.init=function(){if(this.canvas.height||Ct.WEB==Ut){this.ctx.setTransform(1,0,0,1,0,0);var t=this.size.height*this.pixelRatio,e=this.size.width*this.pixelRatio;this.canvas.height=t,this.canvas.width=e,this.ctx.scale(this.pixelRatio,this.pixelRatio)}},t.prototype.clear=function(){this.ctx.clearRect(0,0,this.size.width,this.size.height)},t.prototype.clipPath=function(t,e,i,a,n,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);var r=this.ctx;if(/polygon/.test(n)){var l=n.match(/-?\d+(rpx|px|%)?\s+-?\d+(rpx|px|%)?/g)||[];r.beginPath(),l.map((function(n){var o=n.split(" "),s=o[0],r=o[1];return[Jt(s,i)+t,Jt(r,a)+e]})).forEach((function(t,e){0==e?r.moveTo(t[0],t[1]):r.lineTo(t[0],t[1])})),r.closePath(),s&&r.stroke(),o&&r.fill()}},t.prototype.roundRect=function(t,e,i,a,n,o,s){if(void 0===o&&(o=!1),void 0===s&&(s=!1),!(n<0)){var r=this.ctx;if(r.beginPath(),n){var l=n||{},c=l.borderTopLeftRadius,d=void 0===c?n||0:c,h=l.borderTopRightRadius,f=void 0===h?n||0:h,u=l.borderBottomRightRadius,p=void 0===u?n||0:u,g=l.borderBottomLeftRadius,m=void 0===g?n||0:g;r.arc(t+i-p,e+a-p,p,0,.5*Math.PI),r.lineTo(t+m,e+a),r.arc(t+m,e+a-m,m,.5*Math.PI,Math.PI),r.lineTo(t,e+d),r.arc(t+d,e+d,d,Math.PI,1.5*Math.PI),r.lineTo(t+i-f,e),r.arc(t+i-f,e+f,f,1.5*Math.PI,2*Math.PI),r.lineTo(t+i,e+a-p)}else r.rect(t,e,i,a);r.closePath(),s&&r.stroke(),o&&r.fill()}},t.prototype.setTransform=function(t,e){var i=e.transform,a=e.transformOrigin,n=this.ctx,o=i||{},s=o.scaleX,r=void 0===s?1:s,l=o.scaleY,c=void 0===l?1:l,d=o.translateX,h=void 0===d?0:d,f=o.translateY,u=void 0===f?0:f,p=o.rotate,g=void 0===p?0:p,m=o.skewX,b=void 0===m?0:m,y=o.skewY,v=void 0===y?0:y,x=t.left,w=t.top,_=t.width,k=t.height;h=Jt(h,_)||0,u=Jt(u,k)||0;var S=Jt("0%",1),D=Jt("50%",1),P=Jt("100%",1),C={top:S,center:D,bottom:P},I={left:S,center:D,right:P};if(a=a.split(" ").filter((function(t,e){return e<2})).reduce((function(t,e){if(/\d+/.test(e)){var i=Jt(e,1)/(/px|rpx$/.test(e)?Gt(t.x)?k:_:1);return Gt(t.x)?Object.assign(t,{y:i}):Object.assign(t,{x:i})}return Gt(I[e])&&!Gt(t.x)?Object.assign(t,{x:I[e]}):Object.assign(t,{y:C[e]||.5})}),{}),(h||u)&&n.translate(h,u),(r||c)&&n.scale(r,c),g){var z=x+_*a.x,T=w+k*a.y;n.translate(z,T),n.rotate(g*Math.PI/180),n.translate(-z,-T)}(b||v)&&n.transform(1,Math.tan(v*Math.PI/180),Math.tan(b*Math.PI/180),1,0,0)},t.prototype.setBackground=function(t,e,i,a,n){var o=this.ctx;t&&"transparent"!=t?function(t){return!(!t||!t.startsWith("linear")&&!t.startsWith("radial"))}(t)?function(t,e,i,a,n,o){t.startsWith("linear")?function(t,e,i,a,n,o){for(var s=function(t,e,i,a,n){void 0===a&&(a=0),void 0===n&&(n=0);var o=t.match(/([-]?\d{1,3})deg/),s=o&&o[1]?parseFloat(o[1]):0;if(s>=360&&(s-=360),s<0&&(s+=360),0===(s=Math.round(s)))return{x0:Math.round(e/2)+a,y0:i+n,x1:Math.round(e/2)+a,y1:n};if(180===s)return{x0:Math.round(e/2)+a,y0:n,x1:Math.round(e/2)+a,y1:i+n};if(90===s)return{x0:a,y0:Math.round(i/2)+n,x1:e+a,y1:Math.round(i/2)+n};if(270===s)return{x0:e+a,y0:Math.round(i/2)+n,x1:a,y1:Math.round(i/2)+n};var r=Math.round(180*Math.asin(e/Math.sqrt(Math.pow(e,2)+Math.pow(i,2)))/Math.PI);if(s===r)return{x0:a,y0:i+n,x1:e+a,y1:n};if(s===180-r)return{x0:a,y0:n,x1:e+a,y1:i+n};if(s===180+r)return{x0:e+a,y0:n,x1:a,y1:i+n};if(s===360-r)return{x0:e+a,y0:i+n,x1:a,y1:n};var l,c=0,d=0,h=0,f=0;if(s<r||s>180-r&&s<180||s>180&&s<180+r||s>360-r){var u=s*Math.PI/180,p=s<r||s>360-r?i/2:-i/2,g=Math.tan(u)*p,m=s<r||s>180-r&&s<180?e/2-g:-e/2-g;c=-(h=g+(l=Math.pow(Math.sin(u),2)*m)),d=-(f=p+l/Math.tan(u))}return(s>r&&s<90||s>90&&s<90+r||s>180+r&&s<270||s>270&&s<360-r)&&(u=(90-s)*Math.PI/180,g=s>r&&s<90||s>90&&s<90+r?e/2:-e/2,p=Math.tan(u)*g,m=s>r&&s<90||s>270&&s<360-r?i/2-p:-i/2-p,c=-(h=g+(l=Math.pow(Math.sin(u),2)*m)/Math.tan(u)),d=-(f=p+l)),{x0:c=Math.round(c+e/2)+a,y0:d=Math.round(i/2-d)+n,x1:h=Math.round(h+e/2)+a,y1:f=Math.round(i/2-f)+n}}(n,t,e,i,a),r=s.x0,l=s.y0,c=s.x1,d=s.y1,h=o.createLinearGradient(r,l,c,d),f=n.match(/linear-gradient\((.+)\)/)[1],u=qt(f.substring(f.indexOf(",")+1)),p=0;p<u.colors.length;p++)h.addColorStop(u.percents[p],u.colors[p]);o.setFillStyle(h)}(e,i,a,n,t,o):t.startsWith("radial")&&function(t,e,i,a,n,o){for(var s=qt(n.match(/radial-gradient\((.+)\)/)[1]),r=Math.round(t/2)+i,l=Math.round(e/2)+a,c=o.createRadialGradient(r,l,0,r,l,Math.max(t,e)/2),d=0;d<s.colors.length;d++)c.addColorStop(s.percents[d],s.colors[d]);o.setFillStyle(c)}(e,i,a,n,t,o)}(t,e,i,a,n,o):o.setFillStyle(t):[Ct.MP_TOUTIAO,Ct.MP_BAIDU].includes(Ut)?o.setFillStyle("rgba(0,0,0,0)"):o.setFillStyle("transparent")},t.prototype.setShadow=function(t){var e=t.boxShadow,i=void 0===e?[]:e,a=this.ctx;if(i.length){var n=i[0],o=i[1],s=i[2],r=i[3];a.setShadow(n,o,s,r)}},t.prototype.setBorder=function(t,e){var i=this.ctx,a=t.width,n=t.height,o=t.left,s=t.top,r=e.border,l=e.borderBottom,c=e.borderTop,d=e.borderRight,h=e.borderLeft,f=e.borderRadius,u=e.lineCap,p=r||{},g=p.borderWidth,m=void 0===g?0:g,b=p.borderStyle,y=p.borderColor,v=l||{},x=v.borderBottomWidth,w=void 0===x?m:x,_=v.borderBottomStyle,k=void 0===_?b:_,S=v.borderBottomColor,D=void 0===S?y:S,P=c||{},C=P.borderTopWidth,I=void 0===C?m:C,z=P.borderTopStyle,T=void 0===z?b:z,L=P.borderTopColor,F=void 0===L?y:L,B=d||{},E=B.borderRightWidth,M=void 0===E?m:E,j=B.borderRightStyle,$=void 0===j?b:j,A=B.borderRightColor,R=void 0===A?y:A,W=h||{},O=W.borderLeftWidth,N=void 0===O?m:O,H=W.borderLeftStyle,U=void 0===H?b:H,V=W.borderLeftColor,Y=void 0===V?y:V,G=f||{},J=G.borderTopLeftRadius,X=void 0===J?f||0:J,q=G.borderTopRightRadius,Z=void 0===q?f||0:q,K=G.borderBottomRightRadius,Q=void 0===K?f||0:K,tt=G.borderBottomLeftRadius,et=void 0===tt?f||0:tt;if(l||h||c||d||r){var it=function(t,e,a){"dashed"==e?/mp/.test(Ut)?i.setLineDash([Math.ceil(4*t/3),Math.ceil(4*t/3)]):i.setLineDash([Math.ceil(6*t),Math.ceil(6*t)]):"dotted"==e&&i.setLineDash([t,t]),i.setStrokeStyle(a)},at=function(t,e,a,n,o,s,r,l,c,d,h,f,p,g,m){i.save(),i.setLineCap(m?"square":u),i.setLineWidth(f),it(f,p,g),i.beginPath(),i.arc(t,e,r,Math.PI*c,Math.PI*d),i.lineTo(a,n),i.arc(o,s,l,Math.PI*d,Math.PI*h),i.stroke(),i.restore()};if(i.save(),r&&!l&&!h&&!c&&!d)return i.setLineWidth(m),it(m,b,y),this.roundRect(o,s,a,n,f,!1,!!y),void i.restore();w&&at(o+a-Q,s+n-Q,o+et,s+n,o+et,s+n-et,Q,et,.25,.5,.75,w,k,D,N&&M),N&&at(o+et,s+n-et,o,s+X,o+X,s+X,et,X,.75,1,1.25,N,U,Y,I&&w),I&&at(o+X,s+X,o+a-Z,s,o+a-Z,s+Z,X,Z,1.25,1.5,1.75,I,T,F,N&&M),M&&at(o+a-Z,s+Z,o+a,s+n-Q,o+a-Q,s+n-Q,Z,Q,1.75,2,.25,M,$,R,I&&w)}},t.prototype.setOpacity=function(t){var e=t.opacity,i=void 0===e?1:e;this.ctx.setGlobalAlpha(i)},t.prototype.drawPattern=function(t,e,i){return Dt(this,void 0,void 0,(function(){var a=this;return Pt(this,(function(n){return[2,new Promise((function(n,o){a.drawView(e,i,!0,!1,!0);var s=a,r=s.ctx;s.canvas;var l,c,d=e.width,h=e.height,f=e.left,u=e.top,p=i||{},g=p.borderRadius,m=void 0===g?0:g,b=p.backgroundImage,y=p.backgroundRepeat,v=void 0===y?"repeat":y;b&&(l=t,c=r.createPattern(l.src,v),r.setFillStyle(c),a.roundRect(f,u,d,h,m,!0,!1),a.setBorder(e,i),n())}))]}))}))},t.prototype.drawView=function(t,e,i,a,n){void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===n&&(n=!0);var o=this.ctx,s=t.width,r=t.height,l=t.left,c=t.top,d=e||{},h=d.borderRadius,f=void 0===h?0:h,u=d.backgroundColor,p=void 0===u?"transparent":u,g=d.overflow;e.opacity&&this.setOpacity(e),this.setTransform(t,e),n&&(o.save(),this.setShadow(e)),i&&this.setBackground(p,s,r,l,c),e.clipPath?this.clipPath(l,c,s,r,e.clipPath,i,!1):this.roundRect(l,c,s,r,f,i,!1),n&&o.restore(),a&&this.setBorder(t,e),"hidden"==g&&o.clip()},t.prototype.drawImage=function(t,e,i,a){return void 0===e&&(e={}),void 0===i&&(i={}),void 0===a&&(a=!0),Dt(this,void 0,void 0,(function(){var n=this;return Pt(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(o,s){return Dt(n,void 0,void 0,(function(){var n,s,r,l,c,d,h,f,u,p,g,m,b,y,v,x,w,_,k,S,D=this;return Pt(this,(function(P){return n=this.ctx,s=i.borderRadius,r=void 0===s?0:s,l=i.backgroundColor,c=void 0===l?"transparent":l,d=i.objectFit,h=void 0===d?"fill":d,f=i.backgroundSize,u=void 0===f?"fill":f,p=i.objectPosition,g=i.backgroundPosition,m=i.boxShadow,i.backgroundImage&&(h=u,p=g),m&&this.drawView(e,Object.assign(i,{backgroundColor:c||m&&(c||"#ffffff")}),!0,!1,!0),b=e.width,y=e.height,v=e.left,x=e.top,n.save(),w=e.contentSize.left-e.borderSize.left,_=e.contentSize.top-e.borderSize.top,a||(this.setOpacity(i),this.setTransform(e,i),this.setBackground(c,b,y,v,x),this.roundRect(v,x,b,y,r,!!(r||!m&&c),!1)),v+=w,x+=_,n.clip(),k=function(t){if("fill"!==h){var i=function(t,e,i){var a=t.objectFit,n=t.objectPosition,o=e.width/e.height,s=i.width/i.height,r=1,l="contain",c="cover";a==l&&o>=s||a==c&&o<s?r=e.height/i.height:(a==l&&o<s||a==c&&o>=s)&&(r=e.width/i.width);var d=i.width*r,h=i.height*r,f=n||[],u=f[0],p=f[1],g=Gt(u)?Jt(u,e.width):(e.width-d)*(Xt(u)?Jt(u,1):{left:0,center:.5,right:1}[u||"center"]),m=Gt(p)?Jt(p,e.height):(e.height-h)*(Xt(p)?Jt(p,1):{top:0,center:.5,bottom:1}[p||"center"]),b=function(t,e){return[(t-g)/r,(e-m)/r]},y=b(0,0),v=y[0],x=y[1],w=b(e.width,e.height),_=w[0],k=w[1],S=Math.max,D=Math.min;return{sx:S(v,0),sy:S(x,0),sw:D(_-v,i.width),sh:D(k-x,i.height),dx:S(g,0),dy:S(m,0),dw:D(d,e.width),dh:D(h,e.height)}}({objectFit:h,objectPosition:p},e.contentSize,t),a=i.sx,o=i.sy,s=i.sh,r=i.sw,l=i.dx,c=i.dy,d=i.dh,f=i.dw;Ut==Ct.MP_BAIDU?n.drawImage(t.src,l+v,c+x,f,d,a,o,r,s):n.drawImage(t.src,a,o,r,s,l+v,c+x,f,d)}else n.drawImage(t.src,v,x,b,y)},S=function(){n.restore(),D.drawView(e,i,!1,!0,!1),o(1)},k(t),S(),[2]}))}))}))];case 1:return o.sent(),[2]}}))}))},t.prototype.drawText=function(t,e,i,a){var n=this,o=this.ctx,s=e.borderSize,r=e.contentSize,l=e.left,c=e.top,d=r.width,h=r.height,f=r.left-s.left||0,u=r.top-s.top||0,p=i.color,g=i.lineHeight,m=i.fontSize,b=i.fontWeight,y=i.fontFamily,v=i.fontStyle,x=i.textIndent,w=void 0===x?0:x,_=i.textAlign,k=i.textStroke,S=i.verticalAlign,D=void 0===S?Te:S,P=i.backgroundColor,C=i.lineClamp,I=i.backgroundClip,z=i.textShadow,T=i.textDecoration;if(w=Gt(w)?w:0,this.drawView(e,i,I!=Pe),g=Jt(g,m),t){o.save(),l+=f,c+=u;var L=a.fontHeight,F=a.descent,B=void 0===F?0:F,E=a.ascent,M=B+(void 0===E?0:E);switch(o.setFonts({fontFamily:y,fontSize:m,fontWeight:b,fontStyle:v}),o.setTextBaseline(Te),o.setTextAlign(_),I?this.setBackground(P,d,h,l,c):o.setFillStyle(p),_){case Fe:break;case Be:l+=.5*d;break;case Ee:l+=d}var j=a.lines*g,$=Math.ceil((h-j)/2);switch($<0&&($=0),D){case ze:break;case Te:c+=$;break;case Le:c+=2*$}var A=(g-L)/2,R=g/2,W=function(t){var e=o.measureText(t),i=e.actualBoundingBoxDescent,a=void 0===i?0:i,n=e.actualBoundingBoxAscent;return D==ze?{fix:M?void 0===n?0:n:R-A/2,lineY:M?0:A-A/2}:D==Te?{fix:M?R+a/4:R,lineY:M?0:A}:D==Le?{fix:M?g-a:R+A/2,lineY:M?2*A:A+A/2}:{fix:0,height:0,lineY:0}},O=function(t,e,i){var n=t;switch(_){case Fe:n+=i;break;case Be:n=(t-=i/2)+i;break;case Ee:n=t,t-=i}if(T){o.setLineWidth(m/13),o.beginPath();var s=.1*a.fontHeight;/\bunderline\b/.test(T)&&(o.moveTo(t,e+a.fontHeight+s),o.lineTo(n,e+a.fontHeight+s)),/\boverline\b/.test(T)&&(o.moveTo(t,e-s),o.lineTo(n,e-s)),/\bline-through\b/.test(T)&&(o.moveTo(t,e+.5*a.fontHeight),o.lineTo(n,e+.5*a.fontHeight)),o.closePath(),o.setStrokeStyle(p),o.stroke()}},N=function(t,e,i){var a=function(){o.setLineWidth(k.width),o.setStrokeStyle(k.color),o.strokeText(t,e,i)},s="outset";k&&k.type!==s?(o.save(),n.setShadow({boxShadow:z}),o.fillText(t,e,i),o.restore(),a()):k&&k.type==s?(o.save(),n.setShadow({boxShadow:z}),a(),o.restore(),o.save(),o.fillText(t,e,i),o.restore()):(n.setShadow({boxShadow:z}),o.fillText(t,e,i))};if(!a.widths||1==a.widths.length&&a.widths[0].total+w<=r.width){var H=W(t),U=H.fix,V=void 0===U?0:U,Y=H.lineY;return N(t,l+w,c+V),O(l+w,c+Y,a&&a.widths&&a.widths[0].total||a.text),c+=g,o.restore(),void this.setBorder(e,i)}for(var G=c,J=l,X="",q=0,Z=o.measureText("...").width,K=a.widths,Q=0;Q<K.length;Q++){var tt=K[Q].widths,et=0;X="",c+=1==(q+=1)?0:g,1==q&&w&&(et=w,J=l+w);for(var it=0;it<tt.length;it++){1!==q&&w&&(J=l);var at=tt[it],nt=at.width,ot=at.text,st=(tt[it+1]||{}).width;if(X+=ot,(et+=nt)+(void 0===st?0:st)+(0==q?w:0)+(q==C?Z:0)>r.width){q>=C&&(X+="…"),q++,et=0;var rt=W(X);V=rt.fix,Y=rt.lineY,N(X,J,c+V),O(J,c+Y,et),c+=g,X=""}else if(it==tt.length-1){Q!=K.length-1&&q==C&&Z+et<r.width&&(X+="…");var lt=W(X);V=lt.fix,Y=lt.lineY,N(X,J,c+V),O(J,c+Y,et)}if(c>G+h||q>C)break}}o.restore()}},t.prototype.source=function(t){return Dt(this,void 0,void 0,(function(){var e,i,a,n,o=this;return Pt(this,(function(s){switch(s.label){case 0:if(this.node=null,e=+new Date,"{}"==JSON.stringify(t))return[2];if(!t.type)for(i in t.type=Ie,t.styles=t.styles||t.css||{},t)["views","children","type","css","styles"].includes(i)||(t.styles[i]=t[i],delete t[i]);return t.styles.boxSizing||(t.styles.boxSizing="border-box"),[4,this.create(t)];case 1:return(a=s.sent())?(n=a.layout()||{},this.size=n,this.node=a,this.onEffectFinished().then((function(t){return o.lifecycle("onEffectSuccess",t)})).catch((function(t){return o.lifecycle("onEffectFail",t)})),this.performance&&console.log("布局用时："+(+new Date-e)+"ms"),[2,this.size]):[2,console.warn("no node")]}}))}))},t.prototype.getImageInfo=function(t){return this.imageBus[t]||(this.imageBus[t]=this.createImage(t,this.useCORS)),this.imageBus[t]},t.prototype.create=function(t,e){return Dt(this,void 0,void 0,(function(){function i(t,e,a){void 0===e&&(e={}),void 0===a&&(a=!0);var n=[];return t.forEach((function(t){var o,s=t.styles,r=void 0===s?{}:s,l=t.children,c=void 0===l?[]:l,d=t.text,h=void 0===d?"":d,f=t.type,u=void 0===f?"":f;o=St(a?St({},e):{},r);var p={},g={},m={};if(Object.keys(o).map((function(t){if(t.includes("padding")||t.includes("margin")){var e=function(t,e){var i,a,n,o,s=[o=(n=t).match(/([a-z]+)/)[1],de(n.split(o)[1])],r=s[0],l=s[1],c=e.split(" ");if(l)return(i={})[r+l]=e,i;if(c.length&&!l){var d=c[0],h=c[1],f=c[2],u=c[3];return(a={})[r+zt[0]]=d,a[r+zt[1]]=h||d,a[r+zt[2]]=f||d,a[r+zt[3]]=u||h||d,a}}(t,o[t]);Object.keys(e).map((function(t){t.includes("Left")?g[t]=e[t]:t.includes("Right")?m[t]=e[t]:p[t]=e[t]}))}})),o.textIndent&&(g.textIndent=o.textIndent,delete e.textIndent),""!==h){var b=Array.from(h);b.forEach((function(t,e){var i=Object.assign({},o,p);0===e?Object.assign(i,g):e==b.length-1&&Object.assign(i,m),delete i.padding,delete i.margin,n.push({type:"text",text:t,styles:i})}))}if(u==De||u==Ce)n.push(t);else if("block"===r.display&&c.length>0){var y=i(c,o,!1);t.children=y,t.flattened=!0,n.push(t)}else c.length>0&&(y=i(c,o,a),n=n.concat(y))})),n}var a,n,o,s,r,l,c,d,h,f,u,p,g,m,b,y,v,x,w,_,k;return Pt(this,(function(S){switch(S.label){case 0:if(!t)return[2];if(t.styles||(t.styles=t.css||{}),a=t.type,n=a==De,o=[Pe,Ce].includes(a),s="textBox"==a,r=t.styles||{},l=r.backgroundImage,c=r.display,n&&!t.src&&!t.url)return[2];if("none"==c)return[2];if(o||s){if(d=t.children,!t.text&&(!d||d&&!d.length))return[2];d&&d.length&&!t.flattened&&(h=i(t.children),t.type="view",t.children=h)}if(!(n||t.type==Ie&&l))return[3,4];f=n?t.src:"",u=/url\((.+)\)/.exec(l),l&&u&&u[1]&&(f=u[1]||""),S.label=1;case 1:return S.trys.push([1,3,,4]),[4,this.getImageInfo(f)];case 2:return p=S.sent(),g=p.width,m=p.height,!(b=p.path)&&n?[2]:(b&&(t.attributes=Object.assign(t.attributes||{},{width:g,height:m,path:b,src:b,naturalSrc:f})),[3,4]);case 3:return y=S.sent(),t.type!=Ie?[2]:(this.lifecycle("onEffectFail",St(St({},y),{src:f})),[3,4]);case 4:if(this.count+=1,v=new ke(t,e,this.root,this.ctx),!(x=t.views||t.children))return[3,8];w=0,S.label=5;case 5:return w<x.length?(_=x[w],[4,this.create(_,v)]):[3,8];case 6:(k=S.sent())&&v.add(k),S.label=7;case 7:return w++,[3,5];case 8:return[2,v]}}))}))},t.prototype.drawNode=function(t,e){return void 0===e&&(e=!1),Dt(this,void 0,void 0,(function(){var i,a,n,o,s,r,l,c,d,h,f,u,p,g,m,b,y,v,x,w,_,k,S;return Pt(this,(function(D){switch(D.label){case 0:return i=t.layoutBox,a=t.computedStyle,n=t.attributes,o=t.name,s=t.children,r=t.fixedLine,l=t.attributes,c=l.src,d=l.text,h=a.position,f=a.backgroundImage,u=a.backgroundRepeat,["fixed"].includes(h)&&!e?[2]:(this.ctx.save(),o!==Ie?[3,7]:c&&f?u?[4,this.drawPattern(n,i,a)]:[3,2]:[3,5]);case 1:return D.sent(),[3,4];case 2:return[4,this.drawImage(n,i,a,!1)];case 3:D.sent(),D.label=4;case 4:return[3,6];case 5:this.drawView(i,a),D.label=6;case 6:return[3,10];case 7:return o===De&&c?[4,this.drawImage(n,i,a,!1)]:[3,9];case 8:return D.sent(),[3,10];case 9:o===Pe?this.drawText(d,i,a,n):o===Ce&&Se.api&&Se.api.draw(d,this,i,a),D.label=10;case 10:if(this.progress+=1,g=(p=r||{}).beforeElements,m=p.afterElements,!g)return[3,14];b=0,y=g,D.label=11;case 11:return b<y.length?(S=y[b],[4,this.drawNode(S)]):[3,14];case 12:D.sent(),D.label=13;case 13:return b++,[3,11];case 14:if(!s)return[3,18];v=Object.values?Object.values(s):Object.keys(s).map((function(t){return s[t]})),x=0,w=v,D.label=15;case 15:return x<w.length?"absolute"===(S=w[x]).computedStyle.position?[3,17]:[4,this.drawNode(S)]:[3,18];case 16:D.sent(),D.label=17;case 17:return x++,[3,15];case 18:if(!m)return[3,22];_=0,k=m,D.label=19;case 19:return _<k.length?(S=k[_],[4,this.drawNode(S)]):[3,22];case 20:D.sent(),D.label=21;case 21:return _++,[3,19];case 22:return this.ctx.restore(),[2]}}))}))},t.prototype.render=function(t){var e=this;return void 0===t&&(t=30),new Promise((function(i,a){return Dt(e,void 0,void 0,(function(){var e,n,o,s,r,l,c,d,h,f;return Pt(this,(function(u){switch(u.label){case 0:return e=+new Date,this.init(),[4,(p=t,void 0===p&&(p=0),new Promise((function(t){return setTimeout(t,p)})))];case 1:u.sent(),u.label=2;case 2:if(u.trys.push([2,14,,15]),!this.node)return[3,12];if(n=this.root.fixedLine||{},o=n.beforeElements,s=n.afterElements,!o)return[3,6];r=0,l=o,u.label=3;case 3:return r<l.length?(h=l[r],[4,this.drawNode(h,!0)]):[3,6];case 4:u.sent(),u.label=5;case 5:return r++,[3,3];case 6:return[4,this.drawNode(this.node)];case 7:if(u.sent(),!s)return[3,11];c=0,d=s,u.label=8;case 8:return c<d.length?(h=d[c],[4,this.drawNode(h,!0)]):[3,11];case 9:u.sent(),u.label=10;case 10:return c++,[3,8];case 11:return i(this.node),[3,13];case 12:this.lifecycle("onEffectFail","node is empty"),u.label=13;case 13:return[3,15];case 14:return f=u.sent(),this.lifecycle("onEffectFail",f),a(f),[3,15];case 15:return this.performance&&console.log("渲染用时："+(+new Date-e-30)+"ms"),[2]}var p}))}))}))},t.prototype.onEffectFinished=function(){var t=this,e=Object.keys(this.imageBus).map((function(e){return t.imageBus[e]}));return Promise.all(e)},t.prototype.destroy=function(){this.node=[]},t.prototype.save=function(t){try{var e=t||{},i=e.fileType,a=void 0===i?"png":i,n=e.quality,o=void 0===n?1:n;return this.canvas.toDataURL("image/"+a,o)}catch(s){return this.lifecycle("onEffectFail","image cross domain"),s}},t}();Ct.WEB==Ut&&(window.Painter=Me);const je=Y({name:"lime-painter",mixins:[pt,lt("painter"),{}],data:()=>({use2dCanvas:!1,canvasHeight:150,canvasWidth:null,parentWidth:0,inited:!1,progress:0,firstRender:0,done:!1}),computed:{styles(){return`${this.size}${this.customStyle||""};`+(this.hidden&&"position: fixed; left: 1500rpx;")},canvasId(){return`l-painter${this._&&this._.uid||this._uid}`},size(){if(this.boardWidth&&this.boardHeight)return`width:${this.boardWidth}px; height: ${this.boardHeight}px;`},dpr(){return this.pixelRatio||w().pixelRatio},boardWidth(){const{width:t=0}=this.elements&&this.elements.css||this.elements||this,e=wt(t||this.width);return e||Math.max(e,wt(this.canvasWidth))},boardHeight(){const{height:t=0}=this.elements&&this.elements.css||this.elements||this,e=wt(t||this.height);return e||Math.max(e,wt(this.canvasHeight))},hasBoard(){return this.board&&Object.keys(this.board).length},elements(){return this.hasBoard?this.board:JSON.parse(JSON.stringify(this.el))}},created(){this.use2dCanvas="2d"===this.type&&!1},async mounted(){await mt(30),await this.getParentWeith(),this.$nextTick((()=>{setTimeout((()=>{this.$watch("elements",this.watchRender,{deep:!0,immediate:!0})}),30)}))},unmounted(){this.done=!1,this.inited=!1,this.firstRender=0,this.progress=0,this.painter=null,clearTimeout(this.rendertimer)},methods:{async watchRender(t,e){t&&t.views&&(this.firstRender?this.firstRender:t.views.length)&&Object.keys(t).length&&JSON.stringify(t)!=JSON.stringify(e)&&(this.firstRender=1,this.progress=0,this.done=!1,clearTimeout(this.rendertimer),this.rendertimer=setTimeout((()=>{this.render(t)}),this.beforeDelay))},async setFilePath(t,e){let i=t;const{pathType:a=this.pathType}=e||this;var n;return"base64"!=a||gt(t)?"url"==a&&gt(t)&&(i=await(n=t,new Promise(((t,e)=>{let i=n.split(",")[0].split(":")[1].split(";")[0],a=atob(n.split(",")[1]),o=new ArrayBuffer(a.length),s=new Uint8Array(o);for(let n=0;n<a.length;n++)s[n]=a.charCodeAt(n);t(URL.createObjectURL(new Blob([s],{type:i})))})))):i=await _t(t),e&&e.isEmit&&this.$emit("success",i),i},async getSize(t){const{width:e}=t.css||t,{height:i}=t.css||t;this.size||(e||i?(this.canvasWidth=e||this.canvasWidth,this.canvasHeight=i||this.canvasHeight,await mt(30)):await this.getParentWeith())},canvasToTempFilePathSync(t){this.stopWatch&&this.stopWatch(),this.stopWatch=this.$watch("done",(e=>{e&&(this.canvasToTempFilePath(t),this.stopWatch&&this.stopWatch())}),{immediate:!0})},getParentWeith(){return new Promise((t=>{P().in(this).select(".lime-painter").boundingClientRect().exec((e=>{const{width:i,height:a}=e[0]||{};this.parentWidth=Math.ceil(i||0),this.canvasWidth=this.parentWidth||300,this.canvasHeight=a||this.canvasHeight||150,t(e[0])}))}))},async render(t={}){if(!Object.keys(t).length)return console.error("空对象");this.progress=0,this.done=!1,await this.getSize(t);const e=await this.getContext();let{use2dCanvas:i,boardWidth:a,boardHeight:n,canvas:o,afterDelay:s}=this;if(i&&!o)return Promise.reject(new Error("canvas 没创建"));if(this.boundary={top:0,left:0,width:a,height:n},this.painter=null,!this.painter){const{width:i}=t.css||t;t.css,!i&&this.parentWidth&&Object.assign(t,{width:this.parentWidth});const s={context:e,canvas:o,width:a,height:n,pixelRatio:this.dpr,useCORS:this.useCORS,createImage:kt.bind(this),performance:this.performance,listen:{onProgress:t=>{this.progress=t,this.$emit("progress",t)},onEffectFail:t=>{this.$emit("faill",t)}}};this.painter=new Me(s)}const{width:r,height:l}=await this.painter.source(JSON.parse(JSON.stringify(t)));return this.boundary.height=this.canvasHeight=l,this.boundary.width=this.canvasWidth=r,await mt(this.sleep),await this.painter.render(),await new Promise((t=>this.$nextTick(t))),i||await this.canvasDraw(),s&&i&&await mt(s),this.$emit("done"),this.done=!0,this.isCanvasToTempFilePath&&this.canvasToTempFilePath().then((t=>{this.$emit("success",t.tempFilePath)})).catch((t=>{this.$emit("fail",new Error(JSON.stringify(t)))})),Promise.resolve({ctx:e,draw:this.painter,node:this.node})},canvasDraw(t=!1){return new Promise(((e,i)=>this.ctx.draw(t,(()=>setTimeout((()=>e()),this.afterDelay)))))},async getContext(){if(!this.canvasWidth)return this.$emit("fail","painter no size"),console.error("[lime-painter]: 给画板或父级设置尺寸"),Promise.reject();if(this.ctx&&this.inited)return Promise.resolve(this.ctx);const{type:t,use2dCanvas:e,dpr:i,boardWidth:a,boardHeight:n}=this,o=()=>new Promise((t=>{P().in(this).select(`#${this.canvasId}`).boundingClientRect().exec((e=>{if(e){const i=I(this.canvasId,this);if(this.inited||(this.inited=!0,this.use2dCanvas=!1,this.canvas=e),!i.measureText){let t=function(t){let e=0;for(let i=0;i<t.length;i++)t.charCodeAt(i)>0&&t.charCodeAt(i)<128?e++:e+=2;return e};i.measureText=e=>{let a=i.state&&i.state.fontSize||12;const n=i.__font;return n&&12==a&&(a=parseInt(n.split(" ")[3],10)),a/=2,{width:t(e)*a}}}this.ctx=i,t(this.ctx)}else console.error("[lime-painter] no node")}))}));return e?new Promise((e=>{P().in(this).select(`#${this.canvasId}`).node().exec((i=>{let{node:a}=i&&i[0]||{};if(a){const i=a.getContext(t);this.inited||(this.inited=!0,this.use2dCanvas=!0,this.canvas=a),this.ctx=i,e(this.ctx)}else console.error("[lime-painter]: no size")}))})):o()},canvasToTempFilePath(t={}){return new Promise((async(e,i)=>{const{use2dCanvas:a,canvasId:n,dpr:o,fileType:s,quality:r}=this;this.boundary;const l=Object.assign({canvasId:n,id:n,fileType:s,quality:r},t,{success:async i=>{try{const a=await this.setFilePath(i.tempFilePath||i,t),n=Object.assign(i,{tempFilePath:a});t.success&&t.success(n),e(n)}catch(a){this.$emit("fail",a)}}});if(a){l.canvas=this.canvas;try{const i=this.canvas.toDataURL(`image/${t.fileType||s}`.replace(/pg/,"peg"),t.quality||r);if(/data:,/.test(i))C(l,this);else{const a=await this.setFilePath(i,t);t.success&&t.success({tempFilePath:a}),e({tempFilePath:a})}}catch(c){t.fail&&t.fail(c),i(c)}}else C(l,this)}))}}},[["render",function(t,n,s,r,l,c){const d=z,h=b;return e(),i(h,{class:"lime-painter",ref:"limepainter"},{default:a((()=>[c.canvasId&&c.size?(e(),i(h,{key:0,style:o(c.styles)},{default:a((()=>[l.use2dCanvas?(e(),i(d,{key:0,class:"lime-painter__canvas",id:c.canvasId,type:"2d",style:o(c.size)},null,8,["id","style"])):(e(),i(d,{key:1,class:"lime-painter__canvas","canvas-id":c.canvasId,style:o(c.size),id:c.canvasId,width:c.boardWidth*c.dpr,height:c.boardHeight*c.dpr,hidpi:t.hidpi},null,8,["canvas-id","style","id","width","height","hidpi"]))])),_:1},8,["style"])):u("",!0),x(t.$slots,"default",{},void 0,!0)])),_:3},512)}],["__scopeId","data-v-b590c84e"]]),$e=p();var Ae,Re;const We=Y({components:{paypop:q},data:()=>({loadAdv:{mold:"info",page:"detail",positionSelf:"adv_place",config:[{title:"分类信息移动端信息流广告",page:"index"},{title:"分类信息移动端详情页内容广告",page:"detail",count:1}]},appShare:{},phoneData:{},navTop:$e.globalData.navTop,imgPath:$e.globalData.imgPath,imgVersion:$e.globalData.imgVersion,imgStaticPath:$e.globalData.imgStaticPath,userid:$e.globalData.userid,imgError:$e.globalData.imgError,userError:$e.globalData.userError,validdays:0,item:"",index:"",userinfo:{photo:!1},privateb:!1,needReload:!1,warningb:!1,infos:"",infoDetail:{typename:"分类信息",fxState:"",share:"",is_follow:"",hongprice:"",collect:"",collectnum:"",payPhoneState:0,tel:"",member:{userType:"",busID:"",userid:"",photo:"",nickname:!1,busiId:0,certifyState:""},id:"",pubdate1:"",isvalid:"",label:[],item:[],address:"",lng:"",lat:"",addrArr:"",video:"",imglist:[],pics:[],collectt:{collectCount:0,photo:[]},fabuCount:"",readInfo:"",shareInfo:"",rewardPrice:"",rewardCount:0,telNum:"",infonickname:"",desc:"",priceHongbao:"",countHongbao:0,hongbaoCount:0,titlenew:""},pageLoad:!1,currPage:1,loadingText:"上滑加载更多",hbShow:!1,hbmsg:"",hbFocus:!1,masterDomain:$e.globalData.masterDomain,cmtFocus:!1,commtList:[],cmtLoadEnd:!1,cmtLoad:!1,cmtPage:1,cmtContent:"",showRe:!1,rePage:1,reLoad:!1,replyList:[],relyAllCount:0,replyId:"",replyArr:{user:{nickname:""}},replyShow:!1,ErrAlert:"",showZan:!1,jubaoShow:!1,complainList:["垃圾广告","色情淫秽","政治反动","钓鱼诈骗","网络敲诈","内容侵权","其他"],complainInfo:{},first:!0,currency:{symbol:"￥",short:"元"},showSharePop:!1,infoId:0,fromShare:0,pullend:!1,lng:0,lat:0,distance:0,moldConfig:{},currIndx:0,hbState:0,intervalCurr:null,privateNumber_state:0,payPhoneState:$e.globalData.appConfig.cfg_payPhoneState?$e.globalData.appConfig.cfg_payPhoneState:0,userPhoneCheck:0,payInfo:{},showPayPop:!1,currentElementEvent:null,grayscale:"",recDataList:[],showNoData:!1,currPid:"",zanid:"",keyboardH:"",l:"",lab:{name:""},collectPhoto:"",inDetail:{id:""},cmt:{id:"",user:{userid:"",busiId:!1,photo:"",levelIcon:"",nickname:""},zan_has:!1,zan:0,content:"",lower:{count:"",list:[]},iphome:""},rInd:0,reply:{id:"",user:{nickname:""}},user:{photo:"",nickname:""},bidx:0,fidx:"",i:"",rel:{id:"",user:{photo:"",nickname:""},content:"",ftime:"",zan_has:"",zan:0,lower:{list:""}},n:"",lower:{id:"",user:{photo:"",nickname:""},member:{nickname:""},content:"",ftime:"",zan_has:"",zan:""},appConfig:{},iosMiniHide:!1,postWx:"",postCode:"",posterImg:"",postShow:!1,postExhib:!1,ajaxb:!1,platForm:$e.globalData.platForm,appBoolean:$e.globalData.appBoolean,appFullWh:$e.globalData.appFullWh,pages:{},advInfo:"",options:{}}),onLoad:function(t){(Ae=this).options=t,Ae.pages=$e.pageFn(J),-1==$e.globalData.wxprivate?$e.watchG("wxprivate",(function(e){Ae.wxprivate=e,e?Ae.privateb=!0:Ae.onload(t)})):$e.globalData.wxprivate?Ae.privateb=!0:Ae.onload(t),$e.globalData.moduleAdv.info&&$e.globalData.moduleAdv.detail?Ae.advInfo=$e.globalData.moduleAdv.info.detail.TencentGDT["mp-weixin"==Ae.platForm?"wxmini":"dymini"]:Ae.loadAdv.__this=Ae},onReady:function(){var t=setInterval((function(){$e.globalData.appConfig&&$e.globalData.appConfig.cfg_basehost&&(Ae.userid=$e.globalData.userid,Ae.privateNumber_state=$e.globalData.appConfig.cfg_privateNumber_state?$e.globalData.appConfig.cfg_privateNumber_state:0,Ae.payPhoneState=$e.globalData.appConfig.cfg_payPhoneState?$e.globalData.appConfig.cfg_payPhoneState:0,Ae.currency=$e.globalData.appConfig.currency,clearInterval(t))}),300);if($e.globalData.appConfig)Ae.appConfig=$e.globalData.appConfig;else{let t=setInterval((e=>{$e.globalData.appConfig&&(Ae.appConfig=$e.globalData.appConfig,clearInterval(t))}),100)}},onShow:function(){Ae.userid=$e.globalData.userid,Ae.userid,"web"!=this.platForm&&uni.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:t=>{Ae.shareAdd()}});try{var t=$e.globalData.lnglat;t?(Ae.lng=t.split(",")[0],Ae.lat=t.split(",")[1],Ae.getDataList()):$e.globalData.locationFn({type:"web"==Ae.platForm?"wgs84":"gcj02",success:t=>{Ae.lng=t.longitude||t.lng,Ae.lat=t.latitude||t.lat,$e.globalData.lnglat=`${Ae.lng},${Ae.lat}`,Ae.getDataList()},fail:t=>{Ae.getDataList()}})}catch(i){console.log("CatchClause",i),console.log("CatchClause",i),$e.globalData.locationFn({type:"web"==Ae.platForm?"wgs84":"gcj02",success:t=>{Ae.lng=t.longitude||t.lng,Ae.lat=t.latitude||t.lat,$e.globalData.lnglat=`${Ae.lng},${Ae.lat}`,Ae.getDataList()},fail:t=>{Ae.getDataList()}})}Ae.intervalCurr&&clearInterval(Ae.intervalCurr);var e=setInterval((function(){Ae.infoDetail.readInfo&&(console.log("信息已获取"),"1"==Ae.infoDetail.readInfo&&Ae.infoDetail.infonickname&&Ae.infoDetail.infonickname.length>0&&Ae.showLine(),clearInterval(e))}),1e3);this.needReload&&(this.needReload=!1,Ae.onload(Ae.options))},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){$e.reloadFn()},onReachBottom:function(){Ae.pageLoad||Ae.getDataList()},onShareAppMessage:function(t){var e=Ae.infoDetail;if($e.globalData.userid)var i="&fromShare="+$e.globalData.userid;else i="";return Ae.first&&i&&(Ae.first=!1),{title:e.Newtitle,path:`${Ae.pages.detail}?id=${e.id}${i}`,imageUrl:e.litpic?e.litpic:""}},onShareTimeline:function(){var t=Ae.infoDetail.litpic?Ae.infoDetail.litpic:Ae.infoDetail.imglist.length?Ae.infoDetail.imglist[0].path:Ae.moldConfig.sharePic;return{title:Ae.infoDetail.Newtitle,imageUrl:t}},methods:{onload(t){if(Ae.checkiOSMini(),t.access_token&&t.refresh_token){$e.globalData.userid=t.userid,T({key:"access_token",data:t.access_token}),T({key:"refresh_token",data:t.refresh_token});var e=Date.parse(new Date)/1e3+7200-20;T({key:"token_expired",data:e}),T({key:"userid",data:t.userid})}this.onLoadClone3389(t)},onLoadClone3389:function(t){var e=t.id,i=t.fromShare;Ae.infoId=e,Ae.fromShare=i&&"undefined"!=i?i:null,Ae.userid=$e.globalData.userid,Ae.privateNumber_state=$e.globalData.appConfig.cfg_privateNumber_state,Ae.grayscale="2"==$e.globalData.appConfig.sitePageGray?"grayscale":"",Ae.getInfoDetail(e,i),Ae.getComment()},initData(){Ae.userid=$e.globalData.userid,Ae.userinfo={},Ae.cmtLoadEnd=!1,Ae.cmtLoad=!1,Ae.cmtPage=1,Ae.cmtContent="",Ae.showRe=!1,Ae.rePage=1,Ae.reLoad=!1,Ae.replyId="",Ae.replyArr="",Ae.replyShow=!1,Ae.ErrAlert="",Ae.showZan=!1,Ae.showSharePop=!1,Ae.pageLoad=!1,Ae.currPage=1,Ae.loadingText="上滑加载更多"},linkTo(t,e=!1){$e.linkTo(t,e)},tologin(){$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`)},shareAdd(){var t="service=info&action=shareInfo&id="+Ae.infoDetail.id,e=$e.encodeUrl(t);Ae.$ajax.post({url:"include/ajax.php?"+e}).then((t=>{var e=t.data;100==e.state?Ae.infoDetail.share=1*Ae.infoDetail.share+1:(Ae.ErrAlert=e.info,setTimeout((function(){Ae.ErrAlert=""}),2e3))}))},shareGetMoneyFn(){if(Ae.first){var t=Ae.infoDetail;if(!Ae.userid||Ae.userid==t.userid)return Ae.$refs.webTop.shareFn(1),Ae.shareAdd(),!1;var e="&fromShare="+Ae.userid;if(Ae.shareAdd(),Ae.infoDetail.rewardPrice&&Ae.infoDetail.rewardPrice>0&&0!=Ae.infoDetail.fxState&&(Ae.showSharePop=!0),Ae.infoDetail.rewardPrice&&Ae.infoDetail.rewardPrice>0&&0==Ae.infoDetail.fxState){var i="service=info&action=sharePrice&uid="+e+"&proid="+Ae.infoDetail.id,a=$e.encodeUrl(i);Ae.$ajax.post({url:"include/ajax.php?"+a}).then((t=>{100==t.data.state&&(Ae.infoDetail.fxState="1",Ae.showSharePop=!0)}))}}},hideSharePop(){Ae.showSharePop=!1,Ae.$refs.webTop.shareFn(1)},inputBlur(t){Ae.replyShow&&(Ae.replyShow=!1)},care_fabu(t){var e=Ae.userid;if(null==e||""==e)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;Ae.infoDetail.is_follow?L({title:"确认不再关注？",content:"",cancelColor:"#666",confirmColor:"#F23D18",success(t){t.confirm&&Ae.careAccsee()}}):Ae.careAccsee()},careAccsee(){var t="service=member&action=followMember&id="+Ae.infoDetail.member.userid,e=$e.encodeUrl(t);Ae.$ajax.post({url:"include/ajax.php?"+e}).then((t=>{var e=t.data;100==e.state?Ae.infoDetail.is_follow=!Ae.infoDetail.is_follow:(Ae.ErrAlert=e.info,setTimeout((function(){Ae.ErrAlert=""}),2e3))}))},previewMedia(t){var e=[];Ae.infoDetail.imglist.forEach((function(t){e.push(t.path)})),$e.previewImage({app:{urls:e,current:e[t]},init:{urls:e,current:t}})},getDataList(){let t=Ae.currPage,e=Ae.pageLoad;if(e)return!1;e=!0,Ae.loadingText="加载中~";var i="service=info&action=ilist_v2&thumb=1&rec=1&page="+t+"&pageSize=20&lng="+Ae.lng+"&lat="+Ae.lat,a=$e.encodeUrl(i);Ae.$ajax.post({url:"include/ajax.php?"+a}).then((i=>{var a=i.data;if(e=!1,100==a.state){var n=a.info.list;Ae.recDataList=1==t?n:[...Ae.recDataList,...n],t++,t>a.info.pageInfo.totalPage&&(e=!0),Ae.pageLoad=e,Ae.currPage=t,Ae.loadingText=e?"没有更多了":"上滑加载更多"}else Ae.pageLoad=e,Ae.loadingText=a.info,Ae.showNoData=!0}))},async configData(){let t=await Ae.$ajax.post({url:$e.encodeUrl("include/ajax.php?"),data:{service:"info",action:"config"}});100==t.data.state&&(Ae.$set(Ae,"moldConfig",t.data.info),Ae.appShare={title:Ae.infoDetail.titlenew,litpic:Ae.infoDetail.litpic||(Ae.infoDetail.imglist.length>0?Ae.infoDetail.imglist[0].path:Ae.moldConfig.sharePic),description:`联系人：${Ae.infoDetail.member.nickname}`},$e.iosShare({title:Ae.infoDetail.titlenew,litpic:Ae.infoDetail.litpic||(Ae.infoDetail.imglist.length>0?Ae.infoDetail.imglist[0].path:Ae.moldConfig.sharePic),description:`联系人：${Ae.infoDetail.member.nickname}`}),$e.wxShareFn({title:Ae.infoDetail.Newtitle,imgUrl:Ae.infoDetail.litpic||(Ae.infoDetail.imglist.length>0?Ae.infoDetail.imglist[0].path:Ae.moldConfig.sharePic),description:`联系人：${Ae.infoDetail.member.nickname}`}),$e.globalData.moduleConfig.info=t.data.info)},getInfoDetail(t,e){var i="";e&&(i=e?"&fromShare="+e:"");var a="service=info&action=detail&id="+t+i,n=$e.encodeUrl(a);if(Ae.$ajax.post({url:"include/ajax.php?"+n}).then((t=>{var e=t.data;if(100==e.state){var i=Ae.countValid(e.info.valid);Ae.infoDetail=e.info,Ae.validdays=i,Ae.userPhoneCheck=e.info.userPhoneCheck,F({title:e.info.typename});let t=Number(e.info.lat),a=Number(e.info.lng);Ae.lng>0&&Ae.lat>0?Ae.distance=Ae.GetDistance(Number(Ae.lat),Number(Ae.lng),t,a):$e.globalData.locationFn({type:"web"==Ae.platForm?"wgs84":"gcj02",success:e=>{Ae.lng=e.longitude||e.lng,Ae.lat=e.latitude||e.lat,Ae.distance=Ae.GetDistance(Number(Ae.lat),Number(Ae.lng),t,a),$e.globalData.lnglat=`${Ae.lng},${Ae.lat}`},fail:t=>{Ae.distance=0}}),Ae.complainInfo={service:"member",template:"complain",module:"info",dopost:"detail",aid:e.info.id},Ae.configData()}else Ae.infos="信息不存在或已经删除~",setTimeout((t=>{"web"==Ae.platForm?location.href=`${Ae.masterDomain}${window.pathname}${Ae.pages.index}`:B({url:"/pages/packages/info/index/index"})}),3e3)})),Ae.userid){var o="service=member&action=detail&id="+Ae.userid,s=$e.encodeUrl(o);Ae.$ajax.post({url:"include/ajax.php?"+s}).then((t=>{var e=t.data;100==e.state&&(Ae.userinfo=e.info)}))}},countValid(t){var e=Date.parse(new Date),i=0;return t>(e/=1e3)&&(i=parseInt((t-e)/86400)),i},showHB(){var t=Ae.userid;if(null==t||""==t)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;Ae.hbState=Ae.infoDetail.hbState,Ae.infoDetail.hongbaoCount<=0&&3!=Ae.infoDetail.hbState&&(Ae.hbState=3),Ae.hbShow=!0},hideHbPop(){Ae.hbShow=!1},msgOn(t){Ae.hbmsg=t.detail.value},getHb(){var t=Ae.userid;if(null==t||""==t)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;if(Ae.infoDetail.desc){var e=Ae.hbmsg;if(!("2"!=Ae.infoDetail.hbState||e&&""!=e))return Ae.ErrAlert="请输入红包口令",setTimeout((function(){Ae.ErrAlert="",Ae.hbFocus=!0}),1500),!1;if(e!=Ae.infoDetail.desc)return Ae.ErrAlert="红包口令错误，请重新输入",Ae.hbmsg="",setTimeout((function(){Ae.ErrAlert="",Ae.hbFocus=!0}),1500),!1}if(t==Ae.infoDetail.member.userid)return Ae.ErrAlert="自己不能参与活动哦",setTimeout((function(){Ae.ErrAlert=""}),1500),!1;var i="service=info&action=robHongBao&desc="+encodeURIComponent(Ae.hbmsg)+"&uid="+Ae.userid+"&id="+Ae.infoDetail.id,a=$e.encodeUrl(i);Ae.$ajax.post({url:"include/ajax.php?"+a}).then((t=>{var e=t.data;100==e.state?(Ae.hbState=1,Ae.infoDetail.hongprice=e.info):(Ae.ErrAlert=e.info,Ae.hbState=Ae.infoDetail.hbState,setTimeout((function(){Ae.ErrAlert=""}),1500))}))},getComment(){var t=Ae.cmtLoad;if(t)return!1;t=!0;var e="service=member&action=getComment&pageSize=10&son=1&type=info-detail&aid="+Ae.infoId+"&page="+Ae.cmtPage,i=$e.encodeUrl(e);Ae.$ajax.post({url:"include/ajax.php?"+i}).then((e=>{var i=e.data;t=!1,Ae.cmtLoad=t,100==i.state?(1==Ae.cmtPage?Ae.commtList=i.info.list:Ae.commtList=[...Ae.commtList,...i.info.list],Ae.cmtPage++,Ae.cmtPage=Ae.cmtPage,Ae.cmtPage>i.info.pageInfo.totalPage&&(Ae.cmtLoad=!0,Ae.cmtLoadEnd=!0)):Ae.cmtLoadEnd=!0}))},commtFocus(){var t=Ae.userid;if(null==t||"undefined"==t)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;var e=P().in(Ae);e.selectViewport().scrollOffset(),e.select(".commBox").boundingClientRect(),e.exec((function(t){var e=t[0].scrollTop+t[1].top-400;E({scrollTop:e,duration:300}),setTimeout((function(){Ae.cmtFocus=!0}),300)}))},fabuBtn(){var t=Ae.userid;if(null==t||"undefined"==t)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;Ae.linkTo($e.addUrlParam($e.globalData.appConfig.cfg_user_index+"/info.html"))},showReplyBox(t){var e=t.currentTarget.dataset.id;Ae.reLoad=!1,Ae.showRe=!0,Ae.currPid=e,Ae.getReplyList()},getReplyList(){if(Ae.reLoad)return!1;Ae.reLoad=!0;var t=Ae.rePage;if(Ae.currPid){var e="service=member&action=getChildCommenton&pid="+Ae.currPid+"&page="+t+"&pageSize=10",i=$e.encodeUrl(e);Ae.$ajax.post({url:"include/ajax.php?"+i}).then((e=>{var i=e.data;if(100==i.state){Ae.relyAllCount=i.info.pageInfo.totalCount_all,Ae.replyList=1==t?JSON.parse(JSON.stringify(i.info.list)):[...Ae.replyList,...JSON.parse(JSON.stringify(i.info.list))];for(var a=Ae.replyList,n=0;n<a.length;n++)if(a[n].lower&&a[n].lower.list){var o=a[n];if(o.lower&&o.lower.list&&o.lower.list.length>0){var s=a.length+o.lower.list.length;a[n].lower.list=Ae.spliceArr(o.lower.list,s)}}t++,Ae.rePage=t,Ae.reLoad=!1,t>i.info.pageInfo.totalPage&&(Ae.reLoad=!0)}}))}},hideReplyBox(){Ae.showRe=!1},spliceArr(t,e){for(var i=[],a=0;a<t.length;a++){var n=t[a];if(i.push(n),n.lower&&n.lower.list&&n.lower.list.length>0){var o=Ae.spliceArr(n.lower.list,e+n.lower.list.length);i=[...i,...o]}}return e+=t.length,i},checkReply(){Ae.replyId="",Ae.replyShow=!1},showJBbox(){Ae.jubaoShow=!0,Ae.$refs.complaint.phoneAreaData()},submitReply(t){var e=t.detail.value,i=Ae.userid;if(null==i||"undefined"==i)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;if(""==e)return Ae.ErrAlert="请输入内容",setTimeout((function(){Ae.ErrAlert=""}),2e3),!1;var a="service=member&action=sendComment&type=info-detail&aid="+Ae.infoId+"&content="+e+"&check=1";Ae.replyId&&(a="service=member&action=replyCommenton&id="+Ae.replyId+"&content="+e+"&check=1"),Ae.cmtContent="";var n=$e.encodeUrl(a);Ae.$ajax.post({url:"include/ajax.php?"+n}).then((t=>{var e=t.data;100==e.state?(Ae.ErrAlert="发布成功",Ae.cmtContent="",setTimeout((function(){Ae.ErrAlert=""}),2e3),Ae.replyId?(Ae.reLoad=!1,Ae.getReplyList()):(Ae.cmtLoad=!1,Ae.cmtLoadEnd=!1,Ae.cmtPage=1,Ae.getComment())):(Ae.ErrAlert=e.info,Ae.cmtContent="",setTimeout((function(){Ae.ErrAlert=""}),2e3))}))},focuReBox(t){var e=t.currentTarget.dataset;Ae.replyId=e.id,Ae.replyArr=e.obj,Ae.replyShow=!0},goLink(t){var e=t.currentTarget.dataset;if(0==e.no)return!1;if("ucenter"==e.type){var i=e.userid;i&&"undefined"!=i&&Ae.linkTo($e.addUrlParam($e.globalData.masterDomain+"/user/"+i))}else if("manage"==e.type)Ae.linkTo($e.addUrlParam($e.globalData.appConfig.cfg_user_index+"/manage-info.html?id="+Ae.infoId));else{var a=e.url;Ae.linkTo($e.addUrlParam(a))}},zan_info(t){var e=t.currentTarget.dataset.rid,i=t.currentTarget.dataset.zan,a=t.currentTarget.dataset.type,n=t.currentTarget.dataset.index,o=Ae.userid;if(Ae.zanid=e,null==o||"undefined"==o)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;var s="service=member&action=dingComment&id="+e+"&type="+("1"==i?"del":"add"),r=$e.encodeUrl(s);if("1"==a)Ae.commtList[n].zan_has="1"==i?"0":"1",Ae.commtList=Ae.commtList;else if("2"==a)Ae.replyList[n].zan_has="1"==i?"0":"1",Ae.replyList=Ae.replyList;else{var l=t.currentTarget.dataset.pind;Ae.replyList[l].lower.list[n].zan_has="1"==i?"0":"1",Ae.replyList=Ae.replyList}"0"==i&&(Ae.showZan=!0,setTimeout((function(){Ae.showZan=!1}),1e3)),Ae.$ajax.post({url:"include/ajax.php?"+r}).then((e=>{var o=e.data;if(100==o.state)if("1"==a)"1"!=i?setTimeout((function(){Ae.commtList[n].zan=Number(Ae.commtList[n].zan)+("1"==i?-1:1),Ae.commtList=Ae.commtList}),1e3):(Ae.commtList[n].zan=Number(Ae.commtList[n].zan)+("1"==i?-1:1),Ae.commtList=Ae.commtList);else if("2"==a)"1"!=i?setTimeout((function(){Ae.replyList[n].zan=Number(Ae.replyList[n].zan)+("1"==i?-1:1),Ae.replyList=Ae.replyList}),1e3):(Ae.replyList[n].zan=Number(Ae.replyList[n].zan)+("1"==i?-1:1),Ae.replyList=Ae.replyList);else{var s=t.currentTarget.dataset.pind;Ae.replyList[s].lower.list[n].zan=Number(Ae.replyList[s].lower.list[n].zan)+("1"==i?-1:1),Ae.replyList=Ae.replyList}else{if("1"==a)Ae.commtList[n].zan_has="1"==i?"1":"0",Ae.commtList=Ae.commtList;else if("2"==a)Ae.replyList[n].zan_has="1"==i?"1":"0",Ae.replyList=Ae.replyList;else{s=t.currentTarget.dataset.pind;Ae.replyList[s].lower.list[n].zan_has="1"==i?"1":"0",Ae.replyList=Ae.replyList}Ae.ErrAlert=o.info,setTimeout((function(){Ae.ErrAlert=""}),1500)}}))},shoucang(t){var e=Ae.userid,i=Ae.infoDetail.collect;if(null==e||""==e)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;var a=i?"del":"add";i||(Ae.zanid="",Ae.showZan=!0,setTimeout((function(){Ae.showZan=!1}),2e3));var n="service=member&action=collect&module=info&temp=detail&id="+Ae.infoId+"&type="+a,o=$e.encodeUrl(n);Ae.$ajax.post({url:"include/ajax.php?"+o}).then((t=>{var e=t.data;100==e.state?(Ae.infoDetail.collect="del"==a?0:1,Ae.ErrAlert="del"==a?"已取消收藏":"收藏成功",Ae.infoDetail.collect=Ae.infoDetail.collect,Ae.infoDetail.collectnum=1*Ae.infoDetail.collectnum+("del"==a?-1:1),Ae.ErrAlert=Ae.ErrAlert,setTimeout((function(){Ae.ErrAlert=""}),2e3)):(Ae.ErrAlert=e.info,setTimeout((function(){Ae.ErrAlert=""}),2e3))}))},callPhone(t){var e=t.currentTarget.dataset.tel,i=$e.globalData.userid;if(null==i||""==i)return $e.globalData.userid=null,Ae.userid="",Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoId}`),!1;if(t.currentTarget.dataset.info.payPhoneState||!Ae.payPhoneState)M({title:"获取中..."}),Ae.currentElementEvent=null,$e.callPhone(this,e,t.currentTarget.dataset);else{if(this.iosMiniHide)return this.showiOSPayMsg(),!1;M({title:"获取中..."}),Ae.currentElementEvent=t,Ae.getPhonePayAmount(t)}},keepToCall(t,e){t&&t.fromAdv&&1==t.fromAdv||(Ae.infoDetail.payPhoneState=1,Ae.infoDetail.tel=t.detail.phone||t.detail.info),M({title:"获取中..."}),$e.callPhone(Ae,t.detail,Ae.currentElementEvent.currentTarget.dataset)},getPhonePayAmount(t){var e=t.currentTarget.dataset.module,i=t.currentTarget.dataset.temp,a="service=siteConfig&action=payPhoneDeal&aid="+t.currentTarget.dataset.aid+"&temp="+i+"&module="+e,n=$e.encodeUrl(a);Ae.$ajax.post({url:"include/ajax.php?"+n}).then((t=>{var e=t.data;j(),100==e.state&&(Ae.payInfo=e.info,$e.globalData.appConfig&&$e.globalData.appConfig.cfg_payPhone&&("mp-weixin"==Ae.platForm&&$e.globalData.appConfig.cfg_payPhone.wxmini||"web"==Ae.platForm&&$e.globalData.appBoolean&&window.Android&&$e.globalData.appConfig.cfg_payPhone.tencentGDP_app_id&&$e.globalData.appConfig.cfg_payPhone.tencentGDP_placement_id)?Ae.$refs.privatenumber.showRewardPop=!0:Ae.directTopay())}))},directTopay(){Ae.showPayPop=!0,Ae.$refs.pay.payCutDown(Ae.payInfo,Ae.payInfo.timeout)},bindUserPhoneNumber:function(t){let e=$e.globalData.appConfig.cfg_user_index;Ae.linkTo(e+"/security-chphone.html")},useOtherPhoneNumber:function(t){$e.useOtherPhoneNumber(this,t)},chatTo(t){var e=t.currentTarget.dataset.id,i=Ae.userid;if(null==i||""==i)return Ae.needReload=!0,$e.tologin(`${Ae.pages.detail}?id=${Ae.infoDetail.id}`),!1;let a=Ae.infoDetail.litpic||(Ae.infoDetail.imglist.length>0?Ae.infoDetail.imglist[0].path:"");$e.chatTo({title:Ae.infoDetail.titlenew,imgUrl:a,link:`${Ae.masterDomain}/info/detail?id=${Ae.infoDetail.id}`,mod:"info",toUserid:e})},imgLoad(t){var e=t.currentTarget.dataset.index,i=t.detail.width/t.detail.height;Ae.recDataList[e].imgScale=i,Ae.recDataList=Ae.recDataList},GetDistance:function(t,e,i,a){var n=t*Math.PI/180,o=i*Math.PI/180,s=n-o,r=e*Math.PI/180-a*Math.PI/180,l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(r/2),2)));return l*=6378.137,l=(l=Math.round(1e4*l)/1e4)<1?parseInt(1e3*l)+"m":l>1&&l<99.9?l.toFixed(1)+"km":parseInt(l)+"km"},showLine(){var t=Ae.infoDetail.infonickname,e=setInterval((function(){setTimeout((function(){Ae.currIndx=Ae.currIndx+1>=t.length?0:Ae.currIndx+1}),4e3)}),5e3);Ae.intervalCurr=e},openMap(t){var e=t.currentTarget.dataset,i=e.lng,a=e.lat,n=e.address;let o=Ae.infoDetail.title;for(;o.match(/<[/](\S*)>/);)o=o.replace(/<([^>]*)>/,"");$e.openMap({lat:a,lng:i,address:n,title:o})},onKeyboardChange(t){Ae.keyboardH=t.detail.height},getCommentList(){console.log("占位：函数 getCommentList 未声明")},test(){console.log("占位：函数 test 未声明")},clickPrivateNumber(){console.log("占位：函数 clickPrivateNumber 未声明")},checkiOSMini(){const t=this;t.iosMiniHide=$e.globalData.iOSMiniPay_forbid,$e.globalData.appConfig||$e.essentialData((function(e){t.iosMiniHide=e.iOSMiniPay_forbid}))},showiOSPayMsg(){L({title:"温馨提示",content:$e.globalData.iosMiniPay_msg,showCancel:!1,success:function(t){t.confirm&&console.log("用户点击确定")}})},createPosterFn(t,e){if(Ae.posterImg&&1!=t)Ae.postShow=!0;else if(0==t){M({title:"海报生成中"}),Ae.postShow=!0,Ae.ajaxb=!0;let t=Ae.userid?"fromShare="+Ae.userid:"",e=`${"web"==Ae.platForm?window.location.href:`${Ae.masterDomain}/info/detail?id=${Ae.infoDetail.id}${t}`}&${t}`,i={service:"siteConfig",action:"getWeixinQrPost",module:"info",type:"detail",aid:Ae.infoDetail.id,title:Ae.infoDetail.titlenew,description:`联系人：${Ae.infoDetail.member.nickname}`,imgUrl:Ae.infoDetail.imglist.length>0?Ae.infoDetail.imglist[0].path:"",link:Ae.infoDetail.url||e};Ae.$ajax.post({url:$e.encodeUrl("include/ajax.php?"),data:i}).then((t=>{100==t.data.state?(console.log(t.data.info),t.data.info.includes("https")?Ae.postWx=t.data.info:t.data.info.includes("http")?Ae.postCode=t.data.info:Ae.postCode=e):Ae.postCode=e,Ae.ajaxb=!1}))}else Ae.ajaxb||(j(),Ae.postExhib=!0,Ae.posterImg=e)},savePosterFn(){Ae.appBoolean&&($("huoniao_poster",Ae.posterImg),window.setupWebViewJavascriptBridge((function(t){t.callHandler("saveImage",{value:"huoniao_poster"},(function(){}))})))},warnFn(t=2e3){Ae.warningb=!0,clearTimeout(Re),Re=setTimeout((t=>{Ae.warningb=!1}),t)}},watch:{infos(t,e){""!=t&&(Ae.warnFn(),setTimeout((t=>{Ae.infos=""}),2200))},postShow(t,e){"web"==Ae.platForm&&(document.body.style.overflow=t?"hidden":"auto")},replyList(t,e){if(t)for(var i=0;i<t.length;i++)if(t[i].lower&&t[i].lower.list)for(var a=0;a<t[i].lower.list.length;a++){var n=t[i].lower.list[a];n.lower&&n.lower.list&&n.lower.list.length>0&&(t[i].lower.list=[...t[i].lower.list,...Ae.spliceArr(n.lower.list)])}}}},[["render",function(p,v,x,w,_,k){const S=G(t("webTop"),X),D=G(t("public_header"),Z),P=m,C=b,I=g,z=G(t("mp-html"),it),T=O,L=N,F=y,B=H,E=U,M=V("paypop"),j=G(t("privatenumber"),K),$=G(t("private_tip"),Q),Y=G(t("complain"),st),J=G(t("l-painter-text"),dt),q=G(t("l-painter-view"),ht),tt=G(t("l-painter-image"),ft),at=G(t("l-painter-qrcode"),ut),nt=G(t("l-painter"),je),ot=G(t("popWarn"),et);return e(),i(C,{style:{height:"100%"}},{default:a((()=>["web"==_.platForm&&!_.appBoolean||_.appFullWh?(e(),i(S,{key:0,title:_.infoDetail.typename,appShare:_.appShare,index:!1,module:"info",class:"webTop",onPoster:v[0]||(v[0]=t=>k.createPosterFn(0)),style:o(`padding-top:${_.appFullWh}px`),ref:"webTop"},null,8,["title","appShare","style"])):u("",!0),n(C,{class:"pageBox"},{default:a((()=>["mp-weixin"==_.platForm?(e(),i(D,{key:0,headeBgImg:!1,pullend:_.pullend,headerTitle:_.infoDetail.typename},null,8,["pullend","headerTitle"])):u("",!0),n(C,{class:h("pageContainer hbHide")},{default:a((()=>[n(C,{class:"detailBox whiteCon"},{default:a((()=>[n(C,{class:h("userBox "+_.grayscale)},{default:a((()=>[n(C,{class:"userInfo linkTo","data-url":"2"==_.infoDetail.member.userType&&"0"!=_.infoDetail.member.busID?`${_.pages.business}?id=${_.infoDetail.member.busID}`:_.masterDomain+"/user/"+_.infoDetail.member.userid,"data-type":"2"==_.infoDetail.member.userType?"1":"2","data-no":_.infoDetail.member&&_.infoDetail.member.userid?1:0,onClick:k.goLink},{default:a((()=>[n(C,{class:"userPhoto"},{default:a((()=>[n(P,{src:_.infoDetail.member.photo||_.userError,class:"loadingImg",onError:v[1]||(v[1]=t=>_.infoDetail.member.photo=_.userError)},null,8,["src"])])),_:1}),n(C,{class:"userDetail"},{default:a((()=>[_.infoDetail.id?(e(),i(C,{key:0,class:"h2"},{default:a((()=>[r(f(_.infoDetail.member.nickname?_.infoDetail.member.nickname:"用户已注销"),1)])),_:1})):(e(),i(C,{key:1,class:"h2"},{default:a((()=>[r("加载中")])),_:1})),n(C,{class:"ptextBox"},{default:a((()=>[n(C,{class:"ptext"},{default:a((()=>[r(f(_.infoDetail.pubdate1),1)])),_:1}),n(C,{class:"validText"},{default:a((()=>[_.validdays>1e3?(e(),i(C,{key:0,class:"ptext"},{default:a((()=>[r("长期有效")])),_:1})):(e(),i(C,{key:1,class:"ptext"},{default:a((()=>[r("有效期"+f(_.validdays)+"天",1)])),_:1})),_.infoDetail&&_.infoDetail.member&&_.userid==_.infoDetail.member.userid&&null!=_.userid&&_.validdays<1e3?A((e(),i(C,{key:2,class:"ptext valid",onClick:s(k.goLink,["stop","prevent"]),"data-type":"manage"},{default:a((()=>[r(" 延长有效期> ")])),_:1},8,["onClick"])),[[R,!_.iosMiniHide]]):u("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["data-url","data-type","data-no","onClick"]),!_.infoDetail.id||!_.infoDetail.isvalid&&_.infoDetail.member&&_.infoDetail.member.userid?(e(),i(C,{key:1,class:h("btn_care "+(_.infoDetail.is_follow?"cared":"")),onClick:k.care_fabu},{default:a((()=>[_.infoDetail.is_follow?u("",!0):(e(),i(C,{key:0,class:"care_icon"},{default:a((()=>[n(P,{src:_.imgPath+"/info/cared_icon.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})),r(" "+f(_.infoDetail.is_follow?"已关注":"关注"),1)])),_:1},8,["class","onClick"])):(e(),i(C,{key:0,class:"over_icon"},{default:a((()=>[n(I,null,{default:a((()=>[r("已失效")])),_:1}),n(P,{src:_.imgPath+"/info/vlid.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1}))])),_:1},8,["class"]),n(C,{class:h("labs_detail "+_.grayscale)},{default:a((()=>[(e(!0),l(c,null,d(_.infoDetail.label,((t,n)=>(e(),i(I,{key:n},{default:a((()=>[r(f(t.name),1)])),_:2},1024)))),128))])),_:1},8,["class"]),n(C,{class:h("fbCon "+_.grayscale)},{default:a((()=>[n(C,{class:"txt"},{default:a((()=>[n(z,{content:_.infoDetail.body,selectable:!0,adv:_.loadAdv},null,8,["content","adv"])])),_:1}),n(C,{class:"customBox ul"},{default:a((()=>[(e(!0),l(c,null,d(_.infoDetail.item,((t,o)=>(e(),i(C,{class:"li",key:o},{default:a((()=>[n(C,{class:"label","data-id":t.id},{default:a((()=>[r(f(t.type),1)])),_:2},1032,["data-id"]),n(I,null,{default:a((()=>[r(f(t.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),_.infoDetail.address&&"添加定位"!=_.infoDetail.address?(e(),i(C,{key:0,class:"posiAddr",onClick:k.openMap,"data-lng":_.infoDetail.lng,"data-lat":_.infoDetail.lat,"data-address":_.infoDetail.address},{default:a((()=>[n(C,{class:"posiIcon"},{default:a((()=>[n(P,{src:_.imgPath+"/info/posi.png?v="+_.imgVersion},null,8,["src"])])),_:1}),n(I,null,{default:a((()=>[r(f(_.infoDetail.address?_.infoDetail.addrArr+" "+_.infoDetail.address:_.infoDetail.addrArr),1)])),_:1}),r(" "+f(_.distance||""),1)])),_:1},8,["onClick","data-lng","data-lat","data-address"])):u("",!0),n(C,{class:"imgBox fn-clear"},{default:a((()=>[_.infoDetail.video?(e(),i(T,{key:0,class:"videoBox",src:_.infoDetail.video},null,8,["src"])):u("",!0),(e(!0),l(c,null,d(_.infoDetail.imglist,((t,o)=>(e(),i(C,{key:o,class:h("picBox "+(_.infoDetail.imglist.length%2==0&&o>=4||_.infoDetail.imglist.length%2==1&&o>4?"halfBox":"")),onClick:t=>k.previewMedia(o),"data-pic":t.path},{default:a((()=>[n(P,{src:t.path||_.imgError,onError:e=>t.path=_.imgError,mode:"widthFix",class:"loadingImg"},null,8,["src","onError"])])),_:2},1032,["class","onClick","data-pic"])))),128))])),_:1}),n(C,{id:"adv_place",style:{"margin-top":"20rpx"}},{default:a((()=>["web"!=_.platForm&&_.advInfo?(e(),i(L,{key:0,"unit-id":_.advInfo},null,8,["unit-id"])):u("",!0)])),_:1}),n(C,{class:"jubaoBox"},{default:a((()=>[n(C,{class:"ptext"},{default:a((()=>[r("免责声明：本平台仅供信息发布交流之途，请谨慎判断信息真伪。如遇虚假诈骗信息，请立即举报")])),_:1}),n(C,{class:"jubao_btn",onClick:k.showJBbox},{default:a((()=>[n(C,{class:"icon"},{default:a((()=>[n(P,{src:_.imgPath+"/info/jubao_icon.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1}),r(" 举报 ")])),_:1},8,["onClick"])])),_:1}),n(C,{class:"conDetail"},{default:a((()=>[n(C,{class:"leftCon"},{default:a((()=>[_.infoDetail.collectt.collectCount>0?(e(),i(C,{key:0,class:"collectPhoto ul"},{default:a((()=>[(e(!0),l(c,{key:0},d(_.infoDetail.collectt.photo,((t,o)=>(e(),i(C,{class:"li",key:o},{default:a((()=>[n(P,{src:t||_.userError,"data-type":"photo",mode:"aspectFill",onError:e=>t=_.userError,class:"loadingImg"},null,8,["src","onError"])])),_:2},1024)))),128))])),_:1})):u("",!0),_.infoDetail.collectt.collectCount>0?(e(),i(I,{key:1,class:"collectCount"},{default:a((()=>[r(f(_.infoDetail.collectt.collectCount>1e4?parseFloat((_.infoDetail.collectt.collectCount/1e4).toFixed(2))+"w":_.infoDetail.collectt.collectCount)+"收藏",1)])),_:1})):u("",!0)])),_:1}),n(C,{class:"rightCon"},{default:a((()=>[n(I,null,{default:a((()=>[r(f(_.infoDetail.share>1e4?parseFloat((_.infoDetail.share/1e4).toFixed(2))+"w":_.infoDetail.share)+"分享",1)])),_:1}),n(I,null,{default:a((()=>[r(f(_.infoDetail.click>1e4?parseFloat((_.infoDetail.click/1e4).toFixed(2))+"w":_.infoDetail.click)+"浏览",1)])),_:1})])),_:1})])),_:1}),n(C,{class:"fbUserDetail","data-url":"2"==_.infoDetail.member.userType&&"0"!=_.infoDetail.member.busID?`${_.pages.business}?id=${_.infoDetail.member.busID}`:_.masterDomain+"/user/"+_.infoDetail.member.userid,"data-type":"2"==_.infoDetail.member.userType?"1":"2",onClick:k.goLink},{default:a((()=>[n(C,{class:"lCon"},{default:a((()=>[_.infoDetail.member&&_.infoDetail.member.nickname?(e(),i(C,{key:0,class:"h2"},{default:a((()=>[r(f(_.infoDetail.member.nickname),1)])),_:1})):_.inDetail.id?(e(),i(C,{key:1,class:"h2"},{default:a((()=>[r("用户已注销")])),_:1})):(e(),i(C,{key:2,class:"h2"},{default:a((()=>[r("加载中")])),_:1})),n(C,{class:"ptext"},{default:a((()=>[n(I,null,{default:a((()=>[r(f(_.infoDetail.pubdate1),1)])),_:1}),n(I,null,{default:a((()=>[r("发布过"+f(_.infoDetail.fabuCount)+"条信息",1)])),_:1}),n(I,{class:"fans"},{default:a((()=>[r(" 粉丝 "),n(I,{class:"fansNum"},{default:a((()=>[r(f(_.infoDetail.follow>1e4?parseFloat((_.infoDetail.follow/1e4).toFixed(2))+"w":_.infoDetail.follow),1)])),_:1})])),_:1})])),_:1}),"2"==_.infoDetail.member.userType&&_.infoDetail.member.busiId>0?(e(),i(C,{key:3,class:"busRenzhen"},{default:a((()=>[n(P,{class:"imgIocn",src:_.imgPath+"/info/rz_icon.png?v="+_.imgVersion},null,8,["src"]),r(" 认证商家 ")])),_:1})):"1"==_.infoDetail.member.certifyState?(e(),i(C,{key:4,class:"realName"},{default:a((()=>[n(P,{class:"imgIocn",src:_.imgPath+"/info/realName.png?v="+_.imgVersion},null,8,["src"]),r(" 实名认证 ")])),_:1})):(e(),i(C,{key:5,class:"realName"},{default:a((()=>[n(P,{class:"imgIocn",src:_.imgPath+"/info/realName.png?v="+_.imgVersion},null,8,["src"]),r(" 未认证 ")])),_:1}))])),_:1}),n(C,{class:"rCon"},{default:a((()=>[n(P,{src:_.infoDetail.member.photo||_.userError,class:"loadingImg",mode:"aspectFill",onError:v[2]||(v[2]=t=>_.infoDetail.member.photo=_.userError)},null,8,["src"])])),_:1})])),_:1},8,["data-url","data-type","onClick"]),n(C,{class:"commBox"},{default:a((()=>[n(C,{class:"h1"},{default:a((()=>[r("全部留言")])),_:1}),n(C,{class:"toComment"},{default:a((()=>[n(C,{class:"photo"},{default:a((()=>[n(P,{src:_.userinfo.photo||_.userError,alt:"",onError:v[3]||(v[3]=t=>_.userinfo.photo=_.userError),class:"loadingImg"},null,8,["src"])])),_:1}),_.userid?(e(),i(C,{key:0,class:"inpbox"},{default:a((()=>[n(F,{type:"text",placeholder:_.commtList.length?"说点什么吧":"还没有人留言，我来说两句",id:"commtInp",onFocus:k.checkReply,onConfirm:k.submitReply,"confirm-type":"send",value:_.cmtContent,"placeholder-class":"input-placeholder",focus:_.cmtFocus},null,8,["placeholder","onFocus","onConfirm","value","focus"])])),_:1})):(e(),i(C,{key:1,class:"inpbox"},{default:a((()=>[n(I,{onClick:k.tologin},{default:a((()=>[r(f(_.commtList.length?"说点什么吧":"还没有人留言，我来说两句"),1)])),_:1},8,["onClick"])])),_:1}))])),_:1}),n(C,{class:"commtList"},{default:a((()=>[n(C,{class:"cmt_ul ul"},{default:a((()=>[(e(!0),l(c,null,d(_.commtList,((t,o)=>(e(),i(C,{class:"fn-clear li","data-id":t.id,"data-obj":t,key:o},{default:a((()=>[n(C,{class:"lphoto","data-userid":t.user.userid,onClick:k.goLink,"data-type":t.user.busiId?"2":"ucenter","data-url":`${_.pages.business}?id=${t.user.busiId}`},{default:a((()=>[n(P,{src:t.user.photo||_.userError,class:"realShow loadingImg",onError:e=>t.user.photo=_.userError},null,8,["src","onError"]),n(C,{class:"icon"},{default:a((()=>[n(P,{src:t.user.levelIcon,class:"loadingImg"},null,8,["src"])])),_:2},1024)])),_:2},1032,["data-userid","onClick","data-type","data-url"]),n(C,{class:"commCon","data-id":t.id,"data-obj":t,onClick:k.focuReBox},{default:a((()=>[n(C,{class:"nickInfo"},{default:a((()=>[n(C,{class:"h3"},{default:a((()=>[r(f(t.user.userid?t.user.nickname:"用户已注销"),1)])),_:2},1024),n(C,{class:h("zan_btn "+(t.zan_has?"zaned":"")+" "+(_.showZan&&_.zanid==t.id&&"1"==t.zan_has?"niceIn":"")),onClick:s(k.zan_info,["stop","prevent"]),"data-index":o,"data-type":"1","data-rid":t.id,"data-zan":t.zan_has},{default:a((()=>[n(P,{class:"zan_icon",src:_.imgPath+"/info/zan_"+("1"==t.zan_has?"1":"2")+".png?v="+_.imgVersion},null,8,["src"]),n(I,null,{default:a((()=>[r(f(t.zan>0?t.zan:""),1)])),_:2},1024)])),_:2},1032,["class","onClick","data-index","data-rid","data-zan"])])),_:2},1024),n(C,{class:"h2"},{default:a((()=>[r(f(t.content),1)])),_:2},1024),t.lower&&t.lower.count?(e(),i(C,{key:0,class:"replyList"},{default:a((()=>[_.rInd<=3?(e(!0),l(c,{key:0},d(t.lower.list,((t,o)=>(e(),i(C,{class:"reply_li","data-id":t.id,"data-obj":t,onClick:s(k.focuReBox,["stop","prevent"]),key:o},{default:a((()=>[n(I,{class:"rnick"},{default:a((()=>[r(f(t.user.nickname),1)])),_:2},1024),r(" ："+f(t.content),1)])),_:2},1032,["data-id","data-obj","onClick"])))),128)):u("",!0),t.lower&&t.lower.count&&t.lower.count>=4?(e(),i(C,{key:1,"data-id":t.id,class:"more_reply",onClick:s(k.showReplyBox,["stop","prevent"])},{default:a((()=>[r(" 全部"+f(t.lower.count)+"条回复> ",1)])),_:2},1032,["data-id","onClick"])):u("",!0)])),_:2},1024)):u("",!0),n(C,{class:"pubtime"},{default:a((()=>[r(f(t.ftime)+" ",1),(t.iphome,e(),l(c,{key:0},[r("· "+f(t.iphome),1)],64))])),_:2},1024)])),_:2},1032,["data-id","data-obj","onClick"])])),_:2},1032,["data-id","data-obj"])))),128))])),_:1}),_.cmtLoadEnd?u("",!0):(e(),i(C,{key:0,class:"loadMore",onClick:k.getCommentList},{default:a((()=>[r("加载更多留言")])),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1},8,["class"]),n(C,{class:h("btnsGroup "+_.grayscale)},{default:a((()=>["web"==_.platForm?(e(),l(c,{key:0},["1"==_.infoDetail.readInfo&&_.infoDetail.countHongbao>0?(e(),i(C,{key:0,class:"hbBtn",onClick:k.showHB},{default:a((()=>[n(P,{src:_.imgPath+"/info/hb_btn.png?v="+_.imgVersion},null,8,["src"]),n(C,{class:"span hb_txt"},{default:a((()=>[r("抢红包")])),_:1})])),_:1},8,["onClick"])):u("",!0),"1"==_.infoDetail.shareInfo&&_.infoDetail.rewardCount>0?(e(),l(c,{key:1},["web"!=_.platForm?(e(),i(B,{key:0,class:"shareBtn newTxt","open-type":"share"},{default:a((()=>[n(P,{src:_.imgPath+"/info/sahre_icon.png?v="+_.imgVersion},null,8,["src"])])),_:1})):(e(),i(C,{key:1,class:"shareBtn newTxt",onClick:k.shareGetMoneyFn},{default:a((()=>[n(P,{src:_.imgPath+"/info/sahre_icon.png?v="+_.imgVersion},null,8,["src"])])),_:1},8,["onClick"]))],64)):u("",!0)],64)):u("",!0),n(C,{class:"posterBtn",onClick:v[4]||(v[4]=t=>k.createPosterFn(0))},{default:a((()=>[n(P,{src:`${_.imgPath}/info/poster_tip.png`},null,8,["src"])])),_:1})])),_:1},8,["class"]),_.infoDetail.member&&_.infoDetail.member.userid&&!_.infoDetail.isvalid?(e(),i(C,{key:0,class:h("bottomBox "+_.grayscale)},{default:a((()=>[n(C,{class:"left_btns"},{default:a((()=>[n(C,{class:"btn_com a",onClick:k.fabuBtn},{default:a((()=>[n(P,{class:"s",src:_.imgPath+"/info/fabu.png?v="+_.imgVersion},null,8,["src"]),r(" 发布 ")])),_:1},8,["onClick"]),n(C,{class:"btn_com a",onClick:k.commtFocus},{default:a((()=>[n(P,{class:"s",src:_.imgPath+"/info/comt.png?v="+_.imgVersion},null,8,["src"]),r(" 留言 ")])),_:1},8,["onClick"]),n(C,{class:h("btn_shou a "+(_.showZan&&""==_.zanid?"niceIn":"")+" "+(1==_.infoDetail.collect?"shou":"")),onClick:k.shoucang},{default:a((()=>[n(P,{class:"s",src:_.imgPath+"/info/sou_"+(_.infoDetail.collect?"1":"2")+".png?v="+_.imgVersion},null,8,["src"]),r(" "+f(1==_.infoDetail.collect?"已收藏":"收藏"),1)])),_:1},8,["class","onClick"])])),_:1}),_.infoDetail.member&&_.infoDetail.member.userid?(e(),i(C,{key:0,class:"right_btns"},{default:a((()=>[_.userid&&!_.userPhoneCheck&&_.privateNumber_state?(e(),i(B,{key:0,class:"btn_call a",type:"primary","data-module":"info","data-temp":"detail","data-info":_.infoDetail,"data-aid":_.infoDetail.id,onClick:s(k.test,["stop","prevent"]),"open-type":"getPhoneNumber",onGetphonenumber:k.bindUserPhoneNumber},{default:a((()=>[r(" 打电话 ")])),_:1},8,["data-info","data-aid","onClick","onGetphonenumber"])):(e(),i(C,{key:1,class:"btn_call a",onClick:s(k.callPhone,["stop","prevent"]),"data-module":"info","data-temp":"detail","data-aid":_.infoDetail.id,"data-info":_.infoDetail,"data-tel":_.infoDetail.telNum},{default:a((()=>[r(" 打电话 ")])),_:1},8,["onClick","data-aid","data-info","data-tel"])),n(C,{class:"chat_to-Link btn-chat a","data-type":"detail",onClick:k.chatTo,"data-id":_.infoDetail.member.userid},{default:a((()=>[r("聊一聊")])),_:1},8,["onClick","data-id"])])),_:1})):u("",!0)])),_:1},8,["class"])):u("",!0),_.infoDetail.infonickname&&_.infoDetail.infonickname.length>0?(e(),i(C,{key:1,class:h("gethbList "+_.grayscale)},{default:a((()=>[n(C,{class:"ul"},{default:a((()=>[(e(!0),l(c,null,d(_.infoDetail.infonickname,((t,o)=>(e(),i(C,{class:h("li "+(o==_.currIndx?"showIn":"")+" "),key:o},{default:a((()=>[n(C,{class:"box_li"},{default:a((()=>[n(C,{class:"hbUer span"},{default:a((()=>[n(P,{src:t.photo||_.userError,onError:e=>t.photo=_.userError,class:"loadingImg"},null,8,["src","onError"])])),_:2},1024),n(I,{class:"hbNick span"},{default:a((()=>[r(f(t.nickname),1)])),_:2},1024),r(" 领取了红包 ")])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1},8,["class"])):u("",!0),_.replyShow?(e(),i(C,{key:2,class:h("replyInpBox "+_.grayscale+" "+(_.replyShow?"show":"")),style:o("bottom:"+_.keyboardH+"px;")},{default:a((()=>[n(F,{value:_.cmtContent,class:"replyInp","confirm-type":"send",placeholder:"回复"+_.replyArr.user.nickname,onConfirm:k.submitReply,"placeholder-class":"input-placeholder",onBlur:k.inputBlur,focus:!0,"adjust-position":!1,onKeyboardheightchange:k.onKeyboardChange},null,8,["value","placeholder","onConfirm","onBlur","onKeyboardheightchange"])])),_:1},8,["class","style"])):u("",!0)])),_:1}),_.recDataList.length>0?(e(),i(C,{key:0,class:h("whiteCon recBox "+_.grayscale)},{default:a((()=>[n(C,{class:"h1"},{default:a((()=>[r("相关推荐")])),_:1}),n(C,{class:"listDd vertical_list dd"},{default:a((()=>[n(C,{class:"ul"},{default:a((()=>[(e(!0),l(c,null,d(_.recDataList,((t,o)=>(e(),l(c,{key:o},[o%2==0?(e(),i(C,{key:0,class:"info_item"},{default:a((()=>[n(C,{"data-url":`${_.pages.detail}?id=${t.id}`,"data-type":"1",class:"linkTo","data-id":t.id,onClick:k.goLink},{default:a((()=>[n(C,{class:"infoDetail"},{default:a((()=>[n(C,{class:"imgBox"},{default:a((()=>[n(C,{class:"img"},{default:a((()=>[n(P,{class:h(["loadingImg",{minheight:t.imgScale>1.35},{maxheight:t.imgScale<.75}]),src:t.litpic?t.litpic:_.imgPath+"/info/default_info.png?v="+_.imgVersion,mode:t.imgScale>1.35||t.imgScale<.75?"aspectFill":"widthFix",onLoad:k.imgLoad,"data-index":o,onError:e=>t.litpic=_.imgError},null,8,["class","src","mode","onLoad","data-index","onError"])])),_:2},1024),"1"==t.hasSetjili&&(t.rewardCount>0||"1"==t.readInfo)?(e(),i(P,{key:0,class:"hb",src:_.imgPath+"/info/hb.png?v="+_.imgVersion},null,8,["src"])):t.dizhi?(e(),i(C,{key:1,class:"posi"},{default:a((()=>[n(P,{src:_.imgPath+"/info/posi.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"]),n(I,null,{default:a((()=>[r(f(t.dizhi),1)])),_:2},1024),r(" "+f(t.distance),1)])),_:2},1024)):u("",!0)])),_:2},1024),n(C,{class:"h3"},{default:a((()=>[r(f(t.titleNew),1)])),_:2},1024),n(C,{class:"labs"},{default:a((()=>[(e(!0),l(c,null,d(t.label,((t,n)=>(e(),l(c,{key:n},[n<4?(e(),i(I,{key:n},{default:a((()=>[r(f(t.name),1)])),_:2},1024)):u("",!0)],64)))),128)),(e(!0),l(c,null,d(t.feature3,((n,o)=>(e(),l(c,{key:o},[o+t.label.length<4&&n&&""!=n?(e(),i(I,{key:0},{default:a((()=>[r(f(n),1)])),_:2},1024)):u("",!0)],64)))),128))])),_:2},1024)])),_:2},1024),n(C,{class:"memberInfo"},{default:a((()=>[n(C,{class:"photo"},{default:a((()=>[n(P,{mode:"aspectFill",src:t.member.photo||_.userError,onError:e=>t.member.photo=_.userError,class:"loadingImg"},null,8,["src","onError"])])),_:2},1024),n(C,{class:"memberDetail"},{default:a((()=>[n(C,{class:"h2"},{default:a((()=>[r(f(t.member.nickname?t.member.nickname:"佚名"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["data-url","data-id","onClick"])])),_:2},1024)):u("",!0)],64)))),128))])),_:1}),n(C,{class:"ul"},{default:a((()=>[(e(!0),l(c,null,d(_.recDataList,((t,o)=>(e(),l(c,{key:o},[o%2==1?(e(),i(C,{key:0,class:"info_item"},{default:a((()=>[n(C,{"data-url":`${_.pages.detail}?id=${t.id}`,"data-type":"1",class:"linkTo",onClick:k.goLink,"data-id":t.id},{default:a((()=>[n(C,{class:"infoDetail"},{default:a((()=>[n(C,{class:"imgBox"},{default:a((()=>[n(C,{class:"img"},{default:a((()=>[n(P,{class:h(["loadingImg",{minheight:t.imgScale>1.35},{maxheight:t.imgScale<.75}]),src:t.litpic?t.litpic:_.imgPath+"/info/default_info.png?v="+_.imgVersion,mode:t.imgScale>1.35||t.imgScale<.75?"aspectFill":"widthFix",onLoad:k.imgLoad,"data-index":o,onError:e=>t.litpic=_.imgError},null,8,["class","src","mode","onLoad","data-index","onError"])])),_:2},1024),"1"==t.hasSetjili&&(t.rewardCount>0||"1"==t.readInfo)?(e(),i(P,{key:0,class:"hb",src:_.imgPath+"/info/hb.png?v="+_.imgVersion},null,8,["src"])):t.dizhi?(e(),i(C,{key:1,class:"posi"},{default:a((()=>[n(P,{src:_.imgPath+"/info/posi.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"]),n(I,null,{default:a((()=>[r(f(t.dizhi),1)])),_:2},1024),r(" "+f(t.distance),1)])),_:2},1024)):u("",!0)])),_:2},1024),n(C,{class:"h3"},{default:a((()=>[r(f(t.titleNew),1)])),_:2},1024),n(C,{class:"labs"},{default:a((()=>[(e(!0),l(c,null,d(t.label,((t,n)=>(e(),l(c,{key:n},[n<4?(e(),i(I,{key:n},{default:a((()=>[r(f(t.name),1)])),_:2},1024)):u("",!0)],64)))),128)),(e(!0),l(c,null,d(t.feature3,((n,o)=>(e(),l(c,{key:o},[o+t.label.length<4&&n&&""!=n?(e(),i(I,{key:0},{default:a((()=>[r(f(n),1)])),_:2},1024)):u("",!0)],64)))),128))])),_:2},1024)])),_:2},1024),n(C,{class:"memberInfo"},{default:a((()=>[n(C,{class:"photo"},{default:a((()=>[n(P,{mode:"aspectFill",src:t.member.photo||_.userError,onError:e=>t.member.photo=_.userError,class:"loadingImg"},null,8,["src","onError"])])),_:2},1024),n(C,{class:"memberDetail"},{default:a((()=>[n(C,{class:"h2"},{default:a((()=>[r(f(t.member.nickname?t.member.nickname:"佚名"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["data-url","onClick","data-id"])])),_:2},1024)):u("",!0)],64)))),128))])),_:1})])),_:1})])),_:1},8,["class"])):u("",!0)])),_:1}),""!=_.ErrAlert?(e(),i(C,{key:1,class:"popErrAlert"},{default:a((()=>[n(C,{class:"p"},{default:a((()=>[r(f(_.ErrAlert),1)])),_:1})])),_:1})):u("",!0),n(C,{class:h("hbMask "+(_.hbShow?"show":""))},null,8,["class"]),n(C,{class:h("hbPop "+(_.hbShow?"show":""))},{default:a((()=>[n(C,{class:h("hb_show "+(0==_.hbState||2==_.hbState?"showNow":""))},{default:a((()=>[n(P,{src:_.imgPath+"/info/hb_pop.png?v="+_.imgVersion,class:"hb_bg",mode:"aspectFill"},null,8,["src"]),""!=_.infoDetail.desc?(e(),i(C,{key:0,class:"command"},{default:a((()=>[n(C,{class:"txt"},{default:a((()=>[n(C,{class:"h2"},{default:a((()=>[r("本次口令")])),_:1}),n(C,{class:"h1"},{default:a((()=>[r(f(_.infoDetail.desc),1)])),_:1})])),_:1}),n(C,{class:"txt_shadow"},{default:a((()=>[n(C,{class:"h2"},{default:a((()=>[r("本次口令")])),_:1}),n(C,{class:"h1"},{default:a((()=>[r(f(_.infoDetail.desc),1)])),_:1})])),_:1})])),_:1})):u("",!0),n(C,{class:"hbCon"},{default:a((()=>[n(C,{class:"hb_tit"},{default:a((()=>[r("红包福利")])),_:1}),n(C,{class:"hbNum"},{default:a((()=>[n(C,{class:"h3"},{default:a((()=>[r("红包总额")])),_:1}),n(C,{class:"Num"},{default:a((()=>[r(f(_.currency.symbol)+" ",1),n(I,null,{default:a((()=>[r(f(_.infoDetail.priceHongbao),1)])),_:1})])),_:1}),""!=_.infoDetail.desc?(e(),i(C,{key:0,class:"cmdInp"},{default:a((()=>[n(F,{type:"text",placeholder:"在这里输入口令","placeholder-class":"input-placeholder",onInput:k.msgOn,focus:_.hbFocus,value:_.hbmsg},null,8,["onInput","focus","value"])])),_:1})):(e(),i(C,{key:1,class:"getTip"},{default:a((()=>[r(f(_.infoDetail.countHongbao-_.infoDetail.hongbaoCount)+"人已领取红包 ",1)])),_:1}))])),_:1}),n(C,{class:"btn_gethb",onClick:k.getHb},{default:a((()=>[r(" 立即领取 "),n(P,{src:_.imgPath+"/info/btn_bg.png?v="+_.imgVersion,class:"btn_bg",mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"])])),_:1})])),_:1},8,["class"]),n(C,{class:h("hb_hasget "+(1==_.hbState?"showNow":""))},{default:a((()=>[n(P,{src:_.imgPath+"/info/top_bg.png?v="+_.imgVersion,class:"hb_shan",mode:"aspectFill"},null,8,["src"]),n(P,{src:_.imgPath+"/info/hb_bg.png?v="+_.imgVersion,class:"hb_bg",mode:"aspectFill"},null,8,["src"]),n(C,{class:"hbBox"},{default:a((()=>[n(C,{class:"hb_tip"},{default:a((()=>[W("h1",{class:"txt"},"恭喜你！"),W("h1",{class:"txt_shadow"},"恭喜你！")])),_:1}),n(C,{class:"hb_con"},{default:a((()=>[n(C,{class:"h4"},{default:a((()=>[r("抢到红包")])),_:1}),n(C,{class:"Num"},{default:a((()=>[r(f(_.currency.symbol)+" ",1),n(I,null,{default:a((()=>[r(f(_.infoDetail.hongprice),1)])),_:1})])),_:1}),n(C,{class:"getTip","data-url":"/withdraw.html"},{default:a((()=>[r("已存入账户余额，可提现")])),_:1})])),_:1}),n(C,{class:"hb_fa"},{default:a((()=>[n(C,{class:"p ptext"},{default:a((()=>[r("红包来自")])),_:1}),n(C,{class:"h2"},{default:a((()=>[r(f(_.infoDetail.member.nickname),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),n(C,{class:h("hb_none "+(3===_.hbState?"showNow":""))},{default:a((()=>[n(P,{src:_.imgPath+"/info/hb_1.png?v="+_.imgVersion,class:"hb_bg",mode:"aspectFill"},null,8,["src"]),n(C,{class:"noTip"},{default:a((()=>[r("啊呀，来晚了一步")])),_:1}),n(C,{class:"h2"},{default:a((()=>[r("红包已抢光")])),_:1}),n(C,{class:"imgTip"},{default:a((()=>[n(P,{src:_.imgPath+"/info/fail.png?v="+_.imgVersion,class:"fail_bg",mode:"aspectFill"},null,8,["src"])])),_:1}),n(C,{class:"hb_fa"},{default:a((()=>[n(C,{class:"ptext"},{default:a((()=>[r("红包来自")])),_:1}),n(C,{class:"h2"},{default:a((()=>[r(f(_.infoDetail.member.nickname),1)])),_:1})])),_:1})])),_:1},8,["class"]),n(C,{class:"close_hbpop",onClick:k.hideHbPop},{default:a((()=>[n(P,{src:_.imgPath+"/info/close_pop.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"])])),_:1},8,["class"]),_.showSharePop?(e(),i(C,{key:2,class:"shareGiftMask"})):u("",!0),_.showSharePop?(e(),i(C,{key:3,class:"shareGiftPop"},{default:a((()=>[n(C,{class:"shareGiftBg"},{default:a((()=>[n(P,{src:_.imgPath+"/info/gift_bg.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"]),n(C,{class:"gift_icon"},{default:a((()=>[n(P,{src:_.imgPath+"/info/gift.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1}),n(C,{class:h("gift_con "+("1"==_.infoDetail.fxState?"moreTop":""))},{default:a((()=>["1"!=_.infoDetail.fxState?(e(),i(C,{key:0,class:"h2"},{default:a((()=>[n(I,{class:"add_txt"},{default:a((()=>[r("+")])),_:1}),n(I,{class:"gNum"},{default:a((()=>[r(f(_.infoDetail.rewardPrice),1)])),_:1}),r(" "+f(_.currency.short)+" ",1),n(C,{class:"gift_tip"},{default:a((()=>[n(P,{src:_.imgPath+"/info/pop_icon.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"]),n(I,null,{default:a((()=>[r("已到账")])),_:1})])),_:1})])),_:1})):u("",!0),"1"==_.infoDetail.fxState?(e(),i(C,{key:1,class:"h2 shareTip"},{default:a((()=>[r("分享成功！")])),_:1})):u("",!0),n(C,{class:"ptext"},{default:a((()=>[r("每次有人点开你的分享链接还会有奖励哦！")])),_:1}),n(C,{class:"btn_sure",onClick:k.hideSharePop},{default:a((()=>[n(P,{src:_.imgPath+"/info/btn_bg.png?v="+_.imgVersion,class:"btn_bg",mode:"aspectFill"},null,8,["src"]),r(" 确定 ")])),_:1},8,["onClick"])])),_:1},8,["class"])])),_:1})):u("",!0),n(C,{class:"replyMaks",style:o("display:"+(_.showRe?"block":"none")),onClick:k.hideReplyBox},null,8,["style","onClick"]),n(C,{class:"replyBox",style:o("transform:translateY("+(_.showRe?"0":"100%")+")")},{default:a((()=>[n(C,{class:"reTit"},{default:a((()=>[n(C,{class:"h2"},{default:a((()=>[r("回复")])),_:1}),n(C,{class:"h3"},{default:a((()=>[r("全部回复·"+f(_.relyAllCount),1)])),_:1})])),_:1}),n(E,{"scroll-y":"",onScrolltolower:k.getReplyList,class:"replyAllList"},{default:a((()=>[n(C,{class:"ul re_ul"},{default:a((()=>[(e(!0),l(c,null,d(_.replyList,((t,o)=>(e(),l(c,{key:o},[n(C,{class:"re_li fn-clear","data-id":t.id},{default:a((()=>[n(C,{class:"lefthicon"},{default:a((()=>[n(P,{src:t.user.photo||_.userError,class:"realShow loadingImg",onError:e=>t.user.photo=_.userError},null,8,["src","onError"]),n(C,{class:"icon"})])),_:2},1024),n(C,{class:"right_rpdetail"},{default:a((()=>[n(C,{class:"nick h3"},{default:a((()=>[r(f(t.user.nickname),1)])),_:2},1024),n(C,{class:"re_con p"},{default:a((()=>[r(f(t.content),1)])),_:2},1024),n(C,{class:"re_time p"},{default:a((()=>[r(f(t.ftime),1)])),_:2},1024),n(C,{class:h("zan_reply a "+(_.showZan&&_.zanid==t.id&&"1"==t.zan_has?"niceIn":"")),onClick:s(k.zan_info,["stop","prevent"]),"data-zan":t.zan_has,"data-rid":t.id,"data-type":"2","data-index":o},{default:a((()=>["1"==t.zan_has?(e(),i(P,{key:0,src:_.imgPath+"/info/zan_1.png?v="+_.imgVersion,class:"zan_icon"},null,8,["src"])):(e(),i(P,{key:1,src:_.imgPath+"/info/zan_2.png?v="+_.imgVersion,class:"zan_icon"},null,8,["src"])),n(I,{class:"em"},{default:a((()=>[r(f(t.zan>0?t.zan:""),1)])),_:2},1024)])),_:2},1032,["class","onClick","data-zan","data-rid","data-index"])])),_:2},1024)])),_:2},1032,["data-id"]),t.lower&&t.lower.list&&t.lower.list.length>0?(e(!0),l(c,{key:0},d(t.lower.list,((t,l)=>(e(),i(C,{key:l,class:"re_li fn-clear","data-id":t.id},{default:a((()=>[n(C,{class:"lefthicon"},{default:a((()=>[n(P,{src:t.user.photo||_.userError,class:"realShow loadingImg",onError:e=>t.user.photo=_.userError},null,8,["src","onError"]),n(C,{class:"icon"})])),_:2},1024),n(C,{class:"right_rpdetail"},{default:a((()=>[n(C,{class:"nick h3"},{default:a((()=>[r(f(t.user.nickname),1)])),_:2},1024),n(C,{class:"re_con p"},{default:a((()=>[n(C,{class:"span"},{default:a((()=>[n(I,{class:"em"},{default:a((()=>[r("回复")])),_:1}),n(I,{class:"b"},{default:a((()=>[r(f(t.member.nickname),1)])),_:2},1024),r(" ： ")])),_:2},1024),n(C,{class:"span"},{default:a((()=>[r(f(t.content),1)])),_:2},1024)])),_:2},1024),n(C,{class:"re_time p"},{default:a((()=>[r(f(t.ftime),1)])),_:2},1024),n(C,{class:h("zan_reply a "+(_.showZan&&_.zanid==t.id&&"1"==t.zan_has?"niceIn":"")),onClick:s(k.zan_info,["stop","prevent"]),"data-zan":"1"==t.zan_has,"data-rid":t.id,"data-type":"3","data-index":l,"data-pind":o},{default:a((()=>[t.zan_has?(e(),i(P,{key:0,src:_.imgPath+"/info/zan_1.png?v="+_.imgVersion,class:"zan_icon"},null,8,["src"])):(e(),i(P,{key:1,src:_.imgPath+"/info/zan_2.png?v="+_.imgVersion,class:"zan_icon"},null,8,["src"])),n(I,{class:"em"},{default:a((()=>[r(f(t.zan),1)])),_:2},1024)])),_:2},1032,["class","onClick","data-zan","data-rid","data-index","data-pind"])])),_:2},1024)])),_:2},1032,["data-id"])))),128)):u("",!0)],64)))),128))])),_:1})])),_:1},8,["onScrolltolower"])])),_:1},8,["style"])])),_:1}),_.payPhoneState?(e(),i(M,{key:1,showPayPop:_.showPayPop,onPaypopb:v[5]||(v[5]=t=>_.showPayPop=!1),payInfo:_.payInfo,onKeepToCall:k.keepToCall,ref:"pay"},null,8,["showPayPop","payInfo","onKeepToCall"])):u("",!0),n(j,{phoneData:_.phoneData,onShowPrivateNumber:v[6]||(v[6]=t=>_.phoneData.showPrivateNumber=0),onShowhasPayNumber:v[7]||(v[7]=t=>_.phoneData.showhasPayNumber=0),ref:"privatenumber",onTopay:k.directTopay,onHaspay:k.keepToCall,payInfo:_.payInfo},null,8,["phoneData","onTopay","onHaspay","payInfo"]),n($,{privateShow:_.privateb},null,8,["privateShow"]),n(Y,{showPop:_.jubaoShow,infoDetail:_.complainInfo,onHideFn:v[8]||(v[8]=t=>_.jubaoShow=!1),complainList:_.complainList,ref:"complaint"},null,8,["showPop","infoDetail","complainList"]),_.postShow?(e(),i(C,{key:2,class:"poster",onClick:v[12]||(v[12]=t=>{_.postShow=!1})},{default:a((()=>[n(nt,{isCanvasToTempFilePath:"",hidden:"",onSuccess:v[9]||(v[9]=t=>k.createPosterFn(1,t))},{default:a((()=>[W("template",null,[n(q,{css:`background-image: url(${_.imgStaticPath}/poster/cwHouse.jpg);padding-bottom:50rpx`},{default:a((()=>[n(q,{css:"font-size: 58rpx;font-weight: 800;color: #F4F4F4;line-height: 49rpx;text-align:center;padding-top:90rpx;margin:0rpx 30rpx;"},{default:a((()=>[n(J,{text:`${_.infoDetail.addrArr} ${_.infoDetail.typename}`},null,8,["text"])])),_:1}),n(q,{css:"background:white;border-radius:24rpx;overflow:hidden;margin:58rpx 30rpx 0rpx;"},{default:a((()=>[n(q,{css:"position:relative;"},{default:a((()=>[_.infoDetail.imglist.length>0?(e(),i(tt,{key:0,src:_.infoDetail.imglist[0].path,css:"width:100%;height:518rpx;display:block;border-radius:24rpx 24rpx 60rpx 0rpx;object-fit:cover;"},null,8,["src"])):u("",!0),n(q,{css:"display:flex;position:absolute;bottom:24rpx;left:24rpx;"},{default:a((()=>[(e(!0),l(c,null,d(_.infoDetail.label,((t,a)=>(e(),i(J,{key:a,css:"background-color:#FFF1E8;border-radius:6rpx;font-weight:bold;color:#FA901E;font-size:28rpx;padding:10rpx;margin:12rpx 12rpx 0rpx 0rpx",text:t.name},null,8,["text"])))),128))])),_:1})])),_:1}),n(q,{css:"padding:33rpx 28rpx 36rpx;"},{default:a((()=>[n(J,{text:_.infoDetail.titlenew,css:"color:#212121;font-weight:bold;font-size:28rpx;line-clamp:4;margin-bottom:36rpx;"},null,8,["text"]),n(q,null,{default:a((()=>[(e(!0),l(c,null,d(_.infoDetail.item.slice(0,4),((t,o)=>(e(),l(c,{key:o},[t.type&&t.value?(e(),i(q,{key:0,css:"display:flex;margin-bottom:32rpx;"},{default:a((()=>[n(J,{text:t.type,css:"color:#9FA0AB;font-size:25rpx;font-weight:500;line-height:30rpx;margin-right:24rpx;"},null,8,["text"]),n(J,{text:t.value,css:"font-size: 25rpx;font-weight: 500;color: #212121;line-height: 30rpx;"},null,8,["text"])])),_:2},1024)):u("",!0)],64)))),128))])),_:1}),_.infoDetail.address?(e(),i(q,{key:0,css:`background-image:url(${_.imgStaticPath}/poster/info_addrbg.png);width:100%;height:114rpx;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;padding-right:100rpx;`},{default:a((()=>[n(J,{text:_.infoDetail.address,css:"font-size: 28rpx;font-weight: 500;color: #212121;margin-left:36rpx;line-clamp:1;"},null,8,["text"])])),_:1},8,["css"])):u("",!0)])),_:1})])),_:1}),n(q,{css:"width:100%;min-height:120rpx;padding:0rpx 30rpx;box-sizing:border-box;margin-top:35rpx;"},{default:a((()=>[n(q,{css:"padding-right:168rpx;height:118rpx;padding-top:20rpx;box-sizing:border-box;"},{default:a((()=>[n(J,{text:_.appConfig.share?_.appConfig.share.title:"",css:"color:#212121;font-size:36rpx;font-weight:bold;line-clamp:1;display:block;color:white;"},null,8,["text"]),n(J,{text:_.appConfig.share?_.appConfig.share.description:"",css:"color:#212121;font-size:23rpx;opacity:0.8;margin-top:20rpx;line-clamp:1;color:white;"},null,8,["text"])])),_:1}),n(q,{css:"position:absolute;right:30rpx;top:50%;transform:translateY(-50%);background-color:white;width:132rpx;height:132rpx;border-radius:12rpx;display:flex;justify-content:center;align-items:center;overflow:hidden;"},{default:a((()=>[_.postWx?(e(),i(tt,{key:0,src:_.postWx,css:"width:118rpx;height:118rpx;"},null,8,["src"])):(e(),i(at,{key:1,text:_.postCode,css:"width:118rpx;height:118rpx;"},null,8,["text"]))])),_:1})])),_:1}),n(q,{css:"color:#FFFFFF;font-size:24rpx;text-align:center;padding-top:54rpx;padding-bottom:32rpx;opacity:0.5"},{default:a((()=>[n(J,{text:"长按识别二维码看详情",css:"opacity:0.5"})])),_:1})])),_:1},8,["css"])])])),_:1}),_.postExhib?(e(),i(C,{key:0,style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}},{default:a((()=>[n(C,{class:"exhibitionPoster",onLongpress:k.savePosterFn,onClick:v[10]||(v[10]=s((()=>{}),["stop"]))},{default:a((()=>[n(P,{src:_.posterImg,mode:"widthFix",class:"e-poster","show-menu-by-longpress":!0},null,8,["src"]),n(P,{src:`${_.imgStaticPath}/poster/houseModule.png`,mode:"aspectFit",class:"e-mask"},null,8,["src"])])),_:1},8,["onLongpress"]),n(C,{class:"e-close"},{default:a((()=>[n(P,{src:`${_.imgStaticPath}/close_btn.png`,mode:"aspectFit",onClick:v[11]||(v[11]=s((t=>{_.postShow=!1}),["stop"]))},null,8,["src"]),n(I,null,{default:a((()=>[r("长按保存图片，分享给好友")])),_:1})])),_:1})])),_:1})):u("",!0)])),_:1})):u("",!0),n(ot,{info:_.infos,warningb:_.warningb},null,8,["info","warningb"])])),_:1})}],["__scopeId","data-v-e1967a70"]]);export{We as default};
