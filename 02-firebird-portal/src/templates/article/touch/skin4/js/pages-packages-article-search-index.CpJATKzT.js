import{c as a,E as e,n as l,r as t,G as i,d as o,f as s,o as n,h as r,w as c,i as d,j as p,p as u,m as f,k as g,q as m,l as b,u as k,v as h,F as _,t as w,x,I as v,y,A as C,H as $,C as F,J as D}from"./index-BfhdaSGz.js";import{_ as j}from"./popWarn.B1WhhsWw.js";import{_ as E,r as S,a as T}from"./private_tip.Cj56aYgc.js";import{a as V}from"./article.ByLku1bF.js";import"./mp-html.KQam4B07.js";var B,I;const W=d();const A=E({components:{popWarn:j},data:()=>({wh:W.globalData.navTop,globalData:W.globalData,imgVersion:W.globalData.imgVersion,userError:W.globalData.userError,imgError:W.globalData.imgError,imgurl:W.globalData.imgPath+"/article/",moldConfig:W.globalData.moduleConfig.article||{},listdata:[],page:1,pageSize:10,keywords:"",activeIndex:0,tabDom:[],dotleft:"0px",warningb:!1,info:"",privateb:!1,loadingb:!0,ajaxb:!1,topback:!0,searchWidth:"",flexStyle:"center",biasTop:0,pages:"",appBoolean:!1,Android:!0,shareLink:""}),onLoad(a){B=this,-1==W.globalData.wxprivate?W.watchG("wxprivate",(function(e){B.wxprivate=e,e?B.privateb=!0:B.onload(a)})):W.globalData.wxprivate?B.privateb=!0:B.onload(a)},methods:{onload(e){B.pages=W.pageFn(V),B.keywords=e.keywords;let l={service:"article",action:"alist",mold:"0,1",page:1,pageSize:10,title:B.keywords};B.listFn(l),B.$nextTick((e=>{a().in(this).selectAll(".f-tab .title").boundingClientRect((a=>{B.tabDom=a})).exec()})),"{}"==JSON.stringify(B.moldConfig)?B.configData():W.wxShareFn({title:B.moldConfig.title,imgUrl:B.moldConfig.sharePic,link:B.shareLink,description:B.moldConfig.description});let t=W.globalData.platForm;"web"==t?(B.shareLink=`${location.href.replace("?","&")}&fromShare=${W.globalData.userid}`.replace("&","?"),B.searchWidth="520rpx",B.appBoolean=window.appBoolean,B.appBoolean&&(B.wh=$(50),B.Android=window.Android)):"mp-weixin"==t?(this.biasTop=W.globalData.biasTop_88,B.searchWidth="350rpx",B.flexStyle="flex-start"):"mp-toutiao"==t&&(B.topback=!1,B.searchWidth="100%",B.flexStyle="flex-start")},backFn(){if(B.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=e();a&&a.length>1?l({delta:1}):"web"==B.platForm?location.href=`${B.masterDomain}${window.pathname}${B.pages.index}`:t({url:"/pages/packages/article/index/index"})}},linkTo(a){if(a){if(B.appBoolean)return location.href=a,!1;"web"==W.globalData.platForm?a.indexOf("http")>-1?location.href=a:i({url:a}):i({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},warnFn(a=2e3){B.warningb=!0,clearTimeout(I),I=setTimeout((a=>{B.warningb=!1}),a)},listFn(a,e=!1){B.ajaxb=!0,B.$ajax.post({url:W.encodeUrl("include/ajax.php?"),data:a}).then((a=>{if(100==a.data.state){let l=a.data.info.list;for(let a=0;a<l.length;a++){let e=new Date(1e3*l[a].pubdate),t=(e.getMonth()+1<10?"0":"")+(e.getMonth()+1),i=(e.getDate()<10?"0":"")+e.getDate();l[a].pubdate=`${t}-${i}`}B.listdata=e?B.listdata.concat(a.data.info.list):a.data.info.list,a.data.info.list.length<B.pageSize?B.loadingb=!1:B.loadingb=!0}else B.loadingb=!1;B.ajaxb=!1}))},tabFn(a){let e=B.tabDom;B.dotleft=`calc(${B.dotleft} + ${e[a].left-e[B.activeIndex].left}px)`,B.activeIndex=a,B.searchFn()},searchFn(){let a;B.loadingb=!0,B.page=1,B.listdata=[],a=0==B.activeIndex?{service:"article",action:"alist",mold:"0,1",page:1,pageSize:10,title:B.keywords}:{service:"article",action:"selfmedia",page:1,pageSize:10,title:B.keywords},B.listFn(a)},meitiCareFn(a){if(B.ajaxb)return!1;if(!W.loginCheck(B.pages.search))return!1;function e(a){B.ajaxb=!0;let e=B.listdata[a],l={service:"member",action:"followMember",for:"media",id:e.id};B.$ajax.post({url:W.encodeUrl("include/ajax.php?"),data:l}).then((a=>{100==a.data.state?e.isfollow=!e.isfollow:B.info=a.data.info,B.ajaxb=!1}))}B.listdata[a].isfollow?o({title:"确认是否不再关注",cancelColor:"#666",confirmColor:"#f21818",success:l=>{l.confirm&&e(a)}}):e(a)},async configData(){let a=await B.$ajax.post({url:W.encodeUrl("include/ajax.php?"),data:{service:"article",action:"config"}});100==a.data.state&&(B.moldConfig=a.data.info,W.wxShareFn({title:B.moldConfig.title,imgUrl:B.moldConfig.sharePic,link:B.shareLink,description:B.moldConfig.description}),W.globalData.moduleConfig.article=a.data.info)}},watch:{globalData:{handler(a,e){B.imgVersion=a.imgVersion},deep:!0},info(a,e){""!=a&&(B.warnFn(),setTimeout((a=>{B.info=""}),2200))}},onPullDownRefresh(){W.reloadFn()},onReachBottom(){if(!B.loadingb)return;let a;a=0==B.activeIndex?{service:"article",action:"alist",mold:"0,1",page:++B.page,pageSize:10,title:B.keywords}:{service:"article",action:"selfmedia",page:++B.page,pageSize:10,title:B.keywords},B.ajaxb||B.listFn(a,!0)},onShareAppMessage(){return{title:this.moldConfig.title}},onShareTimeline(){return{title:this.moldConfig.title,imageUrl:this.moldConfig.sharePic}}},[["render",function(a,e,l,t,i,o){const d=x,$=p,E=v,V=y,B=F,I=D,W=S(s("popWarn"),j),A=S(s("private_tip"),T);return n(),r($,{class:"Shell"},{default:c((()=>[u($,{class:"fixedTop"},{default:c((()=>[u($,{class:"f-search",style:f(`padding-top:${i.wh+i.biasTop}px;justify-content:${i.flexStyle};${"web"==a.platForm?"flex:1":""}`)},{default:c((()=>[i.topback&&i.Android?(n(),r($,{key:0,class:"fs-back",onClick:o.backFn},{default:c((()=>[u(d,{src:`${i.imgurl}back.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])):g("",!0),u(E,{type:"text",placeholder:"请输入关键字",modelValue:i.keywords,"onUpdate:modelValue":e[0]||(e[0]=a=>i.keywords=a),onConfirm:o.searchFn,style:f(`width:${i.searchWidth};margin-left:${i.topback&&i.Android?"0rpx":"20rpx"}`)},null,8,["modelValue","onConfirm","style"]),u($,{class:"fs-btn",onClick:o.searchFn},{default:c((()=>[m("搜索")])),_:1},8,["onClick"])])),_:1},8,["style"]),u($,{class:"f-tab"},{default:c((()=>[u($,{class:b(["title",{active:0==i.activeIndex}]),onClick:e[1]||(e[1]=a=>o.tabFn(0))},{default:c((()=>[u(V,null,{default:c((()=>[m("综合")])),_:1}),u($,{class:"dot",style:f(`left:${i.dotleft};`)},null,8,["style"])])),_:1},8,["class"]),u($,{class:b(["title",{active:1==i.activeIndex}]),onClick:e[2]||(e[2]=a=>o.tabFn(1))},{default:c((()=>[m("政企号")])),_:1},8,["class"])])),_:1})])),_:1}),0==i.activeIndex?(n(),r($,{key:0,class:"tabLeft"},{default:c((()=>[(n(!0),k(_,null,h(i.listdata,((a,e)=>(n(),r($,{class:"item",key:e},{default:c((()=>[1==a.mold?(n(),r($,{key:0,class:"simple_2",onClick:e=>o.linkTo(i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:c((()=>[u(B,{class:"title",nodes:a.title},null,8,["nodes"]),u($,{class:"picture"},{default:c((()=>[(n(!0),k(_,null,h(a.group_img.splice(0,3),((a,e)=>(n(),r(d,{key:e,src:a.path||i.imgError,mode:"aspectFill",onError:e=>a.path=i.imgError},null,8,["src","onError"])))),128))])),_:2},1024),u($,{class:"art_info"},{default:c((()=>[u($,{class:"nickname"},{default:c((()=>[m(w(a.source)+" · "+w(a.pubdate),1)])),_:2},1024),u($,{class:"browser"},{default:c((()=>[u(d,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),u(V,null,{default:c((()=>[m(w(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):1==a.typeset?(n(),r($,{key:1,class:"simple_3",onClick:e=>o.linkTo(i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:c((()=>[u(B,{class:"title",nodes:a.title},null,8,["nodes"]),0==a.mold?(n(),r(d,{key:0,src:a.litpic||i.imgError,mode:"aspectFill",class:"picture",onError:e=>a.litpic=i.imgError},null,8,["src","onError"])):g("",!0),2==a.mold||3==a.mold?(n(),r(I,{key:1,src:a.videourl,class:"video",objectFit:"cover",style:{"object-fit":"cover"},"enable-progress-gesture":!1},null,8,["src"])):g("",!0),u($,{class:"art_info"},{default:c((()=>[u($,{class:"nickname"},{default:c((()=>[m(w(a.source)+" · "+w(a.pubdate),1)])),_:2},1024),u($,{class:"browser"},{default:c((()=>[u(d,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),u(V,null,{default:c((()=>[m(w(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):(n(),r($,{key:2,class:"simple_1",onClick:e=>o.linkTo(i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:c((()=>[a.litpic?(n(),k(_,{key:0},[u($,{class:"left"},{default:c((()=>[u(B,{class:"title",nodes:a.title},null,8,["nodes"]),u($,{class:"art_info"},{default:c((()=>[u($,{class:"nickname"},{default:c((()=>[m(w(a.source)+" · "+w(a.pubdate),1)])),_:2},1024),u($,{class:"browser"},{default:c((()=>[u(d,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),u(V,null,{default:c((()=>[m(w(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),u($,{class:"right"},{default:c((()=>[u(d,{src:a.litpic||i.imgError,mode:"aspectFill",onError:e=>a.litpic=i.imgError},null,8,["src","onError"])])),_:2},1024)],64)):(n(),r($,{key:1,class:"left"},{default:c((()=>[u(B,{class:"title",nodes:a.title},null,8,["nodes"]),u($,{class:"art_info",style:{"margin-top":"40rpx"}},{default:c((()=>[u($,{class:"nickname"},{default:c((()=>[m(w(a.source)+" · "+w(a.pubdate),1)])),_:2},1024),u($,{class:"browser"},{default:c((()=>[u(d,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),u(V,null,{default:c((()=>[m(w(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1032,["onClick"]))])),_:2},1024)))),128))])),_:1})):(n(),r($,{key:1,class:"tabRight"},{default:c((()=>[(n(!0),k(_,null,h(i.listdata,((a,e)=>(n(),r($,{class:"item",key:e,onClick:e=>o.linkTo(i.appBoolean?a.url:`${i.pages.mddetail}?id=${a.id}`)},{default:c((()=>[u(d,{src:a.photo||i.userError,mode:"aspectFill",class:"picture",onError:e=>a.photo=i.userError},null,8,["src","onError"]),u($,{class:"nickname"},{default:c((()=>[u($,{class:"name"},{default:c((()=>[m(w(a.name),1)])),_:2},1024),u(V,{class:"text"},{default:c((()=>[m(w(a.profile),1)])),_:2},1024),u($,{class:"count"},{default:c((()=>[u($,null,{default:c((()=>[m("文章数量:"),u(V,null,{default:c((()=>[m(w(a.total_article),1)])),_:2},1024)])),_:2},1024),u($,null,{default:c((()=>[m("浏览量:"),u(V,null,{default:c((()=>[m(w(a.click),1)])),_:2},1024)])),_:2},1024),u($,null,{default:c((()=>[m("粉丝:"),u(V,null,{default:c((()=>[m(w(a.total_fans),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),0==a.isfollow?(n(),r($,{key:0,class:"btn",onClick:C((a=>o.meitiCareFn(e)),["stop"])},{default:c((()=>[u(d,{src:`${i.imgurl}add_1.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),u(V,null,{default:c((()=>[m("关注")])),_:1})])),_:2},1032,["onClick"])):(n(),r($,{key:1,class:"btn hasCare",onClick:C((a=>o.meitiCareFn(e)),["stop"])},{default:c((()=>[m("已关注")])),_:2},1032,["onClick"]))])),_:2},1032,["onClick"])))),128))])),_:1})),0!=i.listdata.length||i.loadingb?(n(),r($,{key:3,class:"loadingText"},{default:c((()=>[m(w(i.loadingb?"加载中...":"没有更多了~"),1)])),_:1})):(n(),r($,{key:2,class:"noData"},{default:c((()=>[u(d,{src:`${i.imgurl}noData.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),u(V,null,{default:c((()=>[m("没有相关结果，看看别的吧~")])),_:1})])),_:1})),u(W,{info:i.info,warningb:i.warningb},null,8,["info","warningb"]),u(A,{privateShow:i.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-a404878f"]]);export{A as default};
