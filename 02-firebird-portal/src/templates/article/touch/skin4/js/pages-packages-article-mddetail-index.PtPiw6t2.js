import{c as a,H as e,E as l,n as t,r as i,G as o,a as s,b as n,d as r,a0 as d,a1 as c,e as p,f as u,o as m,h as f,w as g,i as _,j as b,m as k,p as h,q as w,k as x,t as $,u as v,v as y,F,x as C,y as T,l as D,C as S,J as E}from"./index-BfhdaSGz.js";import{_ as j,r as V,a as B}from"./private_tip.Cj56aYgc.js";import{a as L}from"./article.ByLku1bF.js";import{w as I}from"./webTop.CwDVe_Cu.js";var A,U;const P=_();const z=j({components:{webTop:I},data:()=>({imgVersion:P.globalData.imgVersion,masterDomain:P.globalData.masterDomain,imgurl:P.globalData.imgPath+"/article/",imgError:P.globalData.imgError,userError:P.globalData.userError,wh:P.globalData.navTop,moldConfig:P.globalData.moduleConfig.article||{},listdata:[],detail:{ac_bannerList:[{}]},page:1,pageSize:10,activeIndex:0,tabItem:[{mold:0,title:"头条"},{mold:2,title:"视频"},{mold:1,title:"图集"},{mold:3,title:"短视频"}],tabDom:[],dotleft:"50%",dotransform:"-50%",privateb:!1,loadingb:!1,ajaxb:!1,platForm:P.globalData.platForm,appBoolean:!1,Android:!1,pages:{},stickyTop:0,nav:P.globalData.navTop,biasTop:P.globalData.biasTop_88,andTop:"0rpx",topShow:!0,shareLink:""}),onLoad(a){A=this,-1==P.globalData.wxprivate?P.watchG("wxprivate",(function(e){A.wxprivate=e,e?A.privateb=!0:A.onload(a)})):P.globalData.wxprivate?A.privateb=!0:A.onload(a)},methods:{onload(l){A.pages=P.pageFn(L);let t={service:"article",action:"selfmediaDetail",aid:l.id};switch(A.detailData(t),t={service:"article",action:"alist",orderby:1,page:1,pageSize:10,media:l.id,mold:0},A.listFn(t),A.$nextTick((e=>{a().in(this).selectAll(".tab .item .text").boundingClientRect((a=>{A.tabDom=a})).exec()})),"{}"==JSON.stringify(A.moldConfig)?A.configData():P.wxShareFn({title:A.moldConfig.title,imgUrl:A.moldConfig.sharePic,link:A.shareLink,description:A.moldConfig.description}),P.globalData.imgVersion?A.imgVersion=P.globalData.imgVersion:P.watchG("imgVersion",(function(a){A.imgVersion=a})),A.platForm){case"web":A.shareLink=`${location.href.replace("?","&")}&fromShare=${P.globalData.userid}`.replace("&","?"),A.appBoolean=window.appBoolean,A.Android=window.Android,A.appBoolean?A.Android?(A.andTop="60rpx",A.stickyTop=e(148)):A.stickyTop=0:A.stickyTop=e(88);break;case"mp-weixin":A.stickyTop=e(88)+A.nav+A.biasTop;break;case"mp-toutiao":A.stickyTop=0}},async configData(){let a=await A.$ajax.post({url:P.encodeUrl("include/ajax.php?"),data:{service:"article",action:"config"}});100==a.data.state&&(A.moldConfig=a.data.info,P.wxShareFn({title:A.moldConfig.title,imgUrl:A.moldConfig.sharePic,link:A.shareLink,description:A.moldConfig.description}),P.globalData.moduleConfig.article=a.data.info)},backFn(){if(A.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=l();a&&a.length>1?t({delta:1}):"web"==A.platForm?location.href=`${A.masterDomain}${window.pathname}${A.pages.index}`:i({url:"/pages/packages/article/index/index"})}},linkTo(a){if(a){if(A.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;"web"==P.globalData.platForm?a.indexOf("http")>-1?location.href=a:o({url:a}):o({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},warnFn(a=2e3){A.warningb=!0,clearTimeout(U),U=setTimeout((a=>{A.warningb=!1}),a)},listFn(a,e=!1){A.ajaxb=!0,A.$ajax.post({url:"include/ajax.php?",data:a}).then((a=>{if(100==a.data.state){let l=a.data.info.list;for(let a=0;a<l.length;a++){let e=new Date(1e3*l[a].pubdate),t=(e.getMonth()+1<10?"0":"")+(e.getMonth()+1),i=(e.getDate()<10?"0":"")+e.getDate();l[a].pubdate=`${t}-${i}`}A.listdata=e?A.listdata.concat(a.data.info.list):[...a.data.info.list],a.data.info.list.length<A.pageSize?A.loadingb=!1:A.loadingb=!0}else A.loadingb=!1;A.ajaxb=!1}))},detailData(a){A.$ajax.post({url:P.encodeUrl("include/ajax.php?"),data:a}).then((a=>{100==a.data.state&&(a.data.info.ac_photo=a.data.info.ac_photo||A.userError,A.detail=a.data.info,A.topShow=!Boolean(A.detail.ac_bannerList.length),s({title:a.data.info.ac_name}))}))},tabFn(a){if(a==A.activeIndex)return!1;A.page=1,A.listdata=[],A.loadingb=!0;let e={service:"article",action:"alist",orderby:1,page:1,pageSize:10,media:A.detail.id,mold:A.tabItem[a].mold};A.listFn(e);let l=A.tabDom;"50%"==A.dotleft&&(A.dotleft="0px"),A.dotleft=Number(A.dotleft.replace("px","")),A.dotleft=A.dotleft+l[a].left-l[A.activeIndex].left+"px",A.dotransform=`calc(${l[a].width/2}px - 26rpx)`,A.activeIndex=a},pauseFn(a,e){n(a).pause(),A.linkTo(e)},careFn(){if(A.ajaxb)return!1;if(!P.loginCheck(`${A.pages.mddtail}?id=${A.detail.id}`))return!1;function a(){A.ajaxb=!0;let a={service:"member",action:"followMember",for:"media",id:A.detail.id};A.$ajax.post({url:P.encodeUrl("include/ajax.php?"),data:a}).then((a=>{if(100==a.data.state){let a=A.detail.isfollow;A.detail.isfollow=!a}else d({title:a.data.info,icon:"none",success:a=>{setTimeout((a=>{c()}),3e3)}});A.ajaxb=!1}))}A.detail.isfollow?r({title:"确认是否不再关注？",cancelColor:"#666",confirmColor:"#f21818",success:e=>{e.confirm&&a()}}):a()}},watch:{info(a,e){""!=a&&(A.warnFn(),setTimeout((a=>{A.info=""}),2200))}},onPullDownRefresh(){P.reloadFn()},onReachBottom(){if(!A.loadingb)return;let a=A.activeIndex,e={service:"article",action:"alist",orderby:1,page:++A.page,pageSize:10,media:A.detail.id,mold:A.tabItem[a].mold};A.ajaxb||A.listFn(e,!0)},onPageScroll(a){if(A.detail.ac_banner){a.scrollTop>=A.stickyTop?0==A.topShow&&(A.topShow=!0):1==A.topShow&&(A.topShow=!1)}},onShareAppMessage(a){return{title:this.moldConfig.title}},onShareTimeline(){return{title:"资讯",imageUrl:this.moldConfig.sharePic}}},[["render",function(a,e,l,t,i,o){const s=C,n=b,r=T,d=p("web-top"),c=S,_=E,j=V(u("private_tip"),B);return m(),f(n,{class:"Shell"},{default:g((()=>["mp-weixin"==i.platForm?(m(),f(n,{key:0,class:"futureTop",style:k(`padding-top:${i.wh+i.biasTop}px;${i.detail.ac_bannerList.length?"position:fixed;":""};transform:translateY(${i.topShow?"0%":"-100%"})`)},{default:g((()=>[h(n,{class:"wxBack",onClick:o.backFn},{default:g((()=>[h(s,{src:`${i.masterDomain}/static/images/header_back.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"]),h(r,null,{default:g((()=>[w("媒体号")])),_:1})])),_:1},8,["style"])):"mp-toutiao"==i.platForm||i.appBoolean&&!i.Android?x("",!0):(m(),f(d,{key:1,title:"媒体号",module:"article",class:"webTop no",style:k(`padding-top:${i.andTop};${i.detail.ac_bannerList.length?"position:fixed;":""};transform:translateY(${i.topShow?"0%":"-100%"})`)},null,8,["style"])),i.detail.ac_bannerList.length?(m(),f(n,{key:3,class:"infoHas"},{default:g((()=>[h(n,{class:"i-info",style:k(`padding-top:calc(${i.wh+i.biasTop}px + ${i.andTop})`)},{default:g((()=>["mp-weixin"==i.platForm?(m(),f(n,{key:0,class:"futureTop weixin"},{default:g((()=>[h(n,{class:"wxBack",onClick:o.backFn},{default:g((()=>[h(s,{src:`${i.masterDomain}/static/images/header_back.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"]),h(r,null,{default:g((()=>[w("媒体号")])),_:1})])),_:1})):"mp-toutiao"==i.platForm||i.appBoolean&&!i.Android?x("",!0):(m(),f(d,{key:1,title:"",module:"article",class:"webTop have"})),h(n,{class:"ii-bg"},{default:g((()=>[h(s,{src:i.detail.ac_bannerList[0].path,mode:"aspectFill"},null,8,["src"])])),_:1}),h(n,{class:"ii-down"},{default:g((()=>[h(n,{class:"ii-detail"},{default:g((()=>[h(n,{class:"photo"},{default:g((()=>[h(s,{src:i.detail.ac_photo,mode:"aspectFill",onError:e[1]||(e[1]=a=>i.detail.ac_photo=i.userError)},null,8,["src"])])),_:1}),h(n,null,{default:g((()=>[w($(i.detail.ac_name),1)])),_:1})])),_:1}),h(n,{class:"ii-data"},{default:g((()=>[h(n,{class:"item"},{default:g((()=>[h(n,{class:"number"},{default:g((()=>[w($(i.detail.total_article),1)])),_:1}),h(n,{class:"name"},{default:g((()=>[w("文章数")])),_:1})])),_:1}),h(n,{class:"item"},{default:g((()=>[h(n,{class:"number"},{default:g((()=>[w($(i.detail.click),1)])),_:1}),h(n,{class:"name"},{default:g((()=>[w("阅读数")])),_:1})])),_:1}),h(n,{class:"item"},{default:g((()=>[h(n,{class:"number"},{default:g((()=>[w($(i.detail.total_fans),1)])),_:1}),h(n,{class:"name"},{default:g((()=>[w("粉丝")])),_:1})])),_:1})])),_:1})])),_:1}),h(n,{class:"ii-mask"})])),_:1},8,["style"]),h(n,{class:"i-care"},{default:g((()=>[h(n,{class:"intro"},{default:g((()=>[w($(i.detail.ac_profile),1)])),_:1}),0==i.detail.isfollow?(m(),f(n,{key:0,class:"btn no",onClick:o.careFn},{default:g((()=>[h(s,{src:`${i.imgurl}more_white.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),h(r,null,{default:g((()=>[w("关注")])),_:1})])),_:1},8,["onClick"])):(m(),f(n,{key:1,class:"btn has",onClick:o.careFn},{default:g((()=>[h(r,null,{default:g((()=>[w("已关注")])),_:1})])),_:1},8,["onClick"]))])),_:1})])),_:1})):(m(),f(n,{key:2,class:"infoNone"},{default:g((()=>[h(n,{class:"i-media"},{default:g((()=>[h(n,{class:"im-photo"},{default:g((()=>[h(s,{src:i.detail.ac_photo,mode:"aspectFill",onError:e[0]||(e[0]=a=>i.detail.ac_photo=i.userError)},null,8,["src"])])),_:1}),h(n,{class:"im-info"},{default:g((()=>[h(n,{class:"info"},{default:g((()=>[h(n,{class:"title"},{default:g((()=>[w($(i.detail.ac_name),1)])),_:1}),h(n,{class:"intro"},{default:g((()=>[w($(i.detail.ac_profile),1)])),_:1})])),_:1}),0==i.detail.isfollow?(m(),f(n,{key:0,class:"btn no",onClick:o.careFn},{default:g((()=>[h(s,{src:`${i.imgurl}more_white.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),h(r,null,{default:g((()=>[w("关注")])),_:1})])),_:1},8,["onClick"])):(m(),f(n,{key:1,class:"btn has",onClick:o.careFn},{default:g((()=>[h(r,null,{default:g((()=>[w("已关注")])),_:1})])),_:1},8,["onClick"]))])),_:1})])),_:1}),h(n,{class:"i-data"},{default:g((()=>[h(n,{class:"item"},{default:g((()=>[h(n,{class:"id-number"},{default:g((()=>[w($(i.detail.total_article),1)])),_:1}),h(n,{class:"id-name"},{default:g((()=>[w("文章数")])),_:1})])),_:1}),h(n,{class:"item"},{default:g((()=>[h(n,{class:"id-number"},{default:g((()=>[w($(i.detail.click),1)])),_:1}),h(n,{class:"id-name"},{default:g((()=>[w("阅读数")])),_:1})])),_:1}),h(n,{class:"item"},{default:g((()=>[h(n,{class:"id-number"},{default:g((()=>[w($(i.detail.total_fans),1)])),_:1}),h(n,{class:"id-name"},{default:g((()=>[w("粉丝")])),_:1})])),_:1})])),_:1})])),_:1})),h(n,{class:"tab",style:k(`top:${i.stickyTop}px`)},{default:g((()=>[(m(!0),v(F,null,y(i.tabItem,((a,e)=>(m(),f(n,{class:D(["item",{active:e==i.activeIndex}]),key:e,onClick:a=>o.tabFn(e)},{default:g((()=>[h(n,{class:"text"},{default:g((()=>[h(r,null,{default:g((()=>[w($(a.title),1)])),_:2},1024),0==e?(m(),f(n,{key:0,class:"dot",style:k(`left:${i.dotleft};transform:translateX(${i.dotransform})`)},null,8,["style"])):x("",!0)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"]),h(n,{class:"list"},{default:g((()=>[(m(!0),v(F,null,y(i.listdata,((a,e)=>(m(),v(F,{key:e},[1==a.mold?(m(),f(n,{key:0,class:"simple_2",onClick:e=>o.linkTo(i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:g((()=>[h(c,{class:"title",nodes:a.title},null,8,["nodes"]),h(n,{class:"picture"},{default:g((()=>[(m(!0),v(F,null,y(a.group_img.slice(0,3),((a,e)=>(m(),f(s,{key:e,src:a.path||i.imgError,mode:"aspectFill",onError:e=>a.path=i.imgError},null,8,["src","onError"])))),128))])),_:2},1024),h(n,{class:"art_info"},{default:g((()=>[h(n,{class:"nickname"},{default:g((()=>[w($(a.source)+" · "+$(a.pubdate),1)])),_:2},1024),h(n,{class:"browser"},{default:g((()=>[h(s,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),h(r,null,{default:g((()=>[w($(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):0==a.mold&&1==a.typeset||2==a.mold||3==a.mold?(m(),f(n,{key:1,class:"simple_3",onClick:l=>o.pauseFn(`tvVideo_toutiaoList_${e}`,i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:g((()=>[h(c,{class:"title",nodes:a.title},null,8,["nodes"]),0==a.mold?(m(),f(s,{key:0,src:a.litpic||i.imgError,mode:"aspectFill",class:"picture",onError:e=>a.litpic=i.imgError},null,8,["src","onError"])):x("",!0),2==a.mold||3==a.mold?(m(),f(_,{key:1,src:a.videourl,class:"video","enable-progress-gesture":!1,poster:a.litpic,id:`tvVideo_toutiaoList_${e}`},null,8,["src","poster","id"])):x("",!0),h(n,{class:"art_info"},{default:g((()=>[h(n,{class:"nickname"},{default:g((()=>[w($(a.source)+" · "+$(a.pubdate),1)])),_:2},1024),h(n,{class:"browser"},{default:g((()=>[h(s,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),h(r,null,{default:g((()=>[w($(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):3!=a.mold?(m(),f(n,{key:2,class:"simple_1",onClick:e=>o.linkTo(i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:g((()=>[a.litpic?(m(),v(F,{key:0},[h(n,{class:"left"},{default:g((()=>[h(c,{class:"title",nodes:a.title},null,8,["nodes"]),h(n,{class:"art_info"},{default:g((()=>[h(n,{class:"nickname"},{default:g((()=>[w($(a.source)+" · "+$(a.pubdate),1)])),_:2},1024),h(n,{class:"browser"},{default:g((()=>[h(s,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),h(r,null,{default:g((()=>[w($(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(n,{class:"right"},{default:g((()=>[h(s,{src:a.litpic||i.imgError,mode:"aspectFill",onError:e=>a.litpic=i.imgError},null,8,["src","onError"])])),_:2},1024)],64)):(m(),f(n,{key:1,class:"left"},{default:g((()=>[h(c,{class:"title",nodes:a.title},null,8,["nodes"]),h(n,{class:"art_info",style:{"margin-top":"40rpx"}},{default:g((()=>[h(n,{class:"nickname"},{default:g((()=>[w($(a.source)+" · "+$(a.pubdate),1)])),_:2},1024),h(n,{class:"browser"},{default:g((()=>[h(s,{src:`${i.imgurl}read.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),h(r,null,{default:g((()=>[w($(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1032,["onClick"])):x("",!0)],64)))),128))])),_:1}),h(n,{class:"loadingText"},{default:g((()=>[w($(i.loadingb?"加载中...":"没有更多了~"),1)])),_:1}),h(j,{privateShow:i.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-0ad46e65"]]);export{z as default};
