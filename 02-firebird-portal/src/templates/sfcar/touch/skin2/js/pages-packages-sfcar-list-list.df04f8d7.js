import{u as a,a as e,s as t,h as n,B as i,b as l,o,d as s,w as c,n as r,e as p,i as d,f,k as g,t as b,p as u,j as y,l as m,F as h,m as v,r as x,x as P,q as C,v as _,y as w}from"./index-6620ed53.js";import{_ as k,d as D,p as F,r as I,a as T,b as S,c as V,e as j}from"./sfcar.305897f8.js";var B,N;const U=p();const A=k({components:{popWarn:D},data:()=>({imgVersion:U.globalData.imgVersion,masterDomain:U.globalData.masterDomain,wh:U.globalData.navTop,imgPath:`${U.globalData.imgPath}/sfcar`,cityInfo:U.globalData.cityInfo,listdata:[],sfConfig:{},page:1,pageSize:10,activeIndex:1,tabConfig:[{cartype:"",orderby:1},{cartype:"",orderby:1}],startPlace:"",endPlace:"",callItem:{},warningb:!1,info:"",phoneData:{},payInfo:{},paypopb:!1,loadingb:!0,ajaxb:!1,fixPopb:!1,fixPopConb:!1,loadCardb:!1,privateb:!1,platForm:U.globalData.platForm,appBoolean:!1,Android:!1,pages:{},biasTop:0,navTop:0,shareLink:"",firstb:!0}),onLoad(a){B=this,U.globalData.imgVersion?B.imgVersion=U.globalData.imgVersion:U.watchG("imgVersion",(a=>{B.imgVersion=a})),-1==U.globalData.wxprivate?U.watchG("wxprivate",(function(e){B.wxprivate=e,e?B.privateb=!0:B.onload(a)})):U.globalData.wxprivate?B.privateb=!0:B.onload(a)},onShow(){B.firstb?B.firstb=!1:U.wxShareFn({title:`{${B.startPlace}}到{${B.endPlace}}(找顺风车)`,link:B.shareLink,imgUrl:B.sfConfig.sharePic,description:B.sfConfig.description})},methods:{onload(e){U.cachePage("sfcarIndex",this);let t=B.activeIndex;switch(e&&(t=e.type,B.activeIndex=t,B.tabConfig[t].cartype=e.cartype||"",B.tabConfig[t].orderby=e.orderby||1,B.startPlace=e.startaddr||"",B.endPlace=e.endaddr||""),B.configData(),B.tabFn("activeIndex",t,!0),B.platForm){case"web":B.appBoolean=window.appBoolean,B.cityInfo=window.cityInfo,B.navTop=!B.appBoolean&&a(88),B.shareLink=`${location.href}&fromShare=${U.globalData.userid}`,$('link[rel="canonical"]').attr("href",B.shareLink),$('meta[property="og:title"]').attr("content",B.sfConfig.channelName),$('meta[property="og:description"]').attr("content",B.sfConfig.description||""),window.setupWebViewJavascriptBridge((function(a){a.callHandler("setDragRefresh",{value:"off"},(function(){}))}));break;case"mp-weixin":B.biasTop=U.globalData.biasTop_88,B.navTop=a(88)}B.pages=U.pageFn(F)},async configData(){let a=await B.$ajax.post({url:U.encodeUrl("include/ajax.php?"),data:{service:"sfcar",action:"config"}});100==a.data.state&&(B.sfConfig=a.data.info,U.globalData.moduleConfig.sfcar=a.data.info,"web"!=B.platForm&&e({title:a.data.info.channelName})),U.wxShareFn({title:`{${B.startPlace}}到{${B.endPlace}}(找顺风车)`,link:B.shareLink,imgUrl:B.sfConfig.sharePic,description:B.sfConfig.description}),B.cacheData.sfConfig=B.sfConfig,t("sfcarIndex",B.cacheData)},directTopay(){B.paypopb=!0},async getPhonePayAmount(a){let e=`service=siteConfig&action=payPhoneDeal&aid=${a.aid}&temp=${a.temp}&module=${a.module}`,t=U.encodeUrl(e),i=await B.$ajax.post({url:`include/ajax.php?${t}`});n();let l=i.data;100==l.state?(B.payInfo=l.info,U.globalData.appConfig&&U.globalData.appConfig.cfg_payPhone&&("mp-weixin"==B.platForm&&U.globalData.appConfig.cfg_payPhone.wxmini||"web"==B.platForm&&U.globalData.appBoolean&&window.Android&&U.globalData.appConfig.cfg_payPhone.tencentGDP_app_id&&U.globalData.appConfig.cfg_payPhone.tencentGDP_placement_id)?B.$refs.privatenumber.showRewardPop=!0:B.directTopay()):B.info=l.info},backFn(){U.backFn("/pages/packages/sfcar/index/index")},linkTo(a){if(a){if(B.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;"web"==U.globalData.platForm?a.indexOf("http")>-1?location.href=a:i({url:a}):i({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},warnFn(a=2e3){B.warningb=!0,clearTimeout(N),N=setTimeout((a=>{B.warningb=!1}),a)},listFn(a,e=!1){B.ajaxb=!0,B.$ajax.post({url:U.encodeUrl("include/ajax.php?"),data:a}).then((a=>{100==a.data.state?(B.listdata=e?B.listdata.concat(a.data.info.list):[...a.data.info.list],a.data.info.list.length<B.pageSize?B.loadingb=!1:B.loadingb=!0):B.loadingb=!1,B.ajaxb=!1}))},tabFn(a,e,t=!1){let n=B.activeIndex;if(("activeIndex"==a&&n!=e||"activeIndex"!=a&&B.tabConfig[n][a]!==e||t)&&!B.ajaxb){"activeIndex"==a?(B.activeIndex=e,n=e):B.tabConfig[n][a]=e,B.page=1;let t={service:"sfcar",action:"getsfcarlist",page:1,pageSize:10,cityid:B.cityInfo.cityid,startaddr:B.startPlace,endaddr:B.endPlace,type:n};t={...t,...B.tabConfig[n]},B.listdata=[],B.listFn(t)}},fixPopFn(a){a?(B.fixPopb=!0,setTimeout((a=>{B.fixPopConb=!0}),0)):(B.fixPopConb=!1,setTimeout((a=>{B.fixPopb=!1}),200))},callUpFn(a){if(B.callItem=a,!U.globalData.userid)return U.tologin(B.pages.index),!1;let e=a.tel,t={module:"sfcar",temp:"detail",aid:a.id};a.payPhoneState||!U.globalData.appConfig.cfg_payPhoneState?(l({title:"获取中..."}),U.callPhone(B,e,t)):U.globalData.iOSMiniPay_forbid?w({title:"温馨提示",content:U.globalData.iosMiniPay_msg,showCancel:!1}):(l({title:"获取中..."}),B.getPhonePayAmount(t))},paySuccess(a){a&&a.fromAdv&&1==a.fromAdv||(B.callItem.payPhoneState=1),l({title:"获取中..."});let e={module:"sfcar",temp:"detail",aid:B.callItem.id};U.callPhone(B,a.detail,e)}},watch:{info(a,e){""!=a&&(B.warnFn(),setTimeout((a=>{B.info=""}),2200))}},onPullDownRefresh(){U.reloadFn()},onReachBottom(){if(!B.loadingb)return;let a=B.activeIndex,e={service:"sfcar",action:"getsfcarlist",page:++B.page,pageSize:10,cityid:B.cityInfo.cityid,startaddr:B.startPlace,endaddr:B.endPlace,type:a};e={...e,...B.tabConfig[a]},B.ajaxb||B.listFn(e,!0)},onShareAppMessage:a=>({title:`{${B.startPlace}}到{${B.endPlace}}(找顺风车)`,desc:B.sfConfig.description}),onShareTimeline:()=>({title:`{${B.startPlace}}到{${B.endPlace}}(找顺风车)`,imageUrl:B.sfConfig.sharePic})},[["render",function(a,e,t,n,i,l){const p=I(P("webTop"),T),w=C,k=d,$=_,F=I(P("privatenumber"),S),B=I(P("payBottom"),V),N=I(P("popWarn"),D),U=I(P("private_tip"),j);return o(),s(k,{class:"Shell",style:r(`padding-top:calc(${i.navTop+i.wh+i.biasTop}px + 90rpx);`)},{default:c((()=>["web"!=i.platForm||i.appBoolean?"mp-weixin"==i.platForm?(o(),s(k,{key:1,class:"navTop",style:r(`padding-top:calc(${i.wh+i.biasTop}px);`)},{default:c((()=>[f(k,{class:"n-back",onClick:l.backFn},{default:c((()=>[f(w,{src:`${i.masterDomain}/static/images/header_back.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"]),f($,null,{default:c((()=>[g(b(i.sfConfig.channelName||"顺风车"),1)])),_:1})])),_:1},8,["style"])):u("",!0):(o(),s(p,{key:0,title:i.sfConfig.channelName||"顺风车",module:"sfcar",class:"webTop"},null,8,["title"])),f(k,{class:"fixTop",style:r(`top: calc(${i.navTop+i.wh+i.biasTop}px)`)},{default:c((()=>[f(k,{class:"bar"},{default:c((()=>[f(k,{class:"f-tab"},{default:c((()=>[f(k,{class:y(""===i.tabConfig[i.activeIndex].cartype&&"active"),onClick:e[0]||(e[0]=a=>l.tabFn("cartype",""))},{default:c((()=>[g("全部 ")])),_:1},8,["class"]),1==i.activeIndex?(o(),m(h,{key:0},[f(k,{class:y("0"===i.tabConfig[1].cartype&&"active"),onClick:e[1]||(e[1]=a=>l.tabFn("cartype","0"))},{default:c((()=>[g(" 找乘用车")])),_:1},8,["class"]),f(k,{class:y(1==i.tabConfig[1].cartype&&"active"),onClick:e[2]||(e[2]=a=>l.tabFn("cartype",1))},{default:c((()=>[g(" 找载货车")])),_:1},8,["class"])],64)):(o(),m(h,{key:1},[f(k,{class:y("0"===i.tabConfig[0].cartype&&"active"),onClick:e[3]||(e[3]=a=>l.tabFn("cartype","0"))},{default:c((()=>[g(" 找乘客")])),_:1},8,["class"]),f(k,{class:y(1==i.tabConfig[0].cartype&&"active"),onClick:e[4]||(e[4]=a=>l.tabFn("cartype",1))},{default:c((()=>[g(" 找货物")])),_:1},8,["class"])],64)),f(k,{class:"active",onClick:e[5]||(e[5]=a=>l.fixPopFn(1))},{default:c((()=>[f($,null,{default:c((()=>[g(b(1==i.tabConfig[i.activeIndex].orderby?"最新发布":2==i.tabConfig[i.activeIndex].orderby?"最近出发":1==i.activeIndex&&"天天发车"),1)])),_:1}),f(w,{src:`${i.imgPath}/more-arr.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})])),_:1})])),_:1}),f(k,{class:"f-pop",style:r("display:"+(i.fixPopb?"block":"none")),onClick:e[11]||(e[11]=a=>l.fixPopFn(0))},{default:c((()=>[f(k,{class:"fp-content",style:r(`transform:translateY(${i.fixPopConb?"0%":"-100%"})`),onClick:e[10]||(e[10]=v((()=>{}),["stop"]))},{default:c((()=>[f(k,{class:y(`item ${1==i.tabConfig[i.activeIndex].orderby&&"active"}`),onClick:e[6]||(e[6]=a=>l.tabFn("orderby",1))},{default:c((()=>[f($,null,{default:c((()=>[g("最新发布")])),_:1}),f(w,{src:`${i.imgPath}/on.png?v=${i.imgVersion}`},null,8,["src"])])),_:1},8,["class"]),f(k,{class:y(`item ${2==i.tabConfig[i.activeIndex].orderby&&"active"}`),onClick:e[7]||(e[7]=a=>l.tabFn("orderby",2))},{default:c((()=>[f($,null,{default:c((()=>[g("最近出发")])),_:1}),f(w,{src:`${i.imgPath}/on.png?v=${i.imgVersion}`},null,8,["src"])])),_:1},8,["class"]),1==i.activeIndex?(o(),s(k,{key:0,class:y(`item ${3==i.tabConfig[i.activeIndex].orderby&&"active"}`),onClick:e[8]||(e[8]=a=>l.tabFn("orderby",3))},{default:c((()=>[f($,null,{default:c((()=>[g("天天发车")])),_:1}),f(w,{src:`${i.imgPath}/on.png?v=${i.imgVersion}`},null,8,["src"])])),_:1},8,["class"])):u("",!0),f(k,{class:"btn",onClick:e[9]||(e[9]=a=>l.fixPopFn(0))},{default:c((()=>[g("取消")])),_:1})])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},8,["style"]),f(k,{class:"lc-list"},{default:c((()=>[0==i.listdata.length?(o(),s(k,{key:0,class:"item loading"},{default:c((()=>[g(b(i.loadingb?"加载中...":"暂无相关数据！"),1)])),_:1})):(o(!0),m(h,{key:1},x(i.listdata,((a,e)=>(o(),s(k,{class:"item",key:e,onClick:e=>l.linkTo(i.appBoolean?a.url:`${i.pages.detail}?id=${a.id}`)},{default:c((()=>[f(k,{class:"lcl-address"},{default:c((()=>[f(k,{class:y("label "+(0==a.usetype?"blue":"green"))},{default:c((()=>[g(b(a.usetypename),1)])),_:2},1032,["class"]),f(k,{class:"destination"},{default:c((()=>[f($,null,{default:c((()=>[g(b(a.startaddr),1)])),_:2},1024),f(w,{src:`${i.imgPath}/placeFan.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),f($,null,{default:c((()=>[g(b(a.endaddr),1)])),_:2},1024),a.accessaddr?(o(),s($,{key:0,class:"access"},{default:c((()=>[g(b(a.accessaddr),1)])),_:2},1024)):u("",!0)])),_:2},1024)])),_:2},1024),f(k,{class:"lcl-time"},{default:c((()=>[f(k,{class:"start"},{default:c((()=>[f($,null,{default:c((()=>[g(b(a.missiontime),1)])),_:2},1024),g(b(a.missiontime1),1)])),_:2},1024),f(k,{class:"date"},{default:c((()=>[g(b(a.pubdatetime),1)])),_:2},1024)])),_:2},1024),a.note?(o(),s(k,{key:0,class:"lcl-note"},{default:c((()=>[f($,null,{default:c((()=>[g("备注：")])),_:1}),g(b(a.note),1)])),_:2},1024)):u("",!0),f(k,{class:"lcl-btn"},{default:c((()=>[f(k,{class:y("left "+(0==a.tag.length?"none":""))},{default:c((()=>[a.tag.length>0?(o(),s(k,{key:0,class:"label"},{default:c((()=>[(o(!0),m(h,null,x(a.tag,((a,t)=>(o(),s(k,{key:e},{default:c((()=>[g(b(a),1)])),_:2},1024)))),128))])),_:2},1024)):u("",!0)])),_:2},1032,["class"]),f(k,{class:"btn",onClick:v((e=>l.callUpFn(a)),["stop"])},{default:c((()=>[g("拨打电话")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),0!=i.listdata.length?(o(),s(k,{key:2,class:"loadingText"},{default:c((()=>[g(b(i.loadingb?"加载中...":"没有更多了~"),1)])),_:1})):u("",!0),f(F,{phoneData:i.phoneData,onShowPrivateNumber:e[12]||(e[12]=a=>i.phoneData.showPrivateNumber=0),onShowhasPayNumber:e[13]||(e[13]=a=>i.phoneData.showhasPayNumber=0),ref:"privatenumber",onTopay:l.directTopay,onHaspay:l.paySuccess,payInfo:i.payInfo},null,8,["phoneData","onTopay","onHaspay","payInfo"]),f(B,{service:"siteConfig",action:"payPhone",payInfo:i.payInfo,paypopb:i.paypopb,onPayError:e[14]||(e[14]=a=>i.info=a),onPaySuccess:l.paySuccess,onPaypopb:e[15]||(e[15]=a=>i.paypopb=!1)},null,8,["payInfo","paypopb","onPaySuccess"]),f(N,{info:i.info,warningb:i.warningb},null,8,["info","warningb"]),f(U,{privateShow:i.privateb},null,8,["privateShow"])])),_:1},8,["style"])}],["__scopeId","data-v-34ddc436"]]);export{A as default};
