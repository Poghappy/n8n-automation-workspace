import{E as t,o as e,m as a,v as s,F as i,e as n,n as o,p as l,w as r,l as c,t as d,q as p,x as h,G as u,y as m,i as f,j as g,H as y,J as b,K as _,L as v,B as k,a as w,r as x,k as C,M as I,N as D,f as T,O as P,P as S,Q as F,R as A,T as N,d as O,b as V,h as j,U as B,V as L,W as R,X as q,Y as M,c as E,Z as z,_ as U,u as W,$ as G}from"./index-BELzE-EM.js";const J=(t,e)=>{const a=t.__vccOpts||t;for(const[s,i]of e)a[s]=i;return a};const Q=J({components:{node:J({name:"node",props:{nodeArr:{type:Array,default:[]}}},[["render",function(g,y,b,_,v,k){const w=h,x=u,C=t("node",!0),$=m,I=f;return e(!0),a(i,null,s(b.nodeArr,((t,s)=>(e(),a(i,{key:s},["image"==t.name?(e(),n(w,{key:0,style:o(t.style),src:t.src,mode:"widthFix",onClick:l((e=>t.fn()||""),["stop"])},null,8,["style","src","onClick"])):"video"==t.name?(e(),n(x,{key:1,style:o(t.style),src:t.src,poster:t.poster,"object-fit":"cover",onClick:l((e=>t.fn()||""),["stop"])},null,8,["style","src","poster","onClick"])):"text"==t.name?(e(),n($,{key:2,style:o(t.style),onClick:l((e=>t.fn()||""),["stop"])},{default:r((()=>[c(d(t.text)+" ",1),t.children?(e(),n(C,{key:0,nodeArr:t.children},null,8,["nodeArr"])):p("",!0)])),_:2},1032,["style","onClick"])):"view"==t.name?(e(),n(I,{key:3,style:o(t.style),onClick:l((e=>t.fn()||""),["stop"])},{default:r((()=>[c(d(t.text)+" ",1),t.children?(e(),n(C,{key:0,nodeArr:t.children},null,8,["nodeArr"])):p("",!0)])),_:2},1032,["style","onClick"])):p("",!0)],64)))),128)}]])},props:{nodeSet:{type:Array,default:[]}}},[["render",function(a,s,i,o,l,c){const d=t("node"),p=f;return e(),n(p,{class:"selfNode"},{default:r((()=>[g(d,{nodeArr:i.nodeSet},null,8,["nodeArr"])])),_:1})}]]);function Y(t,e){return"string"==typeof t?e:t}let H=T();const X=J({emits:["wxShareClose"],props:{title:{type:String,default:"标题"},module:{type:String},searchBar:{type:Array,default:[]},searchState:{type:Boolean,default:!1},index:{type:Boolean,default:!1},appShare:{type:Object,default:{description:"",litpic:"",title:""}},hideHead:{type:Boolean,default:!1},shareInfo:{type:Object,default:{}},needPoster:{type:Boolean,default:!1},noRightBtn:{type:Boolean,default:!1},titleChange:{type:Boolean,default:!0}},data:()=>({appConfig:"",masterDomain:H.globalData.masterDomain,imgVersion:H.globalData.imgVersion,siteConfig:H.globalData.siteConfig,imgError:H.globalData.imgError,webdyMini:H.globalData.webdyMini,searchSrc:"",searchText:"",searchStyle:"",moduleData:[],msgData:{},popb:!1,popconb:!1,shareb:!1,shareconb:!1,qrb:!1,qrconb:!1,wxshareb:!1,shareItem:[{id:1,title:"生成海报",src:`${H.globalData.imgPath}/article/poster.png?v=${H.globalData.imgVersion}`,fn:"",need:!1},{id:2,title:"微信好友",src:`${H.globalData.imgPath}/article/wechat.png?v=${H.globalData.imgVersion}`,fn:"",need:!0},{id:3,title:"朋友圈",src:`${H.globalData.imgPath}/article/friends.png?v=${H.globalData.imgVersion}`,fn:"",need:!0},{id:4,title:"微博",src:`${H.globalData.imgPath}/article/weibo.png?v=${H.globalData.imgVersion}`,fn:"",need:!0},{id:5,title:"QQ好友",src:`${H.globalData.imgPath}/article/QQ.png?v=${H.globalData.imgVersion}`,fn:"",need:!0},{id:6,title:"QQ空间",src:`${H.globalData.imgPath}/article/QQspace.png?v=${H.globalData.imgVersion}`,fn:"",need:!0}],shareOperate:[{id:7,title:"复制链接",src:`${H.globalData.imgPath}/article/link.png?v=${H.globalData.imgVersion}`,fn:"",need:!0},{id:8,title:"当面扫码",src:`${H.globalData.imgPath}/article/2Dcode.png?v=${H.globalData.imgVersion}`,fn:"",need:!0}],shareLink:"",appBoolean:!1,copySuccessb:!1,safarib:!1}),mounted(){let t=this;H.watchG("siteConfig",(function(e){t.siteConfig=e})),H.watchG("appConfig",(function(e){t.appConfig=e})),this.getModuleNav(),this.massageFn();let e=this.shareInfo.url?this.shareInfo.url:window.location.href,a=H.globalData.userid?"fromShare="+H.globalData.userid:"";this.shareLink=`${e}${e.includes("?")?"&":"?"}${a}`,this.appBoolean=window.appBoolean,document.querySelector('link[rel="canonical"]').setAttribute("href",t.shareLink);let s=navigator.userAgent.toLowerCase(),i=-1!==s.indexOf("safari")&&-1===s.indexOf("browser")&&-1===s.indexOf("android");for(let l=0;l<this.shareItem.length;l++){switch(this.shareItem[l].id){case 1:this.shareItem[l].need=this.needPoster,this.shareItem[l].fn=()=>{this.$emit("poster",1),this.shareFn(0)},"info"==this.module&&location.href.includes("/detail")&&(this.shareItem[l].need=!0);break;case 2:this.shareItem[l].fn=()=>{this.appBoolean?n("weixin"):H.globalData.webWeixin?(this.wxshareb=!0,t.shareFn(0),t.$emit("wxShareClose",!0)):o()};break;case 3:this.shareItem[l].fn=()=>{this.appBoolean?n("weixin"):H.globalData.webWeixin?(this.wxshareb=!0,t.shareFn(0)):o()};break;case 4:this.shareItem[l].fn=()=>{this.appBoolean?n("weibo"):this.linkTo(`http://service.weibo.com/share/share.php?url=${encodeURIComponent(this.shareLink)}`)};break;case 5:this.shareItem[l].fn=()=>{this.appBoolean?n("qq"):H.globalData.webWeixin?(this.wxshareb=!0,t.shareFn(0)):o()};break;case 6:this.shareItem[l].fn=()=>{this.appBoolean?n("qzone"):this.linkTo(`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${encodeURIComponent(this.shareLink)}`)}}}for(let l=0;l<this.shareOperate.length;l++){let e=this.shareOperate[l].id;switch(this.shareOperate[l],e){case 7:this.shareOperate[l].fn=()=>{y({data:this.shareLink,success:e=>{b(),t.copySuccessb=!0}}),t.shareconb=!1};break;case 8:this.shareOperate[l].fn=()=>{this.qrCodeFn(1)}}}function n(e){window.setupWebViewJavascriptBridge((function(a){a.callHandler("appShare",{platform:e,url:t.shareLink,title:t.appShare.title,imageUrl:t.appShare.litpic,summary:t.appShare.description},(function(t){JSON.parse(t)}))}))}function o(){navigator.share?(t.shareFn(0),i?t.safarib=!0:navigator.share({url:document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:t.shareLink,title:t.appShare.title||t.title,text:t.appShare.title||t.title})):y({data:`${t.appShare.title||t.title} ${t.shareLink}`,success:e=>{b(),t.copySuccessb=!0}}),t.shareconb=!1}},methods:{backFn(){if(this.siteConfig==this.module)return!1;if(this.appBoolean)return window.setupWebViewJavascriptBridge((function(t){t.callHandler("goBack",{},(function(t){}))})),!1;{let t=_();t&&t.length>1?v({delta:1}):this.index?location.href=this.masterDomain:history.back()}},linkTo(t){t&&(t.indexOf("http")>-1?location.href=t:k({url:t}))},getModuleNav(){this.$ajax.post({url:"include/ajax.php?",data:{service:"siteConfig",action:"siteModule",type:1}}).then((t=>{100==t.data.state&&(this.moduleData=t.data.info)}))},popFn(t){t?(this.popb=!0,setTimeout((t=>{this.popconb=!0}),0),this.$emit("popState",!0)):(document.body.style.overflow="auto",this.popconb=!1,setTimeout((t=>{this.popb=!1}),220),this.shareb||this.$emit("popState",!1))},shareFn(t){1==t?(this.shareb=!0,this.popFn(0),setTimeout((t=>{this.shareconb=!0}),0),document.body.style.overflow="hidden"):(this.shareconb=!1,this.copySuccessb=!1,setTimeout((t=>{this.shareb=!1}),200),document.body.style.overflow="auto",this.$emit("popState",!1))},qrCodeFn(t){0==t?(this.qrconb=!1,setTimeout((t=>{this.qrb=!1}),220)):(this.qrb=!0,setTimeout((t=>{this.qrconb=!0}),0))},massageFn(){this.$ajax.post({url:H.encodeUrl("include/ajax.php?"),data:{service:"member",action:"message",type:"tongji",im:1}}).then((t=>{100==t.data.state&&(this.msgData=t.data.info.pageInfo)}))}},watch:{appShare:{deep:!0,handler(t,e){let a=this;a.titleChange||document.querySelector('meta[property="og:title"]').setAttribute("content",t.title||a.title),document.querySelector('meta[property="og:description"]').setAttribute("content",t.description||""),t.litpic&&document.querySelector('meta[property="og:image"]').setAttribute("content",t.litpic),H.globalData.webWeixin&&w({title:t.title||a.title})}},safarib(t,e){document.body.style.overflow=t?"hidden":"auto"}}},[["render",function(t,u,y,b,_,v){const k=h,w=f,$=Y(x("selfDom"),Q),T=m;return e(),n(w,{class:"component"},{default:r((()=>[g(k,{src:y.appShare.litpic||_.imgError,style:{display:"none"}},null,8,["src"]),y.hideHead?p("",!0):(e(),n(w,{key:0,class:"header"},{default:r((()=>[g(w,{class:"h-back",onClick:v.backFn,style:o(_.siteConfig.defaultindex==y.module&&y.index?"opacity:0":"")},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/header_back.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick","style"]),g(w,{class:"h-text"},{default:r((()=>[c(d(y.title),1)])),_:1}),y.noRightBtn?(e(),n(w,{key:1,class:"h-order"})):(e(),n(w,{key:0,class:"h-order",onClick:u[0]||(u[0]=t=>v.popFn(1))},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/header_la.png?v=${_.imgVersion}`,mode:"aspectFit",class:"ho-more"},null,8,["src"]),_.msgData.total>0?(e(),n(w,{key:0,class:"ho-message"},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/dot.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0)])),_:1})),y.searchBar.length>0?(e(),n($,{key:2,class:C(["selfSearch",{show:y.searchState}]),nodeSet:y.searchBar},null,8,["class","nodeSet"])):p("",!0)])),_:1})),I(g(w,{class:"order",onClick:u[9]||(u[9]=t=>v.popFn(0))},{default:r((()=>[g(w,{class:"o-content",style:o(`transform:translateY(${_.popconb?"0%":"-100%"});padding:${_.appBoolean?"108rpx":"48rpx"} 0rpx 40rpx`),onClick:u[8]||(u[8]=l((()=>{}),["stop"]))},{default:r((()=>[g(w,{class:"oc-title"},{default:r((()=>[g(T,null,{default:r((()=>[c("全局导航")])),_:1}),g(k,{src:`${_.masterDomain}/static/images/close_2.png?v=${_.imgVersion}`,mode:"aspectFit",onClick:u[1]||(u[1]=t=>v.popFn(0))},null,8,["src"])])),_:1}),g(w,{class:"oc-all"},{default:r((()=>[g(w,{class:"item",onClick:u[2]||(u[2]=t=>v.linkTo(_.masterDomain))},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/top_fast1.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(T,null,{default:r((()=>[c("首页")])),_:1})])),_:1}),g(w,{class:"item",onClick:u[3]||(u[3]=t=>v.linkTo(`${_.appConfig.cfg_user_index}/message.html`))},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/top_fast2.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(T,null,{default:r((()=>[c("消息")])),_:1}),_.msgData.total>0?(e(),n(w,{key:0,class:"mgs"},{default:r((()=>[c(d(_.msgData.total),1)])),_:1})):p("",!0)])),_:1}),g(w,{class:"item",onClick:u[4]||(u[4]=t=>v.linkTo(`${_.appConfig.cfg_user_index}`))},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/top_fast3.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(T,null,{default:r((()=>[c("会员中心")])),_:1})])),_:1}),g(w,{class:"item",onClick:u[5]||(u[5]=t=>v.shareFn(1))},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/top_fast5.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(T,null,{default:r((()=>[c("分享")])),_:1})])),_:1})])),_:1}),g(w,{class:"oc-nav",onTouchmove:u[6]||(u[6]=l((()=>{}),["stop"])),onTouch:u[7]||(u[7]=l((()=>{}),["stop"]))},{default:r((()=>[(e(!0),a(i,null,s(_.moduleData,((t,a)=>(e(),n(w,{class:"item",key:a,onClick:e=>v.linkTo(t.url)},{default:r((()=>[g(k,{src:t.icon,mode:"aspectFit"},null,8,["src"]),g(T,null,{default:r((()=>[c(d(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),g(w,{class:"oc-bg"}),g(w,{class:"oc-bar"})])),_:1},8,["style"])])),_:1},512),[[D,_.popb]]),_.shareb?(e(),n(w,{key:1,class:"sharePop",onClick:u[13]||(u[13]=t=>v.shareFn(0))},{default:r((()=>[g(w,{class:"s-content",style:o(`transform:translateY(${_.shareconb?"0%":"100%"})`),onClick:u[10]||(u[10]=l((()=>{}),["stop"]))},{default:r((()=>[g(w,{class:"sc-title"},{default:r((()=>[c("分享")])),_:1}),_.webdyMini?p("",!0):(e(),n(w,{key:0,class:"sc-way"},{default:r((()=>[(e(!0),a(i,null,s(_.shareItem,((t,s)=>(e(),a(i,{key:s},[t.need?(e(),n(w,{key:0,class:"item",onClick:t.fn},{default:r((()=>[g(w,null,{default:r((()=>[g(k,{src:t.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),g(T,null,{default:r((()=>[c(d(t.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):p("",!0)],64)))),128))])),_:1})),g(w,{class:"sc-operate"},{default:r((()=>[(e(!0),a(i,null,s(_.shareOperate,((t,a)=>(e(),n(w,{key:a,class:"item",onClick:t.fn},{default:r((()=>[g(w,null,{default:r((()=>[g(k,{src:t.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),g(T,null,{default:r((()=>[c(d(t.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"]),_.copySuccessb?(e(),n(w,{key:0,class:"c-warn",onClick:u[12]||(u[12]=l((()=>{}),["stop"]))},{default:r((()=>[g(w,{class:"title"},{default:r((()=>[c("已复制链接")])),_:1}),g(w,{class:"tip"},{default:r((()=>[c("快去粘贴给好友吧")])),_:1}),g(w,{class:"btn",onClick:u[11]||(u[11]=t=>v.shareFn(0))},{default:r((()=>[c("我知道了")])),_:1})])),_:1})):p("",!0)])),_:1})):p("",!0),_.qrb?(e(),n(w,{key:2,class:"qrCode",onClick:u[16]||(u[16]=t=>v.qrCodeFn(0))},{default:r((()=>[g(w,{class:"q-content",style:o(`transform:translateY(${_.qrconb?"0%":"100%"})`),onClick:u[15]||(u[15]=l((()=>{}),["stop"]))},{default:r((()=>[g(w,{class:"qc-img"},{default:r((()=>[g(k,{src:`${_.masterDomain}/include/qrcode.php?data=${_.shareLink}`,mode:"aspectFit"},null,8,["src"]),g(T,null,{default:r((()=>[c("让朋友扫一扫访问当前网页")])),_:1})])),_:1}),g(w,{class:"qc-btn",onClick:u[14]||(u[14]=l((t=>v.qrCodeFn(0)),["stop"]))},{default:r((()=>[c("取消")])),_:1})])),_:1},8,["style"])])),_:1})):p("",!0),_.wxshareb?(e(),n(w,{key:3,class:"wxShare",onClick:u[17]||(u[17]=e=>{_.wxshareb=!1,t.$emit("wxShareClose",!1)})},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/HN_Public_sharezhi.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0),_.safarib?(e(),n(w,{key:4,class:"safari",onClick:u[18]||(u[18]=t=>_.safarib=!1)},{default:r((()=>[g(k,{src:`${_.masterDomain}/static/images/safariShare.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-4374b8b8"]]);const Z=J({data:()=>({animationData:{},content:"提示内容",icon:""}),options:{multipleSlots:!0},methods:{showToast(t,e){var a=P({duration:300,timingFunction:"ease"});this.animation=a,a.opacity(1).step(),this.animationData=a.export(),this.content=t,this.icon=e||"",setTimeout(function(){a.opacity(0).step(),this.animationData=a.export()}.bind(this),1500)}},created:function(){}},[["render",function(t,a,s,i,o,l){const u=h,m=f;return e(),n(m,{class:"wx-toast-box",animation:o.animationData},{default:r((()=>[g(m,{class:"wx-toast-content"},{default:r((()=>[""!=o.icon?(e(),n(m,{key:0,class:"wx-toast-icon"},{default:r((()=>[g(u,{src:o.icon,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0),g(m,{class:"wx-toast-toast"},{default:r((()=>[c(d(o.content),1)])),_:1})])),_:1})])),_:1},8,["animation"])}],["__scopeId","data-v-5ea59f62"]]),K=T();const tt=J({emits:["topay","haspay","showhasPayNumber","showPrivateNumber"],data:()=>({showRewardPop:!1,masterDomain:K.globalData.masterDomain,imgPath:K.globalData.imgPath,imgVersion:K.globalData.imgVersion,cfg_payPhone:{payPhone_entrance:0,payPhone_price:1,wxmini:"adunit-078d0de41e6925bf"},currency:{short:"元",symbol:"￥"},rewardedVideoAd:"",uniPlatform:"",android:"web"==K.globalData.platForm&&window.Android,interval:null,globalData:K.globalData,clickTime:0}),props:{phoneData:{type:Object,default:{privateNumberPhone:"",privateNumberCountDown:0,showhasPayNumber:0,privateNumberPhoneTip:"",showPrivateNumber:0,privateNumberFrom:0,privateNumberDataSet:{module:"",temp:"",aid:""}}},payInfo:{type:Object,default:{order_amount:"",order_sn:"",ordernum:"",service:"",timeout:0}}},watch:{showRewardPop:function(t){const e=this;t&&(e.clickTime=parseInt((new Date).valueOf()/1e3),"web"==e.uniPlatform&&K.globalData.appBoolean&&window.Android||("mp-weixin"==e.uniPlatform?e.initRewardAdv():e.callByPay()))}},mounted(){const t=this;t.$nextTick((()=>{t.uniPlatform=K.globalData.platForm,setTimeout((()=>{K.globalData.appConfig&&(t.cfg_payPhone=K.globalData.appConfig.cfg_payPhone,t.currency=K.globalData.appConfig.currency)}),1500)}))},methods:{privatenumberClick(t){var e=t.currentTarget.dataset.type;if("close"==e)this.$emit("showPrivateNumber",0),this.$emit("showhasPayNumber",0);else if("call"==e){var a=t.currentTarget.dataset.phone;K.globalData.appBoolean&&"web"==K.globalData.platForm?window.location.href="tel:"+a:S({phoneNumber:a})}},callByPay(){const t=this;let e=parseInt((new Date).valueOf()/1e3)-t.clickTime;t.$emit("topay",e),t.showRewardPop=!1},callBgAdv(){const t=this;t.showRewardPop=!1,K.globalData.appBoolean&&window.Android?window.setupWebViewJavascriptBridge((function(e){e.callHandler("playRewardAd",{value:t.payInfo.ordernum},(function(e){"success"==e&&(t.interval=setInterval((()=>{t.getPhoneInfo()}),1e3))}))})):t.rewardedVideoAd.show().catch((()=>{t.rewardedVideoAd.load().then((()=>t.rewardedVideoAd.show())).catch((e=>{let a=t.cfg_payPhone.payPhone_entrance?"广告拉取失败，请支付后查看或者稍后重试":"广告拉取失败，请稍后重试";t.$refs.toasts.showToast(a)}))}))},initRewardAdv(){const t=this;if(t.rewardedVideoAd)return!1;wx.createRewardedVideoAd&&(t.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:t.cfg_payPhone.wxmini}),t.rewardedVideoAd.onLoad((()=>{console.log("onLoad event emit")})),t.rewardedVideoAd.onError((e=>{console.log("onError event emit",e),t.updatePlayState(2)})),t.rewardedVideoAd.onClose((e=>{console.log("onClose event emit",e),e&&e.isEnded&&(t.showRewardPop=!1,t.updatePlayState(1))})))},updatePlayState(t){const e=this;F({success:a=>{var s=a.code,i="service=siteConfig&action=wxminiAdRewardVideoNotify&ordernum="+e.payInfo.ordernum+"&code="+s+"&state="+t,n=K.encodeUrl(i);e.$ajax.post({url:"include/ajax.php?"+n}).then((a=>{1==t&&e.getPhoneInfo()}))}})},getPhoneInfo(){const t=this;var e="service=member&action=tradePayResult&order="+t.payInfo.ordernum,a=K.encodeUrl(e);t.$ajax.post({url:"include/ajax.php?"+a}).then((e=>{var a=e.data;100==a.state&&(t.interval&&clearInterval(t.interval),t.$emit("haspay",{detail:a,fromAdv:1}))}))}}},[["render",function(t,a,s,i,o,l){const u=Y(x("toast"),Z),y=f,b=m,_=h,v=A;return e(),n(y,{style:{height:"100%"}},{default:r((()=>[g(y,{style:{position:"relative","z-index":"9999999999"}},{default:r((()=>[g(u,{id:"toast",ref:"toasts"},null,512)])),_:1}),o.cfg_payPhone.wxmini&&"mp-weixin"==o.uniPlatform||"web"==o.uniPlatform&&o.android&&o.cfg_payPhone.tencentGDP_placement_id&&o.cfg_payPhone.tencentGDP_app_id?(e(),n(y,{key:0,class:C({rewardadvPop:!0,rewardadvShow:o.showRewardPop})},{default:r((()=>[g(y,{class:"rewardAdvContent"},{default:r((()=>[g(y,{class:"rewardAdvCon"},{default:r((()=>[g(y,{class:"rewardClose",onClick:a[0]||(a[0]=t=>o.showRewardPop=!1)},{default:r((()=>[c("×")])),_:1}),g(y,{class:"h3"},{default:r((()=>[c("看广告免费获取联系方式")])),_:1}),g(y,{class:"p"},{default:r((()=>[c(d(o.cfg_payPhone.payPhone_entrance?"观看广告免费获取对方联系电话":"观看广告，或直接付费获取对方联系电话"),1)])),_:1})])),_:1}),g(y,{class:"btns_group"},{default:r((()=>[o.cfg_payPhone.payPhone_entrance?p("",!0):(e(),n(y,{key:0,class:"btn_pay",onClick:l.callByPay},{default:r((()=>[g(y,{class:"txt"},{default:r((()=>[c("直接付费")])),_:1}),g(y,{class:"span"},{default:r((()=>[g(b,{class:"symbol"},{default:r((()=>[c(d(o.currency.symbol),1)])),_:1}),g(b,{class:"amount"},{default:r((()=>[c(d(s.payInfo.order_amount),1)])),_:1})])),_:1})])),_:1},8,["onClick"])),g(y,{class:"btn_watch",onClick:l.callBgAdv},{default:r((()=>[g(y,{class:"txt"},{default:r((()=>[c("免费获取")])),_:1}),g(_,{class:"img",src:o.imgPath+"/payPop/video_icon.png?v="+o.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"])])),_:1})])),_:1}),g(y,{class:"rewardAdvMask","data-type":"close",onClick:a[1]||(a[1]=t=>o.showRewardPop=!1)})])),_:1},8,["class"])):p("",!0),g(y,{class:C("privatenumber-popup "+(s.phoneData.showPrivateNumber?"privatenumber-show":""))},{default:r((()=>[g(y,{class:"privatenumber-content"},{default:r((()=>[g(y,{class:"privatenumber-header"},{default:r((()=>[g(y,{class:"privatenumber-title"},{default:r((()=>[c("请使用"+d(s.phoneData.privateNumberFrom)+"拨打",1)])),_:1}),g(y,{class:"privatenumber-tips"},{default:r((()=>[g(b,null,{default:r((()=>[c("我们将为您使用虚拟号码拨出")])),_:1}),p("",!0)])),_:1}),g(v,{class:"privatenumber-close","data-type":"close",onClick:l.privatenumberClick},{default:r((()=>[c("×")])),_:1},8,["onClick"])])),_:1}),g(y,{class:"privatenumber-main"},{default:r((()=>[g(y,{class:"privatenumber-phone"},{default:r((()=>[c(d(s.phoneData.privateNumberPhone),1)])),_:1}),g(y,{class:"privatenumber-text"},{default:r((()=>[c(" 此号码将在 "),g(b,{class:"privatenumber-countdown"},{default:r((()=>[c(d(s.phoneData.privateNumberCountDown)+"秒",1)])),_:1}),c(" 后失效，请尽快拨打 ")])),_:1})])),_:1}),g(v,{class:"privatenumber-btn","data-type":"call","data-phone":s.phoneData.privateNumberPhone,onClick:l.privatenumberClick},{default:r((()=>[c("立即拨打")])),_:1},8,["data-phone","onClick"]),o.globalData.appConfig&&o.globalData.appConfig.cfg_shortname?(e(),n(y,{key:0,class:"concat_tip"},{default:r((()=>[c("联系我时，请说是在"),g(b,{class:"span"},{default:r((()=>[c(d(o.globalData.appConfig.cfg_shortname),1)])),_:1}),c("上看到的，谢谢！")])),_:1})):p("",!0)])),_:1}),g(y,{class:"privatenumber-mask","data-type":"close",onClick:l.privatenumberClick},null,8,["onClick"])])),_:1},8,["class"]),g(y,{class:C("privatenumber-popup "+(s.phoneData.showhasPayNumber?"privatenumber-show":""))},{default:r((()=>[g(y,{class:"privatenumber-content"},{default:r((()=>[g(y,{class:"privatenumber-header"},{default:r((()=>[g(y,{class:"privatenumber-title"},{default:r((()=>[c("已获取联系方式，请尽快拨打")])),_:1}),g(y,{class:"privatenumber-tips"},{default:r((()=>[g(b,null,{default:r((()=>[c("温馨提示，您可截图保存联系方式到相册")])),_:1})])),_:1}),g(v,{class:"privatenumber-close","data-type":"close",onClick:l.privatenumberClick},{default:r((()=>[c("×")])),_:1},8,["onClick"])])),_:1}),g(y,{class:"privatenumber-main"},{default:r((()=>[g(y,{class:"privatenumber-phone"},{default:r((()=>[c(d(s.phoneData.privateNumberPhone),1)])),_:1}),g(y,{class:"privatenumber-text"},{default:r((()=>[c(d(s.phoneData.privateNumberPhoneTip),1)])),_:1})])),_:1}),g(v,{class:"privatenumber-btn","data-type":"call","data-phone":s.phoneData.privateNumberPhone,onClick:l.privatenumberClick},{default:r((()=>[c("立即拨打")])),_:1},8,["data-phone","onClick"]),o.globalData.appConfig&&o.globalData.appConfig.cfg_shortname?(e(),n(y,{key:0,class:"concat_tip"},{default:r((()=>[c("联系我时，请说是在"),g(b,{class:"span"},{default:r((()=>[c(d(o.globalData.appConfig.cfg_shortname),1)])),_:1}),c("上看到的，谢谢！")])),_:1})):p("",!0)])),_:1}),g(y,{class:"privatenumber-mask","data-type":"close",onClick:l.privatenumberClick},null,8,["onClick"])])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-7855818f"]]);var et,at;const st=T();const it=J({name:"pay",props:{payInfo:{type:Object,default:{}},paypopb:{type:Boolean,default:!1},service:{type:String,default:""},action:{type:String,default:""},apply:{type:String,default:""},loginCheck:{type:Boolean,default:!0},extraData:{type:Object,default:{}}},data:()=>({globalData:st.globalData,imgstatic:`${st.globalData.masterDomain}/static/images/miniprograme/payPop/`,imgVersion:st.globalData.imgVersion,payMethods:[{id:0,pay_code:"balance",pay_icon:`${st.globalData.masterDomain}/static/images/miniprograme/payPop/balance.png`,pay_name:"余额"}],userInfo:{},activeIndex:0,formdata:"",timeout:"00:00:00",password:"",popb:!1,popConb:!1,closeb:!1,passwordb:!1,passwordConb:!1,ajaxb:!1,firstb:!0,paySuccessb:!1,platForm:st.globalData.platForm}),methods:{linkTo(t){t&&("web"==st.globalData.platForm?t.indexOf("http")>-1||window.appBoolean?location.href=t:k({url:t}):k({url:t.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(t):t}))},async payMethodData(){const t=this;let e=await t.$ajax.post({url:st.encodeUrl("include/ajax.php?"),data:{action:"payment",service:"siteConfig"}});100==e.data.state?(t.userInfo.userid?(t.payMethods=t.payMethods.concat(e.data.info),t.userInfo.money<t.payInfo.order_amount&&(t.activeIndex=1)):t.payMethods=e.data.info,console.log(t.payMethods)):t.$emit("payError",e.data.info)},selectMethod(t,e){const a=this;if("balance"==t.pay_code){if(a.userInfo.money<a.payInfo.order_amount)return!1}else if("huoniao_bonus"==t.pay_code&&a.userInfo.bonus<a.payInfo.order_amount)return!1;a.formdata=t,a.activeIndex=e},closeFn(t){const e=this;e.closeb=!1,e.popConb=!1,setTimeout((t=>{e.popb=!1}),300),e.$emit("paypopb",!1),e.$emit("giveUp",t),clearTimeout(et),clearInterval(at),e.ajaxb||e.paySuccessb||e.certificatePayFn(),e.$emit("failpayFn")},countdown(t){const e=this;let a;10==`${t}`.length&&(a=1e3*t),a=(a-+new Date)/1e3;let s=Math.floor(a%60),i=Math.floor(a%3600/60),n=Math.floor(a/3600);return(s>0||i>0||n>0)&&(n/10<1&&(n="0"+n),i/10<1&&(i="0"+i),s/10<1&&(s="0"+s),et=setTimeout((a=>{e.timeout=e.countdown(t)}),1e3)),n+":"+i+":"+s},payFn(t){const e=this;"balance"==e.payMethods[t].pay_code?(e.passwordb=!0,setTimeout((t=>{e.passwordConb=!0}),0)):e.checkPasswordFn()},closeCodeFn(){const t=this;t.passwordConb=!1,setTimeout((e=>{t.passwordb=!1}),300)},inputCodeFn(t){const e=this;e.password+=t,6==e.password.length&&1==e.userInfo.paypwdCheck&&e.checkPasswordFn()},async setAndPayFn(){const t=this;let e={service:"member",action:"updateAccount",do:"paypwdAdd",pay1:t.password,pay2:t.password};100==(await t.$ajax.post({url:st.encodeUrl("include/ajax.php?"),data:e})).data.state&&(await st.memberInfo(t.userInfo.userid),t.checkPasswordFn()),t.$emit("payError",res.data.info)},certificatePayFn(){const t=this;let e=t.payInfo.ordernum.split(",").length>1?1:"";t.$ajax.post({url:st.encodeUrl(`include/ajax.php?service=member&action=tradePayResult&order=${t.payInfo.ordernum}&type=${e}`)}).then((e=>{100==e.data.state&&(t.paySuccessb=!0,e.data.phone?t.$emit("paySuccess",e.data):t.$emit("paySuccess",e.data.info),t.closeFn(!1),setTimeout((e=>{t.paySuccessb=!1})),st.memberInfo(t.userInfo.userid,(function(e){t.userInfo=e}))),t.ajaxb=!1}))},checkPasswordFn(){const t=this;let e=t.activeIndex,a=t.payMethods[e],s=!1,i={service:t.service,action:t.action,ordernum:t.payInfo.ordernum,paytype:a.pay_code,...t.extraData};if("mp-weixin"==st.globalData.platForm){let t="";if(st.globalData.appid)t=st.globalData.appid;else{let e=uni.getAccountInfoSync();t=e.miniProgram&&e.miniProgram.appId||"",st.globalData.appid=t}i.appid=t}if("alipay"==i.paytype||"wxpay"==i.paytype){let e="";for(let t in i)e+=`&${t}=${i[t]}`;if(e=e.slice(1),"web"==t.platForm)window.appBoolean?(s=!0,i.app=1,t.payRequest(i,s)):location.href=`${t.globalData.masterDomain}/include/ajax.php?${e}`;else if("mp-toutiao"==t.platForm){let s=encodeURIComponent(`${t.globalData.masterDomain}/include/ajax.php?${e}`);k({url:`/pages/redirect/index?url=${s}&title=${a.pay_name}`})}else N({title:"支付中",icon:"loading",mask:!0}),t.payRequest(i,s,(function(e){uni.requestPayment({timeStamp:e.data.info.timeStamp,nonceStr:e.data.info.nonceStr,package:e.data.info.package,signType:e.data.info.signType,paySign:decodeURIComponent(e.data.info.paySign),success:e=>{t.certificatePayFn()},fail:e=>{t.$emit("payError","支付失败")}})}))}else"balance"==a.pay_code?(i.useBalance=1,i.balance=t.payInfo.order_amount,i.paypwd=t.password,N({title:"支付中",icon:"loading",mask:!0}),t.payRequest(i,s)):(i.useBalance=0,N({title:"支付中",icon:"loading",mask:!0}),t.payRequest(i,s))},payRequest(t,e,a=function(){}){const s=this;let i=s.activeIndex,n=s.payMethods[i];s.$ajax.post({url:st.encodeUrl("include/ajax.php?"),data:t}).then((t=>{if(b(),100==t.data.state){if(s.closeCodeFn(),e)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("wxpay"==n.pay_code?"wechatPay":"aliPay",{orderInfo:t.data.info},(function(t){}))})),!1;"sponsor"!=s.apply&&"wxpay"!=n.pay_code&&s.$emit("payError","支付成功"),s.closeFn(!1),a(t)}else s.$emit("payError",t.data.info||t.data);s.password=""}))}},watch:{paypopb(t,e){const a=this;if(["{}",'""',"null","undefined"].includes(JSON.stringify(a.payInfo)))return N({title:"订单信息丢失",icon:"error",duration:1500}),!1;if(t){let t=function(){a.popb=!0,setTimeout((()=>{a.popConb=!0})),at=setInterval((t=>{a.ajaxb||(a.ajaxb=!0,a.certificatePayFn())}),1e3)};if(a.globalData.iOSMiniPay_forbid&&"shop"!=a.service)return O({title:"温馨提示",content:st.globalData.iosMiniPay_msg||"十分抱歉，由于相关规范，iOS小程序不支持该功能。",showCancel:!1,success:t=>{t.confirm&&a.$emit("paypopb",!1)}}),!1;let e=st.globalData.userid;if(a.loginCheck&&!e)return st.tologin(),!1;if(a.firstb?e?(V(),st.memberInfo(e,(function(e){a.userInfo=e,a.$nextTick((e=>{t()})),j(),a.payMethodData()}))):(a.payMethodData(),a.$nextTick((e=>{t()}))):a.$nextTick((e=>{t()})),a.firstb=!1,a.payInfo.timeout>0){let t=parseInt((new Date).valueOf()/1e3)+1800;a.timeout=a.countdown(t)}}}}},[["render",function(t,u,y,b,_,v){const k=h,w=f,x=m;return!_.popb||_.globalData.iOSMiniPay_forbid&&"shop"!=y.service?p("",!0):(e(),n(w,{key:0,class:"payComponents"},{default:r((()=>[g(w,{class:"payContent",style:o(`transform: translateY(${_.popConb?0:"100%"});`)},{default:r((()=>[g(k,{src:`${_.imgstatic}close.png?v=${_.imgVersion}`,mode:"aspectFill",class:"pc-close",onClick:u[0]||(u[0]=t=>_.closeb=!0)},null,8,["src"]),g(w,{style:{position:"relative"}},{default:r((()=>[g(w,{class:"payItemTitle"},{default:r((()=>[c(d(y.payInfo.subject)+"需支付",1)])),_:1}),g(w,{class:"moneyTitle"},{default:r((()=>[g(w,{class:"title"},{default:r((()=>[g(x,null,{default:r((()=>[c(d(_.globalData.appConfig.currency?_.globalData.appConfig.currency.symbol:"￥"),1)])),_:1}),c(d(y.payInfo.order_amount),1)])),_:1}),y.payInfo.timeout>0?(e(),n(w,{key:0,class:"time"},{default:r((()=>[c("支付剩余时间："+d(_.timeout),1)])),_:1})):p("",!0)])),_:1}),g(w,{class:"payMethod",onTouchmove:u[1]||(u[1]=l((()=>{}),["stop"])),onTouch:u[2]||(u[2]=l((()=>{}),["stop"]))},{default:r((()=>[(e(!0),a(i,null,s(_.payMethods,((t,s)=>(e(),a(i,{key:s},["alipay"==t.pay_code&&"web"==_.platForm&&_.globalData.webWeixin||!("balance"!=t.pay_code||_.globalData.appConfig.ucenterLinks&&_.globalData.appConfig.ucenterLinks.indexOf("deposit")>-1||_.userInfo.money>=y.payInfo.order_amount)?p("",!0):(e(),n(w,{key:0,class:"item",onClick:l((e=>v.selectMethod(t,s)),["stop"])},{default:r((()=>[g(w,{class:"methodName"},{default:r((()=>[g(k,{src:t.pay_icon,mode:"aspectFill"},null,8,["src"]),g(w,null,{default:r((()=>[g(x,null,{default:r((()=>[c(d(t.pay_name),1)])),_:2},1024),"balance"==t.pay_code?(e(),n(x,{key:0,style:o("opacity:"+(_.userInfo.money>=y.payInfo.order_amount?1:.6))},{default:r((()=>[c(d(_.userInfo.money>=y.payInfo.order_amount?`（可用：${_.globalData.appConfig.currency?_.globalData.appConfig.currency.symbol:"￥"}${_.userInfo.money||0}）`:`（余额不足，可用余额${_.globalData.appConfig.currency?_.globalData.appConfig.currency.symbol:"￥"}${_.userInfo.money||0}）`),1)])),_:1},8,["style"])):p("",!0),"huoniao_bonus"==t.pay_code?(e(),n(x,{key:1,style:o("opacity:"+(_.userInfo.bonus>=y.payInfo.order_amount?1:.6))},{default:r((()=>[c(d(_.userInfo.bonus>=y.payInfo.order_amount?`（可用：${_.globalData.appConfig.currency?_.globalData.appConfig.currency.symbol:"￥"}${_.userInfo.bonus||0}）`:`（余额不足，可用余额${_.globalData.appConfig.currency?_.globalData.appConfig.currency.symbol:"￥"}${_.userInfo.bonus||0}）`),1)])),_:1},8,["style"])):p("",!0)])),_:2},1024)])),_:2},1024),"balance"==t.pay_code&&_.userInfo.money<y.payInfo.order_amount||"huoniao_bonus"==t.pay_code&&_.userInfo.bonus<y.payInfo.order_amount?(e(),n(w,{key:0,class:"recharge",onClick:e=>v.linkTo(`${_.globalData.appConfig.cfg_user_index}/${"balance"==t.pay_code?"deposit":"recharge"}.html?paytype=deposit`)},{default:r((()=>[c(" 充值 ")])),_:2},1032,["onClick"])):(e(),n(w,{key:1,class:C("selectDot"+(_.activeIndex==s?" active":""))},null,8,["class"]))])),_:2},1032,["onClick"]))],64)))),128))])),_:1}),g(w,{class:"payNow"},{default:r((()=>[g(w,{onClick:u[3]||(u[3]=t=>v.payFn(_.activeIndex))},{default:r((()=>[c("立即付款")])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),I(g(w,{class:"closeWarn"},{default:r((()=>[g(w,{class:"cw-content"},{default:r((()=>[g(w,{class:"cwc-title"},{default:r((()=>[c("确定放弃本次付款？")])),_:1}),y.payInfo.timeout>0?(e(),n(w,{key:0,class:"cwc-time"},{default:r((()=>[c(" 您的订单在"+d(_.timeout)+"内未支付将被取消，请尽快完成支付 ",1)])),_:1})):p("",!0),g(w,{class:"cwc-btn"},{default:r((()=>[g(w,{class:"cancel",onClick:u[4]||(u[4]=t=>v.closeFn(!0))},{default:r((()=>[c("放弃")])),_:1}),g(w,{class:"continue",onClick:u[5]||(u[5]=t=>_.closeb=!1)},{default:r((()=>[c("继续支付")])),_:1})])),_:1})])),_:1})])),_:1},512),[[D,_.closeb]]),_.passwordb?(e(),n(w,{key:0,class:"passwordPop"},{default:r((()=>[g(w,{class:"codeAndkey"},{default:r((()=>[g(w,{class:"passwordInput",style:o(`transform: translateY(${_.passwordConb?0:"100%"});${1==_.userInfo.paypwdCheck?"min-height: 920rpx;":"min-height:1040rpx;"}`)},{default:r((()=>[g(k,{src:`${_.imgstatic}arr_back.png?v=${_.imgVersion}`,mode:"aspectFill",class:"cancelPay",onClick:v.closeCodeFn},null,8,["src","onClick"]),g(w,{class:"title"},{default:r((()=>[c("输入支付密码")])),_:1}),g(w,{class:"payInput"},{default:r((()=>[g(w,{class:"text"},{default:r((()=>[c("请"+d(1==_.userInfo.paypwdCheck?"输入":"设置")+"6位数字密码确认支付",1)])),_:1}),g(w,{class:"password"},{default:r((()=>[(e(),a(i,null,s(6,(t=>g(w,{key:t,class:C(t<=_.password.length?"active":"")},{default:r((()=>[g(x,null,{default:r((()=>[c("•")])),_:1})])),_:2},1032,["class"]))),64))])),_:1}),1!=_.userInfo.paypwdCheck?(e(),n(w,{key:0,class:"setCode"},{default:r((()=>[g(w,null,{default:r((()=>[c("·避免使用连续或重复数字，类似“123456”“112233”")])),_:1}),g(w,null,{default:r((()=>[c("·避免使用手机号、证件号中的连续数字")])),_:1})])),_:1})):p("",!0),1==_.userInfo.paypwdCheck?(e(),n(w,{key:1,class:"forgetCode",onClick:u[6]||(u[6]=t=>v.linkTo(`${_.globalData.appConfig.cfg_user_index}/security-paypwdEdit.html?step=2&title=修改支付密码`))},{default:r((()=>[c("忘记密码?")])),_:1})):p("",!0)])),_:1}),1!=_.userInfo.paypwdCheck?(e(),a("div",{key:0,class:"confirmPay",onClick:u[7]||(u[7]=(...t)=>v.setAndPayFn&&v.setAndPayFn(...t))},"确定并支付")):p("",!0)])),_:1},8,["style"]),g(w,{class:"keyboard",style:o(`transform: translateY(${_.passwordConb?0:"100%"});`)},{default:r((()=>[g(w,null,{default:r((()=>[g(x,{onClick:u[8]||(u[8]=t=>v.inputCodeFn(1))},{default:r((()=>[c("1")])),_:1}),g(x,{onClick:u[9]||(u[9]=t=>v.inputCodeFn(2))},{default:r((()=>[c("2")])),_:1}),g(x,{onClick:u[10]||(u[10]=t=>v.inputCodeFn(3))},{default:r((()=>[c("3")])),_:1}),g(x,{onClick:u[11]||(u[11]=t=>v.inputCodeFn(4))},{default:r((()=>[c("4")])),_:1}),g(x,{onClick:u[12]||(u[12]=t=>v.inputCodeFn(5))},{default:r((()=>[c("5")])),_:1}),g(x,{onClick:u[13]||(u[13]=t=>v.inputCodeFn(6))},{default:r((()=>[c("6")])),_:1}),g(x,{onClick:u[14]||(u[14]=t=>v.inputCodeFn(7))},{default:r((()=>[c("7")])),_:1}),g(x,{onClick:u[15]||(u[15]=t=>v.inputCodeFn(8))},{default:r((()=>[c("8")])),_:1}),g(x,{onClick:u[16]||(u[16]=t=>v.inputCodeFn(9))},{default:r((()=>[c("9")])),_:1}),g(x,{class:"none"}),g(x,{onClick:u[17]||(u[17]=t=>v.inputCodeFn(0))},{default:r((()=>[c("0")])),_:1}),g(x,{class:"backSpace",style:o(`background: url(${_.imgstatic}del_num.png) no-repeat 50%/60rpx;`),onClick:u[18]||(u[18]=t=>_.password=_.password.slice(0,-1))},null,8,["style"])])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})):p("",!0)])),_:1}))}],["__scopeId","data-v-5ea00df3"]]);var nt={abbr:!0,b:!0,big:!0,code:!0,del:!0,em:!0,i:!0,ins:!0,label:!0,q:!0,small:!0,span:!0,strong:!0,sub:!0,sup:!0};let ot=T();const lt=J({name:"node",options:{},data:()=>({ctrl:{},advConfig:""}),props:{name:String,attrs:{type:Object,default:()=>({})},childs:Array,opts:Array,advInfo:{type:[String,Array,Object],default:""}},components:{},mounted(){if(this.advInfo&&(this.advConfig=this.advInfo),this.$nextTick((()=>{for(this.root=this.$parent;"mp-html"!==this.root.$options.name;this.root=this.root.$parent);})),this.opts[0]){let t;for(t=this.childs.length;t--&&"img"!==this.childs[t].name;);-1!==t&&(this.observer=B(this).relativeToViewport({top:500,bottom:500}),this.observer.observe("._img",(t=>{t.intersectionRatio&&(this.$set(this.ctrl,"load",1),this.observer.disconnect())})))}},beforeDestroy(){this.observer&&this.observer.disconnect()},watch:{advInfo(t){let e=ot.globalData.platForm;this.opts[5]&&t&&"web"==e&&(this.advConfig=t)},advConfig(t,e){let a=ot.globalData.platForm;if(this.opts[5]&&t&&"web"==a){let e=t.adv[0];this.$nextTick((()=>{$(`#${this.opts[5].positionSelf||"advMphtml"}`)[0]&&(window.TencentGDT.NATIVE.renderAd(e,this.opts[5].positionSelf||"advMphtml"),window.TencentGDT.NATIVE.doExpose({container:this.opts[5].positionSelf||"advMphtml",advertisement_id:e.advertisement_id,placement_id:e.placement_id,traceid:e.tid}));let t={down_x:0,down_y:0,up_x:0,up_y:0};$(`#${this.opts[5].positionSelf||"advMphtml"} iframe`)[0]&&($(`#${this.opts[5].positionSelf||"advMphtml"} iframe`)[0].contentDocument.onmousedown=function(e){t.down_x=e.offsetX,t.down_y=e.offsetY},$(`#${this.opts[5].positionSelf||"advMphtml"} iframe`)[0].contentDocument.onmouseup=function(a){if($(a.target).hasClass("del"))return!1;t.up_x=a.offsetX,t.up_y=a.offsetY,window.TencentGDT.NATIVE.doClick({s:encodeURIComponent(JSON.stringify(t)),container:"advMphtml",advertisement_id:e.advertisement_id,placement_id:e.placement_id,traceid:e.tid})})}))}}},methods:{isInline:(t,e)=>nt[t]||-1!==(e||"").indexOf("display:inline"),play(t){if(this.root.$emit("play"),this.root.pauseVideo){let e=!1;const a=t.target.id;for(let t=this.root._videos.length;t--;)this.root._videos[t].id===a?e=!0:this.root._videos[t].pause();if(!e){const t=L(a,this);t.id=a,this.root.playbackRate&&t.playbackRate(this.root.playbackRate),this.root._videos.push(t)}}},imgTap(t){const e=this.childs[t.currentTarget.dataset.i];if(e.a)this.linkTap(e.a);else if(!e.attrs.ignore&&(e.attrs.src=e.attrs.src||e.attrs["data-src"],this.root.$emit("imgtap",e.attrs),this.root.previewImg)){let t=this;ot.previewImage({app:{urls:t.root.imgList,current:t.root.imgList[parseInt(e.attrs.i)]},init:{urls:t.root.imgList,current:parseInt(e.attrs.i)}})}},imgLongTap(t){},imgLoad(t){const e=t.currentTarget.dataset.i;(this.opts[1]&&!this.ctrl[e]||-1===this.ctrl[e])&&this.$set(this.ctrl,e,1),this.checkReady()},checkReady(){this.root&&!this.root.lazyLoad&&(this.root._unloadimgs-=1,this.root._unloadimgs||setTimeout((()=>{this.root.getRect().then((t=>{this.root.$emit("ready",t)})).catch((()=>{this.root.$emit("ready",{})}))}),350))},linkTap(t){const e=t.currentTarget?this.childs[t.currentTarget.dataset.i]:{},a=e.attrs||t,s=a.href;this.root.$emit("linktap",Object.assign({innerText:this.root.getText(e.children||[])},a)),s&&("#"===s[0]?this.root.navigateTo(s.substring(1)).catch((()=>{})):s.split("?")[0].includes("://")?this.root.copyLink&&window.open(s):k({url:s,fail(){R({url:s,fail(){}})}}))},mediaError(t){const e=t.currentTarget.dataset.i,a=this.childs[e];if("video"===a.name||"audio"===a.name){let t=(this.ctrl[e]||0)+1;if(t>a.src.length&&(t=0),t<a.src.length)return void this.$set(this.ctrl,e,t)}else if("img"===a.name){if(this.opts[0]&&!this.ctrl.load)return;this.opts[2]&&this.$set(this.ctrl,e,-1),this.checkReady()}this.root&&this.root.$emit("error",{source:a.name,attrs:a.attrs})}}},[["render",function(y,b,_,v,k,w){const x=h,$=m,I=t("node",!0),D=f,T=u,P=q;return e(),n(D,{id:_.attrs.id,class:C("_block _"+_.name+" "+_.attrs.class),style:o(_.attrs.style)},{default:r((()=>[(e(!0),a(i,null,s(_.childs,((t,h)=>(e(),a(i,{key:h},["img"===t.name&&!t.t&&(_.opts[1]&&!k.ctrl[h]||k.ctrl[h]<0)?(e(),n(x,{key:0,class:"_img loadingImg",style:o(t.attrs.style),src:k.ctrl[h]<0?_.opts[2]:_.opts[1],mode:"widthFix"},null,8,["style","src"])):p("",!0),"img"===t.name?(e(),a("img",{key:1,id:t.attrs.id,class:C("_img loadingImg "+t.attrs.class),style:o((-1===k.ctrl[h]?"display:none;":"")+t.attrs.style),src:t.attrs.src||(k.ctrl.load?t.attrs["data-src"]:""),"data-i":h,onLoad:b[0]||(b[0]=(...t)=>w.imgLoad&&w.imgLoad(...t)),onError:b[1]||(b[1]=(...t)=>w.mediaError&&w.mediaError(...t)),onClick:b[2]||(b[2]=l(((...t)=>w.imgTap&&w.imgTap(...t)),["stop"])),onLongpress:b[3]||(b[3]=(...t)=>w.imgLongTap&&w.imgLongTap(...t))},null,46,["id","src","data-i"])):t.text?(e(),n($,{key:2,decode:""},{default:r((()=>[c(d(t.text),1)])),_:2},1024)):"br"===t.name?(e(),n($,{key:3},{default:r((()=>[c("\\n")])),_:1})):"a"===t.name?(e(),n(D,{key:4,id:t.attrs.id,class:C((t.attrs.href?"_a ":"")+t.attrs.class),"hover-class":"_hover",style:o("display:inline;"+t.attrs.style),"data-i":h,onClick:l(w.linkTap,["stop"])},{default:r((()=>[g(I,{name:"span",childs:t.children,opts:_.opts,advInfo:_.advInfo,style:{display:"inherit"}},null,8,["childs","opts","advInfo"])])),_:2},1032,["id","class","style","data-i","onClick"])):"video"===t.name?(e(),n(T,{key:5,id:t.attrs.id,class:C(`${t.attrs.class} defaultVideo`),style:o(t.attrs.style),autoplay:t.attrs.autoplay,controls:t.attrs.controls,loop:t.attrs.loop,muted:t.attrs.muted,"object-fit":t.attrs["object-fit"]||"contain",poster:t.attrs.poster,src:t.src[k.ctrl[h]||0],"data-i":h,onPlay:w.play,onError:w.mediaError},null,8,["id","class","style","autoplay","controls","loop","muted","object-fit","poster","src","data-i","onPlay","onError"])):"audio"==t.name?(e(),n(T,{key:6,id:t.attrs.id,class:C(`${t.attrs.class} defaultAudio`),style:o(t.attrs.style),"show-fullscreen-btn":!1,controls:t.attrs.controls,loop:t.attrs.loop,muted:t.attrs.muted,"object-fit":t.attrs["object-fit"]||"contain",poster:t.attrs.poster,src:t.src[k.ctrl[h]||0],"data-i":h,onPlay:w.play,onError:w.mediaError},null,8,["id","class","style","controls","loop","muted","object-fit","poster","src","data-i","onPlay","onError"])):"iframe"===t.name?(e(),a("iframe",{key:7,style:o(t.attrs.style),allowfullscreen:t.attrs.allowfullscreen,frameborder:t.attrs.frameborder,src:t.attrs.src},null,12,["allowfullscreen","frameborder","src"])):"embed"===t.name?(e(),a("embed",{key:8,style:o(t.attrs.style),src:t.attrs.src},null,12,["src"])):"table"===t.name&&t.c||"li"===t.name?(e(),n(D,{key:9,id:t.attrs.id,class:C("_"+t.name+" "+t.attrs.class),style:o(t.attrs.style)},{default:r((()=>["li"===t.name?(e(),n(I,{key:0,childs:t.children,opts:_.opts,advInfo:_.advInfo},null,8,["childs","opts","advInfo"])):(e(!0),a(i,{key:1},s(t.children,((t,l)=>(e(),n(D,{key:l,class:C("_"+t.name+" "+t.attrs.class),style:o(t.attrs.style)},{default:r((()=>["td"===t.name||"th"===t.name?(e(),n(I,{key:0,childs:t.children,opts:_.opts,advInfo:_.advInfo},null,8,["childs","opts","advInfo"])):(e(!0),a(i,{key:1},s(t.children,((t,l)=>(e(),a(i,{key:l},["td"===t.name||"th"===t.name?(e(),n(D,{key:0,class:C("_"+t.name+" "+t.attrs.class),style:o(t.attrs.style)},{default:r((()=>[g(I,{childs:t.children,opts:_.opts,advInfo:_.advInfo},null,8,["childs","opts","advInfo"])])),_:2},1032,["class","style"])):(e(),n(D,{key:1,class:C("_"+t.name+" "+t.attrs.class),style:o(t.attrs.style)},{default:r((()=>[(e(!0),a(i,null,s(t.children,((t,a)=>(e(),n(D,{key:a,class:C("_"+t.name+" "+t.attrs.class),style:o(t.attrs.style)},{default:r((()=>[g(I,{childs:t.children,opts:_.opts,advInfo:_.advInfo},null,8,["childs","opts","advInfo"])])),_:2},1032,["class","style"])))),128))])),_:2},1032,["class","style"]))],64)))),128))])),_:2},1032,["class","style"])))),128))])),_:2},1032,["id","class","style"])):t.c||w.isInline(t.name,t.attrs.style)?2===t.c?(e(),n(D,{key:11,id:t.attrs.id,class:C("_block _"+t.name+" "+t.attrs.class),style:o(t.f+";"+t.attrs.style)},{default:r((()=>[(e(!0),a(i,null,s(t.children,((t,a)=>(e(),n(I,{key:a,style:o(t.f),name:t.name,attrs:t.attrs,childs:t.children,opts:_.opts,advInfo:_.advInfo},null,8,["style","name","attrs","childs","opts","advInfo"])))),128))])),_:2},1032,["id","class","style"])):(e(),n(I,{key:12,style:o(t.f),name:t.name,attrs:t.attrs,childs:t.children,opts:_.opts,advInfo:_.advInfo},null,8,["style","name","attrs","childs","opts","advInfo"])):(e(),n(P,{key:10,id:t.attrs.id,style:o(t.f),"user-select":_.opts[4],nodes:[t],class:C(`rich ${h}`)},null,8,["id","style","user-select","nodes","class"])),_.advInfo&&t.insertAdv&&!_.opts[5].positionSelf?(e(),n(D,{key:13,id:"advMphtml",style:{margin:"20rpx 0rpx"}})):p("",!0)],64)))),128))])),_:1},8,["id","class","style"])}],["__scopeId","data-v-64b94147"]]),rt={trustTags:ut("a,abbr,ad,audio,b,blockquote,br,code,col,colgroup,dd,del,dl,dt,div,em,fieldset,h1,h2,h3,h4,h5,h6,hr,i,img,ins,label,legend,li,ol,p,q,ruby,rt,source,span,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,title,ul,video"),blockTags:ut("address,article,aside,body,caption,center,cite,footer,header,html,nav,pre,section"),ignoreTags:ut("area,base,canvas,embed,frame,head,iframe,input,link,map,meta,param,rp,script,source,style,textarea,title,track,wbr"),voidTags:ut("area,base,br,col,circle,ellipse,embed,frame,hr,img,input,line,link,meta,param,path,polygon,rect,source,track,use,wbr"),entities:{lt:"<",gt:">",quot:'"',apos:"'",ensp:" ",emsp:" ",nbsp:" ",semi:";",ndash:"–",mdash:"—",middot:"·",lsquo:"‘",rsquo:"’",ldquo:"“",rdquo:"”",bull:"•",hellip:"…",larr:"←",uarr:"↑",rarr:"→",darr:"↓"},tagStyle:{address:"font-style:italic",big:"display:inline;font-size:1.2em",caption:"display:table-caption;text-align:center",center:"text-align:center",cite:"font-style:italic",dd:"margin-left:40px",mark:"background-color:yellow",pre:"font-family:monospace;white-space:pre",s:"text-decoration:line-through",small:"display:inline;font-size:0.8em",strike:"text-decoration:line-through",u:"text-decoration:underline"},svgDict:{animatetransform:"animateTransform",lineargradient:"linearGradient",viewbox:"viewBox",attributename:"attributeName",repeatcount:"repeatCount",repeatdur:"repeatDur"}},ct={},{windowWidth:dt}=M(),pt=ut(" ,\r,\n,\t,\f");let ht=0;function ut(t){const e=Object.create(null),a=t.split(",");for(let s=a.length;s--;)e[a[s]]=!0;return e}function mt(t,e){let a=t.indexOf("&");for(;-1!==a;){const s=t.indexOf(";",a+3);let i;if(-1===s)break;"#"===t[a+1]?(i=parseInt(("x"===t[a+2]?"0":"")+t.substring(a+2,s)),isNaN(i)||(t=t.substr(0,a)+String.fromCharCode(i)+t.substr(s+1))):(i=t.substring(a+1,s),(rt.entities[i]||"amp"===i&&e)&&(t=t.substr(0,a)+(rt.entities[i]||"&")+t.substr(s+1))),a=t.indexOf("&",a+1)}return t}function ft(t){let e=t.length-1;for(let a=e;a>=-1;a--)(-1===a||t[a].c||!t[a].name||"div"!==t[a].name&&"p"!==t[a].name&&"h"!==t[a].name[0]||(t[a].attrs.style||"").includes("inline"))&&(e-a>=5&&t.splice(a+1,e-a,{name:"div",attrs:{},children:t.slice(a+1,e+1)}),e=a-1)}function gt(t){this.options=t||{},this.tagStyle=Object.assign({},rt.tagStyle,this.options.tagStyle),this.imgList=t.imgList||[],this.imgList._unloadimgs=0,this.plugins=t.plugins||[],this.attrs=Object.create(null),this.stack=[],this.nodes=[],this.pre=(this.options.containerStyle||"").includes("white-space")&&this.options.containerStyle.includes("pre")?2:0}function yt(t){this.handler=t}rt.ignoreTags.iframe=void 0,rt.trustTags.iframe=!0,rt.ignoreTags.embed=void 0,rt.trustTags.embed=!0,gt.prototype.parse=function(t){t=t.replace(/\\/g,"");for(let e=this.plugins.length;e--;)this.plugins[e].onUpdate&&(t=this.plugins[e].onUpdate(t,rt)||t);for(new yt(this).parse(t);this.stack.length;)this.popNode();return this.nodes.length>50&&ft(this.nodes),this.nodes},gt.prototype.expose=function(){for(let t=this.stack.length;t--;){const e=this.stack[t];if(e.c||"a"===e.name||"video"===e.name||"audio"===e.name)return;e.c=1}},gt.prototype.hook=function(t){for(let e=this.plugins.length;e--;)if(this.plugins[e].onParse&&!1===this.plugins[e].onParse(t,this))return!1;return!0},gt.prototype.getUrl=function(t){const e=this.options.domain;return"/"===t[0]?"/"===t[1]?t=(e?e.split("://")[0]:"http")+":"+t:e&&(t=e+t):t.includes("data:")||t.includes("://")||e&&(t=e+"/"+t),t},gt.prototype.parseStyle=function(t){const e=t.attrs,a=(this.tagStyle[t.name]||"").split(";").concat((e.style||"").split(";")),s={};let i="";e.id&&!this.xml&&(this.options.useAnchor?this.expose():"img"!==t.name&&"a"!==t.name&&"video"!==t.name&&"audio"!==t.name&&(e.id=void 0)),e.width&&(s.width=parseFloat(e.width)+(e.width.includes("%")?"%":"px"),e.width=void 0),e.height&&(s.height=parseFloat(e.height)+(e.height.includes("%")?"%":"px"),e.height=void 0);for(let n=0,o=a.length;n<o;n++){const t=a[n].split(":");if(t.length<2)continue;const e=t.shift().trim().toLowerCase();let o=t.join(":").trim();if("-"===o[0]&&o.lastIndexOf("-")>0||o.includes("safe"))i+=`;${e}:${o}`;else if(!s[e]||o.includes("import")||!s[e].includes("import")){if(o.includes("url")){let t=o.indexOf("(")+1;if(t){for(;'"'===o[t]||"'"===o[t]||pt[o[t]];)t++;o=o.substr(0,t)+this.getUrl(o.substr(t))}}else o.includes("rpx")&&(o=o.replace(/[0-9.]+\s*rpx/g,(t=>parseFloat(t)*dt/750+"px")));s[e]=o}}return t.attrs.style=i,s},gt.prototype.onTagName=function(t){this.tagName=this.xml?t:t.toLowerCase(),"svg"===this.tagName&&(this.xml=(this.xml||0)+1,rt.ignoreTags.style=void 0)},gt.prototype.onAttrName=function(t){"data-"===(t=this.xml?t:t.toLowerCase()).substr(0,5)?"data-src"!==t||this.attrs.src?"img"===this.tagName||"a"===this.tagName?this.attrName=t:this.attrName=void 0:this.attrName="src":(this.attrName=t,this.attrs[t]="T")},gt.prototype.onAttrVal=function(t){const e=this.attrName||"";"style"===e||"href"===e?this.attrs[e]=mt(t,!0):e.includes("src")?this.attrs[e]=this.getUrl(mt(t,!0)):e&&(this.attrs[e]=t)},gt.prototype.onOpenTag=function(t){const e=Object.create(null);e.name=this.tagName,e.attrs=this.attrs,this.options.nodes.length&&(e.type="node"),this.attrs=Object.create(null);const a=e.attrs,s=this.stack[this.stack.length-1],i=s?s.children:this.nodes,n=this.xml?t:rt.voidTags[e.name];if(ct[e.name]&&(a.class=ct[e.name]+(a.class?" "+a.class:"")),"embed"===e.name&&this.expose(),"video"!==e.name&&"audio"!==e.name||("video"!==e.name||a.id||(a.id="v"+ht++),a.controls||a.autoplay||(a.controls="T"),e.src=[],a.src&&(e.src.push(a.src),a.src=void 0),this.expose()),n){if(!this.hook(e)||rt.ignoreTags[e.name])return void("base"!==e.name||this.options.domain?"source"===e.name&&s&&("video"===s.name||"audio"===s.name)&&a.src&&s.src.push(a.src):this.options.domain=a.href);const t=this.parseStyle(e);if("img"===e.name){if(a.src&&(a.src.includes("webp")&&(e.webp="T"),a.src.includes("data:")&&!a["original-src"]&&(a.ignore="T"),!a.ignore||e.webp||a.src.includes("cloud://"))){for(let i=this.stack.length;i--;){const s=this.stack[i];"a"===s.name&&(e.a=s.attrs),"table"!==s.name||e.webp||a.src.includes("cloud://")||(!t.display||t.display.includes("inline")?e.t="inline-block":e.t=t.display,t.display=void 0),s.c=1}a.i=this.imgList.length.toString();let s=a["original-src"]||a.src;this.imgList.push(s),e.t||(this.imgList._unloadimgs+=1),this.options.lazyLoad&&(a["data-src"]=a.src,a.src=void 0)}"inline"===t.display&&(t.display=""),a.ignore&&(t["max-width"]=t["max-width"]||"100%",a.style+=";-webkit-touch-callout:none"),parseInt(t.width)>dt&&(t.height=void 0),isNaN(parseInt(t.width))||(e.w="T"),!isNaN(parseInt(t.height))&&(!t.height.includes("%")||s&&(s.attrs.style||"").includes("height"))&&(e.h="T")}else if("svg"===e.name)return i.push(e),this.stack.push(e),void this.popNode();for(const e in t)t[e]&&(a.style+=`;${e}:${t[e].replace(" !important","")}`);a.style=a.style.substr(1)||void 0}else("pre"===e.name||(a.style||"").includes("white-space")&&a.style.includes("pre"))&&2!==this.pre&&(this.pre=e.pre=1),e.children=[],this.stack.push(e);i.push(e)},gt.prototype.onCloseTag=function(t){let e;for(t=this.xml?t:t.toLowerCase(),e=this.stack.length;e--&&this.stack[e].name!==t;);if(-1!==e)for(;this.stack.length>e;)this.popNode();else if("p"===t||"br"===t){(this.stack.length?this.stack[this.stack.length-1].children:this.nodes).push({name:t,attrs:{class:ct[t]||"",style:this.tagStyle[t]||""}})}},gt.prototype.popNode=function(){const t=this.stack.pop();let e=t.attrs;const a=t.children,s=this.stack[this.stack.length-1],i=s?s.children:this.nodes;if(!this.hook(t)||rt.ignoreTags[t.name])return"title"===t.name&&a.length&&"text"===a[0].type&&this.options.setTitle&&w({title:a[0].text}),void i.pop();if(t.pre&&2!==this.pre){this.pre=t.pre=void 0;for(let t=this.stack.length;t--;)this.stack[t].pre&&(this.pre=1)}const n={};if("svg"===t.name){if(this.xml>1)return void this.xml--;let a="";const s=e.style;return e.style="",e.xmlns="http://www.w3.org/2000/svg",function t(e){if("text"===e.type)return void(a+=e.text);const s=rt.svgDict[e.name]||e.name;a+="<"+s;for(const i in e.attrs){const t=e.attrs[i];t&&(a+=` ${rt.svgDict[i]||i}="${t}"`)}if(e.children){a+=">";for(let a=0;a<e.children.length;a++)t(e.children[a]);a+="</"+s+">"}else a+="/>"}(t),t.name="img",t.attrs={src:"data:image/svg+xml;utf8,"+a.replace(/#/g,"%23"),style:s,ignore:"T"},t.children=void 0,this.xml=!1,void(rt.ignoreTags.style=!0)}if(e.align&&("table"===t.name?"center"===e.align?n["margin-inline-start"]=n["margin-inline-end"]="auto":n.float=e.align:n["text-align"]=e.align,e.align=void 0),e.dir&&(n.direction=e.dir,e.dir=void 0),"font"===t.name&&(e.color&&(n.color=e.color,e.color=void 0),e.face&&(n["font-family"]=e.face,e.face=void 0),e.size)){let t=parseInt(e.size);isNaN(t)||(t<1?t=1:t>7&&(t=7),n["font-size"]=["x-small","small","medium","large","x-large","xx-large","xxx-large"][t-1]),e.size=void 0}if((e.class||"").includes("align-center")&&(n["text-align"]="center"),Object.assign(n,this.parseStyle(t)),"table"!==t.name&&parseInt(n.width)>dt&&(n["max-width"]="100%",n["box-sizing"]="border-box"),rt.blockTags[t.name]?t.name="div":rt.trustTags[t.name]||this.xml||(t.name="span"),"a"===t.name||"ad"===t.name||"iframe"===t.name)this.expose();else if("video"===t.name)(n.height||"").includes("auto")&&(n.height=void 0);else if("ul"!==t.name&&"ol"!==t.name||!t.c){if("table"===t.name){let s=parseFloat(e.cellpadding),i=parseFloat(e.cellspacing);const o=parseFloat(e.border),l=n["border-color"],r=n["border-style"];if(t.c&&(isNaN(s)&&(s=2),isNaN(i)&&(i=2)),o&&(e.style+=`;border:${o}px ${r||"solid"} ${l||"gray"}`),t.flag&&t.c){n.display="grid",i?(n["grid-gap"]=i+"px",n.padding=i+"px"):o&&(e.style+=";border-left:0;border-top:0");const c=[],d=[],p=[],h={};!function t(e){for(let a=0;a<e.length;a++)"tr"===e[a].name?d.push(e[a]):t(e[a].children||[])}(a);for(let t=1;t<=d.length;t++){let e=1;for(let a=0;a<d[t-1].children.length;a++){const n=d[t-1].children[a];if("td"===n.name||"th"===n.name){for(;h[t+"."+e];)e++;let a=n.attrs.style||"",d=a.indexOf("width")?a.indexOf(";width"):0;if(-1!==d){let t=a.indexOf(";",d+6);-1===t&&(t=a.length),n.attrs.colspan||(c[e]=a.substring(d?d+7:6,t)),a=a.substr(0,d)+a.substr(t)}if(a+=";display:flex",d=a.indexOf("vertical-align"),-1!==d){const t=a.substr(d+15,10);t.includes("middle")?a+=";align-items:center":t.includes("bottom")&&(a+=";align-items:flex-end")}else a+=";align-items:center";if(d=a.indexOf("text-align"),-1!==d){const t=a.substr(d+11,10);t.includes("center")?a+=";justify-content: center":t.includes("right")&&(a+=";justify-content: right")}if(a=(o?`;border:${o}px ${r||"solid"} ${l||"gray"}`+(i?"":";border-right:0;border-bottom:0"):"")+(s?`;padding:${s}px`:"")+";"+a,n.attrs.colspan&&(a+=`;grid-column-start:${e};grid-column-end:${e+parseInt(n.attrs.colspan)}`,n.attrs.rowspan||(a+=`;grid-row-start:${t};grid-row-end:${t+1}`),e+=parseInt(n.attrs.colspan)-1),n.attrs.rowspan){a+=`;grid-row-start:${t};grid-row-end:${t+parseInt(n.attrs.rowspan)}`,n.attrs.colspan||(a+=`;grid-column-start:${e};grid-column-end:${e+1}`);for(let a=1;a<n.attrs.rowspan;a++)for(let s=0;s<(n.attrs.colspan||1);s++)h[t+a+"."+(e-s)]=1}a&&(n.attrs.style=a),p.push(n),e++}}if(1===t){let t="";for(let a=1;a<e;a++)t+=(c[a]?c[a]:"auto")+" ";n["grid-template-columns"]=t}}t.children=p}else t.c&&(n.display="table"),isNaN(i)||(n["border-spacing"]=i+"px"),(o||s)&&function t(e){for(let a=0;a<e.length;a++){const i=e[a];"th"===i.name||"td"===i.name?(o&&(i.attrs.style=`border:${o}px ${r||"solid"} ${l||"gray"};${i.attrs.style||""}`),s&&(i.attrs.style=`padding:${s}px;${i.attrs.style||""}`)):i.children&&t(i.children)}}(a);if(this.options.scrollTable&&!(e.style||"").includes("inline")){const a=Object.assign({},t);t.name="div",t.attrs={style:"overflow:auto"},t.children=[a],e=a.attrs}}else if("td"!==t.name&&"th"!==t.name||!e.colspan&&!e.rowspan)if("ruby"===t.name){t.name="span";for(let t=0;t<a.length-1;t++)"text"===a[t].type&&"rt"===a[t+1].name&&(a[t]={name:"div",attrs:{style:"display:inline-block;text-align:center"},children:[{name:"div",attrs:{style:"font-size:50%;"+(a[t+1].attrs.style||"")},children:a[t+1].children},a[t]]},a.splice(t+1,1))}else t.c&&function(t){t.c=2;for(let e=t.children.length;e--;){const a=t.children[e];a.c&&"table"!==a.name||(t.c=1)}}(t);else for(let l=this.stack.length;l--;)if("table"===this.stack[l].name){this.stack[l].flag=1;break}}else{const t={a:"lower-alpha",A:"upper-alpha",i:"lower-roman",I:"upper-roman"};t[e.type]&&(e.style+=";list-style-type:"+t[e.type],e.type=void 0);for(let e=a.length;e--;)"li"===a[e].name&&(a[e].c=1)}if((n.display||"").includes("flex")&&!t.c)for(let l=a.length;l--;){const t=a[l];t.f&&(t.attrs.style=(t.attrs.style||"")+t.f,t.f=void 0)}const o=s&&((s.attrs.style||"").includes("flex")||(s.attrs.style||"").includes("grid"))&&!t.c;o&&(t.f=";max-width:100%"),a.length>=50&&t.c&&!(n.display||"").includes("flex")&&ft(a);for(const l in n)if(n[l]){const a=`;${l}:${n[l].replace(" !important","")}`;o&&(l.includes("flex")&&"flex-direction"!==l||"align-self"===l||l.includes("grid")||"-"===n[l][0]||l.includes("width")&&a.includes("%"))?(t.f+=a,"width"===l&&(e.style+=";width:100%")):e.style+=a}e.style=e.style.substr(1)||void 0},gt.prototype.onText=function(t){if(!this.pre){let e,a="";for(let s=0,i=t.length;s<i;s++)pt[t[s]]?(" "!==a[a.length-1]&&(a+=" "),"\n"!==t[s]||e||(e=!0)):a+=t[s];if(" "===a){if(e)return;{const t=this.stack[this.stack.length-1];if(t&&"t"===t.name[0])return}}t=a}const e=Object.create(null);if(e.type="text",e.text=mt(t),this.hook(e)){(this.stack.length?this.stack[this.stack.length-1].children:this.nodes).push(e)}},yt.prototype.parse=function(t){this.content=t||"",this.i=0,this.start=0,this.state=this.text;for(let e=this.content.length;-1!==this.i&&this.i<e;)this.state()},yt.prototype.checkClose=function(t){const e="/"===this.content[this.i];return!!(">"===this.content[this.i]||e&&">"===this.content[this.i+1])&&(t&&this.handler[t](this.content.substring(this.start,this.i)),this.i+=e?2:1,this.start=this.i,this.handler.onOpenTag(e),"script"===this.handler.tagName?(this.i=this.content.indexOf("</",this.i),-1!==this.i&&(this.i+=2,this.start=this.i),this.state=this.endTag):this.state=this.text,!0)},yt.prototype.text=function(){if(this.i=this.content.indexOf("<",this.i),-1===this.i)return void(this.start<this.content.length&&this.handler.onText(this.content.substring(this.start,this.content.length)));const t=this.content[this.i+1];if(t>="a"&&t<="z"||t>="A"&&t<="Z")this.start!==this.i&&this.handler.onText(this.content.substring(this.start,this.i)),this.start=++this.i,this.state=this.tagName;else if("/"===t||"!"===t||"?"===t){this.start!==this.i&&this.handler.onText(this.content.substring(this.start,this.i));const e=this.content[this.i+2];if("/"===t&&(e>="a"&&e<="z"||e>="A"&&e<="Z"))return this.i+=2,this.start=this.i,void(this.state=this.endTag);let a="--\x3e";"!"===t&&"-"===this.content[this.i+2]&&"-"===this.content[this.i+3]||(a=">"),this.i=this.content.indexOf(a,this.i),-1!==this.i&&(this.i+=a.length,this.start=this.i)}else this.i++},yt.prototype.tagName=function(){if(pt[this.content[this.i]]){for(this.handler.onTagName(this.content.substring(this.start,this.i));pt[this.content[++this.i]];);this.i<this.content.length&&!this.checkClose()&&(this.start=this.i,this.state=this.attrName)}else this.checkClose("onTagName")||this.i++},yt.prototype.attrName=function(){let t=this.content[this.i];if(pt[t]||"="===t){this.handler.onAttrName(this.content.substring(this.start,this.i));let e="="===t;const a=this.content.length;for(;++this.i<a;)if(t=this.content[this.i],!pt[t]){if(this.checkClose())return;if(e)return this.start=this.i,void(this.state=this.attrVal);if("="!==this.content[this.i])return this.start=this.i,void(this.state=this.attrName);e=!0}}else this.checkClose("onAttrName")||this.i++},yt.prototype.attrVal=function(){const t=this.content[this.i],e=this.content.length;if('"'===t||"'"===t){if(this.start=++this.i,this.i=this.content.indexOf(t,this.i),-1===this.i)return;this.handler.onAttrVal(this.content.substring(this.start,this.i))}else for(;this.i<e;this.i++){if(pt[this.content[this.i]]){this.handler.onAttrVal(this.content.substring(this.start,this.i));break}if(this.checkClose("onAttrVal"))return}for(;pt[this.content[++this.i]];);this.i<e&&!this.checkClose()&&(this.start=this.i,this.state=this.attrName)},yt.prototype.endTag=function(){const t=this.content[this.i];if(pt[t]||">"===t||"/"===t){if(this.handler.onCloseTag(this.content.substring(this.start,this.i)),">"!==t&&(this.i=this.content.indexOf(">",this.i),-1===this.i))return;this.start=++this.i,this.state=this.text}else this.i++};let bt=T();const _t=[];const vt=J({name:"mp-html",data:()=>({nodes:[],sumLength:0,advInfo:""}),props:{containerStyle:{type:String,default:""},content:{type:String,default:""},copyLink:{type:[Boolean,String],default:!0},domain:String,errorImg:{type:String,default:""},lazyLoad:{type:[Boolean,String],default:!1},loadingImg:{type:String,default:""},pauseVideo:{type:[Boolean,String],default:!0},previewImg:{type:[Boolean,String],default:!0},scrollTable:[Boolean,String],selectable:[Boolean,String],setTitle:{type:[Boolean,String],default:!0},showImgMenu:{type:[Boolean,String],default:!0},tagStyle:Object,useAnchor:[Boolean,Number],adv:{type:[Boolean,Object],default:!1}},emits:["load","ready","imgtap","linktap","play","error"],components:{node:lt},watch:{content(t){if(this.setContent(t),this.nodes.length){let t=this.nodes;if(t=this.statistics(t),this.insertAdv(t),this.nodes=t,!this.checkAdvInsert(t)){let t=this.nodes.length-1;this.nodes[t].insertAdv=!0}}}},created(){this.plugins=[];for(let t=_t.length;t--;)this.plugins.push(new _t[t](this))},mounted(){if(this.content&&!this.nodes.length&&(this.setContent(this.content),this.nodes.length)){let t=this.nodes;if(t=this.statistics(t),this.insertAdv(t),this.nodes=t,!this.checkAdvInsert(t)){let t=this.nodes.length-1;this.nodes[t].insertAdv=!0}}let t=this.adv;if(t){let e=this,a=bt.globalData.platForm,s=t.mold,i={module:s,config:t.config};bt.globalData.appBoolean||bt.dvConfig(i,(i=>{let n=bt.globalData.moduleAdv[s][t.page];n&&"{}"!=JSON.stringify(n)&&("web"==a?e.advInfo=n||"":(e.advInfo=n.TencentGDT["mp-weixin"==a?"wxmini":"dymini"]||"",t.__this&&(t.__this.advInfo=e.advInfo)))}))}},beforeDestroy(){this._hook("onDetached")},methods:{in(t,e,a){t&&e&&a&&(this._in={page:t,selector:e,scrollTop:a})},navigateTo(t,e){return new Promise(((a,s)=>{if(!this.useAnchor)return void s(Error("Anchor is disabled"));e=e||parseInt(this.useAnchor)||0;const i=E().in(this._in?this._in.page:this).select((this._in?this._in.selector:"._root")+(t?` #${t}`:"")).boundingClientRect();this._in?i.select(this._in.selector).scrollOffset().select(this._in.selector).boundingClientRect():i.selectViewport().scrollOffset(),i.exec((t=>{if(!t[0])return void s(Error("Label not found"));const i=t[1].scrollTop+t[0].top-(t[2]?t[2].top:0)+e;this._in?this._in.page[this._in.scrollTop]=i:z({scrollTop:i,duration:300}),a()}))}))},getText(t){let e="";return function t(a){for(let s=0;s<a.length;s++){const i=a[s];if("text"===i.type)e+=i.text.replace(/&amp;/g,"&");else if("br"===i.name)e+="\n";else{const a="p"===i.name||"div"===i.name||"tr"===i.name||"li"===i.name||"h"===i.name[0]&&i.name[1]>"0"&&i.name[1]<"7";a&&e&&"\n"!==e[e.length-1]&&(e+="\n"),i.children&&t(i.children),a&&"\n"!==e[e.length-1]?e+="\n":"td"!==i.name&&"th"!==i.name||(e+="\t")}}}(t||this.nodes),e},getRect(){return new Promise(((t,e)=>{E().in(this).select("#_root").boundingClientRect().exec((a=>a[0]?t(a[0]):e(Error("Root label not found"))))}))},pauseMedia(){for(let t=(this._videos||[]).length;t--;)this._videos[t].pause()},setPlaybackRate(t){this.playbackRate=t;for(let e=(this._videos||[]).length;e--;)this._videos[e].playbackRate(t)},setContent(t,e){e&&this.imgList||(this.imgList=[]);const a=new gt(this).parse(t);if(this.$set(this,"nodes",e?(this.nodes||[]).concat(a):a),this._videos=[],this.$nextTick((()=>{this._hook("onLoad"),this.$emit("load")})),this.lazyLoad||this.imgList._unloadimgs<this.imgList.length/2){let t=0;const e=a=>{a&&a.height||(a={}),a.height===t?this.$emit("ready",a):(t=a.height,setTimeout((()=>{this.getRect().then(e).catch(e)}),350))};this.getRect().then(e).catch(e)}else this.imgList._unloadimgs||this.getRect().then((t=>{this.$emit("ready",t)})).catch((()=>{this.$emit("ready",{})}))},_hook(t){for(let e=_t.length;e--;)this.plugins[e][t]&&this.plugins[e][t]()},statistics(t){for(let e=0;e<t.length;e++){let a=t[e];a.level=-1,"p"!==a.name&&"video"!==a.name||(a.level=++this.sumLength),a.children&&a.children.length>0&&this.statistics(a.children)}return t},insertAdv(t){let e=this.sumLength;for(let a=0;a<t.length;a++){let s=t[a];Math.ceil(e/2)==s.level?t[a].insertAdv=!0:s.children&&this.insertAdv(s.children)}return t},checkAdvInsert(t){if(this.adv.positionSelf)return!0;let e=["img","br","video","iframe","embed","audio"],a=!1;for(let s=0;s<t.length;s++){let i=t[s];if(e.includes(i.name)||i.text||!i.c||(a=this.checkAdvInsert(i.children)),i.insertAdv||a)return!0}return a}}},[["render",function(a,s,i,l,c,d){const p=t("node"),h=f;return e(),n(h,{id:"_root",class:C((i.selectable?"_select ":"")+"_root"),style:o(i.containerStyle)},{default:r((()=>[c.nodes[0]?(e(),n(p,{key:1,childs:c.nodes,opts:[i.lazyLoad,i.loadingImg,i.errorImg,i.showImgMenu,i.selectable,i.adv],advInfo:c.advInfo,name:"span"},null,8,["childs","opts","advInfo"])):U(a.$slots,"default",{key:0},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-ff323df9"]]);const kt=J({name:"popWarn",props:{info:{type:String,default:"弹窗提示"},warningb:{type:Boolean,default:!1}}},[["render",function(t,a,s,i,l,c){const d=Y(x("mp-html"),vt),p=f;return e(),n(p,{class:"warning",style:o(s.warningb?"transform:scale(1);z-index:99999999":"")},{default:r((()=>[g(d,{content:s.info,class:"info"},null,8,["content"])])),_:1},8,["style"])}],["__scopeId","data-v-8695c21a"]]);let wt,xt=T();const Ct=J({name:"privateTip",props:{privateShow:{type:Boolean,default:!1}},data:()=>({disagree:!1,maskb:!1,appConfig:""}),mounted(){wt=this,wt.privateShow&&wt.maskState(),xt.globalData.appConfig?wt.appConfig=xt.globalData.appConfig:xt.watchG("appConfig",(function(t){wt.appConfig=t}))},methods:{agreeFn(){xt.globalData.wxprivate=!1,xt.reloadFn()},openPrivacyContract(){uni.openPrivacyContract()},maskState(){let t=E().in(this);wt.$nextTick((e=>{t.select(".pc-text").boundingClientRect((t=>{let e=W(300);wt.maskb=Boolean(t.height>=e)})).exec()}))}}},[["render",function(t,a,s,i,o,l){const h=f,u=m,y=A,b=G;return s.privateShow?(e(),n(h,{key:0,class:"privateTip"},{default:r((()=>[g(h,{class:"p-bgc"}),o.disagree?(e(),n(h,{key:1,class:"p-content"},{default:r((()=>[g(h,{class:"pc-title"},{default:r((()=>[c("温馨提示")])),_:1}),g(h,{class:"pc-text"},{default:r((()=>[c(" 如果您不同意"),g(u,{onClick:l.openPrivacyContract},{default:r((()=>[c("《用户隐私保护指引》")])),_:1},8,["onClick"]),c("，我们将无法为您提供"+d(o.appConfig.cfg_miniProgramName)+"小程序服务。 ",1)])),_:1}),g(h,{class:"pc-btn"},{default:r((()=>[g(b,{class:"disagree","open-type":"exit",target:"miniProgram"},{default:r((()=>[c("退出小程序")])),_:1}),g(y,{class:"agree",id:"agree-btn","open-type":"agreePrivacyAuthorization",onAgreeprivacyauthorization:l.agreeFn},{default:r((()=>[c("同意并继续")])),_:1},8,["onAgreeprivacyauthorization"]),o.maskb?(e(),n(h,{key:0,class:"mask"})):p("",!0)])),_:1})])),_:1})):(e(),n(h,{key:0,class:"p-content"},{default:r((()=>[g(h,{class:"pc-title"},{default:r((()=>[c("隐私保护提示")])),_:1}),g(h,{class:"pc-text"},{default:r((()=>[c(" 为了更好地保障您的个人权益，在您使用"+d(o.appConfig.cfg_miniProgramName)+"小程序前，请您仔细阅读 ",1),g(u,{onClick:l.openPrivacyContract},{default:r((()=>[c("《用户隐私保护指引》")])),_:1},8,["onClick"]),c("， 并确认了解我们的服务内容。我们将在条款说明的范国内收集、使用您的个人信息。如果您不同意，我们将不能继续为您提供服务。 "),g(h,{style:{"margin-top":"20rpx"}}),c(" 若您点击“同意并继续”按钮，表示您已理解并同意以上协议全部内容。 ")])),_:1}),g(h,{class:"pc-btn"},{default:r((()=>[g(y,{class:"disagree",onClick:a[0]||(a[0]=t=>{o.disagree=!0,l.maskState()})},{default:r((()=>[c("不同意")])),_:1}),g(y,{class:"agree",id:"agree-btn","open-type":"agreePrivacyAuthorization",onAgreeprivacyauthorization:l.agreeFn},{default:r((()=>[c("同意并继续")])),_:1},8,["onAgreeprivacyauthorization"]),o.maskb?(e(),n(h,{key:0,class:"mask"})):p("",!0)])),_:1})])),_:1}))])),_:1})):p("",!0)}],["__scopeId","data-v-9f0383d3"]]),$t={web:{development:{index:"/pages/packages/sfcar/index/index",list:"/pages/packages/sfcar/list/list",detail:"/pages/packages/sfcar/detail/detail"},production:{index:"/index",list:"/list",detail:"/detail"}},mini:{index:"/pages/packages/sfcar/index/index",list:"/pages/packages/sfcar/list/list",detail:"/pages/packages/sfcar/detail/detail"}};export{J as _,X as a,tt as b,it as c,kt as d,Ct as e,vt as f,$t as p,Y as r};
