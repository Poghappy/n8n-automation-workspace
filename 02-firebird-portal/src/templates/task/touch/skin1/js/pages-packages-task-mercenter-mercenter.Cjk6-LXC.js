import{a,P as e,i as l,j as t,h as s,b as n,d as o,e as i,r,n as c,J as d,k as u,o as p,l as f,w as m,m as g,q as k,t as h,v as _,x as b,y as v,H as y,A as w,B as x,F as C,G as $,N as D,O as F,C as B,D as S,E as T,z as j,K as P}from"./index-cF6skFzP.js";import{r as V,_ as M}from"./uni-app.es.J1otcSEF.js";import{p as U}from"./task.9CwFAmAC.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";let E=g();var H;const O=I({data:()=>({wh:E.globalData.navTop+E.globalData.appFullWh,masterDomain:E.globalData.masterDomain,imgStaticPath:E.globalData.imgStaticPath,biasTop_88:E.globalData.biasTop_88,appBack:E.globalData.appBack,userError:E.globalData.userError,imgurl:E.globalData.imgPath+"/task/",httpurl:E.addUrlParam(E.globalData.masterDomain+"/notice.html"),promotionurl:null,themedata:{},tabdata:null,userdata:{level:[],todo:{},task:{},order:{}},announcedata:null,advdata:null,firstb:!0,privateb:!1,activeIndex:0,imgVersion:null,bgcolor:"",fontcolor:"",name:"",review:"",report:"",fast:"",state0:"",state1:"",state2:"",state3:"",state4:"",lower:[],iosMiniHide:!1,pages:"",platForm:E.globalData.platForm,appBoolean:E.globalData.appBoolean,channelDomain:E.globalData.channelDomain,appFullScreen:E.globalData.appFullScreen}),onLoad(a){H=this,-1==E.globalData.wxprivate?E.watchG("wxprivate",(function(e){H.wxprivate=e,e?H.privateb=!0:H.onload(a)})):E.globalData.wxprivate?H.privateb=!0:H.onload(a)},onReady(){},onShow(){E.globalData.userid?this.firstb?H.firstb=!1:E.reloadFn():this.backFn()},onHide(){},onUnload(){},onPullDownRefresh(){E.reloadFn()},onReachBottom(){},onShareAppMessage(a){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},methods:{onload(o){H.checkiOSMini(),H.imgVersion=E.globalData.imgVersion,H.promotionurl=E.addUrlParam(E.globalData.appConfig.cfg_business_index+"/promotion.html"),a({title:"加载中",mask:!0,success:()=>{e({key:"warnColor",success:a=>{e({key:"warnColor",success:a=>{H.themedata=a.data.themeDate,H.setBgColor(this.themedata.themeBackgroundColor),a.data.outtime<Date.parse(new Date)&&l({key:"warnColor",success:()=>{H.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(H.themedata=a.data.info,t({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),H.setBgColor(this.themedata.themeBackgroundColor),s()):(s(),n({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),s()},fail:a=>{H.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(H.themedata=a.data.info,t({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),H.setBgColor(this.themedata.themeBackgroundColor),s()):(s(),n({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),H.$ajax.post({url:"include/ajax.php?"+E.encodeUrl("service=task&action=businessLink")}).then((a=>{if(100==a.data.state){if(a.data.info.unshift({title:"任务管理",typename:"任务管理"}),"web"==H.platForm)for(let e=1;e<a.data.info.length;e++)for(let l=0;l<a.data.info[e].lower.length;l++)if(a.data.info[e].lower[l].url)a.data.info[e].lower[l].url.includes("/packages")&&(a.data.info[e].lower[l].url=`${H.appBoolean?H.channelDomain:""}/${a.data.info[e].lower[l].url.split("/").reverse()[0]}?${H.appFullScreen}`);else for(let t=0;t<a.data.info[e].lower[l].lower.length;t++)a.data.info[e].lower[l].lower[t].url.includes("/packages")&&(a.data.info[e].lower[l].lower[t].url=`${H.appBoolean?H.channelDomain:""}/${a.data.info[e].lower[l].lower[t].url.split("/").reverse()[0]}?${H.appFullScreen}`);H.tabdata=a.data.info}})),H.$ajax.post({url:"include/ajax.php?"+E.encodeUrl("service=task&action=memberInfo&from=store")}).then((a=>{100==a.data.state&&(H.userdata=a.data.info)})),H.$ajax.post({url:"include/ajax.php?"+E.encodeUrl("service=siteConfig&action=notice")}).then((a=>{if(100==a.state){for(let e=0;e<a.data.info.list.length;e++)a.data.info.list[e].url=E.addUrlParam(a.data.info.list[e].url);H.announcedata=a.data.info.list}})),H.$ajax.post({url:"include/ajax.php?"+E.encodeUrl("service=siteConfig&action=adv&model=task"),data:{title:"任务悬赏_小程序端_模板一_商家中心_广告一"}}).then((a=>{if(100==a.data.state){for(let e=0;e<a.data.info.list.length;e++)0==a.data.info.list[e].url.indexOf("http")&&(a.data.info.list[e].url=E.addUrlParam(a.data.info.list[e].url));H.advdata=a.data.info.list}})),H.pages=E.pageFn(U)},backFn(){if(H.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=o();a&&a.length>1?i({delta:1}):"web"==H.platForm?location.href=`${H.masterDomain}${window.pathname}${H.pages.my}`:r({url:"/pages/packages/task/my/my"})}},linkTo(a){if(a)if("web"==H.platForm){if(window.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;a.indexOf("http")>-1?location.href=a:c({url:a})}else{if(a.includes("tomini")){let e=a.split("?")[1].split("&");for(let l=0;l<e.length;l++)if(e[l].includes("tomini")){a=e[l].replace("tomini=",""),e.splice(l,1);break}a+=`?${e.join("&")}`}c({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},setBgColor(a){"web"!=H.platForm&&uni.setBackgroundColor({backgroundColor:a,fail:a=>{console.log(a)}})},publishFn(){if(0==this.userdata.certifyState){let a=E.globalData.appConfig.cfg_user_index+"/security-shCertify.html";H.linkTo(E.addUrlParam(a))}else 0==this.userdata.surplusReleaseCount?d({title:"友情提示",content:"您的账户剩余发布任务数量不足，请结束正在进行中的任务或者升级会员等级后发布！",confirmText:"升级会员",success(a){a.confirm?H.linkTo(`${H.appBoolean?H.channelDomain:""}${H.pages.vip}?${H.appFullScreen}`):a.cancel&&console.log("用户点击取消")}}):H.linkTo(`${H.appBoolean?H.channelDomain:""}${H.pages.publish}?step=1&${H.appFullScreen}&clear=1`)},certifyFn(){H.linkTo(`${E.globalData.appConfig.cfg_user_index}/security-shCertify.html`)},tabFn(a){let e=a.currentTarget.dataset.index;H.activeIndex=e},checkiOSMini(){const a=this;a.iosMiniHide=E.globalData.iOSMiniPay_forbid,E.globalData.appConfig||E.essentialData((function(e){a.iosMiniHide=e.iOSMiniPay_forbid}))}}},[["render",function(a,e,l,t,s,n){const o=k,i=B,r=S,c=P,d=T,g=V(u("private_tip"),M);return p(),f(o,{style:{height:"100%"}},{default:m((()=>[h(o,{style:_("height:"+s.wh+"px;background-color: "+s.themedata.themeBackgroundColor+";position: sticky;top: 0rpx;z-index: 99;padding-bottom: 88rpx;")},null,8,["style"]),h(o,{class:"rec-title",style:_(`background-color: ${s.themedata.themeBackgroundColor};top:${s.wh+s.biasTop_88}px;`)},{default:m((()=>[s.appBack?(p(),f(i,{key:0,src:s.imgurl+"bl-arrow.png?v="+s.imgVersion,onClick:n.backFn,class:"back",mode:"aspectFill"},null,8,["src","onClick"])):b("",!0),h(o,{class:"title",style:_("web"==s.platForm?"flex:1":"")},{default:m((()=>[v("商家中心")])),_:1},8,["style"]),h(o,{class:"btn",onClick:y(n.publishFn,["stop","prevent"])},{default:m((()=>[h(i,{src:s.imgurl+"add.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"]),h(r,null,{default:m((()=>[v("发布")])),_:1})])),_:1},8,["onClick"])])),_:1},8,["style"]),h(o,{class:"ann-plate",style:_("background-color: "+s.themedata.themeBackgroundColor+";")},{default:m((()=>[s.announcedata?(p(),f(o,{key:0,class:"ap-content"},{default:m((()=>[h(r,null,{default:m((()=>[v("公告")])),_:1}),h(d,{autoplay:"",interval:"5000",vertical:"",circular:""},{default:m((()=>[(p(!0),w(C,null,x(s.announcedata,((a,e)=>(p(),f(c,{key:e},{default:m((()=>[h(o,{onClick:e=>n.linkTo(a.url)},{default:m((()=>[h(o,null,{default:m((()=>[v($(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),h(o,{class:"more",onClick:e[0]||(e[0]=a=>n.linkTo(s.httpurl))},{default:m((()=>[h(o,null,{default:m((()=>[v("查看全部")])),_:1}),h(i,{src:s.imgurl+"r-arrow.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})):b("",!0)])),_:1},8,["style"]),h(o,{class:"user-plate"},{default:m((()=>[h(o,{class:"up-plate",style:_("margin-top: "+(s.announcedata?"-170rpx":"-280rpx")+";")},{default:m((()=>[h(o,{class:"upp-title"},{default:m((()=>[h(i,{class:"photo",src:s.userdata.photo||s.userError,mode:"aspectFill",onError:e[1]||(e[1]=a=>s.userdata.photo=s.userError)},null,8,["src"]),h(o,{class:"right"},{default:m((()=>[h(o,{class:"name"},{default:m((()=>[h(r,{class:"user"},{default:m((()=>[v($(s.userdata.nickname),1)])),_:1}),h(r,{class:"userid"},{default:m((()=>[v("ID："+$(s.userdata.uid),1)])),_:1})])),_:1}),h(o,{class:"label"},{default:m((()=>[0==s.userdata.certifyState?(p(),f(o,{key:0,onClick:y(n.certifyFn,["stop","prevent"]),style:{"padding-right":"10rpx"}},{default:m((()=>[v(" 实名认证 "),h(i,{src:s.imgurl+"rw-arrow.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"])):b("",!0),1==s.userdata.certifyState?(p(),f(o,{key:1,style:{background:"#fff0e0",color:"#f78c1d"}},{default:m((()=>[v("已实名 ")])),_:1})):b("",!0),0==s.userdata.level.length?(p(),f(o,{key:2,onClick:e[2]||(e[2]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.vip}?index=0&${s.appFullScreen}`))},{default:m((()=>[h(r,null,{default:m((()=>[v(" 非会员 "),h(i,{src:s.imgurl+"rw-arrow.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})):b("",!0),0!=s.userdata.level.length?(p(),f(o,{key:3,style:_("background: "+s.userdata.level.bgcolor+";color: "+s.userdata.level.fontcolor+";")},{default:m((()=>[v($(s.userdata.level.name),1)])),_:1},8,["style"])):b("",!0)])),_:1})])),_:1})])),_:1}),D(h(o,{class:"upp-data"},{default:m((()=>[h(o,{class:"item"},{default:m((()=>[h(o,{class:"data"},{default:m((()=>[v($(s.userdata.bid_coupon)+"小时",1)])),_:1}),h(o,{class:"text"},{default:m((()=>[v("剩余推荐时长")])),_:1})])),_:1}),h(o,{class:"item"},{default:m((()=>[h(o,{class:"data"},{default:m((()=>[v($(s.userdata.refresh_coupon),1)])),_:1}),h(o,{class:"text"},{default:m((()=>[v("刷新道具剩余")])),_:1})])),_:1}),h(o,{class:"item",onClick:e[3]||(e[3]=a=>n.linkTo(s.promotionurl))},{default:m((()=>[h(o,{class:"data"},{default:m((()=>[v($(s.userdata.promotion),1)])),_:1}),h(o,{class:"text"},{default:m((()=>[v("保障金余额")])),_:1})])),_:1})])),_:1},512),[[F,!s.iosMiniHide]])])),_:1},8,["style"]),0==s.userdata.level.length?(p(),f(o,{key:0,class:"up-vip",onClick:e[4]||(e[4]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.vip}?index=0&${s.appFullScreen}`))},{default:m((()=>[h(i,{src:s.imgurl+"mervip.png?v="+s.imgVersion,class:"picture",mode:"aspectFill"},null,8,["src"])])),_:1})):b("",!0),s.advdata?(p(),f(o,{key:1,style:{position:"relative"}},{default:m((()=>[h(d,{class:"up-swiper","indicator-dots":"","indicator-active-color":"#FFDF1A","indicator-color":"#E5E5E7",circular:"",autoplay:"",interval:"5000"},{default:m((()=>[(p(!0),w(C,null,x(s.advdata,((a,e)=>(p(),f(c,{key:e},{default:m((()=>[h(o,{onClick:e=>n.linkTo(a.url),style:{position:"relative"}},{default:m((()=>[h(i,{class:"picture",src:a.turl,mode:"aspectFill"},null,8,["src"]),1==a.advMarkState&&0==a.markState?(p(),f(i,{key:0,src:`${s.imgStaticPath}/advMarkTouch.png?v=${s.imgVersion}`,class:j(`advLabel _${a.advMarkPostion}_`)},null,8,["src","class"])):b("",!0)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):b("",!0),h(o,{class:"up-doing"},{default:m((()=>[h(o,{class:"upd-title"},{default:m((()=>[v("进行中的事项")])),_:1}),h(o,{class:"upd-items"},{default:m((()=>[h(o,{onClick:e[5]||(e[5]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.orderlist}?merchant=1&state=1&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"item"},{default:m((()=>[h(o,{class:"number"},{default:m((()=>[v($(s.userdata.todo.review),1)])),_:1}),h(o,{class:"text"},{default:m((()=>[v("待审核订单")])),_:1})])),_:1})])),_:1}),h(o,{onClick:e[6]||(e[6]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.complainCenter}?state=1&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"item"},{default:m((()=>[h(o,{class:"number"},{default:m((()=>[v($(s.userdata.todo.report),1)])),_:1}),h(o,{class:"text"},{default:m((()=>[v("举报待我处理")])),_:1})])),_:1})])),_:1}),h(o,{onClick:e[7]||(e[7]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.orderlist}?merchant=1&state=0&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"item"},{default:m((()=>[h(o,{class:"number"},{default:m((()=>[v($(s.userdata.todo.fast),1)])),_:1}),h(o,{class:"text"},{default:m((()=>[v("极速审核待提交")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),h(o,{class:"tab-plate"},{default:m((()=>[h(o,{class:"tp-tab"},{default:m((()=>[(p(!0),w(C,null,x(s.tabdata,((a,e)=>D((p(),f(o,{class:j(e==s.activeIndex?"active":""),"data-index":e,onClick:n.tabFn,key:e},{default:m((()=>[v($(a.title),1)])),_:2},1032,["class","data-index","onClick"])),[[F,!s.iosMiniHide||1!==e]]))),128))])),_:1}),0==s.activeIndex?(p(),f(o,{key:0,class:"tp-task"},{default:m((()=>[h(o,{class:"tpt-items"},{default:m((()=>[h(o,{class:"litem"},{default:m((()=>[h(o,{onClick:e[8]||(e[8]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.taskmanage}?index=0&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"title"},{default:m((()=>[h(i,{src:s.imgurl+"taksup.png?v="+s.imgVersion,class:"picture",mode:"aspectFill"},null,8,["src"]),h(o,null,{default:m((()=>[h(r,null,{default:m((()=>[v("未上线")])),_:1}),h(r,null,{default:m((()=>[v($(s.userdata.task.state0),1)])),_:1})])),_:1})])),_:1}),h(o,{class:"label"},{default:m((()=>[v("未通过平台审核的任务")])),_:1})])),_:1})])),_:1}),h(o,{class:"ritem"},{default:m((()=>[h(o,{onClick:e[9]||(e[9]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.taskmanage}?index=1&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"title"},{default:m((()=>[h(i,{src:s.imgurl+"taskdoing.png?v="+s.imgVersion,class:"picture",mode:"aspectFill"},null,8,["src"]),h(o,null,{default:m((()=>[h(r,null,{default:m((()=>[v("进行中")])),_:1}),h(r,null,{default:m((()=>[v($(s.userdata.task.state1),1)])),_:1})])),_:1})])),_:1}),h(o,{class:"label"},{default:m((()=>[v("正在展示的任务")])),_:1})])),_:1})])),_:1})])),_:1}),h(o,{class:"tpt-items"},{default:m((()=>[h(o,{class:"litem"},{default:m((()=>[h(o,{onClick:e[10]||(e[10]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.taskmanage}?index=2&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"title"},{default:m((()=>[h(i,{src:s.imgurl+"taskpause.png?v="+s.imgVersion,class:"picture",mode:"aspectFill"},null,8,["src"]),h(o,null,{default:m((()=>[h(r,null,{default:m((()=>[v("已暂停/冻结")])),_:1}),h(r,null,{default:m((()=>[v($(s.userdata.task.state2),1)])),_:1})])),_:1})])),_:1}),h(o,{class:"label"},{default:m((()=>[v("您暂停/平台冻结的任务")])),_:1})])),_:1})])),_:1}),h(o,{class:"ritem"},{default:m((()=>[h(o,{onClick:e[11]||(e[11]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.taskmanage}?index=3&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"title"},{default:m((()=>[h(i,{src:s.imgurl+"taskend.png?v="+s.imgVersion,class:"picture",mode:"aspectFill"},null,8,["src"]),h(o,null,{default:m((()=>[h(r,null,{default:m((()=>[v("已结束")])),_:1}),h(r,null,{default:m((()=>[v($(s.userdata.task.state3),1)])),_:1})])),_:1})])),_:1}),h(o,{class:"label"},{default:m((()=>[v("已做完/到结束时间的任务")])),_:1})])),_:1})])),_:1})])),_:1}),h(o,{class:"tpt-items",onClick:e[12]||(e[12]=a=>n.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.complainCenter}?state=1&${s.appFullScreen}`))},{default:m((()=>[h(o,{class:"litem"},{default:m((()=>[h(o,{class:"title"},{default:m((()=>[h(i,{src:s.imgurl+"taskre.png",class:"picture"},null,8,["src"]),h(o,null,{default:m((()=>[h(r,null,{default:m((()=>[v("举报中心")])),_:1}),h(r,null,{default:m((()=>[v($(s.userdata.order.state4),1)])),_:1})])),_:1})])),_:1}),h(o,{class:"label"},{default:m((()=>[v("举报中心的任务")])),_:1})])),_:1}),h(o,{class:"ritem"})])),_:1})])),_:1})):b("",!0),1==s.activeIndex?(p(),f(o,{key:1,class:"tp-money"},{default:m((()=>[(p(!0),w(C,null,x(s.tabdata[s.activeIndex].lower,((a,e)=>(p(),f(o,{class:"tpm-items",key:e},{default:m((()=>[h(o,{class:"title"},{default:m((()=>[v($(a.title),1)])),_:2},1024),(p(!0),w(C,null,x(a.lower,((a,e)=>(p(),f(o,{class:"item",onClick:e=>n.linkTo(a.url),key:e},{default:m((()=>[h(i,{src:a.iconturl,mode:"aspectFill"},null,8,["src"]),h(o,null,{default:m((()=>[v($(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)))),128))])),_:1})):b("",!0),2==s.activeIndex?(p(),f(o,{key:2,class:"tp-other"},{default:m((()=>[(p(!0),w(C,null,x(s.tabdata[s.activeIndex].lower,((a,e)=>(p(),f(o,{class:"tpo-item",onClick:e=>n.linkTo(a.url),key:e},{default:m((()=>[h(i,{src:a.iconturl,mode:"aspectFill"},null,8,["src"]),h(o,null,{default:m((()=>[v($(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):b("",!0)])),_:1}),h(g,{privateShow:s.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-9be2293c"]]);export{O as default};
