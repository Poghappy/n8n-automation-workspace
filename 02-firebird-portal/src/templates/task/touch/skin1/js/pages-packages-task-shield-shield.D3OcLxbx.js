import{a,P as t,i as e,j as l,h as i,b as s,d as o,e as n,r as d,k as p,o as r,l as c,w as h,m as u,q as g,A as f,t as k,v as m,y,F as b,x,z as C,G as w,B as _,H as v,C as j,I as F}from"./index-cF6skFzP.js";import{r as S,_ as z}from"./uni-app.es.J1otcSEF.js";import{p as B}from"./task.9CwFAmAC.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";let $=u();var T;const L=D({data:()=>({wh:$.globalData.navTop+$.globalData.appFullWh,masterDomain:$.globalData.masterDomain,biasTop_88:$.globalData.biasTop_88,appBack:$.globalData.appBack,loadingb:!1,privateb:!1,popb:!1,popconb:!1,loadingb:!0,ajaxb:!1,nodatab:!1,warningb:!1,imgurl:$.globalData.imgPath+"/task/",listdata:null,themedata:{},type:0,ctype:"",filter1:[{id:1,title:"全部"},{id:2,title:"不让他接我的任务"},{id:3,title:"不接他的任务"}],filter2:null,filterIndex:0,page:1,pageSize:10,keyword:"",info:"",imgVersion:"",title:"",platForm:$.globalData.platForm,pages:""}),onLoad(a){(T=this).pages=$.pageFn(B),-1==$.globalData.wxprivate?$.watchG("wxprivate",(function(t){T.wxprivate=t,t?T.privateb=!0:T.onLoadClone3389(a)})):$.globalData.wxprivate?T.privateb=!0:T.onLoadClone3389(a)},onReady(){},onShow(){},onHide(){},onUnload(){},onPullDownRefresh(){$.reloadFn(`${T.pages.shield}?type=${T.type}`)},onReachBottom(){this.ajaxb||(this.ajaxb=!0,this.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,ctype:this.ctype,page:++this.page,pageSize:this.pageSize,keyword:this.keyword}}).then((a=>{this.ajaxb=!1,100==a.data.state&&(T.listdata=this.listdata.concat(a.data.info.list),T.loadingb=!(a.data.info.list.length<this.pageSize))})))},onShareAppMessage(a){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},methods:{onLoadClone3389(o){a({title:"加载中",mask:!0,success:()=>{t({key:"warnColor",success:a=>{t({key:"warnColor",success:a=>{T.themedata=a.data.themeDate,T.setBgColor(this.themedata.themeBackgroundColor),a.data.outtime<Date.parse(new Date)&&e({key:"warnColor",success:()=>{T.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(T.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),T.setBgColor(this.themedata.themeBackgroundColor),i()):(i(),s({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),i()},fail:a=>{T.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(T.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),T.setBgColor(this.themedata.themeBackgroundColor),i()):(i(),s({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize}}).then((a=>{100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null)})),T.$ajax.post({url:"include/ajax.php?service=task&action=type"}).then((a=>{a.data.info.unshift({title:"全部",id:""}),100==a.data.state&&(T.filter2=a.data.info,o.type&&(T.type=o.type))}))},backFn(){if(T.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=o();a&&a.length>1?n({delta:1}):"web"==T.platForm?location.href=`${T.masterDomain}${window.pathname}${T.pages.index}`:d({url:"/pages/packages/task/index/index"})}},setBgColor(a){"web"!=T.platForm&&uni.setBackgroundColor({backgroundColor:a,fail:a=>{console.log(a)}})},tabFn(t){a({title:"加载中",mask:!0}),T.page=1,T.ctype="",T.filterIndex=0,T.keyword="";let e=t.currentTarget.dataset.index;T.type=e,T.nodatab=!1,T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize}}).then((a=>{i(),100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null)}))},filterFn(t){a({title:"加载中",mask:!0,success:()=>{T.nodatab=!1,T.keyword=""}}),this.page=1;let e=t.currentTarget.dataset.index;if(0==this.type)switch(e){case 0:T.ctype="",T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize}}).then((a=>{100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null),T.popconb=!1,setTimeout((()=>{T.popb=!1}),500),i()}));break;case 1:T.ctype=1,T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize,ctype:1}}).then((a=>{100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null),T.popconb=!1,setTimeout((()=>{T.popb=!1}),500),i()}));break;case 2:T.ctype=1,T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize,ctype:2}}).then((a=>{100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null),T.popconb=!1,setTimeout((()=>{T.popb=!1}),500),i()}))}else{for(let a=0;a<this.filter2.length;a++)if(e==a){this.ctype=this.filter2[a].id;break}T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize,ctype:this.ctype}}).then((a=>{100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null),T.popconb=!1,setTimeout((()=>{T.popb=!1}),500),i()}))}T.filterIndex=e},popFn(a){1==a.currentTarget.dataset.state?(T.popb=!0,setTimeout((()=>{T.popconb=!0}),0)):(T.popconb=!1,setTimeout((()=>{T.popb=!1}),500))},searchFn(a){T.keyword=a.detail.value,T.nodatab=!1,T.filterIndex=0,T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=shieldList"),data:{type:this.type,page:this.page,pageSize:this.pageSize,keyword:this.keyword}}).then((a=>{100==a.data.state?(T.listdata=a.data.info.list,T.loadingb=!(a.data.info.list.length<this.pageSize)):(T.nodatab=!0,T.listdata=null),T.popconb=!1,setTimeout((()=>{T.popb=!1}),500),i()}))},unshield(a){let t=a.currentTarget.dataset.id;T.$ajax.post({url:"include/ajax.php?"+$.encodeUrl("service=task&action=delShield"),data:{id:t}}).then((a=>{i(),T.info=a.data.info,this.warningFn(),setTimeout((()=>{$.reloadFn(`${T.pages.shield}?type=${T.type}`)}),2200)}))},warnFn:()=>!0,warningFn(){T.warningb=!0,setTimeout((()=>{T.warningb=!1}),2e3)}}},[["render",function(a,t,e,l,i,s){const o=g,n=j,d=F,u=S(p("private_tip"),z);return r(),c(o,{style:{height:"100%"}},{default:h((()=>[i.appBack?(r(),f(b,{key:0},[k(o,{style:m("height:"+i.wh+"px;background-color: "+i.themedata.themeBackgroundColor+";position: sticky;top: 0rpx;z-index: 99;padding-bottom: 88rpx;"),catchtouchmove:""},null,8,["style"]),k(o,{class:"rec-title",style:m("background-color: "+i.themedata.themeBackgroundColor+";top: "+(i.wh+i.biasTop_88)+"px;")},{default:h((()=>[k(n,{src:i.imgurl+"bl-arrow.png?v="+i.imgVersion,onClick:s.backFn,mode:"aspectFill"},null,8,["src","onClick"]),k(o,null,{default:h((()=>[y("屏蔽管理")])),_:1})])),_:1},8,["style"])],64)):x("",!0),k(o,{class:"tabs",style:m(i.appBack?`top: calc(${i.wh}px + 88rpx);`:"top:0rpx")},{default:h((()=>[k(o,{class:C(0==i.type?"active":""),onClick:s.tabFn,"data-index":"0"},{default:h((()=>[y("屏蔽人")])),_:1},8,["class","onClick"]),k(o,{class:C(1==i.type?"active":""),onClick:s.tabFn,"data-index":"1"},{default:h((()=>[y("屏蔽某类任务")])),_:1},8,["class","onClick"]),k(o,{class:C(2==i.type?"active":""),onClick:s.tabFn,"data-index":"2"},{default:h((()=>[y("屏蔽单个任务")])),_:1},8,["class","onClick"])])),_:1},8,["style"]),k(o,{class:"filterAsearch",style:m(i.appBack?`top:calc(${i.wh}px + 190rpx)`:"top:102rpx")},{default:h((()=>[k(o,{class:"fAs-left",onClick:s.popFn,"data-state":"1"},{default:h((()=>[k(o,null,{default:h((()=>[y("类型："+w(0==i.type?i.filter1[i.filterIndex].title:i.filter2[i.filterIndex].title),1)])),_:1}),k(n,{src:i.imgurl+"downarrow.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"]),k(o,{class:"fAs-right"},{default:h((()=>[k(d,{type:"text",placeholder:0==i.type?"请输入用户昵称":1==i.type?"输入项目名称搜索":"输入ID搜索",onConfirm:s.searchFn,value:i.keyword},null,8,["placeholder","onConfirm","value"]),k(n,{src:i.imgurl+"search.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1},8,["style"]),k(o,{class:"details"},{default:h((()=>[0==i.type?(r(),c(o,{key:0,class:"dp-items"},{default:h((()=>[(r(!0),f(b,null,_(i.listdata,((a,t)=>(r(),c(o,{class:"item",key:t},{default:h((()=>[k(n,{class:"photo",mode:"aspectFill",src:a.photo},null,8,["src"]),k(o,{class:"right"},{default:h((()=>[k(o,{class:"nickname"},{default:h((()=>[k(o,{class:"name"},{default:h((()=>[y(w(a.nickname),1)])),_:2},1024),k(o,{class:"label"},{default:h((()=>[y(w(1==a.ctype?"不让他接我的任务":"不接他的任务"),1)])),_:2},1024)])),_:2},1024),k(o,{class:"btn",style:m("background-color: "+i.themedata.themeBackgroundColor+";"),onClick:s.unshield,"data-id":a.id},{default:h((()=>[y("解除屏蔽")])),_:2},1032,["style","onClick","data-id"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):x("",!0),1==i.type?(r(),c(o,{key:1,class:"dc-items"},{default:h((()=>[(r(!0),f(b,null,_(i.listdata,((a,t)=>(r(),c(o,{class:"item",key:t},{default:h((()=>[k(o,{class:"label"},{default:h((()=>[k(o,null,{default:h((()=>[y(w(a.typename),1)])),_:2},1024),k(o,null,{default:h((()=>[y(w(a.project),1)])),_:2},1024)])),_:2},1024),k(o,{class:"btn",style:m("background-color: "+i.themedata.themeBackgroundColor+";"),onClick:s.unshield,"data-id":a.id},{default:h((()=>[y("解除屏蔽")])),_:2},1032,["style","onClick","data-id"])])),_:2},1024)))),128))])),_:1})):x("",!0),2==i.type?(r(),c(o,{key:2,class:"da-items"},{default:h((()=>[(r(!0),f(b,null,_(i.listdata,((a,t)=>(r(),c(o,{class:"item",key:t},{default:h((()=>[k(o,{class:"title"},{default:h((()=>[y(w(a.title),1)])),_:2},1024),k(o,{class:"operate"},{default:h((()=>[k(o,{class:"label"},{default:h((()=>[k(o,null,{default:h((()=>[y(w(a.typename),1)])),_:2},1024),k(o,null,{default:h((()=>[y(w(a.project),1)])),_:2},1024)])),_:2},1024),k(o,{class:"btn",style:m("background-color: "+i.themedata.themeBackgroundColor+";"),onClick:s.unshield,"data-id":a.id},{default:h((()=>[y("解除屏蔽")])),_:2},1032,["style","onClick","data-id"])])),_:2},1024),k(o,{class:"taskid"},{default:h((()=>[y("任务ID："+w(a.tid),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):x("",!0)])),_:1}),k(o,{class:"nodata",style:m("display: "+(i.nodatab?"block":"none")+";")},{default:h((()=>[k(n,{src:i.imgurl+"nodatas.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"]),k(o,null,{default:h((()=>[y("没有找到相关内容...")])),_:1})])),_:1},8,["style"]),i.popb?(r(),c(o,{key:1,class:"popdown",onClick:s.popFn,"data-state":"0",catchtouchmove:""},{default:h((()=>[0==i.type?(r(),c(o,{key:0,class:"pp-items",style:m("transform: translateY("+(i.popconb?"0%":"-100%")+");"),onClick:v(s.warnFn,["stop","prevent"])},{default:h((()=>[(r(!0),f(b,null,_(i.filter1,((a,t)=>(r(),c(o,{onClick:v(s.filterFn,["stop","prevent"]),"data-index":t,key:t},{default:h((()=>[y(w(a.title),1)])),_:2},1032,["onClick","data-index"])))),128))])),_:1},8,["style","onClick"])):x("",!0),1==i.type?(r(),c(o,{key:1,class:"pc-items",style:m("transform: translateY("+(i.popconb?"0%":"-100%")+");"),onClick:v(s.warnFn,["stop","prevent"])},{default:h((()=>[(r(!0),f(b,null,_(i.filter2,((a,t)=>(r(),c(o,{onClick:v(s.filterFn,["stop","prevent"]),"data-index":t,key:t},{default:h((()=>[y(w(a.title),1)])),_:2},1032,["onClick","data-index"])))),128))])),_:1},8,["style","onClick"])):x("",!0),2==i.type?(r(),c(o,{key:2,class:"pa-item",style:m("transform: translateY("+(i.popconb?"0%":"-100%")+");"),onClick:v(s.warnFn,["stop","prevent"])},{default:h((()=>[(r(!0),f(b,null,_(i.filter2,((a,t)=>(r(),c(o,{onClick:v(s.filterFn,["stop","prevent"]),"data-index":t,key:t},{default:h((()=>[y(w(a.title),1)])),_:2},1032,["onClick","data-index"])))),128))])),_:1},8,["style","onClick"])):x("",!0)])),_:1},8,["onClick"])):x("",!0),i.nodatab?x("",!0):(r(),c(o,{key:2,class:"loading"},{default:h((()=>[y(w(i.loadingb?"加载中...":"没有更多咯~"),1)])),_:1})),k(o,{class:"pop-warning",style:m(i.warningb?"transform:scale(1);":"transform:scale(0);z-index:-1;")},{default:h((()=>[k(o,{class:"text",style:{transform:"translate(-50%, -50%)"}},{default:h((()=>[y(w(i.info),1)])),_:1})])),_:1},8,["style"]),k(u,{privateShow:i.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-cf3cd8e5"]]);export{L as default};
