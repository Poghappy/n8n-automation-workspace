import{c as a,n as e,d as t,e as l,r as s,k as i,o as n,l as o,w as r,m as c,q as p,t as d,v as h,x as u,y as g,G as m,A as f,B as b,F as y,H as k,C as w,D as x,I as _,L as v}from"./index-cF6skFzP.js";import{r as F,_ as D}from"./uni-app.es.J1otcSEF.js";import{p as j}from"./task.9CwFAmAC.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";let B=c();var $;const S=C({data:()=>({wh:B.globalData.navTop+B.globalData.appFullWh,masterDomain:B.globalData.masterDomain,biasTop_88:B.globalData.biasTop_88,appBack:B.globalData.appBack,headerh:0,searchtypet:0,imgurl:B.globalData.imgPath+"/task/",searchtypeb:!1,privateb:!1,loadingb:!1,searchdatab:!0,focusb:!0,keywordb:!1,ajaxb:!1,keyword:"",typedata:null,pageSize:10,page:1,searchtype:0,themedata:{},searchtyped:[{title:"项目名称",type:0},{title:"任务标题",type:1},{title:"任务编号",type:2}],projectd:"项目名称",imgVersion:null,sharetitle:"",shareimg:"",pages:"",platForm:B.globalData.platForm,appBoolean:B.globalData.appBoolean,channelDomain:B.globalData.channelDomain,appFullScreen:B.globalData.appFullScreen}),onLoad(a){$=this,-1==B.globalData.wxprivate?B.watchG("wxprivate",(function(e){$.wxprivate=e,e?$.privateb=!0:$.onload(a)})):B.globalData.wxprivate?$.privateb=!0:$.onload(a)},onReady(){},onShow(){},onHide(){},onUnload(){},onPullDownRefresh(){},onReachBottom(){if(this.ajaxb||!this.loadingb)return;let a={orderby:0,keyword:this.keyword,searchtype:this.searchtype,page:++this.page,pageSize:this.pageSize};this.listFn(a,!0)},onShareAppMessage(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/index/index"}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/index/index"}},methods:{onload(e){$.imgVersion=B.globalData.imgVersion,$.$nextTick((e=>{const t=a();t.select(".header-search").boundingClientRect(),t.select(".st-type").boundingClientRect(),t.exec((a=>{$.headerh=a[0].height,$.searchtypet=this.wh+this.headerh}))})),$.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{$.themedata=a.data.info})),$.$ajax.post({url:"include/ajax.php?"+B.encodeUrl("service=task&action=config")}).then((a=>{$.sharetitle=a.data.info.title,$.shareimg=a.data.info.sharePic})),$.pages=B.pageFn(j)},listFn(a,e=!1){this.ajaxb=!0,this.$ajax.post({url:"include/ajax.php?service=task&action=list",data:a}).then((a=>{100==a.data.state?(e?this.typedata=this.typedata.concat(a.data.info.list):(this.typedata=a.data.info.list,this.keywordb=!0,this.searchdatab=!0),a.data.info.list.length<this.pageSize?this.loadingb=!1:this.loadingb=!0):(this.typedata="",this.searchdatab=!1,this.loadingb=!1),this.ajaxb=!1}))},linkTo(a){if(a)if("web"==$.platForm){if(window.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;a.indexOf("http")>-1?location.href=a:e({url:a})}else{if(a.includes("tomini")){let e=a.split("?")[1].split("&");for(let t=0;t<e.length;t++)if(e[t].includes("tomini")){a=e[t].replace("tomini=",""),e.splice(t,1);break}a+=`?${e.join("&")}`}e({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},backFn(){if($.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=t();a&&a.length>1?l({delta:1}):"web"==$.platForm?location.href=`${$.masterDomain}${window.pathname}${$.pages.index}`:s({url:"/pages/packages/task/index/index"})}},clearFn(){$.keyword="",$.typedata="",$.focusb=!1,$.$nextTick((a=>{$.focusb=!0}))},searchFn(a){let e={orderby:0,keyword:a.detail.value,searchtype:this.searchtype,page:this.page=1,pageSize:10};this.focusb=!1,this.listFn(e)},pulldownFn(){$.searchtypeb=!this.searchtypeb},closeFn(){$.searchtypeb=!this.searchtypeb},confirmFn(a){$.projectd=a.target.dataset.title,$.searchtype=a.target.dataset.type,$.typedata="",this.closeFn()}}},[["render",function(a,e,t,l,s,c){const j=p,C=w,B=x,$=_,S=v,V=F(i("private_tip"),D);return n(),o(j,{style:{height:"100%"}},{default:r((()=>[d(j,{style:h("width: 100%;height:"+s.wh+"px;background-color: "+s.themedata.themeBackgroundColor+";position: fixed;top: 0rpx;z-index: 10;")},null,8,["style"]),d(j,{class:"header-search",style:h("top: "+(s.wh+s.biasTop_88)+"px;background: "+s.themedata.themeBackgroundColor+";")},{default:r((()=>[s.appBack?(n(),o(C,{key:0,src:s.imgurl+"bl-arrow.png?v="+s.imgVersion,class:"hs-logo",onClick:c.backFn,mode:"aspectFill"},null,8,["src","onClick"])):u("",!0),d(S,{class:"search-bar",style:h("web"==s.platForm?"flex:1":"")},{default:r((()=>[d(j,{class:"sb-left",onClick:c.pulldownFn},{default:r((()=>[d(B,null,{default:r((()=>[g(m(s.projectd),1)])),_:1}),d(C,{src:s.imgurl+"downarrow.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"]),d($,{type:"text",class:"hs-input",focus:s.focusb,placeholder:"搜索"+s.projectd,"placeholder-style":"font-size: 28rpx;color: #B3B3B3;",modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>s.keyword=a),onConfirm:c.searchFn},null,8,["focus","placeholder","modelValue","onConfirm"]),d(C,{src:s.imgurl+"close.png?v="+s.imgVersion,class:"sb-clear",onClick:c.clearFn,mode:"aspectFill"},null,8,["src","onClick"])])),_:1},8,["style"])])),_:1},8,["style"]),d(j,{style:h("width: 100%;height: calc("+s.wh+"px + "+s.headerh+"px);")},null,8,["style"]),(n(!0),f(y,null,b(s.typedata,((a,e)=>(n(),o(j,{onClick:e=>c.linkTo(`${s.appBoolean?s.channelDomain:""}${s.pages.details}?id=${a.id}&number=${a.number}&${s.appFullScreen}`),class:"tabdetails",key:e},{default:r((()=>[d(j,{class:"td-headimg"},{default:r((()=>[d(C,{src:a.photo,mode:"aspectFill"},null,8,["src"])])),_:2},1024),d(j,{class:"td-right"},{default:r((()=>[d(j,{class:"title"},{default:r((()=>[d(j,null,{default:r((()=>[g(m(a.title),1)])),_:2},1024),d(j,null,{default:r((()=>[d(C,{src:s.imgurl+"reward.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"]),d(B,null,{default:r((()=>[g(m(a.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(j,{class:"label"},{default:r((()=>[d(j,null,{default:r((()=>[g(m(a.typename),1)])),_:2},1024),d(j,null,{default:r((()=>[g(m(a.project),1)])),_:2},1024)])),_:2},1024),d(j,{class:"more"},{default:r((()=>[d(j,null,{default:r((()=>[g(" 已赚 "),d(B,null,{default:r((()=>[g(m(a.statistics.valid),1)])),_:2},1024),g(" 人 ")])),_:2},1024),d(j,null,{default:r((()=>[g(" 人均用 "),d(B,null,{default:r((()=>[g(m(a.statistics.avg_time),1)])),_:2},1024),g(" 分钟 ")])),_:2},1024),d(j,null,{default:r((()=>[g(" 平均审核 "),d(B,null,{default:r((()=>[g(m(a.statistics.avg_audit),1)])),_:2},1024),g(" 分钟 ")])),_:2},1024),d(C,{src:s.imgurl+"dotted.png?v="+s.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),d(j,{class:"nonesearch",style:h("display: "+(s.searchdatab?"none":"block")+";")},{default:r((()=>[d(j,null,{default:r((()=>[g("抱歉没有找到相关结果")])),_:1})])),_:1},8,["style"]),d(j,{class:"searchtype"},{default:r((()=>[d(j,{class:"st-background",onClick:k(c.closeFn,["stop","prevent"]),style:h("display: "+(s.searchtypeb?"block":"none")+";")},null,8,["onClick","style"]),d(j,{class:"st-type",style:h("top:"+s.searchtypet+"px;transform: translateY("+(s.searchtypeb?"0":"-100%")+");"),onClick:k(c.confirmFn,["stop","prevent"])},{default:r((()=>[(n(!0),f(y,null,b(s.searchtyped,((a,e)=>(n(),o(j,{"data-type":a.type,"data-title":a.title,key:e},{default:r((()=>[g(m(a.title),1)])),_:2},1032,["data-type","data-title"])))),128))])),_:1},8,["style","onClick"])])),_:1}),d(j,{class:"loadingtext"},{default:r((()=>[g(m(s.searchdatab&&s.keywordb?s.loadingb?"加载中...":"没有更多喽~":""),1)])),_:1}),d(V,{privateShow:s.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-7c9c2f35"]]);export{S as default};
