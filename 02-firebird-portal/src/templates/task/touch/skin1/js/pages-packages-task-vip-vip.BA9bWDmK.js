var e=Object.defineProperty,a=(a,t,l)=>(((a,t,l)=>{t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l})(a,"symbol"!=typeof t?t+"":t,l),l);import{o as t,l,w as o,t as i,v as r,C as n,q as s,a as d,h as c,Y as p,P as u,i as h,j as g,b as f,d as m,e as v,r as y,n as k,J as b,Z as _,k as C,m as x,x as w,A as S,y as D,F as I,H as L,G as P,B as F,D as B,S as M,z as $}from"./index-cF6skFzP.js";import{r as j,_ as A}from"./uni-app.es.J1otcSEF.js";import{p as T}from"./public_pay.CFacMRuw.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{p as H}from"./task.9CwFAmAC.js";const U=new class{constructor(){a(this,"_keyStr","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")}encode(e){var a,t,l,o,i,r,n,s="",d=0;for(e=this._utf8_encode(e);d<e.length;)o=(a=e.charCodeAt(d++))>>2,i=(3&a)<<4|(t=e.charCodeAt(d++))>>4,r=(15&t)<<2|(l=e.charCodeAt(d++))>>6,n=63&l,isNaN(t)?r=n=64:isNaN(l)&&(n=64),s=s+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(n);return s}decode(e){var a,t,l,o,i,r,n="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)a=this._keyStr.indexOf(e.charAt(s++))<<2|(o=this._keyStr.indexOf(e.charAt(s++)))>>4,t=(15&o)<<4|(i=this._keyStr.indexOf(e.charAt(s++)))>>2,l=(3&i)<<6|(r=this._keyStr.indexOf(e.charAt(s++))),n+=String.fromCharCode(a),64!=i&&(n+=String.fromCharCode(t)),64!=r&&(n+=String.fromCharCode(l));return n=this._utf8_decode(n)}_utf8_encode(e){e=e.replace(/\r\n/g,"\n");for(var a="",t=0;t<e.length;t++){var l=e.charCodeAt(t);l<128?a+=String.fromCharCode(l):l>127&&l<2048?(a+=String.fromCharCode(l>>6|192),a+=String.fromCharCode(63&l|128)):(a+=String.fromCharCode(l>>12|224),a+=String.fromCharCode(l>>6&63|128),a+=String.fromCharCode(63&l|128))}return a}_utf8_decode(e){for(var a="",t=0,l=0,o=0;t<e.length;)(l=e.charCodeAt(t))<128?(a+=String.fromCharCode(l),t++):l>191&&l<224?(o=e.charCodeAt(t+1),a+=String.fromCharCode((31&l)<<6|63&o),t+=2):(o=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=String.fromCharCode((15&l)<<12|(63&o)<<6|63&c3),t+=3);return a}};const V=O({name:"svimg",props:{src:{type:String,value:""},str:{type:String,value:""},color:{type:String,value:"#000000"},stroke:{type:String,value:""},width:{type:String,value:"20rpx"},height:{type:String,value:"20rpx"},imgMode:{type:String,value:"aspectFill"}},mounted(){this.changeSvg(this.color,this.stroke)},data:()=>({svgData:""}),methods:{changeSvg(e,a){let t=this;if(!t.src){let l=t.changeColor(t.str,e,a),o=U.encode(l);return void(t.svgData="data:image/svg+xml;base64,"+o)}const l=new XMLHttpRequest;let o=((window.templateSkin?window.templateSkin:"")+t.src).split("/").filter((e=>e&&e.trim())).join("/");return l.open("GET",o,!0),l.onload=function(){const o=l.response;let i=t.changeColor(o,e,a),r=U.encode(i);t.svgData="data:image/svg+xml;base64,"+r},l.send(),!1},changeColor(e,a,t){let l;return l=/fill=".*?"/.test(e)?e.replace(/fill=".*?"/g,`fill="${a}"`):e.replace(/<svg /g,`<svg fill="${a}" `),t&&(l=/stroke=".*?"/.test(e)?e.replace(/stroke=".*?"/g,`stroke="${t}"`):e.replace(/<svg /g,`<svg stroke="${t}" `)),l}},computed:{srcColor(){const{src:e,color:a}=this;return{src:e,color:a}}},watch:{srcColor(e){this.changeSvg(e.color)}}},[["render",function(e,a,d,c,p,u){const h=n,g=s;return t(),l(g,{class:"svgBox"},{default:o((()=>[i(h,{style:r(`width: ${d.width};height: ${d.height};`),src:p.svgData,mode:d.imgMode},null,8,["style","src","mode"])])),_:1})}],["__scopeId","data-v-1d27d3ed"]]);let q=x();var Z;const z=O({components:{paypop:T,svgs:V},data:()=>({globalData:q.globalData,wh:q.globalData.navTop+q.globalData.appFullWh,masterDomain:q.globalData.masterDomain,biasTop_88:q.globalData.biasTop_88,appBack:q.globalData.appBack,imgurl:q.globalData.imgPath+"/task/",imgsrc:q.globalData.imgStaticPath+"/noPhoto_100.jpg",themedata:{},leveldata:[{}],userdata:{level:[]},payb:!1,privateb:!1,showPayPop:!1,svgStr:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="47px" height="43px">\n<path fill-rule="evenodd" d="M-0.003,-0.002 L-0.003,3.998 L2.997,3.998 L2.997,41.996 L4.997,41.996 L44.997,1.997 L44.997,0.996 L31.998,0.996 L13.997,16.997 L13.997,-0.002 L-0.003,-0.002 Z"/>\n<path fill-rule="evenodd" d="M40.223,36.363 L35.976,36.363 L35.976,42.938 L33.167,42.938 L33.167,25.802 L40.271,25.802 C44.415,25.802 46.487,27.556 46.487,31.059 C46.487,34.595 44.400,36.363 40.223,36.363 ZM42.768,28.876 C42.207,28.427 41.303,28.203 40.055,28.203 L35.976,28.203 L35.976,33.963 L40.055,33.963 C41.287,33.963 42.200,33.738 42.792,33.290 C43.368,32.827 43.656,32.083 43.656,31.059 C43.656,30.051 43.359,29.322 42.768,28.876 ZM27.000,25.802 L29.808,25.802 L29.808,42.938 L27.000,42.938 L27.000,25.802 Z"/></svg>',activeIndex:0,payInfo:{},imgVersion:null,bgcolor:"",fontcolor:"",name:"",end_time:"",equity:[],title:"",duration_note:"",refresh_coupon:"",bid_coupon:"",average:"",mprice:"",id:"",iosMiniHide:!1,pages:"",platForm:q.globalData.platForm,appBoolean:q.globalData.appBoolean,channelDomain:q.globalData.channelDomain,appFullScreen:q.globalData.appFullScreen}),onLoad(e){Z=this,-1==q.globalData.wxprivate?q.watchG("wxprivate",(function(a){Z.wxprivate=a,a?Z.privateb=!0:(Z.checkiOSMini(),Z.onLoadClone3389(e))})):q.globalData.wxprivate?Z.privateb=!0:(Z.checkiOSMini(),Z.onLoadClone3389(e))},onReady(){},onShow(){},onHide(){},onUnload(){},onPullDownRefresh(){d({title:"加载中",mask:!0,success:()=>{this.onLoadClone3389({pay:this.payb},{}),c({success:()=>{p()}})}})},onReachBottom(){},onShareAppMessage(e){return{title:this.themedata.title,imageUrl:this.themedata.sharePic}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic}},methods:{onLoadClone3389(e){Z.pages=q.pageFn(H),u({key:"userid",fail:()=>{q.loginCheck(`${Z.pages.vip}?index=0`)}}),Z.imgVersion=q.globalData.imgVersion,e.pay&&(Z.payb=!0),d({title:"加载中",mask:!0,success:()=>{u({key:"warnColor",success:e=>{u({key:"warnColor",success:e=>{e.data.themeDate.helpLink5=q.addUrlParam(e.data.themeDate.helpLink5),Z.themedata=e.data.themeDate,Z.setBgColor(this.themedata.themeBackgroundColor),e.data.outtime<Date.parse(new Date)&&h({key:"warnColor",success:()=>{Z.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((e=>{null!=e.data.info.themeBackgroundColor?(e.data.info.helpLink5=q.addUrlParam(e.data.info.helpLink5),Z.themedata=e.data.info,g({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),Z.setBgColor(this.themedata.themeBackgroundColor),c()):(c(),f({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),c()},fail:e=>{Z.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((e=>{null!=e.data.info.themeBackgroundColor?(e.data.info.helpLink5=q.addUrlParam(e.data.info.helpLink5),Z.themedata=e.data.info,g({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),Z.setBgColor(this.themedata.themeBackgroundColor),c()):(c(),f({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),Z.$ajax.post({url:"include/ajax.php?"+q.encodeUrl("service=task&action=memberLevel")}).then((e=>{for(let a=0;a<e.data.info.length;a++)e.data.info[a].average=(e.data.info[a].price/e.data.info[a].duration_month).toFixed(2);Z.leveldata=e.data.info})),Z.$ajax.post({url:"include/ajax.php?"+q.encodeUrl("service=task&action=memberInfo")}).then((a=>{a.data.info.level&&(a.data.info.level.length||(a.data.info.level.end_time=this.timestampToTime(a.data.info.level.end_time)),Z.userdata=a.data.info,Z.activeIndex=e.pay?e.index:84==a.data.info.level.id||0==a.data.info.level.length?0:85==a.data.info.level.id?1:2)}))},backFn(){if(Z.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("goBack",{},(function(e){}))})),!1;{let e=m();e&&e.length>1?v({delta:1}):"web"==Z.platForm?location.href=`${Z.masterDomain}${window.pathname}${Z.pages.my}`:y({url:"/pages/packages/task/my/my"})}},linkTo(e){if(e)if("web"==Z.platForm){if(window.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("redirectNative",{name:"",code:"",link:e},(function(){}))})),!1;e.indexOf("http")>-1?location.href=e:k({url:e})}else{if(e.includes("tomini")){let a=e.split("?")[1].split("&");for(let t=0;t<a.length;t++)if(a[t].includes("tomini")){e=a[t].replace("tomini=",""),a.splice(t,1);break}e+=`?${a.join("&")}`}k({url:e.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(e):e})}},setBgColor(e){"web"!=Z.platForm&&uni.setBackgroundColor({backgroundColor:e,fail:e=>{console.log(e)}})},paytoFn(e){if(q.globalData.userid){if(1==e.currentTarget.dataset.pay){let a=e.currentTarget.dataset.level;Z.$ajax.post({url:"include/ajax.php?"+q.encodeUrl(`service=task&action=openVip&id=${a}`)}).then((e=>{Z.payInfo=e.data.info,Z.showPayPop=!0,Z.$refs.pay.payCutDown(e.data.info,e.data.info.timeout)}))}else Z.linkTo(`${Z.appBoolean?Z.channelDomain:""}${Z.pages.vip}?index=${this.activeIndex}&pay=true&${Z.appFullScreen}`)}else q.loginCheck(`${Z.pages.vip}?index=0`)},keepToCall(e,a){q.reloadFn()},timestampToTime(e){const a=q.dateFormatter(e);return a.year+"年"+(a.month+"月")+(a.day+"日")},checkiOSMini(){const e=this;e.iosMiniHide=q.globalData.iOSMiniPay_forbid,e.iosMiniHide&&e.showiOSPayMsg(),q.globalData.appConfig||q.essentialData((function(a){e.iosMiniHide=a.iOSMiniPay_forbid,a.iOSMiniPay_forbid&&e.showiOSPayMsg()}))},showiOSPayMsg(){b({title:"温馨提示",content:q.globalData.iosMiniPay_msg,showCancel:!1,success:function(e){e.confirm&&console.log("用户点击确定")}})}}},[["render",function(e,a,d,c,p,u){const h=s,g=n,f=B,m=M,v=_("svgs"),y=_("paypop"),k=j(C("private_tip"),A);return t(),l(h,{class:"page",style:r("background-color:"+(p.payb?"white":"#F5F5F5")+";")},{default:o((()=>[p.iosMiniHide?(t(),l(h,{key:0,class:"pay_forbid",onClick:a[0]||(a[0]=e=>u.showiOSPayMsg())})):w("",!0),p.appBack?(t(),S(I,{key:1},[i(h,{style:r("height:"+p.wh+"px;background-color: "+p.themedata.themeBackgroundColor+";position: sticky;top: 0rpx;z-index: 99;padding-bottom: 88rpx;"),catchtouchmove:""},null,8,["style"]),i(h,{class:"rec-title",style:r("background-color: "+p.themedata.themeBackgroundColor+";top: "+(p.wh+p.biasTop_88)+"px;")},{default:o((()=>[i(g,{src:p.imgurl+"bl-arrow.png?v="+p.imgVersion,onClick:u.backFn,mode:"aspectFill"},null,8,["src","onClick"]),i(h,null,{default:o((()=>[D("会员中心")])),_:1})])),_:1},8,["style"])],64)):w("",!0),p.payb?w("",!0):(t(),l(h,{key:2},{default:o((()=>[i(h,{class:"user-detail"},{default:o((()=>[i(h,{class:"ud-plate",onClick:a[2]||(a[2]=L((e=>p.userdata?"":u.paytoFn(e)),["stop","prevent"]))},{default:o((()=>[i(g,{src:p.userdata.photo||p.imgsrc,class:"udp-photo",mode:"aspectFill",onError:a[1]||(a[1]=e=>p.userdata.photo=p.imgsrc)},null,8,["src"]),i(h,{class:"udp-right"},{default:o((()=>[p.userdata?(t(),l(h,{key:0,class:"title"},{default:o((()=>[i(f,null,{default:o((()=>[D(P(p.userdata.nickname),1)])),_:1}),0!=p.userdata.level.length?(t(),l(h,{key:0,class:"label",style:r("background-color: "+p.userdata.level.bgcolor+";color: "+p.userdata.level.fontcolor+";")},{default:o((()=>[D(P(p.userdata.level.name),1)])),_:1},8,["style"])):w("",!0)])),_:1})):w("",!0),p.userdata?w("",!0):(t(),l(h,{key:1,class:"title"},{default:o((()=>[D("请登录")])),_:1})),i(h,{class:"time"},{default:o((()=>[D(P(0!=p.userdata.level.length&&p.userdata?"有效期至"+p.userdata.level.end_time:"您不是会员"),1)])),_:1})])),_:1})])),_:1}),i(h,{class:"ud-tab"},{default:o((()=>[i(m,{"scroll-x":"",enhanced:!0,"show-scrollbar":!1,style:{width:"100%","white-space":"nowrap"}},{default:o((()=>[(t(!0),S(I,null,F(p.leveldata,((e,a)=>(t(),l(h,{class:$(a==p.activeIndex?"active":""),onClick:L((e=>p.activeIndex=a),["stop","prevent"]),"data-index":a,key:a},{default:o((()=>[D(P(e.title),1)])),_:2},1032,["class","onClick","data-index"])))),128))])),_:1})])),_:1})])),_:1}),i(h,{class:"user-equity",style:{"padding-bottom":"calc(112rpx + env(safe-area-inset-bottom))"}},{default:o((()=>[i(h,{class:"ue-content"},{default:o((()=>[i(h,{class:"uec-title"},{default:o((()=>[D(" 共计 "),p.leveldata[p.activeIndex]&&p.leveldata[p.activeIndex].equity?(t(),l(f,{key:0},{default:o((()=>[D(P(p.leveldata[p.activeIndex].equity.length)+"项",1)])),_:1})):w("",!0),D(" 权益 ")])),_:1}),p.leveldata[p.activeIndex]?(t(),l(h,{key:0,class:"uec-items"},{default:o((()=>[(t(!0),S(I,null,F(p.leveldata[p.activeIndex].equity,((e,a)=>(t(),l(h,{class:"item",key:a},{default:o((()=>[i(g,{class:"left",src:e.iconturl,mode:"aspectFill"},null,8,["src"]),i(h,{class:"right"},{default:o((()=>[i(h,{class:"title"},{default:o((()=>[D(P(e.title),1)])),_:2},1024),i(h,{class:"label"},{default:o((()=>[D(P(e.note),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):w("",!0)])),_:1})])),_:1})])),_:1})),p.payb?(t(),l(h,{key:3},{default:o((()=>[i(h,{class:"top-detail"},{default:o((()=>[i(g,{src:p.userdata.photo||p.imgsrc,class:"td-photo",mode:"aspectFill",onError:a[3]||(a[3]=e=>p.userdata.photo=p.imgsrc)},null,8,["src"]),i(h,{class:"td-right"},{default:o((()=>[p.userdata?(t(),l(h,{key:0,style:{display:"flex","align-items":"center"}},{default:o((()=>[i(h,{class:"title"},{default:o((()=>[D(P(p.userdata.nickname),1)])),_:1}),0!=p.userdata.level.length?(t(),l(h,{key:0,class:"label",style:r("background-color: "+p.userdata.level.bgcolor+";color: "+p.userdata.level.fontcolor+";")},{default:o((()=>[D(P(p.userdata.level.name),1)])),_:1},8,["style"])):w("",!0)])),_:1})):w("",!0),p.userdata?w("",!0):(t(),l(h,{key:1},{default:o((()=>[D("请登录")])),_:1})),i(h,{class:"time"},{default:o((()=>[D(P(0!=p.userdata.level.length&&p.userdata?"有效期至"+p.userdata.level.end_time:"您不是会员"),1)])),_:1})])),_:1})])),_:1}),i(h,{class:"cord-content"},{default:o((()=>[i(h,{class:"cc-tab"},{default:o((()=>[i(m,{"scroll-x":"",enhanced:!0,"show-scrollbar":!1,style:{width:"100%","white-space":"nowrap"}},{default:o((()=>[(t(!0),S(I,null,F(p.leveldata,((e,a)=>(t(),l(h,{class:$(a==p.activeIndex?"active":""),"data-index":a,onClick:L((e=>p.activeIndex=a),["stop","prevent"]),key:a},{default:o((()=>[D(P(e.title),1)])),_:2},1032,["class","data-index","onClick"])))),128))])),_:1})])),_:1}),p.leveldata[p.activeIndex]?(t(),l(h,{key:0,class:"cc-cord",style:r("color: "+p.leveldata[p.activeIndex].fontcolor+";background-color: "+p.leveldata[p.activeIndex].bgcolor+";")},{default:o((()=>[i(h,{class:"detail",style:r("background-size: cover;background-repeat: no-repeat;background-image: url("+p.imgurl+"linerbgc1.png);")},{default:o((()=>[i(h,{class:"left"},{default:o((()=>[i(h,{class:"title"},{default:o((()=>[p.leveldata[p.activeIndex]?(t(),l(v,{key:0,width:"52rpx",height:"52rpx",color:p.leveldata[p.activeIndex].fontcolor,str:p.svgStr},null,8,["color","str"])):w("",!0),p.leveldata[p.activeIndex]?(t(),l(f,{key:1,style:{"margin-left":"18rpx"}},{default:o((()=>[D(P(p.leveldata[p.activeIndex].title),1)])),_:1})):w("",!0)])),_:1}),i(h,{class:"text"},{default:o((()=>[D("会员持续时间："+P(p.leveldata[p.activeIndex].duration_note),1)])),_:1}),i(h,{class:"text"},{default:o((()=>[D("刷新券赠送数："+P(p.leveldata[p.activeIndex].refresh_coupon)+"个",1)])),_:1}),i(h,{class:"text"},{default:o((()=>[D("推荐时长赠送："+P(p.leveldata[p.activeIndex].bid_coupon)+"小时",1)])),_:1})])),_:1}),i(g,{class:"right",src:p.imgurl+"vipbgi.png?v="+p.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["style"]),i(h,{class:"price",style:r("background-size: cover;background-repeat: no-repeat;background-image: url("+p.imgurl+"linerbgc2.png?v="+p.imgVersion+");")},{default:o((()=>[0!=p.activeIndex?(t(),l(h,{key:0,class:"left"},{default:o((()=>[D("会员平均费用："+P(p.leveldata[p.activeIndex].average)+P(p.globalData.appConfig.currency?p.globalData.appConfig.currency.short:"元")+"/月",1)])),_:1})):w("",!0),i(h,{class:"right"},{default:o((()=>[D(P(p.globalData.appConfig.currency?p.globalData.appConfig.currency.symbol:"￥")+P(p.leveldata[p.activeIndex].price)+" ",1),i(f,null,{default:o((()=>[D(P(p.globalData.appConfig.currency?p.globalData.appConfig.currency.symbol:"￥")+P(p.leveldata[p.activeIndex].mprice),1)])),_:1})])),_:1})])),_:1},8,["style"])])),_:1},8,["style"])):w("",!0)])),_:1})])),_:1})):w("",!0),i(h,{class:"bottom-btn"},{default:o((()=>[p.payb?(t(),l(h,{key:0,class:"rules"},{default:o((()=>[D(" 开通会员即代表接受 "),i(h,{onClick:a[4]||(a[4]=e=>u.linkTo(p.themedata.helpLink5))},{default:o((()=>[D("《会员服务协议》")])),_:1})])),_:1})):w("",!0),p.leveldata[p.activeIndex]?(t(),l(h,{key:1,onClick:L(u.paytoFn,["stop","prevent"]),"data-pay":p.payb?"1":"0",class:"btn","data-level":p.leveldata[p.activeIndex].id},{default:o((()=>[D(P(p.userdata.uid&&0!=p.userdata.level.length?p.userdata.level.name==p.leveldata[p.activeIndex].title?"续费会员":"更换会员":"立即开通"),1)])),_:1},8,["onClick","data-pay","data-level"])):w("",!0)])),_:1}),i(y,{id:"paypop",showPayPop:p.showPayPop,service:"task",action:"pay",payInfo:p.payInfo,onKeepToCall:a[5]||(a[5]=e=>u.keepToCall(e,{tagId:"paypop"})),ref:"pay",onPaypopb:a[6]||(a[6]=e=>p.showPayPop=!1)},null,8,["showPayPop","payInfo"]),i(k,{privateShow:p.privateb},null,8,["privateShow"])])),_:1},8,["style"])}],["__scopeId","data-v-dd5b7d3c"]]);export{z as default};
