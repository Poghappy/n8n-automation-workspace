<script>
    var noLimit = '{#$noLimit#}'
</script>
<div class="cityChosePage" id="cityChosePage" v-cloak>
     <!-- 城市，区域选择 showPop-->
    <div :class="['pub_areaChose_mask', {'showPop':showPop}]" ></div>
    <div :class="['pub_areaChose_pop' , {'showPop':showPop} ]">
        <div class="loadBox"><div class="loadIcon"></div></div>
        <div class="areaChose_header">
        <a href="javascript:;" class="cancelAddrid" @click="showPop = false;">取消</a>
        <h2>选择区域</h2>
        <a href="javascript:;" class="sureAddrid" @click="sureCityChose()">确定</a>
        </div>
        <div class="cityScroll">
        <div class="tabBox">
            <!-- <span class="city" >{{currCityChose.typename ? currCityChose.typename : '{#$cfg_site_areaname[1]#}'}}</span>
            <span class="district" data-name="{#$cfg_site_areaname[2]#}">{#$cfg_site_areaname[2]#}</span>
            <span class="town" data-name="{#$cfg_site_areaname[3]#}">{#$cfg_site_areaname[3]#}</span> -->
            <template v-if="cityChoseArr && cityChoseArr.length">
            <span v-for="(item,index) in cityChoseArr" @click="currTabShow = index" :class="{'on_chose':index == currTabShow}" v-if="item.typename">{{item.typename}}</span>
            <span v-if="cityChoseArr.length == cityChoseObjArr.length" :class="{'on_chose':currTabShow == cityChoseArr.length}"  @click="currTabShow = cityChoseArr.length">请选择</span>
            </template>
            <template v-else>
            <span :class="{'on_chose':currTabShow == cityChoseArr.length}">城市</span>
            </template>
            <s></s>
        </div>
        <div class="cityListBox">
            
            <template  v-if="(cityChoseArr && cityChoseArr.length) &&  !showCityPage">
            <ul v-for="(clist,ind) in cityChoseObjArr" :data-id="clist && clist.id ? clist.id : 0" 
            :class="['cityList',{' fn-hide': ind != (currTabShow.length - 1 ) && ind != (currTabShow.length - 2) },
            {'parentUl': (ind == currTabShow - 2) && clist.children},
            {'currOnUl': (ind == currTabShow - 1 ) && clist.children}]" >
                <li :class="{'active':!cityChoseArr[ind + 1] || !cityChoseArr[cityChoseArr.length - 1]} " @click="choseLastType(clist,ind) " v-if="noLimit">不限</li>
                <li  v-for="item in clist.children" :class="{'active': (cityChoseArr[ind + 1] && cityChoseArr[ind + 1].id == item.id ) || (cityChoseArr[cityChoseArr.length - 1].id == item.id) }"  :data-id="item ? item.id : 0" @click="choseCity(item)">{{item.typename}}</li>
            </ul>
            </template>
            <div class="cityListPage" v-else >
            <div class="jump_szm"></div>
            <div class="cityList">
                <ul class="right_szm">
                    <li v-for="(item,ind) in cityList" @click="go_szm(ind)" >{{item.key == 'hot' ? '热门' : item.key}}</li>
                </ul>
                <div class="cityUl">
                <dl v-for="(item,pind) in cityList" :id="item.key">
                    <dt>{{item.key == 'hot' ? '热门' : item.key }}</dt>
                    <dd v-for="(city,ind) in item.arr" @click="choseCity(city,1)">{{city.typename}}</dd>
                </dl>
                </div>
            </div>
            </div>
        </div>
        </div>
        
    </div>
</div>
<script src="/templates/member/touch/js/cityChose.js"></script>