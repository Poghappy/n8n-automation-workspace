<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
		<title>{#$langData['waimai'][5][1]#}</title> {#*   订单列表   *#}
		<link rel="stylesheet" type="text/css" href="{#$cfg_staticPath#}css/core/touchBase.css?v={#$cfg_staticVersion#}">
		<link rel="stylesheet" type="text/css" href="{#$cfg_staticPath#}css/ui/swiper.min_4.2.2.css?v={#$cfg_staticVersion#}">
		<link rel="stylesheet" type="text/css" href="{#$templets_skin#}css/waimaiOrder.css?v={#$cfg_staticVersion#}">
		<script src="{#$cfg_staticPath#}js/core/touchScale.js?v={#$cfg_staticVersion#}"></script>
		<script type="text/javascript" src="{#$cfg_staticPath#}js/core/zepto.min.js?v={#$cfg_staticVersion#}"></script>
		<script src="{#$templets_skin#}js/vue.min.js?v={#$cfg_staticVersion#}"></script>
		<script>
			
			 var pageUrl = '{#$cfg_basehost#}/wmsj/order/waimaiOrder.php?state=', state = '{#if $state#}{#$state#}{#else#}2{#/if#}';
			 var cookiePre = '{#$cfg_cookiePre#}';
			 var orderState = {#if $state==1#}1{#else#}0{#/if#};  //订单状态为1 则是历史订单
			 var templets = "{#$templets_skin#}";
			 var staticPath = "{#$cfg_staticPath#}";
		</script>
	</head>
	<body>
		<div id="page">
			<!-- 订单列表 -->
			<div class="page_list" v-if="!history">
				<!-- 头部 s-->
				<div class="top_box">
					<div class="headbox">
						<div></div>
						<div class="htitle">{#$langData['waimai'][5][1]#}</div>    {#*   订单列表   *#}
						<a class="h_url" href="?state=1" >{#$langData['waimai'][10][0]#}</a>  {#*   历史订单   *#}
					</div>
					<div class="tab_box">
						<template>
							<ul v-cloak>
								<li v-for="tab in tabs" :data-page="tab.page" :data-load="tab.isload" :data-typeid="tab.typeid" :data-state="tab.state" :class="{'on_chose':currOn == tab.typeid}" @click="changeTab">{{tab.name}}<span v-show="tab.dpageInfo!=''" :class="{'red':tab.typeid=='5'}">{{tab.dpageInfo}}</span></li>
								<em></em>
							</ul>
						</template>
					</div>
				</div>
				<!-- 头部 e-->
				
				<!-- 列表 -->
				<div class="ListBox">
					
					<div class="swiper-container"  v-cloak>
						<div class="swiper-wrapper">
							<div v-for="tab in tabs" :data-page="tab.page" :data-load="tab.isload" :data-typeid="tab.typeid" :data-state="tab.state" class="swiper-slide list_ul" >
								<div class="rloading">{#$langData['waimai']['11'][0]#}</div>  {#*  下拉刷新  *#}
								<keep-alive>
								<list-li  v-if="currOn==tab.typeid" ref="orderlist"></list-li>
								</keep-alive>
							</div>
						</div>
					</div>
					<div v-if="LOADING" class="loading_icon"></div>
					
					
				</div>
				<template>
					<div class="pop_mask" v-show="cancel_order"></div>
					<div class="pop_box" v-show="cancel_order">
						<textarea rows="" cols="" id="note" placeholder="{#$langData['waimai']['11'][2]#}"></textarea>  {#*  请输入取消订单原因（如商品售空、店铺打烊等） *#}
						<button type="button" class="sure_btn" data-type="cancel" :data-id="cancelId" @click.stop="oporder">{#$langData['waimai']['11'][3]#}</button>  {#*  取消订单  *#}
						<button type="button" class="cancel_btn" @click="cancel_order = !cancel_order">返回</button>
					</div>
				</template>
				{#include file='../_footer.html' curr='order' toppage=1#}
			</div>
			
			<!-- 历史订单 -->
			<template>
			<div class="page_list"  v-if="history">
				<!-- 头部 s-->
				<div class="top_box">
					<div class="headbox">
						<a href="javascript:;" class="back_btn goBack" onclick="history.go(-1)"></a>
						<div class="htitle">{#$langData['waimai'][10][0]#}</div>    {#*   历史订单   *#}
					</div>
					<div class="search_box">
						<input type="text" style="width: 6rem;" placeholder="{#$langData['waimai'][11][4]#}" enterkeyhint='done' :value="order_num" id="search_history" @keyup="searchOrder"> {#*   搜索订单号   *#}
					</div>
				</div>
				
				<!-- 头部 e-->
				<history-li ref="history" v-cloak></history-li>
				<div v-if="LOADING" class="loading_icon"></div>
			</div>
			</template>	
		</div>
	</body>
	<script src="{#$cfg_staticPath#}js/ui/swiper.min_4.2.2.js?v={#$cfg_staticVersion#}"></script>
	<script src="{#$templets_skin#}js/axios.min.js?v={#$cfg_staticVersion#}"></script>
	<script src="{#$cfg_basehost#}/include/lang/{#$langList.currCode#}.js?v={#$cfg_staticVersion#}"></script>
	<script src="{#$templets_skin#}js/drag-loading.js?v={#$cfg_staticVersion#}"></script>
	<script src="{#$templets_skin#}js/waimaiOrder.js?v={#$cfg_staticVersion#}"></script>
</html>
