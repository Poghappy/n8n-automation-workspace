# N8N Docker 环境配置模板
# 复制此文件为 .env 并填入实际值

# ===========================================
# 基础配置
# ===========================================

# 域名配置 (生产环境必需)
DOMAIN_NAME=localhost
SUBDOMAIN=n8n
N8N_PROTOCOL=http

# N8N 基础认证 (必需)
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=

# N8N 加密密钥 (必需) - 使用: openssl rand -hex 16
N8N_ENCRYPTION_KEY=

# JWT 密钥 (用户管理) - 使用: openssl rand -base64 32
N8N_USER_MANAGEMENT_JWT_SECRET=

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL 管理员密码 (必需)
POSTGRES_PASSWORD=

# PostgreSQL 应用用户
POSTGRES_USER=n8n
POSTGRES_DB=n8n

# PostgreSQL 非root用户密码 (必需)
POSTGRES_NON_ROOT_PASSWORD=

# ===========================================
# Redis 配置
# ===========================================

# Redis 密码 (必需)
REDIS_PASSWORD=

# ================================
# AI智能体配置
# ================================
# OpenAI配置
OPENAI_API_KEY=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
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# 智能体行为配置
AGENT_MODE=hybrid
AGENT_ROLE=executive
MAX_CONCURRENT_WORKFLOWS=10
ENABLE_AUTO_LEARNING=true
ENABLE_MONITORING=true

# 学习和推荐配置
LEARNING_RATE=0.1
RECOMMENDATION_THRESHOLD=0.8
KNOWLEDGE_UPDATE_INTERVAL=3600

# ================================
# 火鸟门户系统配置
# ================================
HUONIAO_PORTAL_URL=http://localhost:8080
HUONIAO_API_KEY=your-huoniao-api-key
HUONIAO_DB_HOST=localhost
HUONIAO_DB_PORT=3306
HUONIAO_DB_NAME=huoniao
HUONIAO_DB_USER=huoniao
HUONIAO_DB_PASSWORD=huoniao123

# ================================
# API服务配置
# ================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true
WEBSOCKET_PORT=8001

# CORS配置
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true

# ================================
# 安全配置
# ================================
# JWT配置
JWT_SECRET_KEY=your-jwt-secret-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 加密配置
ENCRYPTION_KEY=your-encryption-key-32-chars-long
HASH_SALT=your-hash-salt

# ================================
# 监控和日志配置
# ================================
# Prometheus
PROMETHEUS_HOST=localhost
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Grafana
GRAFANA_HOST=localhost
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin123

# 日志配置
LOG_FILE_PATH=logs/system.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Sentry错误追踪
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development

# ================================
# 消息队列配置
# ================================
# RabbitMQ
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin123
RABBITMQ_VHOST=/
RABBITMQ_URL=amqp://admin:admin123@localhost:5672/

# Celery
CELERY_BROKER_URL=redis://:redis123@localhost:6379/1
CELERY_RESULT_BACKEND=redis://:redis123@localhost:6379/2

# ================================
# 存储配置
# ================================
# 文件存储
STORAGE_TYPE=local
STORAGE_PATH=./storage
MAX_FILE_SIZE=100MB

# 云存储（可选）
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-s3-bucket

# ================================
# 缓存配置
# ================================
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=n8n_ai_

# ================================
# 邮件配置
# ================================
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-email-password
MAIL_DEFAULT_SENDER=your-email@gmail.com

# ================================
# 第三方服务配置
# ================================
# Firecrawl API配置
FIRECRAWL_API_KEY=your-firecrawl-api-key-here

# 钉钉
DINGTALK_APP_KEY=your-dingtalk-app-key
DINGTALK_APP_SECRET=your-dingtalk-app-secret

# 企业微信
WECHAT_CORP_ID=your-wechat-corp-id
WECHAT_CORP_SECRET=your-wechat-corp-secret

# Slack
SLACK_BOT_TOKEN=your-slack-bot-token
SLACK_SIGNING_SECRET=your-slack-signing-secret

# ================================
# 开发和测试配置
# ================================
# 测试数据库
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/test_n8n

# 开发工具
ENABLE_DEBUG_TOOLBAR=true
ENABLE_PROFILER=false

# 热重载
RELOAD_DIRS=["src"]
RELOAD_INCLUDES=["*.py"]

# ================================
# 性能配置
# ================================
# 连接池
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# 请求限制
RATE_LIMIT_PER_MINUTE=60
MAX_REQUEST_SIZE=10MB

# 并发配置
MAX_WORKERS=4
WORKER_TIMEOUT=300

# ================================
# 备份和恢复配置
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups