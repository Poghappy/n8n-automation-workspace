# N8N å¸¸è§é—®é¢˜è§£ç­” (FAQ)

## ğŸ“‹ ç›®å½•

- [å®‰è£…éƒ¨ç½²é—®é¢˜](#å®‰è£…éƒ¨ç½²é—®é¢˜)
- [é…ç½®ç›¸å…³é—®é¢˜](#é…ç½®ç›¸å…³é—®é¢˜)
- [å·¥ä½œæµå¼€å‘é—®é¢˜](#å·¥ä½œæµå¼€å‘é—®é¢˜)
- [æ€§èƒ½ä¼˜åŒ–é—®é¢˜](#æ€§èƒ½ä¼˜åŒ–é—®é¢˜)
- [å®‰å…¨ç›¸å…³é—®é¢˜](#å®‰å…¨ç›¸å…³é—®é¢˜)
- [é›†æˆå¯¹æ¥é—®é¢˜](#é›†æˆå¯¹æ¥é—®é¢˜)
- [æ•…éšœæ’é™¤é—®é¢˜](#æ•…éšœæ’é™¤é—®é¢˜)
- [æœ€ä½³å®è·µé—®é¢˜](#æœ€ä½³å®è·µé—®é¢˜)

---

## ğŸš€ å®‰è£…éƒ¨ç½²é—®é¢˜

### Q1: Dockeréƒ¨ç½²æ—¶æç¤ºç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

**é—®é¢˜æè¿°**ï¼š
```
Error starting userland proxy: listen tcp4 0.0.0.0:5678: bind: address already in use
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ**ï¼š
   ```bash
   lsof -i :5678
   # æˆ–è€…
   netstat -tulpn | grep 5678
   ```

2. **åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹**ï¼š
   ```bash
   sudo kill -9 <PID>
   ```

3. **æˆ–è€…ä¿®æ”¹N8Nç«¯å£**ï¼š
   ```bash
   # ç¼–è¾‘.envæ–‡ä»¶
   N8N_PORT=5679
   
   # æˆ–è€…ä¿®æ”¹docker-compose.yml
   ports:
     - "5679:5678"
   ```

### Q2: æ•°æ®åº“è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**é—®é¢˜æè¿°**ï¼š
```
Error: connect ECONNREFUSED 127.0.0.1:5432
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ£€æŸ¥PostgreSQLå®¹å™¨çŠ¶æ€**ï¼š
   ```bash
   docker-compose ps postgres
   docker-compose logs postgres
   ```

2. **éªŒè¯æ•°æ®åº“é…ç½®**ï¼š
   ```bash
   # æ£€æŸ¥.envæ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
   grep POSTGRES .env
   ```

3. **é‡å¯æ•°æ®åº“æœåŠ¡**ï¼š
   ```bash
   docker-compose restart postgres
   # ç­‰å¾…30ç§’åé‡å¯N8N
   docker-compose restart n8n
   ```

4. **æ‰‹åŠ¨è¿æ¥æµ‹è¯•**ï¼š
   ```bash
   docker-compose exec postgres psql -U n8n -d n8n -c "SELECT version();"
   ```

### Q3: SSLè¯ä¹¦é…ç½®é—®é¢˜

**é—®é¢˜æè¿°**ï¼šHTTPSè®¿é—®æ—¶æç¤ºè¯ä¹¦é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨Let's Encryptè‡ªåŠ¨è¯ä¹¦**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­é…ç½®
   DOMAIN_NAME=your-domain.com
   LETSENCRYPT_EMAIL=your-email@example.com
   ```

2. **ä½¿ç”¨è‡ªç­¾åè¯ä¹¦**ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰ï¼š
   ```bash
   # ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
   openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
     -keyout ssl/private.key -out ssl/certificate.crt
   ```

3. **é…ç½®Nginxä»£ç†**ï¼š
   ```nginx
   server {
       listen 443 ssl;
       server_name your-domain.com;
       
       ssl_certificate /path/to/certificate.crt;
       ssl_certificate_key /path/to/private.key;
       
       location / {
           proxy_pass http://localhost:5678;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   }
   ```

---

## âš™ï¸ é…ç½®ç›¸å…³é—®é¢˜

### Q4: å¦‚ä½•ä¿®æ”¹N8Nçš„é»˜è®¤é…ç½®ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **é€šè¿‡ç¯å¢ƒå˜é‡ä¿®æ”¹**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­æ·»åŠ 
   N8N_BASIC_AUTH_ACTIVE=true
   N8N_BASIC_AUTH_USER=admin
   N8N_BASIC_AUTH_PASSWORD=your-password
   N8N_PAYLOAD_SIZE_MAX=16
   N8N_CONCURRENCY=10
   ```

2. **é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹**ï¼š
   ```json
   // config/n8n.json
   {
     "database": {
       "type": "postgresdb",
       "postgresdb": {
         "host": "postgres",
         "port": 5432,
         "database": "n8n",
         "user": "n8n",
         "password": "your-password"
       }
     },
     "executions": {
       "saveDataOnError": "all",
       "saveDataOnSuccess": "all"
     }
   }
   ```

### Q5: å¦‚ä½•é…ç½®é‚®ä»¶å‘é€åŠŸèƒ½ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **SMTPé…ç½®**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­é…ç½®
   N8N_EMAIL_MODE=smtp
   N8N_SMTP_HOST=smtp.gmail.com
   N8N_SMTP_PORT=587
   N8N_SMTP_USER=your-email@gmail.com
   N8N_SMTP_PASS=your-app-password
   N8N_SMTP_SENDER=your-email@gmail.com
   ```

2. **Gmailåº”ç”¨å¯†ç è®¾ç½®**ï¼š
   - å¯ç”¨ä¸¤æ­¥éªŒè¯
   - ç”Ÿæˆåº”ç”¨ä¸“ç”¨å¯†ç 
   - ä½¿ç”¨åº”ç”¨å¯†ç è€Œéè´¦æˆ·å¯†ç 

3. **æµ‹è¯•é‚®ä»¶å‘é€**ï¼š
   ```javascript
   // åœ¨CodeèŠ‚ç‚¹ä¸­æµ‹è¯•
   const nodemailer = require('nodemailer');
   
   const transporter = nodemailer.createTransporter({
     host: 'smtp.gmail.com',
     port: 587,
     secure: false,
     auth: {
       user: 'your-email@gmail.com',
       pass: 'your-app-password'
     }
   });
   
   await transporter.sendMail({
     from: 'your-email@gmail.com',
     to: 'recipient@example.com',
     subject: 'Test Email',
     text: 'This is a test email from N8N'
   });
   ```

### Q6: å¦‚ä½•é…ç½®ä»£ç†æœåŠ¡å™¨ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **HTTPä»£ç†é…ç½®**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­é…ç½®
   HTTP_PROXY=http://proxy-server:8080
   HTTPS_PROXY=http://proxy-server:8080
   NO_PROXY=localhost,127.0.0.1
   ```

2. **åœ¨å·¥ä½œæµä¸­ä½¿ç”¨ä»£ç†**ï¼š
   ```javascript
   // HTTP RequestèŠ‚ç‚¹é…ç½®
   {
     "method": "GET",
     "url": "https://api.example.com/data",
     "options": {
       "proxy": "http://proxy-server:8080"
     }
   }
   ```

---

## ğŸ”§ å·¥ä½œæµå¼€å‘é—®é¢˜

### Q7: å¦‚ä½•åœ¨èŠ‚ç‚¹é—´ä¼ é€’å¤æ‚æ•°æ®ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨JSONæ ¼å¼ä¼ é€’**ï¼š
   ```javascript
   // åœ¨SetèŠ‚ç‚¹ä¸­è®¾ç½®æ•°æ®
   return [
     {
       json: {
         user: {
           id: 123,
           name: "å¼ ä¸‰",
           email: "zhangsan@example.com"
         },
         orders: [
           { id: 1, amount: 100 },
           { id: 2, amount: 200 }
         ]
       }
     }
   ];
   ```

2. **è®¿é—®ä¸Šä¸€èŠ‚ç‚¹çš„æ•°æ®**ï¼š
   ```javascript
   // åœ¨åç»­èŠ‚ç‚¹ä¸­è®¿é—®æ•°æ®
   const userData = $json.user;
   const orders = $json.orders;
   const totalAmount = orders.reduce((sum, order) => sum + order.amount, 0);
   ```

3. **ä½¿ç”¨è¡¨è¾¾å¼å¼•ç”¨æ•°æ®**ï¼š
   ```javascript
   // åœ¨èŠ‚ç‚¹é…ç½®ä¸­ä½¿ç”¨è¡¨è¾¾å¼
   {{ $json.user.name }}
   {{ $json.orders[0].amount }}
   {{ $json.orders.length }}
   ```

### Q8: å¦‚ä½•å¤„ç†APIè¯·æ±‚çš„é”™è¯¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨Try-Catchæ¨¡å¼**ï¼š
   ```mermaid
   graph LR
       A[HTTP Request] --> B{è¯·æ±‚æˆåŠŸ?}
       B -->|æ˜¯| C[å¤„ç†æˆåŠŸå“åº”]
       B -->|å¦| D[é”™è¯¯å¤„ç†èŠ‚ç‚¹]
       D --> E[å‘é€å‘Šè­¦é€šçŸ¥]
   ```

2. **åœ¨HTTP RequestèŠ‚ç‚¹ä¸­é…ç½®**ï¼š
   ```json
   {
     "continueOnFail": true,
     "retryOnFail": true,
     "maxRetries": 3,
     "retryInterval": 1000
   }
   ```

3. **ä½¿ç”¨CodeèŠ‚ç‚¹å¤„ç†é”™è¯¯**ï¼š
   ```javascript
   try {
     const response = await this.helpers.request({
       method: 'GET',
       url: 'https://api.example.com/data',
       json: true
     });
     return [{ json: response }];
   } catch (error) {
     return [{
       json: {
         error: true,
         message: error.message,
         timestamp: new Date().toISOString()
       }
     }];
   }
   ```

### Q9: å¦‚ä½•å®ç°å¾ªç¯å¤„ç†ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨Split In BatchesèŠ‚ç‚¹**ï¼š
   ```javascript
   // å¤„ç†å¤§é‡æ•°æ®æ—¶åˆ†æ‰¹å¤„ç†
   // Split In Batchesé…ç½®
   {
     "batchSize": 10,
     "options": {
       "reset": false
     }
   }
   ```

2. **ä½¿ç”¨CodeèŠ‚ç‚¹å®ç°å¾ªç¯**ï¼š
   ```javascript
   const items = $input.all();
   const results = [];
   
   for (const item of items) {
     // å¤„ç†æ¯ä¸ªé¡¹ç›®
     const processed = await processItem(item.json);
     results.push({ json: processed });
   }
   
   return results;
   ```

3. **é€’å½’å·¥ä½œæµè®¾è®¡**ï¼š
   ```mermaid
   graph LR
       A[å¼€å§‹] --> B[å¤„ç†å½“å‰é¡¹]
       B --> C{è¿˜æœ‰æ›´å¤šé¡¹?}
       C -->|æ˜¯| D[è°ƒç”¨è‡ªèº«å·¥ä½œæµ]
       C -->|å¦| E[ç»“æŸ]
       D --> B
   ```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–é—®é¢˜

### Q10: N8Nè¿è¡Œç¼“æ…¢æ€ä¹ˆä¼˜åŒ–ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **è°ƒæ•´å¹¶å‘è®¾ç½®**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­é…ç½®
   N8N_CONCURRENCY=5  # é™ä½å¹¶å‘æ•°
   N8N_PAYLOAD_SIZE_MAX=8  # é™åˆ¶æ•°æ®å¤§å°
   ```

2. **ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½**ï¼š
   ```sql
   -- è¿æ¥åˆ°PostgreSQL
   docker-compose exec postgres psql -U n8n -d n8n
   
   -- åˆ›å»ºç´¢å¼•
   CREATE INDEX idx_execution_data_execution_id ON execution_entity(id);
   CREATE INDEX idx_workflow_entity_active ON workflow_entity(active);
   
   -- åˆ†æè¡¨ç»Ÿè®¡ä¿¡æ¯
   ANALYZE;
   ```

3. **æ¸…ç†å†å²æ•°æ®**ï¼š
   ```bash
   # æ¸…ç†30å¤©å‰çš„æ‰§è¡Œè®°å½•
   docker-compose exec n8n n8n execute --file=cleanup.js --older-than=30
   ```

4. **ç›‘æ§èµ„æºä½¿ç”¨**ï¼š
   ```bash
   # æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
   docker stats
   
   # æŸ¥çœ‹ç³»ç»Ÿèµ„æº
   htop
   free -h
   df -h
   ```

### Q11: å¦‚ä½•ä¼˜åŒ–å¤§æ•°æ®é‡å¤„ç†ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **åˆ†æ‰¹å¤„ç†ç­–ç•¥**ï¼š
   ```javascript
   // ä½¿ç”¨Split In BatchesèŠ‚ç‚¹
   const batchSize = 100;
   const items = $input.all();
   const batches = [];
   
   for (let i = 0; i < items.length; i += batchSize) {
     batches.push(items.slice(i, i + batchSize));
   }
   
   return batches.map(batch => ({ json: { items: batch } }));
   ```

2. **ä½¿ç”¨æµå¼å¤„ç†**ï¼š
   ```javascript
   // åœ¨CodeèŠ‚ç‚¹ä¸­å®ç°æµå¼å¤„ç†
   const stream = require('stream');
   const { pipeline } = require('stream/promises');
   
   const processStream = new stream.Transform({
     objectMode: true,
     transform(chunk, encoding, callback) {
       // å¤„ç†æ¯ä¸ªæ•°æ®å—
       const processed = processData(chunk);
       callback(null, processed);
     }
   });
   
   await pipeline(inputStream, processStream, outputStream);
   ```

3. **å¼‚æ­¥å¤„ç†æ¨¡å¼**ï¼š
   ```javascript
   // ä½¿ç”¨Promise.allå¹¶å‘å¤„ç†
   const promises = items.map(async (item) => {
     return await processItem(item);
   });
   
   const results = await Promise.all(promises);
   return results.map(result => ({ json: result }));
   ```

---

## ğŸ”’ å®‰å…¨ç›¸å…³é—®é¢˜

### Q12: å¦‚ä½•ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨å‡­æ®ç®¡ç†**ï¼š
   ```javascript
   // åœ¨å·¥ä½œæµä¸­ä½¿ç”¨å‡­æ®
   const credentials = await this.getCredentials('httpBasicAuth');
   const apiKey = credentials.password;
   ```

2. **ç¯å¢ƒå˜é‡ä¿æŠ¤**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯
   API_KEY=your-secret-api-key
   DATABASE_PASSWORD=your-db-password
   
   # åœ¨å·¥ä½œæµä¸­å¼•ç”¨
   {{ $env.API_KEY }}
   ```

3. **åŠ å¯†å­˜å‚¨**ï¼š
   ```bash
   # è®¾ç½®åŠ å¯†å¯†é’¥
   N8N_ENCRYPTION_KEY=your-32-character-encryption-key
   ```

### Q13: å¦‚ä½•è®¾ç½®è®¿é—®æ§åˆ¶ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **åŸºç¡€è®¤è¯é…ç½®**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­é…ç½®
   N8N_BASIC_AUTH_ACTIVE=true
   N8N_BASIC_AUTH_USER=admin
   N8N_BASIC_AUTH_PASSWORD=secure-password
   ```

2. **JWTè®¤è¯é…ç½®**ï¼š
   ```bash
   N8N_JWT_AUTH_ACTIVE=true
   N8N_JWT_AUTH_HEADER=authorization
   N8N_JWT_AUTH_HEADER_VALUE_PREFIX=Bearer
   ```

3. **IPç™½åå•é…ç½®**ï¼š
   ```nginx
   # åœ¨Nginxé…ç½®ä¸­é™åˆ¶IPè®¿é—®
   location / {
       allow 192.168.1.0/24;
       allow 10.0.0.0/8;
       deny all;
       
       proxy_pass http://localhost:5678;
   }
   ```

---

## ğŸ”— é›†æˆå¯¹æ¥é—®é¢˜

### Q14: å¦‚ä½•é›†æˆç¬¬ä¸‰æ–¹APIï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **HTTP RequestèŠ‚ç‚¹é…ç½®**ï¼š
   ```json
   {
     "method": "POST",
     "url": "https://api.example.com/v1/data",
     "headers": {
       "Authorization": "Bearer {{ $credentials.apiKey }}",
       "Content-Type": "application/json"
     },
     "body": {
       "data": "{{ $json.inputData }}"
     }
   }
   ```

2. **å¤„ç†APIå“åº”**ï¼š
   ```javascript
   // åœ¨SetèŠ‚ç‚¹ä¸­å¤„ç†å“åº”
   const response = $json;
   
   if (response.success) {
     return [{
       json: {
         status: 'success',
         data: response.data,
         processedAt: new Date().toISOString()
       }
     }];
   } else {
     throw new Error(`API Error: ${response.error}`);
   }
   ```

3. **APIé™æµå¤„ç†**ï¼š
   ```javascript
   // å®ç°ç®€å•çš„é™æµé€»è¾‘
   const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));
   
   for (const item of items) {
     await processItem(item);
     await delay(1000); // æ¯ç§’æœ€å¤š1ä¸ªè¯·æ±‚
   }
   ```

### Q15: æ•°æ®åº“é›†æˆæœ€ä½³å®è·µï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **MySQLè¿æ¥é…ç½®**ï¼š
   ```json
   {
     "host": "mysql-server",
     "port": 3306,
     "database": "your_database",
     "user": "n8n_user",
     "password": "secure_password",
     "ssl": false
   }
   ```

2. **æ‰¹é‡æ•°æ®æ“ä½œ**ï¼š
   ```sql
   -- æ‰¹é‡æ’å…¥æ•°æ®
   INSERT INTO users (name, email, created_at) VALUES
   {{ $json.users.map(user => `('${user.name}', '${user.email}', NOW())`).join(',') }}
   ```

3. **äº‹åŠ¡å¤„ç†**ï¼š
   ```javascript
   // åœ¨CodeèŠ‚ç‚¹ä¸­å®ç°äº‹åŠ¡
   const mysql = require('mysql2/promise');
   const connection = await mysql.createConnection(dbConfig);
   
   try {
     await connection.beginTransaction();
     
     // æ‰§è¡Œå¤šä¸ªSQLæ“ä½œ
     await connection.execute('INSERT INTO table1 VALUES (?, ?)', [val1, val2]);
     await connection.execute('UPDATE table2 SET status = ? WHERE id = ?', ['active', id]);
     
     await connection.commit();
   } catch (error) {
     await connection.rollback();
     throw error;
   } finally {
     await connection.end();
   }
   ```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤é—®é¢˜

### Q16: å·¥ä½œæµçªç„¶åœæ­¢æ‰§è¡Œæ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ£€æŸ¥æ‰§è¡Œå†å²**ï¼š
   ```bash
   # æŸ¥çœ‹N8Næ—¥å¿—
   docker-compose logs -f n8n
   
   # æŸ¥çœ‹æœ€è¿‘çš„æ‰§è¡Œè®°å½•
   docker-compose exec postgres psql -U n8n -d n8n -c "
   SELECT id, workflow_id, mode, started_at, stopped_at, finished 
   FROM execution_entity 
   ORDER BY started_at DESC 
   LIMIT 10;"
   ```

2. **æ£€æŸ¥ç³»ç»Ÿèµ„æº**ï¼š
   ```bash
   # æ£€æŸ¥å†…å­˜ä½¿ç”¨
   free -h
   
   # æ£€æŸ¥ç£ç›˜ç©ºé—´
   df -h
   
   # æ£€æŸ¥å®¹å™¨çŠ¶æ€
   docker-compose ps
   ```

3. **é‡å¯æœåŠ¡**ï¼š
   ```bash
   # é‡å¯N8NæœåŠ¡
   docker-compose restart n8n
   
   # å¦‚æœé—®é¢˜æŒç»­ï¼Œé‡å¯æ‰€æœ‰æœåŠ¡
   docker-compose down
   docker-compose up -d
   ```

### Q17: å¦‚ä½•è°ƒè¯•å·¥ä½œæµæ‰§è¡Œé—®é¢˜ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**ï¼š
   ```bash
   # åœ¨.envæ–‡ä»¶ä¸­é…ç½®
   N8N_LOG_LEVEL=debug
   N8N_LOG_OUTPUT=console,file
   N8N_LOG_FILE_LOCATION=/var/log/n8n.log
   ```

2. **ä½¿ç”¨æµ‹è¯•æ¨¡å¼**ï¼š
   ```javascript
   // åœ¨CodeèŠ‚ç‚¹ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯
   console.log('Debug: Input data:', JSON.stringify($input.all(), null, 2));
   console.log('Debug: Current item:', JSON.stringify($json, null, 2));
   
   // è¿”å›è°ƒè¯•ä¿¡æ¯
   return [{
     json: {
       debug: true,
       inputData: $input.all(),
       processedData: processedResult,
       timestamp: new Date().toISOString()
     }
   }];
   ```

3. **åˆ†æ­¥æµ‹è¯•**ï¼š
   - é€ä¸ªæµ‹è¯•æ¯ä¸ªèŠ‚ç‚¹
   - æ£€æŸ¥æ•°æ®ä¼ é€’æ˜¯å¦æ­£ç¡®
   - éªŒè¯è¡¨è¾¾å¼è®¡ç®—ç»“æœ
   - ç¡®è®¤APIè°ƒç”¨å“åº”

---

## ğŸ’¡ æœ€ä½³å®è·µé—®é¢˜

### Q18: å¦‚ä½•è®¾è®¡å¯ç»´æŠ¤çš„å·¥ä½œæµï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ¨¡å—åŒ–è®¾è®¡**ï¼š
   ```mermaid
   graph TD
       A[ä¸»å·¥ä½œæµ] --> B[æ•°æ®è·å–å­æµç¨‹]
       A --> C[æ•°æ®å¤„ç†å­æµç¨‹]
       A --> D[ç»“æœè¾“å‡ºå­æµç¨‹]
       
       B --> B1[APIè°ƒç”¨]
       B --> B2[æ•°æ®éªŒè¯]
       
       C --> C1[æ•°æ®è½¬æ¢]
       C --> C2[ä¸šåŠ¡é€»è¾‘]
       
       D --> D1[æ ¼å¼åŒ–è¾“å‡º]
       D --> D2[é€šçŸ¥å‘é€]
   ```

2. **æ·»åŠ æ–‡æ¡£å’Œæ³¨é‡Š**ï¼š
   ```javascript
   /**
    * å·¥ä½œæµåç§°: ç”¨æˆ·æ•°æ®åŒæ­¥
    * åŠŸèƒ½æè¿°: ä»CRMç³»ç»ŸåŒæ­¥ç”¨æˆ·æ•°æ®åˆ°æ•°æ®åº“
    * æ‰§è¡Œé¢‘ç‡: æ¯å°æ—¶ä¸€æ¬¡
    * ç»´æŠ¤äººå‘˜: å¼ ä¸‰ (zhangsan@company.com)
    * æœ€åæ›´æ–°: 2024-01-15
    */
   
   // èŠ‚ç‚¹æ³¨é‡Šç¤ºä¾‹
   // 1. è·å–CRMç”¨æˆ·æ•°æ®
   // 2. éªŒè¯æ•°æ®å®Œæ•´æ€§
   // 3. è½¬æ¢æ•°æ®æ ¼å¼
   // 4. æ›´æ–°æœ¬åœ°æ•°æ®åº“
   // 5. å‘é€åŒæ­¥å®Œæˆé€šçŸ¥
   ```

3. **é”™è¯¯å¤„ç†å’Œç›‘æ§**ï¼š
   ```javascript
   // ç»Ÿä¸€é”™è¯¯å¤„ç†å‡½æ•°
   function handleError(error, context) {
     const errorInfo = {
       timestamp: new Date().toISOString(),
       workflow: context.workflow,
       node: context.node,
       error: error.message,
       stack: error.stack
     };
     
     // è®°å½•é”™è¯¯æ—¥å¿—
     console.error('Workflow Error:', errorInfo);
     
     // å‘é€å‘Šè­¦é€šçŸ¥
     sendAlert(errorInfo);
     
     return errorInfo;
   }
   ```

### Q19: å¦‚ä½•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œå¤‡ä»½ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **å·¥ä½œæµå¯¼å‡ºå’Œç‰ˆæœ¬æ§åˆ¶**ï¼š
   ```bash
   # å¯¼å‡ºæ‰€æœ‰å·¥ä½œæµ
   docker-compose exec n8n n8n export:workflow --all --output=/backup/workflows/
   
   # ä½¿ç”¨Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶
   cd /backup/workflows/
   git init
   git add .
   git commit -m "Initial workflow backup"
   ```

2. **è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬**ï¼š
   ```bash
   #!/bin/bash
   # backup_workflows.sh
   
   BACKUP_DIR="/backup/n8n/$(date +%Y%m%d_%H%M%S)"
   mkdir -p "$BACKUP_DIR"
   
   # å¤‡ä»½å·¥ä½œæµ
   docker-compose exec n8n n8n export:workflow --all --output="$BACKUP_DIR/workflows/"
   
   # å¤‡ä»½å‡­æ®
   docker-compose exec n8n n8n export:credentials --all --output="$BACKUP_DIR/credentials/"
   
   # å¤‡ä»½æ•°æ®åº“
   docker-compose exec postgres pg_dump -U n8n n8n > "$BACKUP_DIR/database.sql"
   
   # å‹ç¼©å¤‡ä»½æ–‡ä»¶
   tar -czf "$BACKUP_DIR.tar.gz" -C "$BACKUP_DIR" .
   rm -rf "$BACKUP_DIR"
   
   echo "Backup completed: $BACKUP_DIR.tar.gz"
   ```

3. **æ¢å¤æµç¨‹**ï¼š
   ```bash
   # æ¢å¤å·¥ä½œæµ
   docker-compose exec n8n n8n import:workflow --input=/backup/workflows/
   
   # æ¢å¤å‡­æ®
   docker-compose exec n8n n8n import:credentials --input=/backup/credentials/
   
   # æ¢å¤æ•°æ®åº“
   docker-compose exec postgres psql -U n8n -d n8n < /backup/database.sql
   ```

### Q20: å¦‚ä½•ç›‘æ§å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **è®¾ç½®ç›‘æ§å·¥ä½œæµ**ï¼š
   ```javascript
   // ç›‘æ§å·¥ä½œæµç¤ºä¾‹
   const failedExecutions = await this.helpers.request({
     method: 'GET',
     url: 'http://localhost:5678/rest/executions',
     qs: {
       filter: '{"finished":false}',
       limit: 100
     },
     headers: {
       'Authorization': 'Bearer ' + apiKey
     },
     json: true
   });
   
   if (failedExecutions.data.length > 0) {
     // å‘é€å‘Šè­¦é€šçŸ¥
     await sendAlert({
       type: 'execution_failure',
       count: failedExecutions.data.length,
       executions: failedExecutions.data
     });
   }
   ```

2. **é›†æˆå¤–éƒ¨ç›‘æ§ç³»ç»Ÿ**ï¼š
   ```javascript
   // å‘é€æŒ‡æ ‡åˆ°Prometheus
   const prometheus = require('prom-client');
   
   const executionCounter = new prometheus.Counter({
     name: 'n8n_executions_total',
     help: 'Total number of workflow executions',
     labelNames: ['workflow', 'status']
   });
   
   // è®°å½•æ‰§è¡ŒæŒ‡æ ‡
   executionCounter.inc({
     workflow: 'user-sync',
     status: 'success'
   });
   ```

3. **å¥åº·æ£€æŸ¥ç«¯ç‚¹**ï¼š
   ```javascript
   // åˆ›å»ºå¥åº·æ£€æŸ¥å·¥ä½œæµ
   const healthStatus = {
     timestamp: new Date().toISOString(),
     status: 'healthy',
     services: {
       database: await checkDatabase(),
       redis: await checkRedis(),
       external_apis: await checkExternalAPIs()
     }
   };
   
   return [{ json: healthStatus }];
   ```

---

## ğŸ“ è·å–æ›´å¤šå¸®åŠ©

### å®˜æ–¹èµ„æº
- **å®˜æ–¹æ–‡æ¡£**: https://docs.n8n.io/
- **ç¤¾åŒºè®ºå›**: https://community.n8n.io/
- **GitHub Issues**: https://github.com/n8n-io/n8n/issues

### ä¸­æ–‡ç¤¾åŒº
- **ä¸­æ–‡æ–‡æ¡£**: æœ¬å­¦ä¹ æ–‡ä»¶å¤¹ä¸­çš„å„ç§æŒ‡å—
- **æŠ€æœ¯åšå®¢**: æ˜é‡‘ã€CSDNç­‰å¹³å°
- **QQç¾¤/å¾®ä¿¡ç¾¤**: æœç´¢"N8Nä¸­æ–‡äº¤æµç¾¤"

### ä¸“ä¸šæ”¯æŒ
- **ä¼ä¸šç‰ˆæ”¯æŒ**: https://n8n.io/pricing/
- **å’¨è¯¢æœåŠ¡**: è”ç³»N8Nå®˜æ–¹æˆ–è®¤è¯åˆä½œä¼™ä¼´
- **åŸ¹è®­è¯¾ç¨‹**: å‚åŠ å®˜æ–¹æˆ–ç¬¬ä¸‰æ–¹åŸ¹è®­

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´1æœˆ*
*ç‰ˆæœ¬ï¼šv1.0*

å¦‚æœä½ çš„é—®é¢˜æ²¡æœ‰åœ¨è¿™é‡Œæ‰¾åˆ°ç­”æ¡ˆï¼Œè¯·ï¼š
1. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. åœ¨å®˜æ–¹ç¤¾åŒºæœç´¢ç›¸ä¼¼é—®é¢˜
3. æäº¤è¯¦ç»†çš„é—®é¢˜æè¿°å’Œé”™è¯¯æ—¥å¿—