<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset={#$cfg_soft_lang#}">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<title>{#$langData['siteConfig'][10][0]#}{#$cfg_pointName#} - {#$cfg_webname#}</title>{#* 我的 *#}
<link rel="shortcut icon" href="{#$cfg_basehost#}/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="{#$cfg_staticPath#}css/core/base.css?v={#$cfg_staticVersion#}" media="all" />
<link rel="stylesheet" type="text/css" href="{#$cfg_staticPath#}css/common.css?v={#$cfg_staticVersion#}" media="all" />
<link rel="stylesheet" type="text/css" href="{#$templets_skin#}css/public.css?v={#$cfg_staticVersion#}" media="all" />
<link rel="stylesheet" type="text/css" href="{#$templets_skin#}css/point.css?v={#$cfg_staticVersion#}" media="all" />
<link rel="stylesheet" type="text/css" href="{#$cfg_staticPath#}css/ui/element_ui_index.css" media="all" />
<script type="text/javascript" src="{#$cfg_staticPath#}js/core/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="{#$cfg_staticPath#}js/vue/vue.min.js"></script>
<script type="text/javascript" src="{#$cfg_staticPath#}js/vue/axios.min.js"></script>
<script type="text/javascript" src="{#$cfg_staticPath#}js/ui/element_ui_index.js"></script>
<script type="text/javascript">
	var masterDomain = '{#$cfg_basehost#}', staticPath = '{#$cfg_staticPath#}';

	var criticalPoint = 1240, criticalClass = "w1200";
	$("html").addClass($(window).width() > criticalPoint ? criticalClass : "");

	var hideFileUrl = {#$cfg_hideUrl#};
	var atpage = 1, totalCount = 0, pageSize = 15;
	var leimuarr={#$leimuarr|json_encode#}
	var pointName='{#$cfg_pointName#}'
</script>
<style>
	.myjf{background: #F9F9F9;overflow: hidden;padding: 28px 16px;}
	.myjf .jf-left{font-size: 14px;color: #333;height: 36px;line-height: 36px;}
	.myjf .jf-left strong{font-size: 30px;color: #FF6600;font-family: coregtd;margin-left: 10px;    display: inline-block;
    vertical-align: middle;
    margin-top: -4px;}
	.myjf ul{font-size: 0;}
	.myjf ul li{display: inline-block;border-radius: 3px;font-size: 14px;background: #fff;position: relative;overflow: hidden;}
	.myjf ul li a{display: block;padding: 0 15px;position: relative;z-index: 2;border: 1px solid #FF6600;height: 34px;line-height: 34px;}
	.myjf ul li.jfs{background: #FF6600;margin-right: 10px;}
	.myjf ul li.jfs a{color: #fff;}
	.myjf ul li.jfd a{color: #FF6600;}
	.myjf ul li.jfs:hover:after{content: '';position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-color: rgba(0, 0, 0,.1);background-color: rgba(0, 0, 0,.1); filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#19000000, endcolorstr=#19000000);}
	.myjf ul li.jfd:hover{background: #FF6600 }
	.myjf ul li.jfd:hover a{color: #fff}
	/*.myjf ul li.jfd:hover:after{content: '';position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-color: rgba(0, 0, 0,.2);background-color: rgba(0, 0, 0,.2); filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#33000000, endcolorstr=#33000000);}*/

	h2.jfTitle{font-size: 18px;color: #333;    border-bottom: 2px solid #ddd;font-weight: bold;padding: 24px 16px 12px}
	@font-face {
	  font-family: "coregtd";
	  src: url("/static/fonts/coregtd6.woff2"),
	       url("/static/fonts/coregtd6.woff"),
	       url("/static/fonts/coregtd6.ttf"),
	       url("/static/fonts/coregtd6.eot"),
	       url("/static/fonts/coregtd6.otf");
	}
</style>
</head>
<body>
{#$pageTitle = $langData['siteConfig'][10][0]|cat:$cfg_pointName#}{#* 我的 *#}
{#include file="top.html"#}

<div class="wrap">
	<div class="container fn-clear">

		{#include file="sidebar.html"#}

		<div class="main" id="main">
			<ul class="main-tab">
				{#* 我的积分 *#}
				<li class="curr"><a href="javascript:;">{#$langData['siteConfig'][10][0]#}{#$cfg_pointName#}</a></li>
				{#* 兑换 *#}
				<li><a href="{#getUrlPath service='member' type='user' template='convert'#}">{#$langData['siteConfig'][15][15]#}{#$cfg_pointName#}</a></li>
				<li><a href="{#getUrlPath service='member' type='user' template='pointDeposit'#}">{#$cfg_pointName#}充值</a></li>
				{#* 转赠 *#}
				<li><a href="{#getUrlPath service='member' type='user' template='transfer'#}">{#$cfg_pointName#}{#$langData['siteConfig'][19][730]#}</a></li>
				
			</ul>
					<div id="app" class="contain" v-cloak>
						<div class="topBar">
							<div class="moneyInfo">
								<div class="amount">
									<span>我的{#$cfg_pointName#}：</span>
									<span>{#$userinfo.point#}</span>
								</div>
							</div>
							<div class="moneyButton">
								<a href="{#getUrlPath service='member' type='user' template='pointDeposit'#}">
									<div class="deposit">充值</div>
								</a>
								<a href="{#getUrlPath service='member' type='user' template='transfer'#}">
									<div class="withdraw">转赠</div>
								</a>
							</div>
						</div>
						<div class="content fn-clear">
							<div class="filterTab fn-clear">
								<div class="left">
									<span>{#$cfg_pointName#}明细</span>
								</div>
								<div class="right">
									<div class="sj dateContentBox"
									:class={filterRotate:isDateBoxCurr,filterCurrColor:isDateBoxCurr} @click='showDateDiv' ref="refDateBox">
									<el-date-picker type="month" v-model='currDate' :default-value='currDate'
										:editable='dateFlag' :clearable='dateFlag' placeholder="选择月份"
										:picker-options="pickerOptions" ref="datePickerRef" @change='showDateBox'>
									</el-date-picker>
									</div>
									<div class="sj typeContentBox" @click='showTypeBox' ref="refTypeBox"
										:class={filterRotate:isTypeBoxCurr}>
										<span :class={filterCurrColor:isTypeBoxCurr}><em>{{currType}}</em></span>
										<transition name="fade">
										<ul class="typeBox" v-show='isTypeBox' ref='popupTypeBox'>
										    <li @click='filterShouru' :class="{filterCurrColor:orderTypeColor == '收入'}">收入</li>
										    <li @click='filterZhichu' :class="{filterCurrColor:orderTypeColor == '支出'}">支出</li>
											 <li v-for="(item,index) in orderTypeData" @click='filterOrderType(item,index)' :class="{filterCurrColor:index == orderTypeColor}">{{item}}</li>
										</ul>
										</transition>
									</div>
									<div class="amountContentBox">
										<div class="sj"
											:class={filterRotate:isAmountBoxCurr,filterCurrColor:isAmountBoxCurr}
											@click='showAmountBox' ref="refAmountBox">
											<span>
												<em v-show='!this.isDateFilter'>{{pointName}}</em>
												<em v-show='this.isDateFilter'>{#echoCurrency type='symbol'#}{{bottomAmount}}~{#echoCurrency type='symbol'#}{{topAmount}}</em>
											</span>
										</div>
										<transition name="fade">
										<div class="amountBox" v-show='isAmountBox' ref='popupAmountBox'>
											<div class="tAmount">
												<input type="text" :placeholder="'最低'+pointName" v-model='bottomAmount'
													@focus='bottomAmountFocus'>
											</div>
											<div><span>-</span></div>
											<div class="bAmount">
												<input type="text" :placeholder="'最高'+pointName" v-model='topAmount'
													@focus='topAmountFocus'>
											</div>
											<div class="submitAmount" @click='submitAmount'>
												<span>{{this.isDateFilter?'取消筛选':'确定'}}</span>
											</div>
										</div>
									</transition>
									</div>
								</div>
							</div>
							<div class="filterList fn-clear" v-loading="loading">
								<div class="billTitle">
									<div class="billDetaiTitle"><span>{#$cfg_pointName#}详情/来源</span></div>
									<div class="billDateTitle"><span>时间</span></div>
									<div class="billAmountTitle"><span>{#$cfg_pointName#}变化</span></div>
								</div>
								<div class="billData" v-for="yearMonth in yearMonths" >
									<div class="billTab fn-clear">
										<div class="billDetaiTab">
											<span>{{ formatYearMonth(yearMonth.month) }}</span>
										</div>
										<div class="billDateTab"></div>
										<div class="billAmountTab">
											<span>
												<em>收入{#$cfg_pointName#}{{ yearMonth.totalIncome.toFixed(2) }}</em>
												<em>&nbsp;|&nbsp;</em>
												<em>支出{#$cfg_pointName#}{{ yearMonth.totalExpense.toFixed(2) }}</em>
											</span>
										</div>
									</div>
									<div class="billList fn-clear" v-for="item in yearMonth.items">
										<div class="billDetailList">
											<span :title="item.info">【{{formatOrderType(item)}}】{{item.info}}</span>
										</div>
										<div class="billDateList">
											<span>{{formatDate(item)}}</span>
										</div>
										<div class="billAmountList">
											<span
												:class="{'incomeColor':item.type==1}">{{formatType(item)}}{{item.amount}}</span>
										</div>
									</div>
								</div>
								<div class="noData" v-show='isNoData'>暂无数据~</div>
							</div>
							<div class="paging" v-show='isPageNoData'>
								<el-pagination
									prev-text="上一页"
									next-text="下一页"
  									layout="prev, pager, next"
  									:page-count="pageInfo.totalPage"
									pager-count="3"
									:current-page="pageInfo.page"
									@current-change="pagingChange"
									>
								</el-pagination>
							</div>
						</div>
					</div>
		</div>
	</div>
</div>

{#include file="footer.html"#}
<script type="text/javascript" src="{#$templets_skin#}js/point.js?v={#$cfg_staticVersion#}"></script>
</body>
</html>
