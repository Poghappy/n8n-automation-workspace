import{r as e,o as a,c as o,a as t,F as l,b as n,n as s,w as r,d as i,e as d,t as c,f as p,i as f,g as u,h as m,j as b,k as g,s as h,l as y,m as _,p as k,q as I,u as w,v as j,x,y as C,z as D,A as v,I as P,$,B as F,C as M,D as S,M as B,E as L,G as O,H as N,J as V,K as A,L as q,N as z,O as E,P as R,Q as U,R as W,S as H,T as Q,U as Y,V as J}from"./index-DQWPpaQC.js";import{_ as X,r as K}from"./uni-app.es.D_vqcwrC.js";const G=X({components:{node:X({name:"node",props:{nodeArr:{type:Array,default:[]}}},[["render",function(g,h,y,_,k,I){const w=f,j=u,x=e("node",!0),C=m,D=b;return a(!0),o(l,null,t(y.nodeArr,((e,t)=>(a(),o(l,{key:t},["image"==e.name?(a(),n(w,{key:0,style:s(e.style),src:e.src,mode:"widthFix",onClick:r((a=>e.fn()||""),["stop"])},null,8,["style","src","onClick"])):"video"==e.name?(a(),n(j,{key:1,style:s(e.style),src:e.src,poster:e.poster,"object-fit":"cover",onClick:r((a=>e.fn()||""),["stop"])},null,8,["style","src","poster","onClick"])):"text"==e.name?(a(),n(C,{key:2,style:s(e.style),onClick:r((a=>e.fn()||""),["stop"])},{default:i((()=>[d(c(e.text)+" ",1),e.children?(a(),n(x,{key:0,nodeArr:e.children},null,8,["nodeArr"])):p("",!0)])),_:2},1032,["style","onClick"])):"view"==e.name?(a(),n(D,{key:3,style:s(e.style),onClick:r((a=>e.fn()||""),["stop"])},{default:i((()=>[d(c(e.text)+" ",1),e.children?(a(),n(x,{key:0,nodeArr:e.children},null,8,["nodeArr"])):p("",!0)])),_:2},1032,["style","onClick"])):p("",!0)],64)))),128)}]])},props:{nodeSet:{type:Array,default:[]}}},[["render",function(o,t,l,s,r,d){const c=e("node"),p=b;return a(),n(p,{class:"selfNode"},{default:i((()=>[g(c,{nodeArr:l.nodeSet},null,8,["nodeArr"])])),_:1})}]]);let Z=v();const ee=X({emits:["wxShareClose"],props:{title:{type:String,default:"标题"},module:{type:String},searchBar:{type:Array,default:[]},searchState:{type:Boolean,default:!1},index:{type:Boolean,default:!1},appShare:{type:Object,default:{description:"",litpic:"",title:""}},hideHead:{type:Boolean,default:!1},shareInfo:{type:Object,default:{}},needPoster:{type:Boolean,default:!1},noRightBtn:{type:Boolean,default:!1},titleChange:{type:Boolean,default:!0}},data:()=>({appConfig:"",masterDomain:Z.globalData.masterDomain,imgVersion:Z.globalData.imgVersion,siteConfig:Z.globalData.siteConfig,imgError:Z.globalData.imgError,webdyMini:Z.globalData.webdyMini,searchSrc:"",searchText:"",searchStyle:"",moduleData:[],msgData:{},popb:!1,popconb:!1,shareb:!1,shareconb:!1,qrb:!1,qrconb:!1,wxshareb:!1,shareItem:[{id:1,title:"生成海报",src:`${Z.globalData.imgPath}/article/poster.png?v=${Z.globalData.imgVersion}`,fn:"",need:!1},{id:2,title:"微信好友",src:`${Z.globalData.imgPath}/article/wechat.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0},{id:3,title:"朋友圈",src:`${Z.globalData.imgPath}/article/friends.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0},{id:4,title:"微博",src:`${Z.globalData.imgPath}/article/weibo.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0},{id:5,title:"QQ好友",src:`${Z.globalData.imgPath}/article/QQ.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0},{id:6,title:"QQ空间",src:`${Z.globalData.imgPath}/article/QQspace.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0}],shareOperate:[{id:7,title:"复制链接",src:`${Z.globalData.imgPath}/article/link.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0},{id:8,title:"当面扫码",src:`${Z.globalData.imgPath}/article/2Dcode.png?v=${Z.globalData.imgVersion}`,fn:"",need:!0}],shareLink:"",appBoolean:!1,copySuccessb:!1,safarib:!1}),mounted(){let e=this;Z.watchG("siteConfig",(function(a){e.siteConfig=a})),Z.watchG("appConfig",(function(a){e.appConfig=a})),this.getModuleNav(),this.massageFn();let a=this.shareInfo.url?this.shareInfo.url:window.location.href,o=Z.globalData.userid?"fromShare="+Z.globalData.userid:"";this.shareLink=`${a}${a.includes("?")?"&":"?"}${o}`,this.appBoolean=window.appBoolean,document.querySelector('link[rel="canonical"]').setAttribute("href",e.shareLink);let t=navigator.userAgent.toLowerCase(),l=-1!==t.indexOf("safari")&&-1===t.indexOf("browser")&&-1===t.indexOf("android");for(let r=0;r<this.shareItem.length;r++){switch(this.shareItem[r].id){case 1:this.shareItem[r].need=this.needPoster,this.shareItem[r].fn=()=>{this.$emit("poster",1),this.shareFn(0)},"info"==this.module&&location.href.includes("/detail")&&(this.shareItem[r].need=!0);break;case 2:this.shareItem[r].fn=()=>{this.appBoolean?n("weixin"):Z.globalData.webWeixin?(this.wxshareb=!0,e.shareFn(0),e.$emit("wxShareClose",!0)):s()};break;case 3:this.shareItem[r].fn=()=>{this.appBoolean?n("weixin"):Z.globalData.webWeixin?(this.wxshareb=!0,e.shareFn(0)):s()};break;case 4:this.shareItem[r].fn=()=>{this.appBoolean?n("weibo"):this.linkTo(`http://service.weibo.com/share/share.php?url=${encodeURIComponent(this.shareLink)}`)};break;case 5:this.shareItem[r].fn=()=>{this.appBoolean?n("qq"):Z.globalData.webWeixin?(this.wxshareb=!0,e.shareFn(0)):s()};break;case 6:this.shareItem[r].fn=()=>{this.appBoolean?n("qzone"):this.linkTo(`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${encodeURIComponent(this.shareLink)}`)}}}for(let r=0;r<this.shareOperate.length;r++){let a=this.shareOperate[r].id;switch(this.shareOperate[r],a){case 7:this.shareOperate[r].fn=()=>{h({data:this.shareLink,success:a=>{y(),e.copySuccessb=!0}}),e.shareconb=!1};break;case 8:this.shareOperate[r].fn=()=>{this.qrCodeFn(1)}}}function n(a){window.setupWebViewJavascriptBridge((function(o){o.callHandler("appShare",{platform:a,url:e.shareLink,title:e.appShare.title,imageUrl:e.appShare.litpic,summary:e.appShare.description},(function(e){JSON.parse(e)}))}))}function s(){navigator.share?(e.shareFn(0),l?e.safarib=!0:navigator.share({url:document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:e.shareLink,title:e.appShare.title||e.title,text:e.appShare.title||e.title})):h({data:`${e.appShare.title||e.title} ${e.shareLink}`,success:a=>{y(),e.copySuccessb=!0}}),e.shareconb=!1}},methods:{backFn(){if(this.siteConfig==this.module)return!1;if(this.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("goBack",{},(function(e){}))})),!1;{let e=_();e&&e.length>1?k({delta:1}):this.index?location.href=this.masterDomain:history.back()}},linkTo(e){e&&(e.indexOf("http")>-1?location.href=e:I({url:e}))},getModuleNav(){this.$ajax.post({url:"include/ajax.php?",data:{service:"siteConfig",action:"siteModule",type:1}}).then((e=>{100==e.data.state&&(this.moduleData=e.data.info)}))},popFn(e){e?(this.popb=!0,setTimeout((e=>{this.popconb=!0}),0),this.$emit("popState",!0)):(document.body.style.overflow="auto",this.popconb=!1,setTimeout((e=>{this.popb=!1}),220),this.shareb||this.$emit("popState",!1))},shareFn(e){1==e?(this.shareb=!0,this.popFn(0),setTimeout((e=>{this.shareconb=!0}),0),document.body.style.overflow="hidden"):(this.shareconb=!1,this.copySuccessb=!1,setTimeout((e=>{this.shareb=!1}),200),document.body.style.overflow="auto",this.$emit("popState",!1))},qrCodeFn(e){0==e?(this.qrconb=!1,setTimeout((e=>{this.qrb=!1}),220)):(this.qrb=!0,setTimeout((e=>{this.qrconb=!0}),0))},massageFn(){this.$ajax.post({url:Z.encodeUrl("include/ajax.php?"),data:{service:"member",action:"message",type:"tongji",im:1}}).then((e=>{100==e.data.state&&(this.msgData=e.data.info.pageInfo)}))}},watch:{appShare:{deep:!0,handler(e,a){let o=this;o.titleChange||document.querySelector('meta[property="og:title"]').setAttribute("content",e.title||o.title),document.querySelector('meta[property="og:description"]').setAttribute("content",e.description||""),e.litpic&&document.querySelector('meta[property="og:image"]').setAttribute("content",e.litpic),Z.globalData.webWeixin&&w({title:e.title||o.title})}},safarib(e,a){document.body.style.overflow=e?"hidden":"auto"}}},[["render",function(e,u,h,y,_,k){const I=f,w=b,v=K(j("selfDom"),G),P=m;return a(),n(w,{class:"component"},{default:i((()=>[g(I,{src:h.appShare.litpic||_.imgError,style:{display:"none"}},null,8,["src"]),h.hideHead?p("",!0):(a(),n(w,{key:0,class:"header"},{default:i((()=>[g(w,{class:"h-back",onClick:k.backFn,style:s(_.siteConfig.defaultindex==h.module&&h.index?"opacity:0":"")},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/header_back.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick","style"]),g(w,{class:"h-text"},{default:i((()=>[d(c(h.title),1)])),_:1}),h.noRightBtn?(a(),n(w,{key:1,class:"h-order"})):(a(),n(w,{key:0,class:"h-order",onClick:u[0]||(u[0]=e=>k.popFn(1))},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/header_la.png?v=${_.imgVersion}`,mode:"aspectFit",class:"ho-more"},null,8,["src"]),_.msgData.total>0?(a(),n(w,{key:0,class:"ho-message"},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/dot.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0)])),_:1})),h.searchBar.length>0?(a(),n(v,{key:2,class:x(["selfSearch",{show:h.searchState}]),nodeSet:h.searchBar},null,8,["class","nodeSet"])):p("",!0)])),_:1})),C(g(w,{class:"order",onClick:u[9]||(u[9]=e=>k.popFn(0))},{default:i((()=>[g(w,{class:"o-content",style:s(`transform:translateY(${_.popconb?"0%":"-100%"});padding:${_.appBoolean?"108rpx":"48rpx"} 0rpx 40rpx`),onClick:u[8]||(u[8]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"oc-title"},{default:i((()=>[g(P,null,{default:i((()=>[d("全局导航")])),_:1}),g(I,{src:`${_.masterDomain}/static/images/close_2.png?v=${_.imgVersion}`,mode:"aspectFit",onClick:u[1]||(u[1]=e=>k.popFn(0))},null,8,["src"])])),_:1}),g(w,{class:"oc-all"},{default:i((()=>[g(w,{class:"item",onClick:u[2]||(u[2]=e=>k.linkTo(_.masterDomain))},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/top_fast1.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(P,null,{default:i((()=>[d("首页")])),_:1})])),_:1}),g(w,{class:"item",onClick:u[3]||(u[3]=e=>k.linkTo(`${_.appConfig.cfg_user_index}/message.html`))},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/top_fast2.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(P,null,{default:i((()=>[d("消息")])),_:1}),_.msgData.total>0?(a(),n(w,{key:0,class:"mgs"},{default:i((()=>[d(c(_.msgData.total),1)])),_:1})):p("",!0)])),_:1}),g(w,{class:"item",onClick:u[4]||(u[4]=e=>k.linkTo(`${_.appConfig.cfg_user_index}`))},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/top_fast3.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(P,null,{default:i((()=>[d("会员中心")])),_:1})])),_:1}),g(w,{class:"item",onClick:u[5]||(u[5]=e=>k.shareFn(1))},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/top_fast5.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"]),g(P,null,{default:i((()=>[d("分享")])),_:1})])),_:1})])),_:1}),g(w,{class:"oc-nav",onTouchmove:u[6]||(u[6]=r((()=>{}),["stop"])),onTouch:u[7]||(u[7]=r((()=>{}),["stop"]))},{default:i((()=>[(a(!0),o(l,null,t(_.moduleData,((e,o)=>(a(),n(w,{class:"item",key:o,onClick:a=>k.linkTo(e.url)},{default:i((()=>[g(I,{src:e.icon,mode:"aspectFit"},null,8,["src"]),g(P,null,{default:i((()=>[d(c(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),g(w,{class:"oc-bg"}),g(w,{class:"oc-bar"})])),_:1},8,["style"])])),_:1},512),[[D,_.popb]]),_.shareb?(a(),n(w,{key:1,class:"sharePop",onClick:u[13]||(u[13]=e=>k.shareFn(0))},{default:i((()=>[g(w,{class:"s-content",style:s(`transform:translateY(${_.shareconb?"0%":"100%"})`),onClick:u[10]||(u[10]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"sc-title"},{default:i((()=>[d("分享")])),_:1}),_.webdyMini?p("",!0):(a(),n(w,{key:0,class:"sc-way"},{default:i((()=>[(a(!0),o(l,null,t(_.shareItem,((e,t)=>(a(),o(l,{key:t},[e.need?(a(),n(w,{key:0,class:"item",onClick:e.fn},{default:i((()=>[g(w,null,{default:i((()=>[g(I,{src:e.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),g(P,null,{default:i((()=>[d(c(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):p("",!0)],64)))),128))])),_:1})),g(w,{class:"sc-operate"},{default:i((()=>[(a(!0),o(l,null,t(_.shareOperate,((e,o)=>(a(),n(w,{key:o,class:"item",onClick:e.fn},{default:i((()=>[g(w,null,{default:i((()=>[g(I,{src:e.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),g(P,null,{default:i((()=>[d(c(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"]),_.copySuccessb?(a(),n(w,{key:0,class:"c-warn",onClick:u[12]||(u[12]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"title"},{default:i((()=>[d("已复制链接")])),_:1}),g(w,{class:"tip"},{default:i((()=>[d("快去粘贴给好友吧")])),_:1}),g(w,{class:"btn",onClick:u[11]||(u[11]=e=>k.shareFn(0))},{default:i((()=>[d("我知道了")])),_:1})])),_:1})):p("",!0)])),_:1})):p("",!0),_.qrb?(a(),n(w,{key:2,class:"qrCode",onClick:u[16]||(u[16]=e=>k.qrCodeFn(0))},{default:i((()=>[g(w,{class:"q-content",style:s(`transform:translateY(${_.qrconb?"0%":"100%"})`),onClick:u[15]||(u[15]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"qc-img"},{default:i((()=>[g(I,{src:`${_.masterDomain}/include/qrcode.php?data=${_.shareLink}`,mode:"aspectFit"},null,8,["src"]),g(P,null,{default:i((()=>[d("让朋友扫一扫访问当前网页")])),_:1})])),_:1}),g(w,{class:"qc-btn",onClick:u[14]||(u[14]=r((e=>k.qrCodeFn(0)),["stop"]))},{default:i((()=>[d("取消")])),_:1})])),_:1},8,["style"])])),_:1})):p("",!0),_.wxshareb?(a(),n(w,{key:3,class:"wxShare",onClick:u[17]||(u[17]=a=>{_.wxshareb=!1,e.$emit("wxShareClose",!1)})},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/HN_Public_sharezhi.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0),_.safarib?(a(),n(w,{key:4,class:"safari",onClick:u[18]||(u[18]=e=>_.safarib=!1)},{default:i((()=>[g(I,{src:`${_.masterDomain}/static/images/safariShare.png?v=${_.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-4374b8b8"]]),ae=v();const oe=X({data:()=>({title:"",globalData:ae.globalData,platForm:ae.globalData.platForm,imgpath:ae.globalData.imgPath+"/member/order/",masterDomain:ae.globalData.masterDomain,imgVersion:ae.globalData.imgVersion,appBoolean:!("web"!=ae.globalData.platForm||!ae.globalData.appBoolean),isAndroid:!1,isFocus:!1}),props:{showPop:{type:Boolean,default:!1},mod:{default:"",type:String},showBack:{default:!1,type:Boolean},modName:{default:"",type:String},placeholder:{default:"",type:String},inpFocus:{default:!1,type:Boolean},appFullscreen:{default:!1,type:Boolean}},emits:["showpop","searchkey","inpfocus"],mounted(){"web"==this.platForm&&this.appBoolean&&window.Android&&(this.isAndroid=!0)},methods:{backFn(){if(this.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("goBack",{},(function(e){}))})),!1;{let e=_();e&&e.length>1?k({delta:1}):window.history.go(-1)}},showSlidePop(){this.$emit("showpop",!0)},toSearch(){this.$emit("searchkey",this.title)},inputFocus(){this.isFocus=!0,this.$emit("inpfocus")},inputBlur(){setTimeout((()=>{this.isFocus=!1}),300)},clearSearch(){const e=this;e.title="",e.isFocus?setTimeout((()=>{this.$nextTick((function(){e.$emit("inpfocus")}))}),400):e.$emit("searchkey",e.title)}}},[["render",function(e,o,t,l,s,u){const m=f,h=b,y=P;return a(),n(h,{class:x("header flex_header "+(s.appBoolean?"huoniao_iOS ":"")+("web"==s.platForm&&(!s.appBoolean||s.isAndroid&&t.appFullscreen)?"":"bgWhite "))},{default:i((()=>[t.showBack?(a(),n(h,{key:0,class:"h-back",onClick:u.backFn},{default:i((()=>[g(m,{src:`${s.masterDomain}/static/images/header_back.png?v=${s.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])):p("",!0),t.showBack?p("",!0):(a(),n(h,{key:1,class:"modBox"},{default:i((()=>["mp-toutiao"!=s.platForm&&("web"!=s.platForm||!s.appBoolean||s.isAndroid&&t.appFullscreen)?p("",!0):(a(),n(h,{key:0,class:"modShow",onClick:u.showSlidePop},{default:i((()=>[g(h,{class:"modName"},{default:i((()=>[d(c(t.modName||"加载中..."),1)])),_:1}),g(h,{class:"icon"},{default:i((()=>[g(m,{src:s.imgpath+"arr_grey.png?"+s.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1},8,["onClick"]))])),_:1})),g(h,{class:"searchBox"},{default:i((()=>[g(h,{class:"icon"},{default:i((()=>[g(m,{src:s.imgpath+"search_icon.png?v="+s.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1}),g(h,{class:"inp"},{default:i((()=>[g(y,{type:"text",ref:"inp",focus:t.inpFocus,onFocus:u.inputFocus,onBlur:u.inputBlur,placeholder:t.placeholder,modelValue:s.title,"onUpdate:modelValue":o[0]||(o[0]=e=>s.title=e),"placeholder-style":"color:#B6B7BF;",onConfirm:u.toSearch},null,8,["focus","onFocus","onBlur","placeholder","modelValue","onConfirm"])])),_:1}),s.title?(a(),n(h,{key:0,class:"icon delIcon",onTouchend:o[1]||(o[1]=r((e=>u.clearSearch()),["prevent"]))},{default:i((()=>[g(m,{src:`${s.globalData.imgStaticPath}/miniprograme/job/clear_icon.png?v=${s.imgVersion}`,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})):p("",!0)])),_:1}),g(h,{class:"modBox"},{default:i((()=>["web"==s.platForm&&(!s.appBoolean||s.isAndroid&&t.appFullscreen)?(a(),n(h,{key:0,class:"modShow",onClick:u.showSlidePop},{default:i((()=>[g(h,{class:"modName"},{default:i((()=>[d(c(t.modName||"加载中..."),1)])),_:1}),g(h,{class:"icon"},{default:i((()=>[g(m,{src:s.imgpath+"arr_grey.png?"+s.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1},8,["onClick"])):p("",!0)])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-4df24b94"]]),te=v();const le=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0},shopConfig:{type:Object,default:{}}},data:()=>({defaultPro:te.globalData.masterDomain+"/static/images/good_default.png",globalData:te.globalData,platForm:te.globalData.platForm,imgpath:te.globalData.imgPath+"/member/order/",masterDomain:te.globalData.masterDomain,imgVersion:te.globalData.imgVersion,djsObj:{hh:"00",mm:"00",ss:"00"},interval:null}),computed:{stateTxt:()=>function(e){const a=this;let o="";if(!e)return"";switch(e.orderstate){case"0":o="待付款";break;case"1":if(o="待发货",1==e.protype)if(0!=e.shopquan){o=a.checkExpire(e.expireddate||"")?"待使用":"已过期"}else o="已使用";0!=e.pinid&&0==e.pinstate&&(o="拼团中",a.checkExpire(e.huodongarr.enddate,1)||(o="拼团已失效"));break;case"3":o=e.common?"交易完成":"待评价";break;case"4":o="退款中";break;case"6":o=1==e.retState?"退款中":"待收货";break;case"7":case"10":o="交易关闭";break;case"11":o="待发货"}return o},specationText:()=>function(e){return e.split(" ").map((e=>{let a="",o=e.split("：");return o.length>1&&(a=o[1]),a})).join(";")}},mounted(){this.djsText()},unmounted(){clearInterval(this.interval)},methods:{checkExpire(e,a=0){var o="";if(a)o=1e3*e;else{var t=new RegExp("\\.","g");e=e.replace(t,"-"),o=new Date(e).getTime()}return o>(new Date).getTime()},linkTo(e){const a=this;if("detail"==e){let e=a.globalData.appConfig.cfg_user_index+"/orderdetail-shop-"+a.objInfo.id;te.linkTo(e,!1,!1)}else if("store"==e){let e=a.objInfo.store.domain;"web"!=te.globalData.platForm&&(e="/pages/packages/shop/store-detail/store-detail?id="+a.objInfo.store.id),te.linkTo(e,!1,!1)}else if("pay_other"==e){let e=a.globalData.appConfig.cfg_user_index+"/daipay.html?module=shop&ordernum="+a.objInfo.ordernum;te.linkTo(e,!1,!1)}else if("pay"==e)$("payorder",{objInfo:this.objInfo,ind:this.ind});else if("cancel"==e)$("cancelorder",{objInfo:this.objInfo,ind:this.ind});else if("buy"==e)a.rebuy();else if("comment"==e){let e=a.globalData.appConfig.cfg_user_index+"/write-comment-shop-"+a.objInfo.id;te.linkTo(e,!1,!1)}else if("refund"==e){let e=a.globalData.appConfig.cfg_user_index+"/orderdetail-shop-"+a.objInfo.id;te.linkTo(e,!1,!1)}else if("receive"==e)$("receive",{objInfo:this.objInfo,ind:this.ind});else if("wuliu"==e){let e=`${te.globalData.appConfig.cfg_user_index}/logistics.html?oid=${a.objInfo.id}`;te.linkTo(e,!1,!1)}else"share"==e&&"web"==te.globalData.platForm&&$("share",{objInfo:this.objInfo,ind:this.ind})},djsText(){const e=this;if(e.interval&&clearInterval(e.interval),"1"==e.objInfo.orderstate&&0!=e.objInfo.pinid&&0==e.objInfo.pinstate){let a=e.objInfo.huodongarr.enddate,o=parseInt((new Date).getTime()/1e3);if(a<=o)return clearInterval(e.interval),!1;e.interval=setInterval((()=>{let o=parseInt((new Date).getTime()/1e3),t=a-o;if(t<0)return clearInterval(e.interval),!1;let l=parseInt(t/60/60);l=l>9?l:"0"+l;let n=parseInt(t/60%60);n=n>9?n:"0"+n;let s=parseInt(t%60);s=s>9?s:"0"+s,e.djsObj={hh:l,mm:n,ss:s}}),1e3)}},async rebuy(){const e=this;let a=F("shopCartList");if(a&&"string"==typeof a)a=JSON.parse(a);else{let t="service=shop&action=getCartList";var o=te.encodeUrl(t);let l=(await e.$ajax.post({url:"include/ajax.php?",data:o})).data;100==l.state&&(a=l.info)}a=Array.isArray(a)?a:[];let t={};for(let s=0;s<a.length;s++){let e=a[s];t[e.id]=[{id:e.id,specation:e.specation||"",count:1*e.count}]}let l=e.objInfo.product;for(let s=0;s<l.length;s++){let e=l[s];if(t[e.proid])if(e.speid){let a=t[e.proid],o=a.findIndex((a=>a.specation==e.speid));o<=-1?a.push({id:e.proid,specation:e.speid||"",count:1*e.count}):t[e.proid][o].count=t[e.proid][o].count+e.count}else t[e.proid][0].count=t[e.proid][0].count+e.count;else t[e.proid]=[{id:e.proid,specation:e.speid||"",count:1*e.count}]}let n=[];for(let s in t)for(let e=0;e<t[s].length;e++)n.push(`${t[s][e].id},${t[s][e].specation},${t[s][e].count}`);e.addCart(n.join("|"))},async addCart(e){let a=`service=member&action=operateCart&module=shop&type=update&content=${e}`;var o=te.encodeUrl(a);100==(await this.$ajax.post({url:"include/ajax.php?",data:o})).data.state&&M({title:"成功加入购物车",duration:2e3,icon:"none",success:function(){if("web"==te.platForm){let e=`${masterDomain}/shop/cart`;te.linkTo(e,!1,!1)}else{I({url:"/pages/packages/shop/cart/cart"})}}})}}},[["render",function(e,s,u,h,y,_){const k=f,I=b,w=m,j=S;return u.objInfo&&u.objInfo.id?(a(),n(I,{key:0,class:"shopitem item",onClick:s[11]||(s[11]=e=>_.linkTo("detail"))},{default:i((()=>[u.objInfo.store?(a(),n(I,{key:0,class:"store flexb",onClick:s[0]||(s[0]=r((e=>_.linkTo("store")),["stop"]))},{default:i((()=>[g(I,{class:"store_name flexb"},{default:i((()=>[g(k,{class:"icon",src:y.imgpath+"store_icon.png?v="+y.imgVersion,mode:"aspectFit"},null,8,["src"]),g(I,{class:"txt"},{default:i((()=>[d(c(u.objInfo.store.title),1)])),_:1})])),_:1}),"拼团中"!=_.stateTxt(u.objInfo)?(a(),n(I,{key:0,class:"order_state"},{default:i((()=>[d(c(_.stateTxt(u.objInfo)),1)])),_:1})):(a(),n(I,{key:1,class:"order_djs"},{default:i((()=>[g(I,{class:"txt"},{default:i((()=>[d("仅剩：")])),_:1}),g(I,{class:"djs"},{default:i((()=>[g(I,{class:"hh tbox"},{default:i((()=>[d(c(y.djsObj.hh||"00"),1)])),_:1}),g(w,null,{default:i((()=>[d(":")])),_:1}),g(I,{class:"mm tbox"},{default:i((()=>[d(c(y.djsObj.mm||"00"),1)])),_:1}),g(w,null,{default:i((()=>[d(":")])),_:1}),g(I,{class:"ss tbox"},{default:i((()=>[d(c(y.djsObj.ss||"00"),1)])),_:1})])),_:1})])),_:1}))])),_:1})):p("",!0),g(I,{class:"order-content"},{default:i((()=>[g(I,{class:"prosbox"},{default:i((()=>[1==u.objInfo.product.length||["0","1","11"].includes(u.objInfo.orderstate)?(a(!0),o(l,{key:0},t(u.objInfo.product,((e,s)=>(a(),n(I,{class:"pros_detail flexb",key:s},{default:i((()=>[g(k,{class:"pro-img loadingImg",src:e.litpic||y.defaultPro,mode:"aspectFill",onError:a=>e.litpic=y.defaultPro},null,8,["src","onError"]),g(I,{class:"pro-info"},{default:i((()=>[g(I,{class:"pro_detail flexb"},{default:i((()=>[g(I,{class:"flex_l"},{default:i((()=>[g(I,{class:"pro-tit"},{default:i((()=>[d(c(e.title),1)])),_:2},1024),0!=u.objInfo.pinid&&0==u.objInfo.pinstate&&u.objInfo.huodongarr&&u.objInfo.huodongarr.chanume?(a(),n(I,{key:0,class:"pinListbox"},{default:i((()=>[g(I,{class:"plist"},{default:i((()=>[(a(!0),o(l,null,t(u.objInfo.huodongarr.userarr,((e,o)=>(a(),n(I,{class:"photo",key:"photo_"+o},{default:i((()=>[g(k,{src:e||y.globalData.userError,onError:e=>u.objInfo.huodongarr.userarr[o]=y.globalData.userError},null,8,["src","onError"])])),_:2},1024)))),128))])),_:2},1024),g(I,{class:"ptxt"},{default:i((()=>[d("差"),g(w,null,{default:i((()=>[d(c(u.objInfo.huodongarr.chanume),1)])),_:1}),d("人")])),_:1})])),_:2},1024)):e.specation?(a(),n(I,{key:1,class:"pro-speci"},{default:i((()=>[d(c(_.specationText(e.specation)),1)])),_:2},1024)):1==u.objInfo.protype&&10!=u.objInfo.orderstate&&u.objInfo.expireddate?(a(),n(I,{key:2,class:"pro-speci"},{default:i((()=>[d("有效期至："+c(u.objInfo.expireddate),1)])),_:1})):p("",!0)])),_:2},1024),g(I,{class:"pro-price"},{default:i((()=>[g(I,{class:"price"},{default:i((()=>[d(c(y.globalData.appConfig&&y.globalData.appConfig.currency&&y.globalData.appConfig.currency.symbol||"￥")+c(e.price),1)])),_:2},1024),g(I,{class:"num"},{default:i((()=>[d("x"+c(e.count),1)])),_:2},1024),"7"==u.objInfo.orderstate?(a(),n(I,{key:0,class:"tkcg"},{default:i((()=>[d("退款成功")])),_:1})):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):(a(),n(I,{key:1,class:"proimgList flexb"},{default:i((()=>[(a(!0),o(l,null,t(u.objInfo.product,((e,o)=>(a(),n(k,{class:"pro-img",key:o,src:e.litpic||y.defaultPro,mode:"aspectFill",onError:a=>e.litpic=y.defaultPro},null,8,["src","onError"])))),128))])),_:1}))])),_:1}),g(I,{class:"order-count flexb"},{default:i((()=>[g(I,{class:"flex_l"},{default:i((()=>[d("共"),g(w,{class:"txt"},{default:i((()=>[d(c(u.objInfo.countall),1)])),_:1}),d("件商品")])),_:1}),g(I,{class:"flex_r flexb"},{default:i((()=>[g(w,{class:"txt"},{default:i((()=>[d(c(0!=u.objInfo.pinid?"拼团价":"实付"),1)])),_:1}),g(I,{class:"tprice"},{default:i((()=>[g(w,{class:"symbol"},{default:i((()=>[d(c(y.globalData.appConfig&&y.globalData.appConfig.currency&&y.globalData.appConfig.currency.symbol||"￥"),1)])),_:1}),g(w,{class:"b"},{default:i((()=>[d(c(u.objInfo.totalPayPrice.split(".")[0]),1)])),_:1}),u.objInfo.totalPayPrice.includes(".")?(a(),n(w,{key:0,class:"smNumber"},{default:i((()=>[d("."+c(u.objInfo.totalPayPrice.split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1}),g(I,{class:"btns_group flexb"},{default:i((()=>[0==u.objInfo.orderstate?(a(),o(l,{key:0},[g(I,{class:"btn_cancel btn",onClick:s[1]||(s[1]=r((e=>_.linkTo("cancel")),["stop"]))},{default:i((()=>[d("取消订单")])),_:1}),3!=u.objInfo.huodongtype&&4!=u.objInfo.huodongtype&&u.shopConfig&&1==u.shopConfig.peerpayState?(a(),n(I,{key:0,class:"btn_cancel btn",onClick:s[2]||(s[2]=r((e=>_.linkTo("pay_other")),["stop"]))},{default:i((()=>[d("找人付")])),_:1})):p("",!0),g(I,{class:"btn_pay bgBtn btn",onClick:s[3]||(s[3]=r((e=>_.linkTo("pay")),["stop"]))},{default:i((()=>[d("去付款")])),_:1})],64)):3==u.objInfo.orderstate?(a(),o(l,{key:1},["1"==u.objInfo.common?(a(),n(I,{key:0,class:"btn_buy btn",onClick:s[4]||(s[4]=r((e=>_.linkTo("buy")),["stop"]))},{default:i((()=>[d("再次购买")])),_:1})):(a(),n(I,{key:1,class:"btn_common borderBtn btn",onClick:s[5]||(s[5]=r((e=>_.linkTo("comment")),["stop"]))},{default:i((()=>[d("评价")])),_:1}))],64)):4==u.objInfo.orderstate?(a(),n(I,{key:2,class:"btn_tkStep",onClick:s[6]||(s[6]=r((e=>_.linkTo("detail")),["stop"]))},{default:i((()=>[d("退款进度")])),_:1})):6==u.objInfo.orderstate&&0==u.objInfo.retState?(a(),o(l,{key:3},[g(I,{class:"btn_wuliu btn",onClick:s[7]||(s[7]=r((e=>_.linkTo("wuliu")),["stop"]))},{default:i((()=>[d("查看物流")])),_:1}),g(I,{class:"btn_shou borderBtn btn",onClick:s[8]||(s[8]=r((e=>_.linkTo("receive")),["stop"]))},{default:i((()=>[d("确认收货")])),_:1})],64)):1==u.objInfo.orderstate?(a(),o(l,{key:4},[1==u.objInfo.protype&&0!=u.objInfo.shopquan?(a(),o(l,{key:0},[_.checkExpire(u.objInfo.expireddate||"")?(a(),n(I,{key:0,class:"btn_showID borderBtn btn"},{default:i((()=>[d("查看券码")])),_:1})):(a(),n(I,{key:1,class:"btn_tuikuan btn",onClick:s[9]||(s[9]=r((e=>_.linkTo("refund")),["stop"]))},{default:i((()=>[d("申请退款")])),_:1}))],64)):p("",!0),0!=u.objInfo.pinid&&0==u.objInfo.pinstate&&_.checkExpire(u.objInfo.huodongarr.enddate,1)?(a(),n(j,{key:1,"open-type":"share",onClick:s[10]||(s[10]=r((e=>_.linkTo("share")),["stop"])),"data-orderInd":u.ind,style:{"margin-right":"0"},class:"btn_invite bgBtn btn"},{default:i((()=>[d("邀请好友拼团")])),_:1},8,["data-orderInd"])):p("",!0)],64)):11==u.objInfo.orderstate||6==u.objInfo.orderstate&&1==u.objInfo.reState&&0==u.objInfo.protype&&0!=u.objInfo.shopquan?(a(),n(I,{key:5,class:"btn_toDetail btn"},{default:i((()=>[d("查看详情")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0)}],["__scopeId","data-v-2406b9a4"]]),ne=v();const se=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0},tuanConfig:{type:Object,default:{}}},data:()=>({defaultPro:ne.globalData.masterDomain+"/static/images/good_default.png",globalData:ne.globalData,platForm:ne.globalData.platForm,imgpath:ne.globalData.imgPath+"/member/order/",masterDomain:ne.globalData.masterDomain,imgVersion:ne.globalData.imgVersion}),computed:{stateTxt:()=>function(e){let a="";switch(e.orderstate){case"0":a="未付款";break;case"1":a="待发货",a=2!=e.tuantype?"0"!=e.pinid&&"0"==e.pinstate?"拼团中":"待使用":"0"!=e.pinid&&"0"==e.pinstate?"拼团中":"待发货";break;case"2":a=e.paydate>0?"已过期":"未付款，已过期";break;case"3":a="交易成功";break;case"4":a="退款中";break;case"6":a=1==e.retState?"退款中":"待收货";break;case"7":a="交易关闭"}return a},timeTrans:()=>function(e){let a=e.product.enddate;const o=ne.dateFormatter(a),t=o.year,l=o.month,n=o.day,s=o.hour,r=o.minute;ne.dateFormatter(parseInt((new Date).valueOf()/1e3)).year;let i="";return i=t+"."+l+"."+n+" "+s+":"+r,i},specationText:()=>function(e){return e.split(" ").map((e=>{let a="",o=e.split("：");return o.length>1&&(a=o[1]),a})).join(";")}},mounted(){},methods:{checkExpire(e){var a=new RegExp("\\.","g");e=e.replace(a,"-");var o=(new Date).getTime();return new Date(e).getTime()>o},toLink(e){const a=this;if("detail"==e||"comment"==e){let o=`${ne.globalData.appConfig.cfg_user_index}/orderdetail-tuan-${a.objInfo.id}.html${"comment"==e?"?rate=1":""}`;ne.linkTo(o,!1,!1)}else if("pay_other"==e){let e=a.globalData.appConfig.cfg_user_index+"/daipay.html?module=tuan&ordernum="+a.objInfo.ordernum;ne.linkTo(e,!1,!1)}else if("pindetail"==e){let e=`${ne.globalData.masterDomain}/tuan/dindan-${a.objInfo.pinid}.html`;ne.linkTo(e,!1,!1)}else"quan"==e?$("showwuliu",{objInfo:this.objInfo,ind:this.ind}):"pay"==e?$("payorder",{objInfo:this.objInfo,ind:this.ind}):"cancel"==e?$("cancelorder",{objInfo:this.objInfo,ind:this.ind}):"share"==e&&"web"==ne.globalData.platForm&&$("share",{objInfo:this.objInfo,ind:this.ind})}}},[["render",function(e,t,s,u,h,y){const _=f,k=b,I=m,w=S;return s.objInfo&&s.objInfo.id?(a(),n(k,{key:0,class:"shopitem item"},{default:i((()=>[g(k,{class:"store flexb"},{default:i((()=>[g(k,{class:"store_name flexb"},{default:i((()=>[g(_,{class:"icon",src:h.imgpath+"store_icon.png?v="+h.imgVersion,mode:"aspectFit"},null,8,["src"]),g(k,{class:"txt"},{default:i((()=>[d(c(s.objInfo.company),1)])),_:1})])),_:1}),g(k,{class:"order_state"},{default:i((()=>[d(c(y.stateTxt(s.objInfo)),1)])),_:1})])),_:1}),g(k,{class:"order-content",onClick:t[7]||(t[7]=e=>y.toLink("detail"))},{default:i((()=>[g(k,{class:"prosbox"},{default:i((()=>[s.objInfo.product?(a(),n(k,{key:0,class:"pros_detail flexb"},{default:i((()=>[g(_,{class:"pro-img loadingImg",src:s.objInfo.product.litpic||h.defaultPro,mode:"aspectFill",onError:t[0]||(t[0]=e=>s.objInfo.product.litpic=h.defaultPro)},null,8,["src"]),g(k,{class:"pro-info"},{default:i((()=>[g(k,{class:"pro_detail flexb"},{default:i((()=>[g(k,{class:"flex_l"},{default:i((()=>[g(k,{class:"pro-tit"},{default:i((()=>[d(c(s.objInfo.product.title),1)])),_:1}),s.objInfo.product.specation?(a(),n(k,{key:0,class:"pro-speci"},{default:i((()=>[d(c(y.specationText(s.objInfo.product.specation)),1)])),_:1})):"0"==s.objInfo.tuantype&&"1"==s.objInfo.orderstate?(a(),n(k,{key:1,class:"pro-speci"},{default:i((()=>[d("有效期至："+c(y.timeTrans(s.objInfo)),1)])),_:1})):p("",!0)])),_:1}),g(k,{class:"pro-price"},{default:i((()=>[g(k,{class:"price"},{default:i((()=>[d(c(h.globalData.appConfig&&h.globalData.appConfig.currency&&h.globalData.appConfig.currency.symbol||"￥")+c(s.objInfo.orderprice),1)])),_:1}),g(k,{class:"num"},{default:i((()=>[d("x1")])),_:1}),"7"==s.objInfo.orderstate?(a(),n(k,{key:0,class:"tkcg"},{default:i((()=>[d("退款成功")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1}),g(k,{class:"order-count flexb"},{default:i((()=>[g(k,{class:"flex_l"},{default:i((()=>[d("共"),g(I,{class:"txt"},{default:i((()=>[d("1")])),_:1}),d("件商品")])),_:1}),g(k,{class:"flex_r flexb"},{default:i((()=>[g(I,{class:"txt"},{default:i((()=>[d(c(0!=s.objInfo.pinid?"拼团价":"实付"),1)])),_:1}),g(k,{class:"tprice"},{default:i((()=>[g(I,{class:"symbol"},{default:i((()=>[d(c(h.globalData.appConfig&&h.globalData.appConfig.currency&&h.globalData.appConfig.currency.symbol||"￥"),1)])),_:1}),g(I,{class:"b"},{default:i((()=>[d(c(s.objInfo.orderprice.split(".")[0]),1)])),_:1}),s.objInfo.orderprice.includes(".")?(a(),n(I,{key:0,class:"smNumber"},{default:i((()=>[d("."+c(s.objInfo.orderprice.split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1}),g(k,{class:"btns_group flexb"},{default:i((()=>[0==s.objInfo.orderstate?(a(),o(l,{key:0},[g(k,{class:"btn_cancel btn",onClick:t[1]||(t[1]=r((e=>y.toLink("cancel")),["stop"]))},{default:i((()=>[d("取消订单")])),_:1}),s.tuanConfig&&1==s.tuanConfig.peerpayState?(a(),n(k,{key:0,class:"btn_cancel btn",onClick:t[2]||(t[2]=r((e=>y.toLink("pay_other")),["stop"]))},{default:i((()=>[d("取消订单")])),_:1})):p("",!0),g(k,{class:"btn_pay bgBtn btn",onClick:t[3]||(t[3]=r((e=>y.toLink("pay")),["stop"]))},{default:i((()=>[d("去付款")])),_:1})],64)):2==s.objInfo.orderstate?(a(),o(l,{key:1},["0"==s.objInfo.product.is_tuikuan&&s.objInfo.paydate?(a(),n(k,{key:0,class:"btn_tuikuan btn"},{default:i((()=>[d("申请退款")])),_:1})):(a(),n(k,{key:1,class:"btn_tuikuan btn"},{default:i((()=>[d("删除订单")])),_:1}))],64)):3==s.objInfo.orderstate?(a(),o(l,{key:2},["1"==s.objInfo.common?(a(),n(k,{key:0,class:"btn_buy btn"},{default:i((()=>[d("再次购买")])),_:1})):(a(),n(k,{key:1,class:"btn_common borderBtn btn",onClick:t[4]||(t[4]=r((e=>y.toLink("comment")),["stop"]))},{default:i((()=>[d("评价")])),_:1}))],64)):4==s.objInfo.orderstate?(a(),n(k,{key:3,class:"btn_toDetail"},{default:i((()=>[d("查看详情")])),_:1})):6==s.objInfo.orderstate&&0==s.objInfo.retState?(a(),o(l,{key:4},[g(k,{class:"btn_wuliu btn"},{default:i((()=>[d("查看物流")])),_:1}),g(k,{class:"btn_shou borderBtn btn"},{default:i((()=>[d("确认收货")])),_:1})],64)):1==s.objInfo.orderstate?(a(),o(l,{key:5},[2!=s.objInfo.tuantype?(a(),o(l,{key:0},[0!=s.objInfo.pinid&&0==s.objInfo.pinstate?(a(),n(w,{key:0,"open-type":"share",onClick:t[5]||(t[5]=r((e=>y.toLink("share")),["stop"])),"data-orderInd":s.ind,style:{"margin-right":"0"},class:"btn_invite bgBtn btn"},{default:i((()=>[d("邀好友拼团")])),_:1},8,["data-orderInd"])):(a(),o(l,{key:1},[s.objInfo.cardnumUrl?(a(),n(k,{key:0,class:"btn_showID borderBtn btn",onClick:t[6]||(t[6]=r((e=>y.toLink("quan")),["stop"]))},{default:i((()=>[d("查看券码")])),_:1})):p("",!0)],64))],64)):(a(),o(l,{key:1},["0"==s.objInfo.product.is_tuikuan?(a(),n(k,{key:0,class:"btn_tuikuan btn"},{default:i((()=>[d("申请退款")])),_:1})):(a(),n(k,{key:1,class:"btn_toDetail btn"},{default:i((()=>[d("查看详情")])),_:1}))],64))],64)):11==s.objInfo.orderstate||6==s.objInfo.orderstate&&1==s.objInfo.reState&&0==s.objInfo.tuantype&&0!=s.objInfo.shopquan?(a(),n(k,{key:6,class:"btn_toDetail btn"},{default:i((()=>[d("查看详情")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0)}],["__scopeId","data-v-30d94a6d"]]),re=v();var ie;const de=X({emits:["cancelorder","payorder"],props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},computed:{getState:()=>function(e){let a="";switch(e.state){case"0":a="待付款";break;case"1":a=e.iscomment?"已完成":"订单已送达";break;case"2":a="待确认";break;case"3":a=0==e.selftime?"待配送":"等待取餐";break;case"4":a="商家已接单";break;case"5":a="配送中";break;case"6":a="已取消";break;case"7":a="订单关闭"}return a},timeTrans:()=>function(e,a=""){const o=re.dateFormatter(e),t=o.year,l=o.month,n=o.day,s=o.hour,r=o.minute;o.second;let i=re.dateFormatter(parseInt((new Date).valueOf()/1e3));const d=i.year;i.month;let c="";return c=t==d?l+"/"+n+" "+s+":"+r:t+"/"+l+"/"+n+" "+s+":"+r,1==a&&(new Date(e).toDateString()===(new Date).toDateString()?c="今天 "+s+":"+r:new Date(e)<new Date&&(c=l+"/"+n+" "+s+":"+r)),c}},data:()=>({platForm:re.globalData.platForm,globalData:re.globalData,defaultPro:re.globalData.masterDomain+"/static/images/good_default.png",covers:[],showMap:!1,lnglat:""}),mounted(){this.checkMapShow()},methods:{checkMapShow(){const e=this;let a=e.objInfo,o=!1,t="",l="";if(a.state&&["3","4","5"].includes(a.state))switch(a.state){case"3":o=Boolean(a.shop_coordX&&a.shop_coordY)||Boolean(a.peisongpath_lng&&a.peisongpath_lat),Boolean(a.peisongpath_lng&&a.peisongpath_lat)?(t={lng:a.peisongpath_lng,lat:a.peisongpath_lat},l="等待骑手到店"):Boolean(a.shop_coordX&&a.shop_coordY)&&(t={lng:a.shop_coordY,lat:a.shop_coordX},l="商家正在配货");break;case"4":o=Boolean(a.shop_coordX&&a.shop_coordY),Boolean(a.shop_coordX&&a.shop_coordY)&&(t={lng:a.shop_coordY,lat:a.shop_coordX},l="商家已接单");break;case"5":o=Boolean(a.peisongpath_lng&&a.peisongpath_lat),Boolean(a.peisongpath_lng&&a.peisongpath_lat)&&(t={lng:a.peisongpath_lng,lat:a.peisongpath_lat}),l="骑手正在配送"}e.showMap=o,e.lnglat=t,t&&"web"==e.platForm&&e.$nextTick((()=>{e.drawMap()})),e.covers=[{id:(new Date).valueOf(),latitude:t.lat,longitude:t.lng,iconPath:"",width:0,height:0,callout:{content:l,color:"#000",fontSize:14,borderRadius:4,bgColor:"#fff",padding:8,display:"ALWAYS"}}]},drawMap(){const e=this;if(!e.lnglat)return!1;let a=[e.lnglat.lng,e.lnglat.lat];"web"==e.platForm&&("baidu"==site_map?e.draw_baidu(a):"amap"==site_map?e.draw_aMap(a):"tmap"==site_map?e.draw_tmap(a):"google"==site_map&&e.draw_google(a))},draw_baidu(e){const a=this,o=e[0],t=e[1];ie=new BMap.Map(`map_${a.objInfo.id}`);var l=new BMap.Label('<div class="map_label" style="width: 0; height: 0; background-color: none; position: relative;"><div class="map_labCon" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%,-40px); font-size:14px; border-radius:4px; background:#fff; padding:10px 14px; filter: drop-shadow(0px 4px 15px rgba(110,110,110,0.24));">'+a.covers[0].callout.content+'<div class="map_arr" style="width:8px; height:8px; background:#fff; border-radius:2px; position:absolute; left:0; right:0; margin:auto; bottom:-4px; transform:rotate(45deg);"></div></div>',{position:a.lnglat,offset:new BMap.Size(0,0)});ie.addOverlay(l);const n=new BMap.Point(o,t);ie.centerAndZoom(n,15)},draw_aMap(e){let a=+(e[0]?e[0]:120.738572),o=+(e[1]?e[1]:31.331029);ie=new AMap.Map(`map_${this.objInfo.id}`,{viewMode:"2D",zoom:16,center:[a,o]}),new AMap.Marker({position:[a,o],content:'<div class="map_label" style="width: 0; height: 0; background-color: none; position: relative;"><div class="map_labCon" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%,-40px); font-size:14px; border-radius:4px; background:#fff; white-space:nowrap; padding:10px 14px; filter:drop-shadow(0px 4px 15px rgba(110,110,110,0.24));">'+this.covers[0].callout.content+'<div class="map_arr" style="width:8px; height:8px; background:#fff; border-radius:2px; position:absolute; left:0; right:0; margin:auto; bottom:-4px; transform:rotate(45deg);"></div></div>',offset:new AMap.Pixel(0,0),map:ie})},draw_tmap(e){ie=new T.Map(`map_${this.objInfo.id}`);let a=+(e[0]?e[0]:120.738572),o=+(e[1]?e[1]:31.331029),t=new T.LngLat(a,o);var l=new T.Label({text:'<div class="map_label" style="width: 0; height: 0; background-color: none; position: relative;"><div class="map_labCon" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%,-40px); font-size:14px; border-radius:4px; background:#fff; white-space:nowrap; padding:4px 14px; filter:drop-shadow(0px 4px 15px rgba(110,110,110,0.24));">'+this.covers[0].callout.content+'<div class="map_arr" style="width:8px; height:8px; background:#fff; border-radius:2px; position:absolute; left:0; right:0; margin:auto; bottom:-4px; transform:rotate(45deg);"></div></div>',position:t,offset:new T.Point(-18,9)});ie.addOverLay(l),ie.centerAndZoom(t,14)},async draw_google(e){let a=+(e[0]?e[0]:120.738572),o=+(e[1]?e[1]:31.331029);const{Map:t}=await google.maps.importLibrary("maps");ie=new t(document.getElementById(`map_${this.objInfo.id}`),{center:{lat:o,lng:a},zoom:8})},toLink(e){let a="";"order"==e?a=`${re.globalData.appConfig.cfg_user_index}/orderdetail-waimai-${this.objInfo.id}.html`:"store"==e?a=`${re.globalData.masterDomain}/waimai/shop?id=${this.objInfo.sid}`:"comment"==e&&(a=`${re.globalData.appConfig.cfg_user_index}/write-comment-waimai-${this.objInfo.id}.html`),re.linkTo(a,!1,!1)},cancleOrder(){$("cancelorder",{objInfo:this.objInfo,ind:this.ind})},payOrder(){$("payorder",{objInfo:this.objInfo,ind:this.ind})}}},[["render",function(e,s,r,u,h,y){const _=f,k=b,I=m,w=B;return a(),n(k,{class:"waimaiitem item"},{default:i((()=>[g(k,{class:"store",onClick:s[1]||(s[1]=e=>y.toLink("store"))},{default:i((()=>[g(k,{class:"storeInfo"},{default:i((()=>[g(k,{class:"store_logo"},{default:i((()=>[g(_,{src:r.objInfo.shop_logo||h.globalData.imgStaticPath+"/shop.png",onError:s[0]||(s[0]=e=>{r.objInfo.shop_logo=h.globalData.imgStaticPath+"/shop.png"}),mode:"aspectFill"},null,8,["src"])])),_:1}),g(k,{class:"store_title"},{default:i((()=>[g(k,{class:"h3"},{default:i((()=>[d(c(r.objInfo.shopname),1)])),_:1}),g(k,{class:"p order_time"},{default:i((()=>[d(c(y.timeTrans(r.objInfo.pubdate)),1)])),_:1})])),_:1})])),_:1}),g(k,{class:"orderState"},{default:i((()=>[g(k,{class:"stateText"},{default:i((()=>[d(c(y.getState(r.objInfo)),1)])),_:1}),"6"==r.objInfo.state?(a(),n(k,{key:0,class:"cancel_info"},{default:i((()=>[d(c(r.objInfo.failed.includes("半小时内未支付，系统自动取消")?"订单超时未支付":r.objInfo.failed),1)])),_:1})):p("",!0)])),_:1})])),_:1}),g(k,{class:"order-content",onClick:s[2]||(s[2]=e=>y.toLink("order"))},{default:i((()=>[3==r.objInfo.state||4==r.objInfo.state||5==r.objInfo.state?(a(),o(l,{key:0},[3==r.objInfo.state||4==r.objInfo.state||5==r.objInfo.state?(a(),n(k,{key:0,class:"flexbox showText"},{default:i((()=>[g(k,{class:"food"},{default:i((()=>[g(k,{class:"food_text"},{default:i((()=>[d(c(r.objInfo.food),1)])),_:1}),d(c(r.objInfo.foodList.length>1?`共${r.objInfo.foodCount}件商品`:""),1)])),_:1}),g(k,{class:"price"},{default:i((()=>[g(k,null,{default:i((()=>[g(I,{class:"symbol"},{default:i((()=>[d(c(h.globalData.appConfig&&h.globalData.appConfig.currency&&h.globalData.appConfig.currency.symbol||"￥"),1)])),_:1}),g(I,{class:"b"},{default:i((()=>[d(c(r.objInfo.amount.split(".")[0]),1)])),_:1}),parseFloat(r.objInfo.amount).toString().includes(".")?(a(),n(I,{key:0,class:"smNumber"},{default:i((()=>[d("."+c(parseFloat(r.objInfo.amount).toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0),h.showMap?(a(),n(k,{key:1,class:"mapShow",ref:"mapCon",id:`map_${r.objInfo.id}`},{default:i((()=>["web"!=h.platForm?(a(),n(w,{key:0,style:{width:"100%",height:"100%"},id:`${r.objInfo.id}`,scale:14,customCallout:!0,latitude:h.lnglat.lat,longitude:h.lnglat.lng,markers:h.covers},null,8,["id","latitude","longitude","markers"])):p("",!0)])),_:1},8,["id"])):p("",!0)],64)):(a(),n(k,{key:1,class:"flexbox showImg"},{default:i((()=>[g(k,{class:"food"},{default:i((()=>[(a(!0),o(l,null,t(r.objInfo.foodList.slice(0,3),(e=>(a(),n(k,{class:"fImg loadingImg",key:e},{default:i((()=>[g(_,{src:e.pic||h.defaultPro,mode:"aspectFill",onError:a=>e.pic=h.defaultPro},null,8,["src","onError"])])),_:2},1024)))),128)),1==r.objInfo.foodList.length&&r.objInfo.foodList[0].title?(a(),n(k,{key:0,class:"fTitle"},{default:i((()=>[d(c(r.objInfo.foodList[0].title.replace(/\//g,"，").replace(/#/g,"，")),1)])),_:1})):p("",!0)])),_:1}),g(k,{class:"price"},{default:i((()=>[g(k,null,{default:i((()=>[g(I,{class:"symbol"},{default:i((()=>[d(c(h.globalData.appConfig&&h.globalData.appConfig.currency&&h.globalData.appConfig.currency.symbol||"￥"),1)])),_:1}),g(I,{class:"b"},{default:i((()=>[d(c(r.objInfo.amount.split(".")[0]),1)])),_:1}),parseFloat(r.objInfo.amount).toString().includes(".")?(a(),n(I,{key:0,class:"smNumber"},{default:i((()=>[d("."+c(parseFloat(r.objInfo.amount).toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1}),g(k,{class:"fcount"},{default:i((()=>[d("共"+c(r.objInfo.foodCount)+"件",1)])),_:1})])),_:1})])),_:1}))])),_:1}),r.objInfo.reservesongdate||!["3","4"].includes(r.objInfo.state)?(a(),n(k,{key:0,class:"order_bottom"},{default:i((()=>[g(k,{class:"preOrder_info"},{default:i((()=>[r.objInfo.reservesongdate?(a(),n(k,{key:0,class:"info_text"},{default:i((()=>[d("预定订单,预订时间"+c(y.timeTrans(r.objInfo.reservesongdate,1)),1)])),_:1})):p("",!0)])),_:1}),["3","4"].includes(r.objInfo.state)?p("",!0):(a(),n(k,{key:0,class:"order_btns"},{default:i((()=>["0"==r.objInfo.state?(a(),o(l,{key:0},[g(k,{class:"btn",onClick:y.cancleOrder},{default:i((()=>[d("取消订单")])),_:1},8,["onClick"]),g(k,{class:"btn bgBtn",onClick:y.payOrder},{default:i((()=>[d("去付款")])),_:1},8,["onClick"])],64)):"1"==r.objInfo.state||"6"==r.objInfo.state||"5"==r.objInfo.state||"7"==r.objInfo.state?(a(),o(l,{key:1},["6"==r.objInfo.state?(a(),n(k,{key:0,class:"btn",onClick:s[3]||(s[3]=e=>y.toLink("store"))},{default:i((()=>[d("重新下单")])),_:1})):(a(),n(k,{key:1,class:"btn",onClick:s[4]||(s[4]=e=>y.toLink("order"))},{default:i((()=>[d("查看详情")])),_:1})),"1"==r.objInfo.state&&1!=r.objInfo.iscomment?(a(),n(k,{key:2,class:"btn borderBtn",onClick:s[5]||(s[5]=e=>y.toLink("comment"))},{default:i((()=>[d("评价")])),_:1})):p("",!0)],64)):"2"==r.objInfo.state?(a(),n(k,{key:2,class:"btn",onClick:y.cancleOrder},{default:i((()=>[d("取消订单")])),_:1},8,["onClick"])):p("",!0)])),_:1}))])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-76f90bee"]]),ce=v();const pe=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},data:()=>({platForm:ce.globalData.platForm,globalData:ce.globalData,stateText:"",mapConfig:{},lnglat:""}),computed:{getState:()=>function(e){let a="";switch(e.state){case"0":a="待付款";break;case"1":a=e.iscomment?"已完成":"订单已送达";break;case"2":a="待确认";break;case"3":a="等待接单";break;case"4":a="已接单";break;case"5":a="配送中";break;case"6":a="已取消";break;case"7":a="交易失败"}return a},timeTrans:()=>function(e){const a=ce.dateFormatter(e),o=a.year,t=a.month,l=a.day,n=a.hour,s=a.minute;a.second;let r=ce.dateFormatter(parseInt((new Date).valueOf()/1e3));const i=r.year;r.month;let d="";return d=o==i?t+"/"+l+" "+n+":"+s:o+"/"+t+"/"+l+" "+n+":"+s,d}},mounted(){this.initData()},methods:{initData(){const e=this;let a=e.objInfo.state,o=e.objInfo.type,t=e.objInfo.obuyfrom,l=e.objInfo.gettime,n={},s=[],r=[],i="",d="";switch(a){case"0":d="待付款";break;case"1":d=e.objInfo.iscomment?"已完成":"订单已送达";break;case"2":d="待确认";break;case"3":d="等待接单",e.mapConfig={from_lng:e.objInfo.buylng,from_lat:e.objInfo.buylat,from_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/"+(1==e.objInfo.type?"buyIcon":"quIcon")+".png",to_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/shouIcon.png",to_lng:e.objInfo.lng,to_lat:e.objInfo.lat,cover:[{id:(new Date).valueOf(),latitude:e.objInfo.buylat,longitude:e.objInfo.buylng,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/"+(1==e.objInfo.type?"buyIcon":"quIcon")+".png",width:26,height:37},{id:(new Date).valueOf()+1,latitude:e.objInfo.lat,longitude:e.objInfo.lng,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/shouIcon.png",width:26,height:37,callout:{content:`预计${e.objInfo.gettime}送达`,color:"#000",fontSize:14,borderRadius:4,bgColor:"#fff",padding:8,display:"ALWAYS"}}]};break;case"4":d="已接单",i=1==o?1==t?"骑手正在附近为您购买商品":"骑手正赶往商店采购":"骑手正赶往取货地址",(e.objInfo.buylng||e.objInfo.buylat)&&(r.push({latitude:e.objInfo.buylat,longitude:e.objInfo.buylng}),s.push({id:(new Date).valueOf()+1,latitude:e.objInfo.buylat,longitude:e.objInfo.buylng,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/"+(1==e.objInfo.type?"buyIcon":"quIcon")+".png",width:26,height:37})),(e.objInfo.lng||e.objInfo.lat)&&(r.push({latitude:e.objInfo.lat,longitude:e.objInfo.lng}),s.push({id:(new Date).valueOf()+3,latitude:e.objInfo.lat,longitude:e.objInfo.lng,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/shouIcon.png",width:26,height:37}));let a=i?{content:i,color:"#000",fontSize:14,borderRadius:4,bgColor:"#fff",padding:8,display:"ALWAYS"}:{};(e.objInfo.pslng||e.objInfo.pslat)&&(r.push({latitude:e.objInfo.pslat,longitude:e.objInfo.pslng}),s.push({id:(new Date).valueOf()+2,longitude:e.objInfo.pslng,latitude:e.objInfo.pslat,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/qsIcon.png",width:50,height:50,callout:a})),n={points:r,color:"#307CFC",width:4},e.mapConfig={from_lng:e.objInfo.buylng,from_lat:e.objInfo.buylat,from_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/"+(1==e.objInfo.type?"buyIcon":"quIcon")+".png",to_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/shouIcon.png",qs_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/qsIcon.png",to_lng:e.objInfo.lng,to_lat:e.objInfo.lat,cover:s,polyline:[n]};break;case"5":if(d="配送中",i=1==o?"商品已购买，预计"+l+"送达":"骑手正在配送，预计"+l+"送达",(e.objInfo.buylng||e.objInfo.buylat)&&(r.push({latitude:Number(e.objInfo.buylat),longitude:Number(e.objInfo.buylng)}),s.push({id:(new Date).valueOf()+1,latitude:e.objInfo.buylat,longitude:e.objInfo.buylng,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/"+(1==e.objInfo.type?"buyIcon":"quIcon")+".png",width:26,height:37})),(e.objInfo.lng||e.objInfo.lat)&&(r.push({latitude:e.objInfo.lat,longitude:Number(e.objInfo.lng)}),s.push({id:(new Date).valueOf()+3,latitude:e.objInfo.lat,longitude:e.objInfo.lng,iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/shouIcon.png",width:26,height:37})),e.objInfo.pslng||e.objInfo.pslat){r.push({latitude:e.objInfo.pslat,longitude:e.objInfo.pslng});let a=i?{content:i,color:"#000",fontSize:14,borderRadius:4,bgColor:"#fff",padding:8,display:"ALWAYS"}:{};s.push({id:(new Date).valueOf()+2,latitude:Number(e.objInfo.pslat),longitude:Number(e.objInfo.pslat),iconPath:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/qsIcon.png",width:50,height:50,callout:a})}n={points:r,color:"#307CFC",width:4},e.mapConfig={from_lng:e.objInfo.buylng,from_lat:e.objInfo.buylat,from_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/"+(1==e.objInfo.type?"buyIcon":"quIcon")+".png",to_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/shouIcon.png",qs_icon:ce.globalData.masterDomain+"/templates/member/touch/images/paotui/qsIcon.png",to_lng:e.objInfo.lng,to_lat:e.objInfo.lat,cover:s,polyline:[n]};break;case"6":d="已取消";break;case"7":d="交易失败"}if(e.stateText=d,"web"==e.platForm&&["4","5"].includes(e.objInfo.state)||3==e.objInfo.state&&0==e.objInfo.form&&(e.mapConfig.from_lng||e.mapConfig.from_lat||e.mapConfig.to_lng||e.mapConfig.to_lat)){let a={lng:e.mapConfig.from_lng,lat:e.mapConfig.from_lat};var c={lng:e.objInfo.pslng,lat:e.objInfo.pslat},p={lng:e.mapConfig.to_lng,lat:e.mapConfig.to_lat},f=e.objInfo.id,u=e.objInfo.type,m=e.objInfo.buyform,b=e.objInfo.totime,g=e.objInfo.state;e.$nextTick((()=>{e.mapShow(a,c,p,f,u,g,m,b)}))}},cancleOrder(){$("cancelorder",{objInfo:this.objInfo,ind:this.ind})},payOrder(){$("payorder",{objInfo:this.objInfo,ind:this.ind})},toLink(e){const a=this;let o="";"order"==e?(o=`${ce.globalData.appConfig.cfg_user_index}/orderdetail-paotui-${this.objInfo.id}.html`,ce.linkTo(o,!1,!1)):"rebuy"==e?(o=1==a.objInfo.type?`${ce.globalData.masterDomain}/waimai/paotui-buy.html?rebuy=${a.objInfo.id}`:`${ce.globalData.masterDomain}/waimai/paotui-song.html?rebuy=${a.objInfo.id}`,ce.linkTo(o,!1,!1)):"comment"==e?(o=`${ce.globalData.appConfig.cfg_user_index}/write-comment-paotui-${a.objInfo.id}.html`,ce.linkTo(o,!1,!1)):"contact"==e&&(ce.globalData.appBoolean&&"web"==ce.globalData.platForm?window.location.href="tel:"+a.objInfo.psphone:L({phoneNumber:a.objInfo.psphone}))},mapShow(e,a,o,t,l,n,s,r){const i=this;var d,c,p="";if(d=r,p=4==n?1==l?1==s?"骑手正在附近为您购买商品":"骑手正赶往商店采购":"骑手正赶往取货地址":1==l?"商品已购买，预计"+d+"送达":"骑手正在配送，预计"+d+"送达","baidu"==site_map){c=new BMap.Map("map"+t);var f,u,m={color:"#fff",borderWidth:"0",padding:"0",zIndex:"2",backgroundColor:"transparent",textAlign:"center",fontFamily:'"Hiragino Sans GB", "Microsoft Yahei UI", "Microsoft Yahei", "微软雅黑", "Segoe UI", Tahoma, "宋体b8bf53", SimSun, sans-serif'},b="",g=new BMap.Point(o.lng,o.lat);3==n?b="预计"+d+"送达":u=new BMap.Point(a.lng,a.lat);var h=b?'<p style="position: absolute;height:27px;box-shadow:0px 0px 6px #ccc;border-radius:13px;line-height: 27px;padding: 0 16px;top: -37px;left: 50%;transform: translateX(-50%);font-size: 12px;font-weight: bold;color: #000;background: #fff;display: inline-block;white-space: nowrap;z-index: 8">'+b+'<span style="position:absolute;left:50%;overflow:hidden;pointer-events:none;-webkit-transform:rotate(45deg);-mz-transform:rotate(45deg);transform:rotate(45deg);width: 9px;height: 9px;margin-left: -4px;background:#fff;box-shadow:none;bottom: -4px;"></span></p>':"",y=new BMap.Label('<div class="bubble person" style="width: 26px; height: 37px; background: url('+i.mapConfig.to_icon+') no-repeat center/cover; position: relative;">'+h+"</div>",{position:g,offset:new BMap.Size(-15,-33)});y.setStyle(m),c.addOverlay(y);var _=new BMap.Point(o.lng,o.lat);c.centerAndZoom(_,14);var k=new BMap.RidingRoute(c,{renderOptions:{map:c,autoViewport:!0},onPolylinesSet:function(e){for(var a=0;a<e.length;a++){var o=e[a].getPolyline();o.setStrokeColor("#307CFC"),o.setStrokeWeight(3),o.setStrokeOpacity(1)}},onMarkersSet:function(e){for(var a=0;a<e.length;a++)void 0===e[a].Km&&c.removeOverlay(e[a].marker)}}),I=new BMap.RidingRoute(c,{renderOptions:{map:c,autoViewport:!0},onPolylinesSet:function(e){for(var a=0;a<e.length;a++){var o=e[a].getPolyline();o.setStrokeColor("#307CFC"),o.setStrokeWeight(3),o.setStrokeOpacity(1)}},onMarkersSet:function(e){for(var a=0;a<e.length;a++)void 0===e[a].Km&&c.removeOverlay(e[a].marker)}});if(2==l||1==l&&0==s){var w=new BMap.Point(e.lng,e.lat);(f=2==l?new BMap.Label('<div class="bubble shop" style="width: 26px; height: 37px; background: url('+i.mapConfig.from_icon+') no-repeat center/cover; position: relative;"></div>',{position:w,offset:new BMap.Size(-15,-33)}):new BMap.Label('<div class="bubble buy" style="width: 26px; height: 37px; background: url('+i.mapConfig.from_icon+') no-repeat center/cover; position: relative;"></div>',{position:w,offset:new BMap.Size(-15,-33)})).setStyle(m),c.addOverlay(f),3==n?k.search(w,g):(k.search(w,u),I.search(u,g))}if(1==l&&1==s&&5==n&&I.search(u,g),4==n||5==n){h=p?'<p style="position: absolute;height:27px;box-shadow:0px 0px 6px #ccc;border-radius:13px;line-height: 27px;padding: 0 16px;top: -37px;left: 50%;transform: translateX(-50%);font-size: 12px;font-weight: bold;color: #000;background: #fff;display: inline-block;white-space: nowrap;z-index: 8">'+p+'<span style="position:absolute;left:50%;overflow:hidden;pointer-events:none;-webkit-transform:rotate(45deg);-mz-transform:rotate(45deg);transform:rotate(45deg);width: 9px;height: 9px;margin-left: -4px;background:#fff;box-shadow:none;bottom: -4px;"></span></p>':"";var j=new BMap.Label('<div class="bubble courier"  style="width: 50px; height: 50px; background: url('+i.mapConfig.qs_icon+') no-repeat center/cover; position: relative;">'+h+"</div>",{position:u,offset:new BMap.Size(-25,-35)});j.setStyle(m),j.zIndex=4,c.addOverlay(j)}}else if("amap"==site_map){var x=[o.lng,o.lat];1==l&&4==n&&1==s&&(x=[a.lng,a.lat]),c=new AMap.Map("map"+t,{center:x,zoom:14});b="";3==n&&(b="预计"+d+"送达");h=b?'<p style="position: absolute;height:27px;box-shadow:0px 0px 6px #ccc;border-radius:13px;line-height: 27px;padding: 0 16px;top: -37px;left: 50%;transform: translateX(-50%);font-size: 12px;font-weight: bold;color: #000;background: #fff;display: inline-block;white-space: nowrap;z-index: 8">'+b+'<span style="position:absolute;left:50%;overflow:hidden;pointer-events:none;-webkit-transform:rotate(45deg);-mz-transform:rotate(45deg);transform:rotate(45deg);width: 9px;height: 9px;margin-left: -4px;background:#fff;box-shadow:none;bottom: -4px;"></span></p>':"";if(y=new AMap.Marker({position:[o.lng,o.lat],content:'<div class="bubble person" style="width: 26px; height: 37px; background: url('+i.mapConfig.to_icon+') no-repeat center/cover; position: relative;">'+h+"</div>",offset:new AMap.Pixel(-15,-33),map:c}),4==n||5==n){var C=p?'<p style="position: absolute;height:27px;box-shadow:0px 0px 6px #ccc;border-radius:13px;line-height: 27px;padding: 0 16px;top: -37px;left: 50%;transform: translateX(-50%);font-size: 12px;font-weight: bold;color: #000;background: #fff;display: inline-block;white-space: nowrap;z-index: 8">'+p+'<span style="position:absolute;left:50%;overflow:hidden;pointer-events:none;-webkit-transform:rotate(45deg);-mz-transform:rotate(45deg);transform:rotate(45deg);width: 9px;height: 9px;margin-left: -4px;background:#fff;box-shadow:none;bottom: -4px;"></span></p>':"";qsIcon=new AMap.Marker({position:[a.lng,a.lat],content:'<div class="bubble courier" style="width: 50px; height: 50px; background: url('+i.mapConfig.qs_icon+') no-repeat center/cover; position: relative;">'+C+"</div>",offset:new AMap.Pixel(-15,-33),map:c})}var D={policy:1};k=new AMap.Riding(D),I=new AMap.Riding(D);(2==l||1==l&&0==s)&&(f=1==l?new AMap.Marker({position:[e.lng,e.lat],content:'<div class="bubble buy"  style="width: 26px; height: 37px; background: url('+i.mapConfig.from_icon+') no-repeat center/cover; position: relative;"></div>',offset:new AMap.Pixel(-15,-33),map:c}):new AMap.Marker({position:[e.lng,e.lat],content:'<div class="bubble shop" style="width: 26px; height: 37px; background: url('+i.mapConfig.from_icon+") no-repeat center/cover; position: relative;></div>",offset:new AMap.Pixel(-15,-33),map:c}),3==n?k.search([e.lng,e.lat],[o.lng,o.lat],(function(e,a){"complete"===e&&a.routes&&a.routes.length&&drawRoute("1",a.routes[0],c)})):(k.search([e.lng,e.lat],[a.lng,a.lat],(function(e,a){"complete"===e&&a.routes&&a.routes.length&&drawRoute("1",a.routes[0],c)})),I.search([a.lng,a.lat],[o.lng,o.lat],(function(e,a){"complete"===e&&a.routes&&a.routes.length&&drawRoute("1",a.routes[0],c)})))),1==l&&1==s&&5==n&&k.search([a.lng,a.lat],[o.lng,o.lat],(function(e,a){"complete"===e&&a.routes&&a.routes.length&&drawRoute("1",a.routes[0],c)}))}else if("google"==site_map){var v,P,$,F,M=new google.maps.InfoWindow;_=new google.maps.LatLng(parseFloat(o.lat),parseFloat(o.lng));1==l&&4==n&&1==s&&(_=new google.maps.LatLng(parseFloat(a.lat),parseFloat(a.lng))),c=new google.maps.Map(document.getElementById("map"+t),{zoom:14,center:_,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}});var S,T,B,L=new google.maps.LatLng(parseFloat(o.lat),parseFloat(o.lng));if(y=new MarkerWithLabel({position:L,draggable:!0,map:c,labelAnchor:new google.maps.Point(15,33),labelContent:'<div class="bubble person" style="width: 26px; height: 37px; background: url('+i.mapConfig.to_icon+') no-repeat center/cover; position: relative;"></div>',icon:"/static/images/blank.gif"}),3==n){var O=' <p style="position: absolute;height:27px;box-shadow:0px 0px 6px #ccc;border-radius:13px;line-height: 27px;padding: 0 16px;top: -37px;left: 50%;transform: translateX(-50%);font-size: 12px;font-weight: bold;color: #000;background: #fff;display: inline-block;white-space: nowrap;z-index: 8">预计'+d+'送达<span style="position:absolute;left:50%;overflow:hidden;pointer-events:none;-webkit-transform:rotate(45deg);-mz-transform:rotate(45deg);transform:rotate(45deg);width: 9px;height: 9px;margin-left: -4px;background:#fff;box-shadow:none;bottom: -4px;"></span></p>';M.setContent(O),M.open(c,y)}if(v=new google.maps.DirectionsService,(P=new google.maps.DirectionsRenderer({suppressMarkers:!0})).setOptions({polylineOptions:{strokeColor:"#027CFF"}}),P.setMap(c),4==n||5==n){S={lng:Number(a.lng),lat:Number(a.lat)};var N=new google.maps.LatLng(parseFloat(a.lat),parseFloat(a.lng));qsIcon=new MarkerWithLabel({position:N,draggable:!0,map:c,labelAnchor:new google.maps.Point(24,40),labelContent:'<div class="bubble courier" style="width: 50px; height: 50px; background: url('+i.mapConfig.qs_icon+') no-repeat center/cover; position: relative;"></div>',icon:"/static/images/blank.gif"}),M.setContent(p),M.open(c,qsIcon)}if(B={lng:Number(o.lng),lat:Number(o.lat)},2==l||1==l&&0==s){T={lng:Number(e.lng),lat:Number(e.lat)};var V=new google.maps.LatLng(parseFloat(e.lat),parseFloat(e.lng));f=new MarkerWithLabel({position:V,draggable:!0,map:c,labelAnchor:new google.maps.Point(15,33),labelContent:'<div class="bubble shop" style="width: 26px; height: 37px; background: url('+i.mapConfig.from_icon+") no-repeat center/cover; position: relative;></div>",icon:"/static/images/blank.gif"}),3==n?calculateAndDisplayRoute(v,P,T,B):($=new google.maps.DirectionsService,(F=new google.maps.DirectionsRenderer({suppressMarkers:!0})).setOptions({polylineOptions:{strokeColor:"#027CFF"}}),F.setMap(c),calculateAndDisplayRoute(v,P,T,S),calculateAndDisplayRoute($,F,S,B))}1==l&&1==s&&5==n&&calculateAndDisplayRoute(v,P,S,B)}}}},[["render",function(e,t,s,r,f,u){const h=b,y=B,_=m;return a(),n(h,{class:"paotuiitem item"},{default:i((()=>[g(h,{class:"orderInfo flexbox",onClick:t[0]||(t[0]=e=>u.toLink("order"))},{default:i((()=>[g(h,{class:"flex_l flexbox order_title"},{default:i((()=>[g(h,{class:x("otype "+(1==s.objInfo.type?"buy":""))},{default:i((()=>[d(c(1==s.objInfo.type?"帮我买":"取送件"),1)])),_:1},8,["class"]),g(h,{class:"title"},{default:i((()=>[d(c(s.objInfo.shop),1)])),_:1})])),_:1}),g(h,{class:x(`orderState state${s.objInfo.state}`)},{default:i((()=>[d(c(f.stateText),1)])),_:1},8,["class"])])),_:1}),g(h,{class:"orderAddr",onClick:t[1]||(t[1]=e=>u.toLink("order"))},{default:i((()=>[["4","5"].includes(s.objInfo.state)||3==s.objInfo.state&&0==s.objInfo.form?(a(),n(h,{key:0,class:"mapShow",ref:"mapCon",id:`map${s.objInfo.id}`},{default:i((()=>["web"!=f.platForm?(a(),n(y,{key:0,style:{width:"100%",height:"100%"},id:`${s.objInfo.id}`,scale:14,markers:f.mapConfig&&f.mapConfig.cover,longitude:f.mapConfig.from_lng||f.mapConfig.to_lng,latitude:f.mapConfig.from_lat||f.mapConfig.to_lat,polyline:f.mapConfig&&f.mapConfig.polyline},null,8,["id","markers","longitude","latitude","polyline"])):p("",!0)])),_:1},8,["id"])):(a(),n(h,{key:1,class:"addrDetail"},{default:i((()=>[g(h,{class:"from flexbox"},{default:i((()=>[g(h,{class:"lab"},{default:i((()=>[d(c(1==s.objInfo.type?"买":"取"),1)])),_:1}),g(h,{class:"addr"},{default:i((()=>[g(h,{class:"address"},{default:i((()=>[d(c(s.objInfo.buyaddress||"null"),1)])),_:1}),1!=s.objInfo.type?(a(),n(h,{key:0,class:"contact"},{default:i((()=>[d(c(s.objInfo.username||"null")+" "+c(s.objInfo.tel||"null"),1)])),_:1})):p("",!0)])),_:1})])),_:1}),g(h,{class:"to flexbox"},{default:i((()=>[g(h,{class:"lab"},{default:i((()=>[d("收")])),_:1}),g(h,{class:"addr"},{default:i((()=>[g(h,{class:"address"},{default:i((()=>[d(c(s.objInfo.address||"null"),1)])),_:1}),g(h,{class:"contact"},{default:i((()=>[d(c(s.objInfo.getperson||"null")+" "+c(s.objInfo.gettel||"null"),1)])),_:1})])),_:1})])),_:1})])),_:1}))])),_:1}),g(h,{class:"orderBtns flexbox"},{default:i((()=>[g(h,{class:"l_info"},{default:i((()=>["0"==s.objInfo.state?(a(),n(h,{key:0,class:"payAmount flexbox"},{default:i((()=>[d("需支付"),g(h,{class:"amount"},{default:i((()=>[d(c(f.globalData.appConfig&&f.globalData.appConfig.currency&&f.globalData.appConfig.currency.symbol||"￥"),1),g(_,null,{default:i((()=>[d(c(s.objInfo.amount),1)])),_:1})])),_:1})])),_:1})):(a(),n(h,{key:1,class:"paytime flexbox"},{default:i((()=>[d(c(u.timeTrans(s.objInfo.pubdate)),1)])),_:1}))])),_:1}),g(h,{class:"r_btns flexbox"},{default:i((()=>[["0","2","3","4","5"].includes(s.objInfo.state)?(a(),o(l,{key:0},[g(h,{class:"btn cancel",onClick:u.cancleOrder},{default:i((()=>[d("取消订单")])),_:1},8,["onClick"]),"0"==s.objInfo.state?(a(),n(h,{key:0,class:"btn pay",onClick:u.payOrder},{default:i((()=>[d("立即支付")])),_:1},8,["onClick"])):p("",!0),"5"==s.objInfo.state?(a(),n(h,{key:1,class:"btn qishou",onClick:t[2]||(t[2]=e=>u.toLink("contact"))},{default:i((()=>[d("联系骑手")])),_:1})):p("",!0)],64)):"1"==s.objInfo.state?(a(),o(l,{key:1},[g(h,{class:"btn rebuy",onClick:t[3]||(t[3]=e=>u.toLink("rebuy"))},{default:i((()=>[d("再来一单")])),_:1}),g(h,{class:"btn comment borderBtn",onClick:t[4]||(t[4]=e=>u.toLink("comment"))},{default:i((()=>[d("去评价")])),_:1})],64)):"6"==s.objInfo.state?(a(),n(h,{key:2,class:"btn rebuy",onClick:t[5]||(t[5]=e=>u.toLink("rebuy"))},{default:i((()=>[d("重新下单")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-a3d0d4df"]]),fe=v();const ue=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0},travelConfig:{type:Object,default:{}}},computed:{getState:()=>function(e){let a="";switch(e.orderstate){case"0":a="待付款";break;case"1":a="待使用";break;case"3":a="交易成功";break;case"7":a="已取消";break;case"8":case"9":a="交易关闭"}return a},orderTypename:()=>function(e){let a="";switch(e.type){case"1":a="景点门票";break;case"2":a=e.subtype?"一日游":"跟团游";break;case"3":a="酒店/民宿";break;case"4":a="签证"}return a},timeTrans:()=>function(e){let a=e.walktime;const o=fe.dateFormatter(a),t=o.year,l=o.month,n=o.day;o.hour,o.minute,o.second;let s=fe.dateFormatter(parseInt((new Date).valueOf()/1e3));const r=s.year;s.month;let i="";return i=new Date(1e3*a).toDateString()===(new Date).toDateString()?"今天 ":t==r?e.orderstate>5?l+"月"+n+"日":l+"月"+n+"日 ":t+"/"+l+"/"+n+" ",i}},data:()=>({globalData:fe.globalData,imgVersion:fe.globalData.imgVersion,imgpath:fe.globalData.imgPath+"/member/order/",defaultImg:fe.globalData.masterDomain+"/static/images/good_default.png"}),mounted(){},methods:{toLink(e){const a=this;let o="";switch(e){case"pay":$("payorder",{objInfo:this.objInfo,ind:this.ind});break;case"cancel":$("cancelorder",{objInfo:this.objInfo,ind:this.ind});break;case"order":o=`${fe.globalData.appConfig&&fe.globalData.appConfig.cfg_user_index}/orderdetail-travel-${a.objInfo.id}.html`,fe.linkTo(o,!1,!1);break;case"rebuy":o=`${fe.globalData.masterDomain}/travel/confirm-order-${a.objInfo.type}-${a.objInfo.proid}.html`,fe.linkTo(o,!1,!1);break;case"showCode":$("showwuliu",{objInfo:this.objInfo,ind:this.ind});break;case"pay_other":o=a.globalData.appConfig.cfg_user_index+"/daipay.html?module=tuan&ordernum="+a.objInfo.ordernum,fe.linkTo(o,!1,!1);break;case"refund_cancel":$("cancelorder",{objInfo:this.objInfo,ind:this.ind,opt:"refund_cancel"})}}}},[["render",function(e,t,s,r,u,h){const y=f,_=b,k=m;return a(),n(_,{class:"travelitem item"},{default:i((()=>[g(_,{class:"store flexb"},{default:i((()=>[g(_,{class:"store_name flexb"},{default:i((()=>[g(y,{class:"icon",src:u.imgpath+"store_icon.png?v="+u.imgVersion,mode:"aspectFit"},null,8,["src"]),g(_,{class:"txt"},{default:i((()=>[d(c(s.objInfo.company),1)])),_:1})])),_:1}),g(_,{class:"order_state"},{default:i((()=>[d(c(h.getState(s.objInfo)),1)])),_:1})])),_:1}),g(_,{class:"order-content",onClick:t[1]||(t[1]=e=>h.toLink("order"))},{default:i((()=>[g(_,{class:"order-info flexbox"},{default:i((()=>[g(_,{class:"flexl order_detail flexbox"},{default:i((()=>[g(_,{class:"pic loadingImg"},{default:i((()=>[g(y,{src:s.objInfo.product.litpic||u.defaultImg,onError:t[0]||(t[0]=e=>s.objInfo.product.litpic=u.defaultImg),mode:"aspectFill"},null,8,["src"]),g(_,{class:"tag"},{default:i((()=>[d(c(h.orderTypename(s.objInfo)),1)])),_:1})])),_:1}),g(_,{class:"detail"},{default:i((()=>[g(_,{class:"h4"},{default:i((()=>[d(c(s.objInfo.title),1)])),_:1}),g(_,{class:"info"},{default:i((()=>[g(_,{class:"p"},{default:i((()=>[d(c(s.objInfo.product.title),1)])),_:1}),g(_,{class:"p"},{default:i((()=>[d("出行日期："+c(h.timeTrans(s.objInfo)),1)])),_:1})])),_:1})])),_:1})])),_:1}),g(_,{class:"flexr order_count"},{default:i((()=>[g(_,{class:"p_pirce"},{default:i((()=>[d(c(u.globalData.appConfig&&u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥")+c(s.objInfo.unitprice),1)])),_:1}),g(_,{class:"p_count"},{default:i((()=>[d("x"+c(s.objInfo.procount),1)])),_:1}),8==s.objInfo.orderstate||9==s.objInfo.orderstate?(a(),n(_,{key:0,class:"pstate"},{default:i((()=>[d(c(8==s.objInfo.orderstate?"退款中":"退款成功"),1)])),_:1})):p("",!0)])),_:1})])),_:1}),g(_,{class:"order-pay flexbox"},{default:i((()=>[g(_,null,{default:i((()=>[d("实付：")])),_:1}),g(_,{class:"pay_price"},{default:i((()=>[d(c(u.globalData.appConfig&&u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥"),1),g(_,{class:"b"},{default:i((()=>[d(c(s.objInfo.orderprice.split(".")[0]),1),s.objInfo.orderprice.includes(".")?(a(),n(k,{key:0},{default:i((()=>[d("."+c(s.objInfo.orderprice.split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),"3"!=s.objInfo.orderstate?(a(),n(_,{key:0,class:"orderBtns"},{default:i((()=>["0"==s.objInfo.orderstate?(a(),o(l,{key:0},[g(_,{class:"btn cancel",onClick:t[2]||(t[2]=e=>h.toLink("cancel"))},{default:i((()=>[d("取消订单")])),_:1}),s.travelConfig&&1==s.travelConfig.peerpayState?(a(),n(_,{key:0,class:"btn share",onClick:t[3]||(t[3]=e=>h.toLink("pay_other"))},{default:i((()=>[d("找人付")])),_:1})):p("",!0),g(_,{class:"btn pay",onClick:t[4]||(t[4]=e=>h.toLink("pay"))},{default:i((()=>[d("去付款")])),_:1})],64)):"1"==s.objInfo.orderstate?(a(),n(_,{key:1,class:"btn todetail borderBtn",onClick:t[5]||(t[5]=e=>h.toLink("showCode"))},{default:i((()=>[d("查看券码")])),_:1})):"3"==s.objInfo.orderstate?(a(),n(_,{key:2,class:"btn comment borderBtn",onClick:t[6]||(t[6]=e=>h.toLink("comment"))},{default:i((()=>[d("评价")])),_:1})):"7"==s.objInfo.orderstate||"9"==s.objInfo.orderstate?(a(),n(_,{key:3,class:"btn rebuy",onClick:t[7]||(t[7]=e=>h.toLink("rebuy"))},{default:i((()=>[d("再次购买")])),_:1})):"8"==s.objInfo.orderstate?(a(),o(l,{key:4},[g(_,{class:"btn cancel_tui",onClick:t[8]||(t[8]=e=>h.toLink("refund_cancel"))},{default:i((()=>[d("取消退款")])),_:1}),g(_,{class:"btn todetail borderBtn",onClick:t[9]||(t[9]=e=>h.toLink("showCode"))},{default:i((()=>[d("查看券码")])),_:1})],64)):p("",!0)])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-899b8301"]]),me=v();const be=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},computed:{getState:()=>function(e){let a="";switch(e.orderstate){case"0":a="待付款";break;case"1":a="已付款";break;case"3":a="交易成功";break;case"7":a="已取消";break;case"8":case"9":a="交易关闭"}return a}},data:()=>({globalData:me.globalData,imgVersion:me.globalData.imgVersion,imgpath:me.globalData.imgPath+"/member/order/"}),mounted(){},methods:{toLink(e){let a="";switch(e){case"pay":$("payorder",{objInfo:this.objInfo,ind:this.ind});break;case"cancel":$("cancelorder",{objInfo:this.objInfo,ind:this.ind});break;case"order":a=`${me.globalData.appConfig&&me.globalData.appConfig.cfg_user_index}/orderdetail-education-${order.id}.html`,me.linkTo(a,!1,!1);break;case"store":a=order.store.url,me.linkTo(a,!1,!1);break;case"rebuy":a=order.product.url.replace("class-detail","comfirm"),me.linkTo(a,!1,!1);break;case"del":a=`${me.globalData.appConfig&&me.globalData.appConfig.cfg_user_index}/orderdetail-education-${order.id}.html`,$("delorder",{objInfo:this.objInfo,ind:this.ind})}}}},[["render",function(e,t,s,r,u,h){const y=f,_=b,k=m;return s.objInfo.product.coursestitle?(a(),n(_,{key:0,class:"educationitem item"},{default:i((()=>[g(_,{class:"store flexb"},{default:i((()=>[g(_,{class:"store_name flexb",onClick:t[0]||(t[0]=e=>h.toLink("store"))},{default:i((()=>[g(y,{class:"icon",src:u.imgpath+"store_icon.png?v="+u.imgVersion,mode:"aspectFit"},null,8,["src"]),g(_,{class:"txt"},{default:i((()=>[d(c(s.objInfo.store.title||"暂无相关信息"),1)])),_:1})])),_:1}),g(_,{class:"order_state"},{default:i((()=>[d(c(h.getState(s.objInfo)),1)])),_:1})])),_:1}),g(_,{class:"order-content",onClick:t[1]||(t[1]=e=>h.toLink("order"))},{default:i((()=>[g(_,{class:"order-info flexbox"},{default:i((()=>[g(_,{class:"flexl order_detail flexbox"},{default:i((()=>[g(_,{class:"pic loadingImg"},{default:i((()=>[g(y,{src:s.objInfo.product.litpic,mode:"aspectFill"},null,8,["src"])])),_:1}),g(_,{class:"detail"},{default:i((()=>[g(_,{class:"h4"},{default:i((()=>[d(c(s.objInfo.product.coursestitle),1)])),_:1}),g(_,{class:"info"},{default:i((()=>[g(_,{class:"p"},{default:i((()=>[d(c(s.objInfo.product.classtitle),1)])),_:1})])),_:1})])),_:1})])),_:1}),g(_,{class:"flexr order_count"},{default:i((()=>[g(_,{class:"p_pirce"},{default:i((()=>[d(c(u.globalData.appConfig&&u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥")+c(s.objInfo.orderprice),1)])),_:1}),g(_,{class:"p_count"},{default:i((()=>[d("x"+c(s.objInfo.procount),1)])),_:1}),8==s.objInfo.orderstate||9==s.objInfo.orderstate?(a(),n(_,{key:0,class:"pstate"},{default:i((()=>[d(c(8==s.objInfo.orderstate?"退款中":"退款成功"),1)])),_:1})):p("",!0)])),_:1})])),_:1}),g(_,{class:"order-pay flexbox"},{default:i((()=>[g(_,null,{default:i((()=>[d("实付：")])),_:1}),g(_,{class:"pay_price"},{default:i((()=>[d(c(u.globalData.appConfig&&u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥"),1),g(_,{class:"b"},{default:i((()=>[d(c(s.objInfo.orderprice.toString().split(".")[0]),1),s.objInfo.orderprice.toString().includes(".")?(a(),n(k,{key:0},{default:i((()=>[d("."+c(s.objInfo.orderprice.toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),g(_,{class:"orderBtns"},{default:i((()=>["0"==s.objInfo.orderstate?(a(),o(l,{key:0},[g(_,{class:"btn cancel",onClick:t[2]||(t[2]=e=>h.toLink("cancel"))},{default:i((()=>[d("取消订单")])),_:1}),g(_,{class:"btn pay",onClick:t[3]||(t[3]=e=>h.toLink("pay"))},{default:i((()=>[d("去付款")])),_:1})],64)):"1"==s.objInfo.orderstate?(a(),n(_,{key:1,class:"btn todetail",onClick:t[4]||(t[4]=e=>h.toLink("order"))},{default:i((()=>[d("订单详情")])),_:1})):"2"==s.objInfo.orderstate?(a(),o(l,{key:2},[],64)):"7"==s.objInfo.orderstate||"9"==s.objInfo.orderstate?(a(),o(l,{key:3},[g(_,{class:"btn del",onClick:t[5]||(t[5]=e=>h.toLink("del"))},{default:i((()=>[d("删除订单")])),_:1}),g(_,{class:"btn rebuy",onClick:t[6]||(t[6]=e=>h.toLink("rebuy"))},{default:i((()=>[d("重新报名")])),_:1})],64)):"8"==s.objInfo.orderstate?(a(),o(l,{key:4},[],64)):p("",!0)])),_:1})])),_:1})):p("",!0)}],["__scopeId","data-v-a5f3916b"]]),ge=v();const he=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},computed:{getState:()=>function(e){let a="";switch(e.orderstate){case"0":a="待付款";break;case"1":a="待商家确认";break;case"2":a="待服务";break;case"3":a="服务无效";break;case"4":a="待服务";break;case"5":a="待验收";break;case"6":a="服务完成";break;case"7":a="已取消";break;case"8":a="交易关闭";break;case"9":a="已取消";case"11":a="服务完成"}return console.log(a),a},timeTrans:()=>function(e){let a=e.doortime_date;const o=ge.dateFormatter(a),t=o.year,l=o.month,n=o.day;const s=ge.dateFormatter(parseInt((new Date).valueOf()/1e3)).year;let r="";return r=new Date(1e3*a).toDateString()===(new Date).toDateString()?"今天 "+e.doortime_time:t==s?l+"月"+n+"日 "+e.doortime_time:t+"/"+l+"/"+n+" ",r}},data:()=>({globalData:ge.globalData,imgVersion:ge.globalData.imgVersion,imgpath:ge.globalData.imgPath+"/member/order/"}),mounted(){},methods:{toLink(e,a=0){const o=this;let t="";switch(e){case"pay":$("payorder",{objInfo:this.objInfo,ind:this.ind});break;case"cancel":$("cancelorder",{objInfo:this.objInfo,ind:this.ind,is_yuyue:a});break;case"order":case"rebuy":t=`${ge.globalData.appConfig&&ge.globalData.appConfig.cfg_user_index}/orderdetail-homemaking-${o.objInfo.id}.html`,ge.linkTo(t,!1,!1);break;case"del":$("delorder",{objInfo:this.objInfo,ind:this.ind});break;case"aftersale":t=`${ge.globalData.appConfig&&ge.globalData.appConfig.cfg_user_index}/homemaking-repair-${o.objInfo.id}.html`,ge.linkTo(t,!1,!1);break;case"cancelservice":t=`${ge.globalData.appConfig&&ge.globalData.appConfig.cfg_user_index}/homemaking-cancelservice-${o.objInfo.id}.html`,ge.linkTo(t,!1,!1);break;case"yanshou":case"code":$("showwuliu",{objInfo:this.objInfo,ind:this.ind,opt:"yanshou"==e?"confirm":"showCode"});break;case"cancel_yuyue":0==o.objInfo.homemakingtype||(t=`${ge.globalData.appConfig.cfg_user_index}/homemaking-cancel-${o.objInfo.id}.html`,ge.linkTo(t,!1,!1));break;case"contact":ge.globalData.appBoolean&&"web"==ge.globalData.platForm?location.href="tel:"+o.objInfo.tel:L({phoneNumber:o.objInfo.tel,success:e=>{},fail:e=>{}})}}}},[["render",function(e,t,s,r,u,h){const y=f,_=b,k=m;return a(),n(_,{class:"homemakingitem item"},{default:i((()=>[g(_,{class:"store flexb"},{default:i((()=>[g(_,{class:"store_name flexb"},{default:i((()=>[g(y,{class:"icon",src:u.imgpath+"store_icon.png?v="+u.imgVersion,mode:"aspectFit"},null,8,["src"]),g(_,{class:"txt"},{default:i((()=>[d(c(s.objInfo.company),1)])),_:1})])),_:1}),g(_,{class:"order_state"},{default:i((()=>[d(c(h.getState(s.objInfo)),1)])),_:1})])),_:1}),g(_,{class:"order-content",onClick:t[0]||(t[0]=e=>h.toLink("order"))},{default:i((()=>[g(_,{class:"order-info flexbox"},{default:i((()=>[g(_,{class:"flexl order_detail flexbox"},{default:i((()=>[g(_,{class:"pic loadingImg"},{default:i((()=>[g(y,{src:s.objInfo.product.litpic,mode:"aspectFill"},null,8,["src"])])),_:1}),g(_,{class:"detail"},{default:i((()=>[g(_,{class:"h4"},{default:i((()=>[d(c(s.objInfo.product.title),1)])),_:1}),g(_,{class:"info"},{default:i((()=>[g(_,{class:x({p:!0,overtime:!["0","1","2","4","5"].includes(s.objInfo.orderstate)})},{default:i((()=>[d("预约时间："),g(k,{class:x({intime:["0","1","2","4","5"].includes(s.objInfo.orderstate)})},{default:i((()=>[d(c(h.timeTrans(s.objInfo)),1)])),_:1},8,["class"])])),_:1},8,["class"]),11==s.objInfo.orderstate?(a(),n(_,{key:0,class:"p"},{default:i((()=>[d("结算时间："),g(k,null,{default:i((()=>[d(c(s.objInfo.statementtime),1)])),_:1})])),_:1})):p("",!0)])),_:1}),0==s.objInfo.homemakingtype?(a(),n(_,{key:0,class:"free"},{default:i((()=>[d("免费预约")])),_:1})):p("",!0)])),_:1})])),_:1}),g(_,{class:"flexr order_count"},{default:i((()=>[g(_,{class:"p_pirce"},{default:i((()=>[d(c(u.globalData.appConfig&&u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥")+c(s.objInfo.orderprice),1)])),_:1}),g(_,{class:"p_count"},{default:i((()=>[d("x"+c(s.objInfo.procount),1)])),_:1}),8==s.objInfo.orderstate||9==s.objInfo.orderstate?(a(),n(_,{key:0,class:"pstate"},{default:i((()=>[d(c(8==s.objInfo.orderstate?"退款中":"退款成功"),1)])),_:1})):p("",!0)])),_:1})])),_:1}),s.objInfo.orderprice>0?(a(),n(_,{key:0,class:"order-pay flexbox"},{default:i((()=>[g(_,null,{default:i((()=>[d("实付：")])),_:1}),g(_,{class:"pay_price"},{default:i((()=>[d(c(u.globalData.appConfig&&u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥"),1),g(_,{class:"b"},{default:i((()=>[d(c(s.objInfo.orderprice.toString().split(".")[0]),1),s.objInfo.orderprice.toString().includes(".")?(a(),n(k,{key:0},{default:i((()=>[d("."+c(s.objInfo.orderprice.toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1}),g(_,{class:"orderBtns"},{default:i((()=>["0"==s.objInfo.orderstate?(a(),o(l,{key:0},[g(_,{class:"btn cancel",onClick:t[1]||(t[1]=e=>h.toLink("cancel"))},{default:i((()=>[d("取消订单")])),_:1}),g(_,{class:"btn contact",onClick:t[2]||(t[2]=e=>h.toLink("contact"))},{default:i((()=>[d("联系商家")])),_:1}),g(_,{class:"btn pay",onClick:t[3]||(t[3]=e=>h.toLink("pay"))},{default:i((()=>[d("去付款")])),_:1})],64)):"1"==s.objInfo.orderstate?(a(),o(l,{key:1},[0==s.objInfo.homemakingtype?(a(),n(_,{key:0,class:"btn todetail",onClick:t[4]||(t[4]=e=>h.toLink("cancel",1))},{default:i((()=>[d("取消预约")])),_:1})):0==s.objInfo.refundnumber||1==s.objInfo.refundnumber?(a(),n(_,{key:1,class:"btn todetail",onClick:t[5]||(t[5]=e=>h.toLink("cancel_yuyue"))},{default:i((()=>[d(c(0==s.objInfo.refundnumber?"申请退款":"修改申请"),1)])),_:1})):2==s.objInfo.refundnumber?(a(),n(_,{key:2,class:"btn todetail",onClick:t[6]||(t[6]=e=>h.toLink("cancel_yuyue"))},{default:i((()=>[d("查看退款详情")])),_:1})):p("",!0),g(_,{class:"btn contact",onClick:t[7]||(t[7]=e=>h.toLink("contact"))},{default:i((()=>[d("联系商家")])),_:1})],64)):"2"==s.objInfo.orderstate?(a(),o(l,{key:2},[g(_,{class:"btn contact",onClick:t[8]||(t[8]=e=>h.toLink("contact"))},{default:i((()=>[d("联系商家")])),_:1}),0==s.objInfo.homemakingtype?(a(),n(_,{key:0,class:"btn todetail",onClick:t[9]||(t[9]=e=>h.toLink("cancel",1))},{default:i((()=>[d("取消预约")])),_:1})):s.objInfo.cardnum&&s.objInfo.cardnum.length?(a(),n(_,{key:1,class:"btn code pay",onClick:t[10]||(t[10]=e=>h.toLink("code"))},{default:i((()=>[d("服务码")])),_:1})):p("",!0)],64)):"3"==s.objInfo.orderstate?(a(),n(_,{key:3,class:"btn del",onClick:t[11]||(t[11]=e=>h.toLink("del"))},{default:i((()=>[d("删除订单")])),_:1})):"4"==s.objInfo.orderstate?(a(),o(l,{key:4},[g(_,{class:"btn contact",onClick:t[12]||(t[12]=e=>h.toLink("contact"))},{default:i((()=>[d("联系商家")])),_:1}),2==s.objInfo.homemakingtype?(a(),n(_,{key:0,class:"btn del",onClick:t[13]||(t[13]=e=>h.toLink("cancelservice"))},{default:i((()=>[d("申请售后")])),_:1})):0==s.objInfo.homemakingtype?(a(),n(_,{key:1,class:"btn del",onClick:t[14]||(t[14]=e=>h.toLink("cancel",1))},{default:i((()=>[d("取消预约")])),_:1})):p("",!0)],64)):"5"==s.objInfo.orderstate?(a(),o(l,{key:5},[g(_,{class:"btn contact borderBtn",onClick:t[15]||(t[15]=e=>h.toLink("contact"))},{default:i((()=>[d("联系商家")])),_:1}),g(_,{class:"btn pay",onClick:t[16]||(t[16]=e=>h.toLink("yanshou"))},{default:i((()=>[d("验收完成")])),_:1})],64)):"7"==s.objInfo.orderstate||"9"==s.objInfo.orderstate?(a(),n(_,{key:6,class:"btn del",onClick:t[17]||(t[17]=e=>h.toLink("del"))},{default:i((()=>[d("删除订单")])),_:1})):"11"==s.objInfo.orderstate||"6"==s.objInfo.orderstate?(a(),o(l,{key:7},[1==s.objInfo.aftersale?(a(),n(_,{key:0,class:"btn aftersale",onClick:t[18]||(t[18]=e=>h.toLink("aftersale"))},{default:i((()=>[d("售后维保")])),_:1})):(a(),n(_,{key:1,class:"btn del",onClick:t[19]||(t[19]=e=>h.toLink("del"))},{default:i((()=>[d("删除订单")])),_:1})),g(_,{class:"btn contact",onClick:t[20]||(t[20]=e=>h.toLink("contact"))},{default:i((()=>[d("联系商家")])),_:1})],64)):p("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-b075bd82"]]),ye=v();const _e=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},data:()=>({globalData:ye.globalData,imgVersion:ye.globalData.imgVersion,imgpath:ye.globalData.imgPath+"/member/order/",defaultImg:ye.globalData.masterDomain+"/static/images/good_default.png"}),mounted(){},methods:{toLink(e){const a=this;let o="";switch(e){case"pay":$("payorder",{objInfo:this.objInfo,ind:this.ind});break;case"cancel":$("cancelorder",{objInfo:this.objInfo,ind:this.ind});break;case"order":case"rebuy":o=`${ye.globalData.appConfig&&ye.globalData.appConfig.cfg_user_index}/orderdetail-integral-${a.objInfo.id}.html`,ye.linkTo(o,!1,!1);break;case"del":o=`${ye.globalData.appConfig&&ye.globalData.appConfig.cfg_user_index}/orderdetail-integral-${a.objInfo.id}.html`,$("delorder",{objInfo:this.objInfo,ind:this.ind});break;case"wuliu":o=`${ye.globalData.appConfig&&ye.globalData.appConfig.cfg_user_index}/orderdetail-integral-${a.objInfo.id}.html`,$("showwuliu",{objInfo:this.objInfo,ind:this.ind})}}}},[["render",function(e,t,r,u,h,y){const _=f,k=b,I=m;return r.objInfo.product?(a(),n(k,{key:0,class:x({"integralitem item":!0,cancelitem:r.objInfo.orderstate>5}),style:s(0==r.ind?"border-radius: 0  0 20rpx 20rpx;":"")},{default:i((()=>[g(k,{class:"order-content",onClick:t[1]||(t[1]=e=>y.toLink("order"))},{default:i((()=>[g(k,{class:"order-info flexbox"},{default:i((()=>[g(k,{class:"flexl order_detail flexbox"},{default:i((()=>[g(k,{class:"pic loadingImg"},{default:i((()=>[g(_,{src:r.objInfo.product.litpic||h.defaultImg,onError:t[0]||(t[0]=e=>r.objInfo.product.litpic=h.defaultImg),mode:"aspectFill"},null,8,["src"])])),_:1}),g(k,{class:"detail"},{default:i((()=>[g(k,{class:"h4"},{default:i((()=>[d(c(r.objInfo.product&&r.objInfo.product.title),1)])),_:1}),g(k,{class:"info"},{default:i((()=>[g(k,{class:"p"},{default:i((()=>[d("使用积分"+c(r.objInfo.point),1)])),_:1})])),_:1})])),_:1})])),_:1}),g(k,{class:"flexr order_count"},{default:i((()=>[g(k,{class:"p_pirce"},{default:i((()=>[d(c(h.globalData.appConfig&&h.globalData.appConfig.currency&&h.globalData.appConfig.currency.symbol||"￥")+c(r.objInfo.product.mprice),1)])),_:1}),g(k,{class:"p_count"},{default:i((()=>[d("x"+c(r.objInfo.count),1)])),_:1})])),_:1})])),_:1}),r.objInfo.orderstate<6?(a(),n(k,{key:0,class:"order-pay flexbox"},{default:i((()=>[g(k,null,{default:i((()=>[d("实付：")])),_:1}),g(k,{class:"pay_price"},{default:i((()=>[d(c(h.globalData.appConfig&&h.globalData.appConfig.currency&&h.globalData.appConfig.currency.symbol||"￥")+" ",1),g(k,{class:"b"},{default:i((()=>[d(c(r.objInfo.price.split(".")[0]),1),r.objInfo.price.includes(".")?(a(),n(I,{key:0},{default:i((()=>[d("."+c(r.objInfo.price.split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1}),r.objInfo.orderstate<5&&"1"!=r.objInfo.orderstate?(a(),n(k,{key:0,class:"orderBtns"},{default:i((()=>["0"==r.objInfo.orderstate?(a(),o(l,{key:0},[g(k,{class:"btn cancel",onClick:t[2]||(t[2]=e=>y.toLink("cancel"))},{default:i((()=>[d("取消订单")])),_:1}),g(k,{class:"btn pay",onClick:t[3]||(t[3]=e=>y.toLink("pay"))},{default:i((()=>[d("去付款")])),_:1})],64)):r.objInfo.orderstate<=5&&"1"!=r.objInfo.orderstate?(a(),n(k,{key:1,class:"btn detail",onClick:t[4]||(t[4]=e=>y.toLink("wuliu"))},{default:i((()=>[d("查看物流")])),_:1})):p("",!0)])),_:1})):p("",!0),r.objInfo.orderstate>5?(a(),n(k,{key:1,class:"cancel_text"},{default:i((()=>[d("取消")])),_:1})):p("",!0)])),_:1},8,["class","style"])):p("",!0)}],["__scopeId","data-v-02355231"]]),ke=v();const Ie=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},computed:{checkOrderTime:()=>function(e){if(!e)return"";let a=parseInt((new Date).valueOf()/1e3),o="";return a<e.product.startdate?o="preStart":a>=e.product.startdate&&a<=e.product.enddate?o="withIn":a>e.product.enddate&&(o="afterEnd"),o},getState:()=>function(e){let a="";switch(e.orderstate){case 1:a="竞拍中";break;case 2:a="";break;case 7:a="竞拍成功！请及时付款";break;case 5:a="竞拍失败",e.success_num>0&&(a="超时未付，已违约");break;case 3:a="待发货";break;case 4:a="已完成";break;case 6:a="配送中"}return{text:a,cls:""}}},data:()=>({defaultPro:ke.globalData.masterDomain+"/static/images/good_default.png",globalData:ke.globalData,platForm:ke.globalData.platForm,imgpath:ke.globalData.imgPath+"/member/order/",masterDomain:ke.globalData.masterDomain,imgVersion:ke.globalData.imgVersion,djsObj:{dd:"0",hh:"00",mm:"00",ss:"00"},interval:null}),mounted(){this.getCutDome()},methods:{getCutDome(){const e=this;if(e.interval&&clearInterval(e.interval),1==e.objInfo.orderstate&&0==e.objInfo.product.jy_type){let a=parseInt((new Date).valueOf()/1e3);a<e.objInfo.product.startdate&&(e.interval=setInterval((()=>{let o=e.objInfo.product.startdate-a;if(a=parseInt((new Date).valueOf()/1e3),o<0)return clearInterval(e.interval),!1;let t=parseInt(o/60/60/24),l=parseInt(o/60/60%24);l=l>9?l:"0"+l;let n=parseInt(o/60%60);n=n>9?n:"0"+n;let s=parseInt(o%60);s=s>9?s:"0"+s,e.djsObj={dd:t,hh:l,mm:n,ss:s}}),1e3))}else if(7==e.objInfo.orderstate){let a=parseInt((new Date).valueOf()/1e3),o=e.objInfo.product.enddate+60*e.objInfo.product.pay_limit*60;a<o&&(e.interval=setInterval((()=>{let t=o-a;if(a=parseInt((new Date).valueOf()/1e3),t<0)return clearInterval(e.interval),!1;let l=parseInt(t/60/60/24),n=parseInt(t/60/60%24);n=n>9?n:"0"+n;let s=parseInt(t/60%60);s=s>9?s:"0"+s;let r=parseInt(t%60);r=r>9?r:"0"+r,e.djsObj={dd:l,hh:n,mm:s,ss:r}}),1e3))}},linkTo(e){const a=this;if("detail"==e){let e=`${ke.globalData.appConfig.cfg_user_index}/orderdetail-paimai-${a.objInfo.id}`;ke.linkTo(e,!1,!1)}else if("predetail"==e){let e=`${ke.globalData.masterDomain}/paimai/detail-${a.objInfo.product.proid}`;ke.linkTo(e,!1,!1)}else"pay"==e?$("payorder",{objInfo:this.objInfo,ind:this.ind}):"contact"==e&&(ke.globalData.appBoolean&&"web"==ke.globalData.platForm?window.location.href="tel:"+a.objInfo.store.tel:L({phoneNumber:a.objInfo.store.tel}))}}},[["render",function(e,t,s,r,u,h){const y=f,_=b,k=m;return s.objInfo&&s.objInfo.id?(a(),n(_,{key:0,class:x(`paimaiitem item state${s.objInfo.orderstate} ${h.checkOrderTime(s.objInfo)} ${s.objInfo.success_num>0?"success":""}`)},{default:i((()=>[g(_,{class:"store flexb"},{default:i((()=>[g(_,{class:"store_name flexb"},{default:i((()=>[g(y,{class:"icon",src:u.imgpath+"store_icon.png?v="+u.imgVersion,mode:"aspectFit"},null,8,["src"]),g(_,{class:"txt"},{default:i((()=>[d(c(s.objInfo.store.company),1)])),_:1})])),_:1}),s.objInfo.orderstate>1||"withIn"==h.checkOrderTime(s.objInfo)?(a(),n(_,{key:0,class:"stateInfo"},{default:i((()=>[d(c(h.getState(s.objInfo).text),1)])),_:1})):(a(),n(_,{key:1,class:"stateInfo"},{default:i((()=>[d(c(u.djsObj.dd?u.djsObj.dd+"天":"")+c(`${u.djsObj.hh}:${u.djsObj.mm}:${u.djsObj.ss}`)+"开拍",1)])),_:1}))])),_:1}),g(_,{class:x("order-content ")},{default:i((()=>[g(_,{class:"prosbox",onClick:t[1]||(t[1]=e=>h.linkTo("detail"))},{default:i((()=>[g(_,{class:"pros_detail flexb"},{default:i((()=>[g(_,{class:"pro-img"},{default:i((()=>[g(y,{class:"",src:s.objInfo.product.litpic||u.defaultPro,mode:"aspectFill",onError:t[0]||(t[0]=e=>s.objInfo.product.litpic=u.defaultPro)},null,8,["src"]),1==s.objInfo.orderstate?(a(),n(_,{key:0,class:"pro_mask"},{default:i((()=>[d(c("withIn"==h.checkOrderTime(s.objInfo)?"竞拍中":"待开拍"),1)])),_:1})):p("",!0)])),_:1}),g(_,{class:"pro-info"},{default:i((()=>[g(_,{class:"pro_detail flexb"},{default:i((()=>[g(_,{class:"flex_l"},{default:i((()=>[g(_,{class:"pro-tit"},{default:i((()=>[d(c(s.objInfo.product.title),1)])),_:1}),g(_,{class:x("currMoney ")},{default:i((()=>[d(c(s.objInfo.orderstate&&[3,4,5,6,7].includes(s.objInfo.orderstate)?"成交价":"当前价")+" ",1),g(k,{class:"symbol"},{default:i((()=>[d(c(u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥"),1)])),_:1}),g(k,{class:"b"},{default:i((()=>[d(c(s.objInfo.product.money),1)])),_:1})])),_:1})])),_:1}),g(_,{class:"flex_r"},{default:i((()=>[g(_,{class:"num"},{default:i((()=>[d("x"+c(s.objInfo.procount),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(_,{class:"order_detail"},{default:i((()=>[g(_,{class:"bzj"},{default:i((()=>[d(c(s.objInfo.product.bao_money>0?`已交保：${u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥"}${s.objInfo.product.bao_money}`:"免保证金"),1)])),_:1}),s.objInfo.orderstate>3&&5!=s.objInfo.orderstate?(a(),n(_,{key:0,class:"flexb payMoney"},{default:i((()=>[d(c([3,4,6].includes(s.objInfo.orderstate)?"已付":"")+"尾款 ",1),g(_,{class:"money"},{default:i((()=>[d(c(u.globalData.appConfig.currency?u.globalData.appConfig.currency.symbol:"￥"),1),g(_,{class:"b"},{default:i((()=>[d(c(s.objInfo.product.money.toString().split(".")[0]),1),s.objInfo.product.money.toString().includes(".")?(a(),n(k,{key:0},{default:i((()=>[d("."+c(s.objInfo.product.money.toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1}),5!=s.objInfo.orderstate||0==s.objInfo.success_num?(a(),n(_,{key:0,class:"btnsbox"},{default:i((()=>[1==s.objInfo.orderstate?(a(),n(_,{key:0,class:"btn",onClick:t[2]||(t[2]=e=>h.linkTo("predetail"))},{default:i((()=>[d("竞拍详情")])),_:1})):[3,4,6].includes(s.objInfo.orderstate)?(a(),n(_,{key:1,class:"btn borderbtn",onClick:t[3]||(t[3]=e=>h.linkTo("detail"))},{default:i((()=>[d("查看物流")])),_:1})):5==s.objInfo.orderstate&&0==s.objInfo.success_num?(a(),n(_,{key:2,class:"btn borderbtn",onClick:t[4]||(t[4]=e=>h.linkTo("detail"))},{default:i((()=>[d("查看退款")])),_:1})):7==s.objInfo.orderstate?(a(),o(l,{key:3},[0==s.objInfo.product.jy_type?(a(),n(_,{key:0,class:"btn",onClick:t[5]||(t[5]=e=>h.linkTo("pay"))},{default:i((()=>[d("立即支付 "),g(k,null,{default:i((()=>[d(c(u.djsObj.dd>0?u.djsObj.dd+"天":"")+c(`${u.djsObj.hh}:${u.djsObj.mm}:${u.djsObj.ss}`),1)])),_:1})])),_:1})):(a(),n(_,{key:1,class:"btn",onClick:t[6]||(t[6]=e=>h.linkTo("contact"))},{default:i((()=>[d("联系商家支付")])),_:1}))],64)):p("",!0)])),_:1})):p("",!0)])),_:1})])),_:1},8,["class"])):p("",!0)}],["__scopeId","data-v-f901287c"]]),we=v();const je=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},computed:{timeTrans:()=>function(e){const a=we.dateFormatter(e),o=a.year,t=a.month,l=a.day,n=a.hour,s=a.minute;a.second;let r=we.dateFormatter(parseInt((new Date).valueOf()/1e3));const i=r.year;r.month;let d="";return d=o==i?t+"."+l+" "+n+":"+s:o+"."+t+"."+l+" "+n+":"+s,d}},data:()=>({defaultPro:we.globalData.masterDomain+"/static/images/good_default.png",globalData:we.globalData,platForm:we.globalData.platForm,imgPath:we.globalData.imgPath+"/member/order/",masterDomain:we.globalData.masterDomain,imgVersion:we.globalData.imgVersion,isFull:!1}),methods:{toLink(e){const a=this;"detail"==e?we.linkTo(a.objInfo.url,!1,!1):"showCode"==e?$("showwuliu",{objInfo:this.objInfo,ind:this.ind,opt:"hdDetail"}):"tuik"==e||"cancel"==e&&$("cancelorder",{objInfo:this.objInfo,ind:this.ind})},showDefault(){this.isFull=!0,this.objInfo.litpic=this.defaultPro}}},[["render",function(e,t,s,r,u,h){const y=f,_=b,k=m;return a(),n(_,{class:"item huodongitem"},{default:i((()=>[g(_,{class:"orderInfo flexb",onClick:t[2]||(t[2]=e=>h.toLink("showCode"))},{default:i((()=>[g(_,{class:x({hd_pic:!0,isFull:u.isFull||!s.objInfo.litpic})},{default:i((()=>[!u.isFull&&s.objInfo.litpic?(a(),n(_,{key:0,class:"imgMask"},{default:i((()=>[g(y,{mode:"aspectFill",class:"bottomImg",src:s.objInfo.litpic||u.defaultPro,onError:t[0]||(t[0]=e=>h.showDefault())},null,8,["src"])])),_:1})):p("",!0),g(y,{mode:"aspectFill",src:s.objInfo.litpic||u.defaultPro,onError:t[1]||(t[1]=e=>h.showDefault())},null,8,["src"])])),_:1},8,["class"]),g(_,{class:"hd_info"},{default:i((()=>[g(_,{class:"h4"},{default:i((()=>[d(c(s.objInfo.title),1)])),_:1}),g(_,{class:"addr"},{default:i((()=>[d(c(s.objInfo.addrname&&s.objInfo.addrname.length?s.objInfo.addrname[s.objInfo.addrname.length-1]:"")+" ",1),g(k),d(" "+c(s.objInfo.address),1)])),_:1}),g(_,{class:"date"},{default:i((()=>[d(c(h.timeTrans(s.objInfo.began))+" - "+c(h.timeTrans(s.objInfo.end)),1)])),_:1})])),_:1}),"3"==s.objInfo.state||0==s.objInfo.going&&0==s.objInfo.price||"4"==s.objInfo.state?(a(),n(_,{key:0,class:"state infoState"},{default:i((()=>[d(c("4"==s.objInfo.state?"已退款":0==s.objInfo.going||"0"==s.objInfo.going?"已过期":"已取消"),1)])),_:1})):p("",!0)])),_:1}),s.objInfo.price>0&&"4"!=s.objInfo.state||"1"==s.objInfo.state&&s.objInfo.going||"2"==s.objInfo.state?(a(),n(_,{key:0,class:"orderBtn flexb"},{default:i((()=>["1"==s.objInfo.state&&s.objInfo.going?(a(),o(l,{key:0},[g(_,{class:"btns flexb"},{default:i((()=>[g(_,{class:"flexb btn showCode",onClick:t[3]||(t[3]=e=>h.toLink("showCode"))},{default:i((()=>[g(_,{class:"icon"},{default:i((()=>[g(y,{mode:"aspectFill",src:`${u.imgPath}/code_icon.png?v=${u.imgVersion}`},null,8,["src"])])),_:1}),g(k,null,{default:i((()=>[d("电子票")])),_:1})])),_:1}),1!=s.objInfo.sign?(a(),n(_,{key:0,class:"flexb btn tuik",onClick:t[4]||(t[4]=e=>h.toLink("cancel"))},{default:i((()=>[g(k,null,{default:i((()=>[d(c(s.objInfo.price>0?"申请退票":"取消报名"),1)])),_:1})])),_:1})):p("",!0)])),_:1}),g(_,{class:"flexb right_ticket"},{default:i((()=>[g(_,{class:"ticket_info"},{default:i((()=>[d(c(s.objInfo.feetitle&&s.objInfo.price?s.objInfo.feetitle:"免费票"),1)])),_:1}),s.objInfo.price>0?(a(),n(_,{key:0,class:"ticket_price"},{default:i((()=>[d(c(u.globalData.appConfig.currency&&u.globalData.appConfig.currency.symbol||"￥"),1),g(_,{class:"b"},{default:i((()=>[d(c(s.objInfo.price.toString().split(".")[0]),1),parseInt(s.objInfo.price).toString().includes(".")?(a(),n(k,{key:0},{default:i((()=>[d("."+c(parseInt(s.objInfo.price).toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})):p("",!0)])),_:1})],64)):"2"==s.objInfo.state?(a(),n(_,{key:1,class:"btns flexb"},{default:i((()=>[g(_,{class:"flexb btn showCode",onClick:t[5]||(t[5]=e=>h.toLink("detail"))},{default:i((()=>[g(k,null,{default:i((()=>[d("去评价")])),_:1})])),_:1})])),_:1})):(a(),o(l,{key:2},[g(_,{class:"btns flexb"},{default:i((()=>["4"!=s.objInfo.state&&1!=s.objInfo.sign?(a(),n(_,{key:0,class:"btn flexb tuik",onClick:t[6]||(t[6]=e=>h.toLink("cancel"))},{default:i((()=>[g(k,null,{default:i((()=>[d("退款")])),_:1})])),_:1})):p("",!0)])),_:1}),g(_,{class:"state"},{default:i((()=>[d(c(0==s.objInfo.going||"0"==s.objInfo.going?"已过期":"已取消"),1)])),_:1})],64))])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-e8c2d13d"]]),xe=v();const Ce=X({props:{objInfo:{type:Object,default:{}},ind:{type:Number,default:0}},computed:{getState:()=>function(e){let a="";switch(e.orderstate){case"0":a="待付款";break;case"1":a=`还需邀请${e.havenumber}人`;break;case"3":a="交易成功";break;case"4":a="退款中";break;case"5":a=1==e.retState?"退款中，待商家处理":"待发货";break;case"6":a=1==e.retState?"退款中，待商家处理":"已发货";break;case"7":a="已退款";break;case"9":a=1==e.is_paytuikuanlogtic?""!=e.retExpnumber&&""!=e.retExpcompany?"已退货，待商家处理":"待上门取件退货":"待退货"}return a}},data:()=>({defaultPro:xe.globalData.masterDomain+"/static/images/good_default.png",globalData:xe.globalData,platForm:xe.globalData.platForm,imgpath:xe.globalData.imgPath+"/member/order/",masterDomain:xe.globalData.masterDomain,imgVersion:xe.globalData.imgVersion}),mounted(){},methods:{linkTo(e){const a=this;let o="";switch(e){case"detail":o=`${xe.globalData.appConfig.cfg_user_index}/orderdetail-awardlegou-${a.objInfo.id}.html`,xe.linkTo(o,!1,!1);break;case"pay":$("payorder",{objInfo:this.objInfo,ind:this.ind});break;case"receive":$("receive",{objInfo:this.objInfo,ind:this.ind});break;case"cancel":$("cancelorder",{objInfo:this.objInfo,ind:this.ind});break;case"share":"web"==xe.globalData.platForm&&$("share",{objInfo:this.objInfo,ind:this.ind})}},receive(){}}},[["render",function(e,t,u,h,y,_){const k=f,I=b,w=m,j=S;return a(),n(I,{class:"awardlegouitem item"},{default:i((()=>[g(I,{class:"store flexb"},{default:i((()=>[g(I,{class:"store_name flexb"},{default:i((()=>[g(k,{class:"icon",src:y.imgpath+"store_icon.png?v="+y.imgVersion,mode:"aspectFit"},null,8,["src"]),g(I,{class:"txt"},{default:i((()=>[d(c(u.objInfo.shopname),1)])),_:1})])),_:1}),g(I,{class:"order_state",style:s([5,6].includes(u.objInfo.orderstate)&&1==u.objInfo.retState||u.objInfo.orderstate>=7?"color:#FFB542;":"")},{default:i((()=>[d(c(_.getState(u.objInfo)),1)])),_:1},8,["style"])])),_:1}),g(I,{class:"order-content"},{default:i((()=>[g(I,{class:"prosbox",onClick:t[1]||(t[1]=e=>_.linkTo("detail"))},{default:i((()=>[g(I,{class:"pros_detail flexb"},{default:i((()=>[g(k,{class:"pro-img",src:u.objInfo.litpicpath||y.defaultPro,mode:"aspectFill",onError:t[0]||(t[0]=e=>u.objInfo.litpicpath=y.defaultPro)},null,8,["src"]),g(I,{class:"pro-info"},{default:i((()=>[g(I,{class:"pro_detail flexb"},{default:i((()=>[g(I,{class:"flex_l"},{default:i((()=>[g(I,{class:"pro-tit"},{default:i((()=>[d(c(u.objInfo.title),1)])),_:1}),"7"!=u.objInfo.orderstate&&u.objInfo.point>0?(a(),n(I,{key:0,class:"point"},{default:i((()=>[d("使用"),g(w,null,{default:i((()=>[d(c(u.objInfo.point),1)])),_:1}),d(c(y.globalData.appConfig.cfg_pointName||"积分"),1)])),_:1})):u.objInfo.point>0?(a(),n(I,{key:1,class:"point"},{default:i((()=>[g(w,null,{default:i((()=>[d(c(u.objInfo.point),1)])),_:1}),d(c(y.globalData.appConfig.cfg_pointName||"积分")+"已退还",1)])),_:1})):p("",!0)])),_:1}),g(I,{class:"pro-price order-count"},{default:i((()=>[g(I,{class:"num"},{default:i((()=>[d("x"+c(u.objInfo.procount),1)])),_:1}),g(I,{class:"flex_r flexb priceb"},{default:i((()=>[g(w,{class:"txt"},{default:i((()=>[d("实付")])),_:1}),g(I,{class:"tprice"},{default:i((()=>[g(w,{class:"symbol"},{default:i((()=>[d(c(y.globalData.appConfig&&y.globalData.appConfig.currency&&y.globalData.appConfig.currency.symbol||"￥"),1)])),_:1}),g(w,{class:"b"},{default:i((()=>[d(c(u.objInfo.totalPayPrice.split(".")[0]),1)])),_:1}),parseFloat(u.objInfo.totalPayPrice).toString().includes(".")?(a(),n(w,{key:0,class:"smNumber"},{default:i((()=>[d("."+c(parseFloat(u.objInfo.totalPayPrice).toString().split(".")[1]),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(I,{class:"btns_group flexb"},{default:i((()=>["0"==u.objInfo.orderstate?(a(),o(l,{key:0},[g(I,{class:"btn_cancel btn",onClick:t[2]||(t[2]=e=>_.linkTo("cancel"))},{default:i((()=>[d("取消订单")])),_:1}),g(I,{class:"btn_pay bgBtn btn",onClick:t[3]||(t[3]=e=>_.linkTo("pay"))},{default:i((()=>[d("去付款")])),_:1})],64)):p("",!0),"1"==u.objInfo.orderstate?(a(),n(j,{key:1,"open-type":"share",onClick:t[4]||(t[4]=r((e=>_.linkTo("share")),["stop"])),"data-orderInd":u.ind,style:{"margin-right":"0"},class:"btn_invite bgBtn btn"},{default:i((()=>[d("邀好友参与")])),_:1},8,["data-orderInd"])):p("",!0),"5"==u.objInfo.orderstate||"6"==u.objInfo.orderstate?(a(),o(l,{key:2},["6"==u.objInfo.orderstate&&1!=u.objInfo.retState?(a(),n(I,{key:0,class:"borderBtn btn",onClick:t[5]||(t[5]=e=>_.linkTo("receive"))},{default:i((()=>[d("确认收货")])),_:1})):p("",!0),g(I,{class:x({"btn_pay btn":!0,bgBtn:1!=u.objInfo.retState}),onClick:t[6]||(t[6]=e=>_.linkTo("detail"))},{default:i((()=>[d("查看活动结果")])),_:1},8,["class"])],64)):p("",!0),"7"==u.objInfo.orderstate?(a(),n(I,{key:3,class:"btn",onClick:t[7]||(t[7]=e=>_.linkTo("detail"))},{default:i((()=>[d("查看活动结果")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-190d8984"]]),De=v();const ve=X({emits:["changestate"],props:{modInfo:{type:Object,default:{mod:"",state:"",list:[],isload:!1,loadEnd:!1}},quan:{type:Number,default:0},modConfig:{type:Object,default:{}}},data:()=>({platForm:De.globalData.platForm,imgpath:De.globalData.imgPath+"/member/order/",masterDomain:De.globalData.masterDomain,imgVersion:De.globalData.imgVersion}),mounted(){},methods:{toQuan(){this.$emit("changestate")}}},[["render",function(e,s,r,u,m,h){const y=f,_=b,k=K(j("orderlist_shop"),le),I=K(j("orderlist_tuan"),se),w=K(j("orderlist_waimai"),de),C=K(j("orderlist_paotui"),pe),D=K(j("orderlist_travel"),ue),v=K(j("orderlist_education"),be),P=K(j("orderlist_homemaking"),he),$=K(j("orderlist_integral"),_e),F=K(j("orderlist_paimai"),Ie),M=K(j("orderlist_huodong"),je),S=K(j("orderlist_awardlegou"),Ce);return a(),n(_,{class:x(`listBox ${r.modInfo.mod}list`)},{default:i((()=>[("shop"==r.modInfo.mod||"tuan"==r.modInfo.mod)&&!r.modInfo.state&&r.quan>0?(a(),n(_,{key:0,class:"quanTip"},{default:i((()=>[g(_,{class:"flex_l",onClick:h.toQuan},{default:i((()=>[g(y,{class:"icon",src:m.imgpath+"ring.png?v="+m.imgVersion,mode:"aspectFit"},null,8,["src"]),r.quan>0?(a(),n(_,{key:0,class:"txt"},{default:i((()=>[d("您有"+c(r.quan)+"张团购券即将过期，请尽快使用！",1)])),_:1})):p("",!0)])),_:1},8,["onClick"]),g(_,{class:"flex_r"},{default:i((()=>[g(y,{class:"icon",src:m.imgpath+"arr_shop.png?v="+m.imgVersion,mode:"aspectFit"},null,8,["src"])])),_:1})])),_:1})):p("",!0),"paimai"!=r.modInfo.mod||r.modInfo.state?p("",!0):(a(),n(_,{key:1,class:"quanTip"},{default:i((()=>[g(_,{class:"flex_l"},{default:i((()=>[g(y,{class:"icon",src:m.imgpath+"ring.png?v="+m.imgVersion,mode:"aspectFit"},null,8,["src"]),g(_,{class:"txt"},{default:i((()=>[d("此页面状态/价格可能延迟，请进入拍品详情查看实时状态")])),_:1})])),_:1})])),_:1})),g(_,{class:"listConBox"},{default:i((()=>[(a(!0),o(l,null,t(r.modInfo.list,((e,t)=>(a(),o(l,{key:e.id},["shop"==r.modInfo.mod?(a(),n(k,{key:0,shopConfig:r.modConfig.shopConfig,ref_for:!0,ref:"order_shop",objInfo:e,ind:t},null,8,["shopConfig","objInfo","ind"])):"tuan"==r.modInfo.mod?(a(),n(I,{key:1,ref_for:!0,ref:"order_tuan",tuanConfig:r.modConfig.tuanConfig,objInfo:e,ind:t},null,8,["tuanConfig","objInfo","ind"])):"waimai"==r.modInfo.mod?(a(),n(w,{key:2,ref_for:!0,ref:"order_waimai",objInfo:e,ind:t},null,8,["objInfo","ind"])):"paotui"==r.modInfo.mod?(a(),n(C,{key:3,ref_for:!0,ref:"order_paotui",objInfo:e,ind:t},null,8,["objInfo","ind"])):"travel"==r.modInfo.mod?(a(),n(D,{key:4,ref_for:!0,ref:"order_travel",travelConfig:r.modConfig.travelConfig,objInfo:e,ind:t},null,8,["travelConfig","objInfo","ind"])):"education"==r.modInfo.mod?(a(),n(v,{key:5,ref_for:!0,ref:"order_education",objInfo:e,ind:t},null,8,["objInfo","ind"])):"homemaking"==r.modInfo.mod?(a(),n(P,{key:6,ref_for:!0,ref:"order_homemaking",objInfo:e,ind:t},null,8,["objInfo","ind"])):"integral"==r.modInfo.mod?(a(),n($,{key:7,ref_for:!0,ref:"order_integral",objInfo:e,ind:t},null,8,["objInfo","ind"])):"paimai"==r.modInfo.mod?(a(),n(F,{key:8,ref_for:!0,ref:"order_paimai",objInfo:e,ind:t},null,8,["objInfo","ind"])):"huodong"==r.modInfo.mod?(a(),n(M,{key:9,ref_for:!0,ref:"order_huodong",objInfo:e,ind:t},null,8,["objInfo","ind"])):"awardlegou"==r.modInfo.mod?(a(),n(S,{key:10,ref_for:!0,ref:"order_awardlegou",objInfo:e,ind:t},null,8,["objInfo","ind"])):p("",!0)],64)))),128)),g(_,{class:x({loadState:!0,noData:r.modInfo&&r.modInfo.list&&0==r.modInfo.list.length})},{default:i((()=>[r.modInfo.loadEnd?(a(),n(_,{key:0,class:"loadEnd"},{default:i((()=>[0==r.modInfo.list.length?(a(),n(_,{key:0,class:"noData_img"},{default:i((()=>[g(y,{src:`${m.imgpath}/noData.png?v=${m.imgVersion}`,mode:"aspectFill"},null,8,["src"])])),_:1})):p("",!0),g(_,{class:"p"},{default:i((()=>[d(c(r.modInfo.list.length?"已显示全部~":"暂无相关订单~"),1)])),_:1})])),_:1})):(a(),n(_,{key:1},{default:i((()=>[d(c(r.modInfo.isload||!r.modInfo.list||0==r.modInfo.list.length?"加载中...":"下拉加载更多"),1)])),_:1}))])),_:1},8,["class"])])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-a3b0a2a7"]]);const Pe=X({data:()=>({animationData:{},content:"提示内容",icon:""}),options:{multipleSlots:!0},methods:{showToast(e,a){var o=O({duration:300,timingFunction:"ease"});this.animation=o,o.opacity(1).step(),this.animationData=o.export(),this.content=e,this.icon=a||"",setTimeout(function(){o.opacity(0).step(),this.animationData=o.export()}.bind(this),1500)}},created:function(){}},[["render",function(e,o,t,l,s,r){const u=f,m=b;return a(),n(m,{class:"wx-toast-box",animation:s.animationData},{default:i((()=>[g(m,{class:"wx-toast-content"},{default:i((()=>[""!=s.icon?(a(),n(m,{key:0,class:"wx-toast-icon"},{default:i((()=>[g(u,{src:s.icon,mode:"aspectFit"},null,8,["src"])])),_:1})):p("",!0),g(m,{class:"wx-toast-toast"},{default:i((()=>[d(c(s.content),1)])),_:1})])),_:1})])),_:1},8,["animation"])}],["__scopeId","data-v-5ea59f62"]]),$e=v();const Fe=X({components:{toast:Pe},data:()=>({uniPlatform:"",imgstatic:`${$e.globalData.masterDomain}/static/images/miniprograme/payPop/`,imgVersion:$e.globalData.imgVersion,payLoading:!1,imgStaticPath:$e.globalData.imgStaticPath,imgPath:$e.globalData.imgPath,globalData:$e.globalData,paypwd:[],paypwdStr:"",payment:[],onChosePay:"balance",money:0,bouns:0,showPwdPop:!1,showCancelPop:!1,timeInfo:{dd:0,hh:0,ss:0,mm:0,showText:"0"},focus:!0,hasshowPwdPop:!1,checkIn:!1,interVal:null,payInterval:null,keyboardHeight:0,i:"",currency:{code:"RMB",name:"人民币",rate:"1",short:"元",symbol:"￥"},timeoutpay:!0,userid:$e.globalData.userid,keyboardShow:!1,userInfo:""}),props:{filterPay:{type:Boolean,default:!1},showPayPop:{type:Boolean,default:!1},action:{type:String,default:"payPhone"},service:{type:String,default:"siteConfig"},payInfo:{type:Object,default:{order_amount:"",order_sn:"",ordernum:"",service:"",timeout:0}},callType:{type:Number,default:0},needPayTime:{type:Boolean,default:!0},needSuccess:{type:Boolean,default:!0}},emits:["paypopb","keepToCall"],methods:{ready:function(){const e=this;var a=setInterval((function(){$e.globalData.appConfig&&$e.globalData.appConfig.currency&&(e.currency=$e.globalData.appConfig.currency,clearInterval(a))}),1e3)},inputCodeFn(){},getPayment(){const e=this;var a=$e.encodeUrl("service=siteConfig&action=payment");e.$ajax.get({url:"include/ajax.php?"+a}).then((a=>{var o=a.data;if(100==o.state){let a=$e.globalData.platForm;if("mp-weixin"==a)for(let t=0;t<o.info.length;t++){let a=o.info[t];("alipay"==a.pay_code||!e.userid&&"huoniao_bonus"==a.pay_code)&&o.info.splice(t,1)}else if("mp-toutiao"==a)for(let t=0;t<o.info.length;t++){let a=o.info[t];("alipay"==a.pay_code||"wxpay"==a.pay_code||!e.userid&&"huoniao_bonus"==a.pay_code)&&o.info.splice(t,1)}else if("web"==a&&(!e.userid||e.filterPay))for(let e=0;e<o.info.length;e++){"huoniao_bonus"==o.info[e].pay_code&&o.info.splice(e,1)}$e.globalData.userid&&!e.filterPay||(e.onChosePay=o.info[0].pay_code),e.payment=o.info}}))},getMemberInfo:function(){const e=this;var a="service=member&action=detail&id="+$e.globalData.userid,o=$e.encodeUrl(a);e.$ajax.get({url:"include/ajax.php?"+o}).then((a=>{100==a.data.state&&($e.globalData.userInfo=a.data.info,this.userInfo=$e.globalData.userInfo,e.money=1*a.data.info.money,e.bouns=1*a.data.info.bonus)}))},changePay(e){const a=this;var o=e.currentTarget.dataset.code;0!=e.currentTarget.dataset.click&&(a.onChosePay=o)},cancelConfirm(){this.showCancelPop=!0},cancelPay(){const e=this;clearInterval(e.interVal),e.showCancelPop=!1,e.showPwdPop=!1,this.$emit("paypopb",!1),e.interVal=null,e.onChosePay="balance","发布任务"==e.payInfo.subject&&k({delta:2,success:e=>{N({url:"web"==$e.globalData.platForm?"/taskmanage?index=0":"/pages/packages/task/taskmanage/taskmanage?index=0"})}})},keepPay(){this.showCancelPop=!1},toPay(){const e=this;"balance"==e.onChosePay?(e.showPwdPop=!0,e.keyboardShow=!0,e.hasshowPwdPop=!0):(console.log("开始支付"),e.checkPwd())},hidePwdPop(){const e=this;e.showPwdPop=!1,e.keyboardShow=!1,e.hasshowPwdPop=!1,e.paypwd=[],e.paypwdStr=""},focusin(){const e=this;e.hasshowPwdPop=!0,"web"!=e.uniplatform?e.focus=!0:e.keyboardShow=!0},showKeyboard(e){const a=this;e.detail.height&&a.keyboardHeight!=e.detail.height&&(a.keyboardHeight=e.detail.height),a.showPwdPop&&e.detail.height&&(a.hasshowPwdPop=!0,"web"!=a.uniplatform?a.focus=!0:(a.focus=!1,a.keyboardShow=!0))},goLink(e){var a=$e.globalData.appConfig.cfg_user_index+e.currentTarget.dataset.href;$e.linkTo(a)},inputPwd(e){const a=this;var o=e.detail.value,t=o.split("");if(t.length>6&&8!=e.detail.keyCode)return!1;a.paypwd=o.split(""),6==t.length&&a.checkPwd()},keyBoardIn(e){const a=this;a.paypwd.length>=6||(a.paypwd.push(e),6==a.paypwd.length&&a.checkPwd())},checkPwd(e){const a=this;if(a.checkIn||1!=a.userInfo.paypwdCheck&&!e&&"balance"==a.onChosePay)return!1;a.checkIn=!0;let o={service:a.service,action:a.action,ordernum:a.payInfo.ordernum,paytype:"pay"==a.action&&"balance"==a.onChosePay?"money":a.onChosePay};if("mp-weixin"==$e.globalData.platForm){let e="";if($e.globalData.appid)e=$e.globalData.appid;else{let a=uni.getAccountInfoSync();e=a.miniProgram&&a.miniProgram.appId||"",$e.globalData.appid=e}o.appid=e}"balance"==a.onChosePay?(o.useBalance=1,o.paypwd=a.paypwd.join(""),o.balance=a.payInfo.order_amount):o.useBalance=0,e||(o.final=1);let t=$e.globalData.platForm;if("mp-toutiao"==t)if("bytemini"==a.onChosePay){let e="";for(let t in o)e+=`&${t}=${o[t]}`;let a=`${$e.globalData.masterDomain}/include/ajax.php?${e}`;I({url:"/pages/redirect/index?url="+encodeURIComponent(a)})}else a.payRequest(o,(function(e){a.paySuccess(),a.paypwd=[],a.paypwdStr=""}));else if("mp-weixin"==t)"wxpay"==a.onChosePay?a.payRequest(o,(function(e){a.payBywxChat(e.data.info)})):a.payRequest(o,(function(e){a.paySuccess(),a.paypwd=[],a.paypwdStr=""}));else if("web"==t)if(!window.appBoolean||"wxpay"!=a.onChosePay&&"alipay"!=a.onChosePay)if("wxpay"==a.onChosePay||"alipay"==a.onChosePay){let e="";for(let a in o)e+=`&${a}=${o[a]}`;e=e.slice(1),location.href=`${$e.globalData.masterDomain}/include/ajax.php?${e}`}else a.payRequest(o,(function(e){a.paySuccess(),a.paypwd=[],a.paypwdStr=""}));else a.$ajax.post({url:$e.encodeUrl("include/ajax.php?mark=pay&app=1"),data:o}).then((e=>{100==e.data.state&&(console.log(11111),window.setupWebViewJavascriptBridge((function(o){o.callHandler("wxpay"==a.onChosePay?"wechatPay":"aliPay",{orderInfo:e.data.info},(function(e){}))})))}))},payRequest(e,a){const o=this;V({title:"支付中..."}),o.$ajax.post({url:$e.encodeUrl("include/ajax.php?mark=pay"),data:e}).then((e=>{A(),o.checkIn=!1,e.data.state&&100!=e.data.state?(o.$refs.toasts.showToast(e.data.info),o.paypwd=[],o.paypwdStr=""):100==e.data.state?a(e):(o.paypwd=[],o.paypwdStr="",o.$refs.toasts.showToast("网络请求失败，请稍后重新请求，错误代码："+JSON.stringify(e.data)))}))},payBywxChat(e){const a=this;console.log(e),uni.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:decodeURIComponent(e.paySign),success:function(e){a.paySuccess()},fail:function(e){console.log(e),a.$refs.toasts.showToast("支付失败！")}})},paybytoutiao(e){console.log(e)},initData(e){const a=this;a.$emit("keepToCall",{detail:e}),a.$emit("paypopb",!1),a.paypwd=[],a.onChosePay="balance",a.money=0,a.bouns=0,a.showPwdPop=!1,a.showCancelPop=!1,a.hasshowPwdPop=!1,a.getMemberInfo()},paySuccess(){const e=this;if(clearInterval(e.interVal),e.needSuccess){var a=e.imgPath+"/payPop/successIcon.png?v="+e.imgVersion;e.$refs.toasts.showToast("支付成功",a)}e.getPhoneInfo()},getPhoneInfo(){const e=this;var a="service=member&action=tradePayResult&order="+e.payInfo.ordernum;e.$ajax.post({url:"include/ajax.php?"+a}).then((a=>{var o=a.data;100==o.state&&e.initData(o)}))},setPayPwd:function(){const e=this;var a=this;if(a.loading)return!1;if(6!=a.paypwd.length)return a.$refs.toasts.showToast("请输入新密码"),!1;a.loading=!0;var o="service=member&action=updateAccount&do=paypwdAdd"+("&pay1="+a.paypwd.join("")+"&pay2="+a.paypwd.join("")),t=$e.encodeUrl(o);a.$ajax.post({url:"include/ajax.php?"+t}).then((o=>{var t=o.data;if(a.loading=!1,100==t.state){var l=e.imgPath+"/payPop/successIcon.png?v="+e.imgVersion;a.$refs.toasts.showToast("支付密码设置成功",l),a.checkPwd(1)}}))},payCutDown(e,a,o=0){const t=this;a=parseInt((new Date).valueOf()/1e3)+1800,e.order_amount>t.money&&(t.onChosePay=t.payment[0].pay_code),t.interVal&&clearInterval(t.interVal),t.timeInfo={dd:"0",hh:"00",mm:"00",ss:"00",showText:"0天0小时0分钟0秒"},t.interVal=setInterval((function(){var e=parseInt(Date.parse(new Date));if(1e3*a-e>0)var o=1e3*a-e;else o=0;o||clearInterval(t.interVal);var l=Math.floor(o/864e5),n=Math.floor(o/36e5%24),s=Math.floor(o/6e4%60),r=Math.floor(o/1e3%60),i={dd:l>9?l:"0"+l,hh:n>9?n:"0"+n,mm:s>9?s:"0"+s,ss:r>9?r:"0"+r,showText:l?l+"天":n?n+"小时":s?s+"分钟":r+"秒"};t.timeInfo=i}),1e3)},showtoast(){console.log("测试方法")},trueFun(){console.log("占位：函数 true 未声明")}},created(){const e=this;e.getPayment(),$e.globalData.userid&&e.getMemberInfo(),setTimeout((a=>{e.timeoutpay=!1}),400)},mounted(){const e=this;this.uniPlatform=q().uniPlatform,"web"==this.uniPlatform&&(this.focus=!1,this.hasshowPwdPop=!1),"{}"!=JSON.stringify($e.globalData.userInfo)?this.userInfo=$e.globalData.userInfo:z({key:"userid",success:a=>{$e.memberInfo(a.data,(function(a){e.userInfo=a}))}}),this.$nextTick((()=>this.ready()))},unmounted(){clearInterval(this.interVal)},watch:{showPayPop(e,a){if(e&&$e.globalData.iOSMiniPay_forbid)return E({title:"温馨提示",content:$e.globalData.iosMiniPay_msg||"十分抱歉，由于相关规范，iOS小程序不支持该功能。",showCancel:!1,success:e=>{e.confirm&&this.$emit("paypopb",!1)}}),!1;e&&this.filterPay&&"balance"==this.onChosePay&&(this.onChosePay=this.payment[0].pay_code)}}},[["render",function(e,u,h,y,_,k){const I=b,w=f,v=m,$=P,F=K(j("toast"),Pe);return _.globalData.iOSMiniPay_forbid?p("",!0):C((a(),n(I,{key:0,class:"payPopContainer"},{default:i((()=>[g(I,{class:x("payPopMask "+(h.showPayPop?"showPop":"")),onTouchmove:r(k.trueFun,["stop","prevent"])},null,8,["class","onTouchmove"]),_.payLoading?(a(),n(I,{key:0,class:"loading"},{default:i((()=>[g(w,{src:`${_.imgStaticPath}/loading.png?v=${_.imgVersion}`,mode:"aspectFill"},null,8,["src"])])),_:1})):p("",!0),g(I,{class:x("payPop payPhonePop "+(h.showPayPop?"showPop":""))},{default:i((()=>[g(I,{class:"payInfoShow"},{default:i((()=>[g(I,{class:"pi-title"},{default:i((()=>[d(c(h.payInfo.subject)+"需支付",1)])),_:1}),g(I,{class:"h2",onClick:k.showtoast},{default:i((()=>[_.currency?(a(),n(v,{key:0,class:"span"},{default:i((()=>[d(c(_.currency.symbol),1)])),_:1})):p("",!0),g(v,{class:"b",id:"amout"},{default:i((()=>[d(c(h.payInfo.order_amount||"0.00"),1)])),_:1})])),_:1},8,["onClick"]),h.needPayTime?(a(),n(I,{key:0,class:"p"},{default:i((()=>[d(" 支付时间: "),g(v,{class:"payCutDown span"},{default:i((()=>[g(v,{class:"em"},{default:i((()=>[d(c(_.timeInfo.hh),1)])),_:1}),d(" : "),g(v,{class:"em"},{default:i((()=>[d(c(_.timeInfo.mm),1)])),_:1}),d(" : "),g(v,{class:"em"},{default:i((()=>[d(c(_.timeInfo.ss),1)])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1}),g(I,{class:"payListBox"},{default:i((()=>[g(I,{class:"close_pay_pop",onClick:k.cancelConfirm},{default:i((()=>[g(w,{mode:"aspectFit",src:_.imgPath+"/payPop/close.png?v="+_.imgVersion},null,8,["src"])])),_:1},8,["onClick"]),g(I,{class:"ul"},{default:i((()=>[_.userid&&!h.filterPay&&(_.globalData.appConfig.ucenterLinks&&_.globalData.appConfig.ucenterLinks.indexOf("deposit")>-1||h.payInfo.order_amount<=_.money)?(a(),n(I,{key:0,class:x("check-item li "+("balance"==_.onChosePay&&h.payInfo.order_amount<=_.money?"paychosed":"")+" "+(h.payInfo.order_amount>_.money?"disabled_pay":"")),id:"balance","data-code":"balance",onClick:k.changePay,"data-click":h.payInfo.order_amount>_.money?0:1},{default:i((()=>[g(I,{class:"left_item div"},{default:i((()=>[g(I,{class:"check-item-img"},{default:i((()=>[g(w,{class:"img",mode:"aspectFit",src:_.imgPath+"/payPop/balance.png?v="+_.imgVersion},null,8,["src"])])),_:1}),g(I,{class:"check-item-txt"},{default:i((()=>[g(I,{class:"h3"},{default:i((()=>[d(" 余额 "),h.payInfo.order_amount<=_.money?(a(),n(v,{key:0},{default:i((()=>[d("(可用余额"+c(_.currency.symbol)+c(_.money)+")",1)])),_:1})):(a(),n(v,{key:1},{default:i((()=>[d("(余额不足，可用余额"+c(_.currency.symbol)+c(_.money)+")",1)])),_:1}))])),_:1})])),_:1})])),_:1}),g(I,{class:"check-item-right"},{default:i((()=>[g(I,{class:"checkbox-icon-round span"},{default:i((()=>[g(w,{mode:"aspectFiill",src:_.imgPath+"/payPop/chosed.png?v="+_.imgVersion},null,8,["src"])])),_:1})])),_:1}),h.payInfo.order_amount>_.money?(a(),n(I,{key:0,class:"investMoney","data-href":"/deposit.html?paytype=deposit",onClick:k.goLink},{default:i((()=>[d("充值")])),_:1},8,["onClick"])):p("",!0)])),_:1},8,["class","onClick","data-click"])):p("",!0),(a(!0),o(l,null,t(_.payment,((e,t)=>(a(),o(l,{key:t},["huoniao_bonus"==e.pay_code&&h.filterPay?p("",!0):(a(),n(I,{key:0,class:x("check-item li "+(e.pay_code==_.onChosePay?"paychosed":"")+"  "+(h.payInfo.order_amount>_.bouns&&"huoniao_bonus"==e.pay_code?"disabled_pay":"")),"data-code":e.pay_code,"data-click":h.payInfo.order_amount>_.bouns&&"huoniao_bonus"==e.pay_code?0:1,onClick:k.changePay},{default:i((()=>[g(I,{class:"left_item div"},{default:i((()=>[g(I,{class:"check-item-img"},{default:i((()=>["huoniao_bonus"==e.pay_code?(a(),n(w,{key:0,class:"img",mode:"aspectFit",src:_.imgPath+"/payPop/bonus_pay.png?v="+_.imgVersion},null,8,["src"])):(a(),n(w,{key:1,class:"img",mode:"aspectFit",src:e.pay_icon},null,8,["src"]))])),_:2},1024),g(I,{class:"check-item-txt"},{default:i((()=>["huoniao_bonus"==e.pay_code?(a(),n(I,{key:0,class:"h3"},{default:i((()=>[d(c(e.pay_name)+" ",1),h.payInfo.order_amount<=_.bouns?(a(),n(v,{key:0},{default:i((()=>[d("(可用余额"+c(_.currency.symbol)+c(_.bouns)+")",1)])),_:1})):(a(),n(v,{key:1},{default:i((()=>[d("(余额不足，可用余额"+c(_.currency.symbol)+c(_.bouns)+")",1)])),_:1}))])),_:2},1024)):(a(),n(I,{key:1,class:"h3"},{default:i((()=>[d(c(e.pay_name),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),h.payInfo.order_amount>_.bouns&&"huoniao_bonus"==e.pay_code?(a(),n(I,{key:0,class:"investMoney",onClick:k.goLink,"data-href":"/recharge.html"},{default:i((()=>[d("充值")])),_:1},8,["onClick"])):(a(),n(I,{key:1,class:"check-item-right"},{default:i((()=>[g(I,{class:"checkbox-icon-round span"},{default:i((()=>[g(w,{mode:"aspectFiill",src:_.imgPath+"/payPop/chosed.png?v="+_.imgVersion},null,8,["src"])])),_:1})])),_:1}))])),_:2},1032,["class","data-code","data-click","onClick"]))],64)))),128))])),_:1})])),_:1}),g(I,{class:"btn_pay a",onClick:k.toPay},{default:i((()=>[g(v,{style:{display:"block"},class:"span"},{default:i((()=>[d("立即付款")])),_:1})])),_:1},8,["onClick"]),g(I,{class:x("payCancelMask "+(_.showCancelPop?"showPop":""))},null,8,["class"]),g(I,{class:x("payCancelPop "+(_.showCancelPop?"showPop":"")),style:s(h.needPayTime?"":"height:250rpx;")},{default:i((()=>[g(I,{class:"h4"},{default:i((()=>[d("确定放弃本次付款？")])),_:1}),h.needPayTime?(a(),n(I,{key:0,class:"p"},{default:i((()=>[d(" 您的订单在 "),g(v,{class:"daojs_order span"},{default:i((()=>[d(c(_.timeInfo.showText),1)])),_:1}),d(" 内未支付将被取消， 请尽快完成支付 ")])),_:1})):p("",!0),g(I,{class:"payBtns"},{default:i((()=>[g(I,{class:"cancelPay a",onClick:k.cancelPay},{default:i((()=>[d("放弃")])),_:1},8,["onClick"]),g(I,{class:"keepPay a",onClick:k.keepPay},{default:i((()=>[d("继续支付")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["class","style"])])),_:1},8,["class"]),g(I,{class:"inputBox"},{default:i((()=>[g($,{type:"number","hold-keyboard":!0,focus:_.hasshowPwdPop&&_.focus,class:"keyInp",onKeyboardheightchange:k.showKeyboard,onInput:k.inputPwd,maxlength:"6",modelValue:_.paypwdStr,"onUpdate:modelValue":u[0]||(u[0]=e=>_.paypwdStr=e)},null,8,["focus","onKeyboardheightchange","onInput","modelValue"])])),_:1}),g(I,{class:x("payPwdPop "+(_.showPwdPop?"showPop":""))},{default:i((()=>[g(I,{class:"payBackBtn a",onClick:k.hidePwdPop},{default:i((()=>[g(w,{src:_.imgPath+"/payPop/arr_back.png?v="+_.imgVersion,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"]),g(I,{class:"h4"},{default:i((()=>[d(c(1==_.userInfo.paypwdCheck?"输入":"设置")+"支付密码",1)])),_:1}),g(I,{class:"payPwdBox",style:s("padding-bottom:"+(_.keyboardHeight+10)+"px;")},{default:i((()=>[g(I,{class:"p"},{default:i((()=>[d("请"+c(1==_.userInfo.paypwdCheck?"输入":"设置")+"6位数字密码确认支付",1)])),_:1}),g(I,{class:"payPwdInp"},{default:i((()=>[g(I,{class:"ul",onClick:k.focusin},{default:i((()=>[(a(),o(l,null,t(6,((e,o)=>g(I,{class:"li",key:o},{default:i((()=>[_.paypwd[o]||0==_.paypwd[o]?(a(),n(v,{key:0,class:"em"},{default:i((()=>[d("•")])),_:1})):p("",!0)])),_:2},1024))),64))])),_:1},8,["onClick"])])),_:1}),1==_.userInfo.paypwdCheck?(a(),n(I,{key:0,class:"fpwtbox"},{default:i((()=>[g(I,{"data-href":"/security-paypwdEdit.html?step=2",class:"fpwt a",onClick:k.goLink},{default:i((()=>[d("忘记密码?")])),_:1},8,["onClick"])])),_:1})):(a(),n(I,{key:1,class:"spwtbox"},{default:i((()=>[g(I,{class:"p"},{default:i((()=>[d("·避免使用连续或重复数字，类似“123456”“112233”")])),_:1}),g(I,{class:"p"},{default:i((()=>[d("·避免使用手机号、证件号中的连续数字")])),_:1})])),_:1})),1!=_.userInfo.paypwdCheck?(a(),n(I,{key:2,class:"setPwdUp",onClick:k.setPayPwd},{default:i((()=>[d("确认并支付")])),_:1},8,["onClick"])):p("",!0)])),_:1},8,["style"]),"web"==_.uniPlatform?(a(),n(I,{key:0,class:x({keyboard:!0,showKeyBoard:_.keyboardShow})},{default:i((()=>[g(I,null,{default:i((()=>[g(v,{onClick:u[1]||(u[1]=e=>k.keyBoardIn(1))},{default:i((()=>[d("1")])),_:1}),g(v,{onClick:u[2]||(u[2]=e=>k.keyBoardIn(2))},{default:i((()=>[d("2")])),_:1}),g(v,{onClick:u[3]||(u[3]=e=>k.keyBoardIn(3))},{default:i((()=>[d("3")])),_:1}),g(v,{onClick:u[4]||(u[4]=e=>k.keyBoardIn(4))},{default:i((()=>[d("4")])),_:1}),g(v,{onClick:u[5]||(u[5]=e=>k.keyBoardIn(5))},{default:i((()=>[d("5")])),_:1}),g(v,{onClick:u[6]||(u[6]=e=>k.keyBoardIn(6))},{default:i((()=>[d("6")])),_:1}),g(v,{onClick:u[7]||(u[7]=e=>k.keyBoardIn(7))},{default:i((()=>[d("7")])),_:1}),g(v,{onClick:u[8]||(u[8]=e=>k.keyBoardIn(8))},{default:i((()=>[d("8")])),_:1}),g(v,{onClick:u[9]||(u[9]=e=>k.keyBoardIn(9))},{default:i((()=>[d("9")])),_:1}),g(v,{class:"none"}),g(v,{onClick:u[10]||(u[10]=e=>k.keyBoardIn(0))},{default:i((()=>[d("0")])),_:1}),g(v,{class:"backSpace",style:s(`background: url(${_.imgstatic}del_num.png) no-repeat 50%/60rpx;`),onClick:u[11]||(u[11]=e=>_.paypwd=_.paypwd.slice(0,-1))},null,8,["style"])])),_:1})])),_:1},8,["class"])):p("",!0)])),_:1},8,["class"]),g(I,{style:{position:"relative","z-index":"9999999999"}},{default:i((()=>[g(F,{id:"toast",ref:"toasts"},null,512)])),_:1})])),_:1},512)),[[D,!_.timeoutpay]])}],["__scopeId","data-v-5a0d97ac"]]);var Me;const Se=X({props:{model:{type:Boolean,default:!1},confirmBtn:{type:Object,default:{text:"确定",style:"border-right:0rpx;border-radius:0rpx 0rpx 10rpx 0rpx"}},cancelBtn:{type:Object,default:{text:"取消",style:"border-radius:0rpx 0rpx 0rpx 10rpx"}},content:{type:Array,default:[{text:"弹窗",style:""}]},getCancelFn:{type:Function,default:e=>{}},getConfirmFn:{type:Function,default:e=>{}}},mounted(){Me=this},methods:{confirmFn(){Me.$emit("models",!1),this.getConfirmFn()},cancelFn(){Me.$emit("models",!1),this.getCancelFn()}}},[["render",function(e,f,u,m,h,y){const _=b;return u.model?(a(),n(_,{key:0,class:"shellModel",onClick:y.cancelFn},{default:i((()=>[g(_,{class:"dialog",onClick:f[0]||(f[0]=r((()=>{}),["stop"]))},{default:i((()=>[g(_,{class:"content"},{default:i((()=>[(a(!0),o(l,null,t(u.content,((e,o)=>(a(),n(_,{class:"text",key:o,style:s(e.style)},{default:i((()=>[d(c(e.text),1)])),_:2},1032,["style"])))),128))])),_:1}),g(_,{class:"btn"},{default:i((()=>[g(_,{class:"confirm btn_a",style:s(u.cancelBtn.style),onClick:y.cancelFn},{default:i((()=>[d(c(u.cancelBtn.text),1)])),_:1},8,["style","onClick"]),g(_,{class:"cancel btn_a",style:s(u.confirmBtn.style),onClick:y.confirmFn},{default:i((()=>[d(c(u.confirmBtn.text),1)])),_:1},8,["style","onClick"])])),_:1})])),_:1})])),_:1},8,["onClick"])):p("",!0)}],["__scopeId","data-v-4a96cb29"]]);const Te=X({emits:["hidepop"],props:{maskClick:{type:String,default:""},showPop:{type:Boolean,default:!1},slideTop:{type:Boolean,default:!1},slidetopFixed:{type:String,default:"auto"},zIndex:{type:Number,default:200},showLoad:{type:Boolean,default:!1}},watch:{showPop:function(e){if("web"==q().uniPlatform)if(e){var a=function(e){e.preventDefault()};document.body.style.overflow="hidden",document.addEventListener("touchmove",a,!1)}else{a=function(e){e.preventDefault()};document.body.style.overflow="",document.removeEventListener("touchmove",a,!1)}}},methods:{hidepop(){const e=this;e.maskClick&&e.$emit("hidepop",e.maskClick)}}},[["render",function(e,o,t,l,c,f){const u=b;return a(),n(u,{class:"popContainerBox",onTouchmove:o[0]||(o[0]=r((()=>{}),["stop"])),onTouch:o[1]||(o[1]=r((()=>{}),["stop"]))},{default:i((()=>[g(u,{class:x({mask:!0,showPop:t.showPop}),onClick:f.hidepop,style:s("z-index:"+t.zIndex)},null,8,["class","onClick","style"]),g(u,{class:x({popConBox:!0,showPop:t.showPop,slideTop:t.slideTop}),style:s((t.slideTop?"top:0; padding-top:"+t.slidetopFixed+"; bottom:auto;":"")+"z-index:"+t.zIndex)},{default:i((()=>[t.showLoad?(a(),n(u,{key:0,class:"loadBox"},{default:i((()=>[g(u,{class:"load"},{default:i((()=>[d("Loading...")])),_:1})])),_:1})):p("",!0),R(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-4f970af2"]]);const Be=[{mod:"shop",modName:"商城订单",shortName:"商城",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"unpaid"},{tabName:"待使用",state:"6,3",count:0,key:"tobeuse"},{tabName:"待分享",state:"6,4",count:0,key:"tobefenx"},{tabName:"待发货",state:"1",count:0,key:"ongoing"},{tabName:"待收货",state:"6",count:0,key:"recei"},{tabName:"待评价",state:"5",count:0,key:"rates"},{tabName:"已过期",state:"6,5",count:0,key:"tobeguoqi"},{tabName:"退款/售后",state:"link&refund",count:0,key:""}]},{mod:"waimai",modName:"外卖订单",shortName:"外卖",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"state0"},{tabName:"待评价",state:"1",count:0,key:"state1"},{tabName:"退款/售后",state:"&refund=1",count:0,key:"totalRefund"}]},{mod:"paotui",modName:"跑腿订单",shortName:"跑腿",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"state0"},{tabName:"进行中",state:"9",count:0,key:"state1"},{tabName:"待评价",state:"8",count:0,key:"state5"},{tabName:"退款",state:"&refund=1",count:0,key:"totalRefund"}]},{mod:"travel",modName:"旅游出行",shortName:"旅游",placeholder:"搜索商品/店铺",shai:1,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"state0"},{tabName:"待使用",state:"1",count:0,key:"state1"},{tabName:"退款",state:"8",count:0,key:"state8"}],shaiObj:{key:"type",val:"",list:[{name:"全部",val:""},{name:"景点门票",val:"1"},{name:"一日游",val:"2&subtype=0"},{name:"跟团游",val:"2&subtype=1"},{name:"酒店/民宿",val:"3"},{name:"签证",val:"4"}]}},{mod:"education",modName:"教育培训",shortName:"教育",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"state0"},{tabName:"已付款",state:"1",count:0,key:"state1"}]},{mod:"homemaking",modName:"家政服务",shortName:"家政",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"state0"},{tabName:"待确认",state:"1",count:0,key:"state1"},{tabName:"待服务",state:"20",count:0,key:"state20"},{tabName:"退款售后",state:"8",count:0,key:"state8"}]},{mod:"integral",modName:"积分兑换",shortName:"积分",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待发货",state:"1",count:0,key:"ongoing"},{tabName:"待收货",state:"6",count:0,key:"recei"}]},{mod:"tuan",modName:"团购秒杀",shortName:"团购",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待付款",state:"0",count:0,key:"unpaid"},{tabName:"待分享",state:"8",count:0,key:"share"},{tabName:"待使用",state:"1",count:0,key:"ongoing"},{tabName:"待收货",state:"6",count:0,key:"recei"},{tabName:"已过期",state:"2",count:0,key:"expired"},{tabName:"退款中",state:"4",count:0,key:"refunded"},{tabName:"待评价",state:"5",count:0,key:"rates"},{tabName:"已退款",state:"7",count:0,key:"closed"}]},{mod:"paimai",modName:"拍卖",shortName:"拍卖",placeholder:"搜索商品/店铺",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"参拍中",state:"1",count:0,key:"state1"},{tabName:"待补款",state:"7",count:0,key:"state7"},{tabName:"已获拍",state:"6,3,4",count:0,key:"",levelList:[{tabName:"待发货",state:"6",count:0,key:"state6"},{tabName:"已发货",state:"3",count:0,key:"state3"},{tabName:"已完成",state:"4",count:0,key:"state4"}]},{tabName:"未获拍",state:"5",count:0,key:"state5"}]},{mod:"huodong",modName:"同城活动",shortName:"活动",placeholder:"搜索活动",shai:0,tabList:[{tabName:"待使用",state:"1",count:0,key:"involved"},{tabName:"历史票",state:"99",count:0,key:"refund,cancel,success"}]},{mod:"awardlegou",modName:"有奖乐购",shortName:"乐购",placeholder:"搜索商品/商家",shai:0,tabList:[{tabName:"全部",state:"",count:0,key:"totalCount"},{tabName:"待邀请",state:"2",count:0,key:"daiyaoqing"},{tabName:"待发货",state:"5",count:0,key:"daifahuo"},{tabName:"已发货",state:"6",count:0,key:"yifahuo"},{tabName:"已退款",state:"9,9",count:0,key:"ytuikuan"}]}],Le=v();const Oe=X({data:()=>({globalData:Le.globalData,imgpath:Le.globalData.imgPath+"/member/order/",imgVersion:Le.globalData.imgVersion,platForm:Le.globalData.platForm,tabTop:0,isAndroid:!1,mod:"",old_mod:"",real_mod:"",modArr:[],currMod:{},levelList:[],masterDomain:Le.globalData.masterDomain,title:"",showPop:!1,shaiShowPop:!1,slideShow:!1,slideShaiShow:!1,shopQuan:0,payComp:{showPayPop:!1,service:"",action:"pay",payInfo:{}},showModel:!1,modelType:"",orderInfo:{},hdDetail:{},orderInd:"",content:{cancel:[{text:"确认要取消订单吗",style:"font-size:32rpx; font-weight:bold; color:#000; "},{text:"订单一旦取消不可恢复",style:"font-size:24rpx; color:#666; margin-top:10rpx;"}],tui:[{text:"确认要取消订单吗",style:"font-size:32rpx; font-weight:bold; color:#000; "},{text:"订单一旦取消不可恢复",style:"font-size:24rpx; color:#666; margin-top:10rpx;"}],del:[{text:"确认要删除订单吗",style:"font-size:32rpx; font-weight:bold; color:#000; "},{text:"订单一旦删除不可恢复",style:"font-size:24rpx; color:#666; margin-top:10rpx;"}],receive:[{text:"确定要收货吗？",style:"font-size:32rpx; font-weight:bold; color:#000; "},{text:"确定后费用将直接转至卖家账户！",style:"font-size:24rpx; color:#666; margin-top:10rpx;"}]},cancelBtns:{cancel:{cancelBtn:{text:"取消",style:"border-radius:0rpx 0rpx 0rpx 30rpx; color:#333; font-size:30rpx;"},confirmBtn:{text:"确定",style:"border-radius:0rpx 0rpx 30rpx 0rpx; font-weight:bold; color:#F23D18;"}},tui:{cancelBtn:{text:"再想想",style:"border-radius:0rpx 0rpx 0rpx 10rpx; color:#666; font-size:30rpx;"},confirmBtn:{text:"申请退票",style:"border-radius:0rpx 0rpx 10rpx 0rpx; color:#F23D18; font-weight:bold;"}}},offTop:0,showBottomPop:!1,cardnumUrl:"",is_person:!1,payFrom:"",wuliu_opt:"",shareInfo:{},modConfig:{},urlParam:{},allModOrder:[],click_disabled:!1,tabHeight:0,showTabBg:!1,inpFocus:!1,appFullscreen:!1}),computed:{timeTrans:()=>function(e,a=0){const o=Le.dateFormatter(e),t=o.year,l=o.month,n=o.day,s=o.hour,r=o.minute;o.second;let i=Le.dateFormatter(parseInt((new Date).valueOf()/1e3));const d=i.year;i.month;let c="";return c=t==d&&1!=a?l+"/"+n+" "+s+":"+r:t+"/"+l+"/"+n+" "+s+":"+r,c},getShaiName:()=>function(e){let a="",o=e&&e.shaiObj&&e.shaiObj.val;if(!o)return a;let t=e.shaiObj.list.find((e=>e.val==o));return a=t?t.name:"筛选",a}},onLoad(e){const a=this;if(w({title:"我的订单"}),"web"==Le.globalData.platForm&&(document.title="我的订单"),!Le.loginCheck())return!1;for(let o in e)a.$set(a.urlParam,o,e[o]);"web"!=a.platForm?this.$nextTick((e=>{var o=uni.getMenuButtonBoundingClientRect();U().in(this).select(".head .headerCon").boundingClientRect((e=>{a.offTop=-(e.height-o.height)/2-(Le.globalData.navTop-o.top),Le.globalData.biasTop_88=a.offTop})).exec()})):(Le.globalData.appBoolean&&e.hasOwnProperty("appFullScreen")&&(a.appFullscreen=!0),window.navigator.userAgent.toLowerCase().match(/micromessenger/)?window.jWeixin.miniProgram.getEnv((function(o){if(o.miniprogram){let o=[];for(let a in e)o.push(a+"="+e[a]);window.jWeixin.miniProgram.redirectTo({url:`${a.pages.order}?${o.join("&")}`,complete:function(e){console.log(e)}})}})):window.navigator.userAgent.toLowerCase().includes("toutiaomicroapp")&&console.log("抖音小程序")),"web"==a.platForm?a.tabTop=W(88):"mp-weixin"==a.platForm&&(a.tabTop=Le.globalData.navTop+Le.globalData.biasTop_88+W(176)),"web"==a.globalData.platForm&&a.globalData.appBoolean&&window.Android&&(a.isAndroid=!0),a.getSiteMod(e),H("payorder",(function(e){a.payOrder(e)})),H("cancelorder",(function(e){e.opt&&"refund_cancel"==e.opt?(a.orderInfo=e.objInfo,a.orderInd=e.ind,a.cancelrefund()):a.cancelOrder(e)})),H("delorder",(function(e){a.delOrder(e)})),H("showwuliu",(function(e){if(a.orderInfo=e.objInfo,a.wuliu_opt=e.opt||"","huodong"==a.currMod.mod&&e.opt&&"hdDetail"==e.opt)a.getHdDetail();else if("tuan"==a.currMod.mod||"travel"==a.currMod.mod)a.cardnumUrl=encodeURIComponent(a.orderInfo.cardnumUrl);else if("homemaking"==a.currMod.mod)if("confirm"==e.opt){if(a.orderInfo.price<=0)return a.confirmHomeOrder(),!1;a.getOrderDetail(a.currMod.mod)}else e.opt;a.showBottomPop=!0})),H("receive",(function(e){a.confirmOrder(e)})),H("share",(function(e){a.orderInd=e.ind,a.orderInfo=e.objInfo;let o="",t="",l="",n="";if("shop"==a.currMod.mod||"tuan"==a.currMod.mod){let e="shop"==a.currMod.mod?a.orderInfo.product[0]:a.orderInfo.product;o=`${Le.globalData.masterDomain}/${a.currMod.mod}/${a.currMod.mod,"dindan"}.html?id=${a.orderInfo.pinid}`,t=e.litpic,n="快来和我一起拼团吧",l=e.title}else"awardlegou"==a.currMod.mod&&(o=`${Le.globalData.masterDomain}/${a.currMod.mod}/detail-${a.orderInfo.foodid}.html?pinid=${a.orderInfo.pinid}`,t=a.orderInfo.litpicpath,n=a.orderInfo.title,l=a.orderInfo.title);a.shareInfo={url:o,litpic:t,title:n,description:l};let s=Le.globalData.userid?"fromShare="+Le.globalData.userid:"";a.$refs.sharePop.shareLink=`${o}${o.includes("?")?"&":"?"}${s}`,a.$refs.sharePop.shareFn(1)}))},onUnload(e){Q("payorder"),Q("cancelorder"),Q("delorder"),Q("showwuliu"),Q("receive"),Q("share")},onPageScroll({scrollTop:e}){const a=this;if("integral"!=a.currMod.mod)return!1;if(a.tabHeight)a.tabHeight>e&&a.showTabBg?a.showTabBg=!1:a.tabHeight<=e&&!a.showTabBg&&(a.showTabBg=!0);else{U().in(this).select(".integralTabBox").boundingClientRect((({height:o})=>{a.tabHeight=o,a.tabHeight>e&&a.showTabBg?a.showTabBg=!1:a.tabHeight<=e&&!a.showTabBg&&(a.showTabBg=!0)})).exec()}},onReachBottom(){const e=this;if(e.currMod.isload||e.currMod.loadEnd)return!1;e.getorderlist()},onPullDownRefresh(){setTimeout((()=>{Y()}),1e3),this.initModData()},onShareAppMessage(e){const a=this;if("button"===e.from){a.orderInd=e.target.dataset.orderind,a.orderInfo=a.currMod.list[e.target.dataset.orderind];let o="",t="",l="",n="";if("shop"==a.currMod.mod||"tuan"==a.currMod.mod){let e="shop"==a.currMod.mod?a.orderInfo.product[0]:a.orderInfo.product;o=`${Le.globalData.masterDomain}/${a.currMod.mod}/dindan-${a.orderInfo.pinid}.html`,t="快来和我一起拼团吧",l=e.litpic,n="shop"==a.currMod.mod?`/pages/packages/shop/dindan/dindan?id=${a.orderInfo.pinid}`:"/pages/redirect/index?url="+encodeURIComponent(o)}else"awardlegou"==a.currMod.mod&&(o=`${Le.globalData.masterDomain}/${a.currMod.mod}/detail-${a.orderInfo.foodid}.html?pinid=${a.orderInfo.pinid}`,n="/pages/redirect/index?url="+encodeURIComponent(o),l=a.orderInfo.litpicpath,t=a.orderInfo.title);return{title:t,imageUrl:l,path:n}}return{title:a.mod?a.currMod.modName:"我的订单",desc:Le.globalData.siteConfig.description}},onShareTimeline(){return{title:this.mod?this.currMod.modName:"我的订单",imageUrl:Le.globalData.siteConfig.sharePic?Le.globalData.siteConfig.sharePic:Le.globalData.masterDomain+"/include/json.php?action=getSystemLogo"}},methods:{initPage(e){const a=this;e.mod&&(a.mod=e.mod,a.old_mod=e.mod,a.real_mod=e.mod),a.initModData(e.mod),"web"==a.uniPlatform&&(window.document.title=a.mod&&a.currMod.modName||"我的订单")},initModData:function(){const e=this;let a=e.modArr.map((a=>{let o=e.currMod.state?e.currMod.state:e.urlParam.state?e.urlParam.state:"huodong"==a.mod?"1":"",t={...a,isload:!1,loadEnd:!1,page:1,state:o,list:[]};return a.mod==e.real_mod&&(e.currMod=t),t}));e.urlParam.type&&e.currMod.shaiObj&&(e.currMod.shaiObj.val=e.urlParam.type),e.modArr=a,e.real_mod||(e.currMod=e.modArr[0]),"shop"!=e.currMod.mod&&"tuan"!=e.currMod.mod&&"travel"!=e.currMod.mod||(e.modConfig[e.currMod.mod]?"travel"!=e.currMod.mod&&e.getQuanNum():e.getModConfig()),e.getorderlist()},toSearch(e){this.title=e,this.initLoadList()},changeType(e){const a=this;a.currMod.shaiObj.val=e.val,a.slideShaiShow=!1,a.initLoadList()},async getQuanNum(){const e=this;e.shopQuan=0;let a="service="+e.currMod.mod+"&action=getMyCouponExpireCount";var o=Le.encodeUrl(a);let t=(await e.$ajax.post({url:"include/ajax.php?",data:o})).data;100==t.state&&(e.shopQuan=t.info)},async getorderlist(){const e=this;if(e.currMod.isload)return!1;e.currMod.isload=!0;let a="&state="+e.currMod.state+"&title="+e.title+"&page="+e.currMod.page+"&pageSize=10",o="service="+e.currMod.mod+"&action=orderList"+a;"waimai"==e.currMod.mod?o="service="+e.currMod.mod+"&action=order"+a:"paotui"==e.currMod.mod?o="service=waimai&action=paotuiOrder&userid="+Le.globalData.userid+a:"huodong"==e.currMod.mod&&(o="service=huodong&action=joinList"+a),e.currMod.shai&&""!=e.currMod.shaiObj.val&&(o=o+"&"+e.currMod.shaiObj.key+"="+e.currMod.shaiObj.val);var t=Le.encodeUrl(o);1==e.currMod.page&&(e.currMod.list=[],e.currMod.loadEnd=!1);let l=await e.$ajax.post({url:"include/ajax.php?",data:t});if(e.currMod.isload=!1,100==l.data.state){let a=e.currMod.list;if(e.$set(e.currMod,"list",a.concat(l.data.info.list)),e.currMod.page=e.currMod.page+1,(e.currMod.page>l.data.info.pageInfo.totalPage||0==l.data.info.list.length)&&(e.currMod.isload=!0,e.currMod.loadEnd=!0),e.checkTabCount(l.data.info.pageInfo),e.currMod.tabList&&e.currMod.tabList.length){let a=e.currMod.tabList.find((a=>a.state==e.currMod.state||e.currMod.state&&a.state.indexOf(e.currMod.state)>-1));a&&a.hasOwnProperty("count")&&a.count<=e.currMod.list.length&&a.state&&(e.currMod.isload=!0,e.currMod.loadEnd=!0)}}else e.currMod.isload=!0,e.currMod.loadEnd=!0},checkTabCount(e){const a=this;switch(a.currMod.mod){case"waimai":case"paotui":case"tuan":case"paimai":case"shop":case"education":case"awardlegou":case"homemaking":case"integral":case"travel":for(let o=0;o<a.currMod.tabList.length;o++){let t=a.currMod.tabList[o],l=0;if(t.hasOwnProperty("levelList")&&t.levelList.length){for(let o=0;o<t.levelList.length;o++)l+=e[t.levelList[o].key],a.$set(t.levelList[o],"count",e[t.levelList[o].key]);a.$set(t,"count",l)}else a.$set(t,"count",e[t.key])}break;case"huodong":for(let o=0;o<a.currMod.tabList.length;o++){let t=a.currMod.tabList[o],l=0;if(t.key&&t.key.includes(",")){let o=t.key.split(",");for(let a=0;a<o.length;a++)l+=e[o[a]];a.$set(t,"count",l)}else a.$set(t,"count",e[t.key])}}},initLoadList(){const e=this;e.currMod.isload=!1,e.currMod.loadEnd=!1,e.currMod.page=1,e.getorderlist()},changeModState(e,a=0){const o=this;o.slideShaiShow=!1;let t=e.state;if("link&refund"==t){let e=`${Le.globalData.appConfig.cfg_user_index}/refundlist_shop.html`;return Le.linkTo(e,!1,!1),!1}if(o.currMod.state==t)return!1;!a&&t.includes(",")&&e.hasOwnProperty("levelList")?o.currMod.state=t.split(",")[0]:o.currMod.state=t,a||(e.hasOwnProperty("levelList")&&Array.isArray(e.levelList)?o.levelList=e.levelList:o.levelList=[]),o.initLoadList()},changeQuanState(){let e=this.currMod.tabList.find((e=>"tobeuse"==e.key));this.changeModState(e)},choseMod(e){const a=this;if(a.currMod=e,a.old_mod=a.mod,a.real_mod=e.mod,("integral"==e.mod||"huodong"==e.mod||a.mod)&&(a.mod=e.mod),a.slideShow=!1,a.initLoadList(),"web"==a.platForm){let o=window.location.href,t=window.location.search.replace("?","").split("&"),l=t.find((e=>0==e.indexOf("mod="))),n=t.find((e=>0==e.indexOf("moldStr="))),s=o.replace(l,"mod="+e.mod);s=s.replace(n,"mold="+e.mod),s=s.replace("order-"+a.old_mod,"order-"+a.mod),s.includes("mod="+e.mod)||(s=s+(s.includes("?")?"&":"?")+"mod="+e.mod),window.history.replaceState({},0,s)}"shop"!=a.currMod.mod&&"tuan"!=a.currMod.mod||a.getQuanNum()},async payOrder(e){const a=this;let o=e.objInfo;e.ind;let t="";if("paotui"==a.currMod.mod)t=`service=waimai&action=paotuiDeal&ordernum=${o.ordernum}&orderfinal=1`;else if("awardlegou"==a.currMod.mod)t=`service=${a.currMod.mod}&action=deal&ordernum=${o.ordernum}`;else{if("integral"==a.currMod.mod)return t=`service=${a.currMod.mod}&action=deal&id=${o.id}&count=${o.count}`,Le.linkTo(o.payUrl),!1;if(t=`service=${a.currMod.mod}&action=pay&ordernum=${o.ordernum}&orderfinal=1`,"mp-weixin"==Le.globalData.platForm){let e="";if(Le.globalData.appid)e=Le.globalData.appid;else{let a=uni.getAccountInfoSync();e=a.miniProgram&&a.miniProgram.appId||"",Le.globalData.appid=e}t=t+"&appid="+e}}if("paimai"==a.currMod.mod&&(t+="&newOrder=1"),t){var l=Le.encodeUrl(t);let e=(await a.$ajax.post({url:"include/ajax.php?",data:l})).data;if(100==e.state)a.payComp.service="paotui"==a.currMod.mod?"waimai":a.currMod.mod,a.payComp.action="paotui"==a.currMod.mod?"paotuipay":"pay",a.payComp.payInfo=e.info,a.payComp.showPayPop=!0,a.$refs.payEl.payCutDown(e.info,e.info.timeout);else a.$refs.toasts.showToast(e.info)}},paySuccess(e){const a=this;this.payComp.showPayPop=!1;let o=a.payFrom;a.payFrom="",e.detail&&100==e.detail.state&&e.detail.info&&(a.initLoadList(),o?a.showBottomPop=!1:Le.linkTo(e.detail.info))},cancelOrder(e,a=0){const o=this;let t="",l="";if(a?(t=o.orderInfo,l=o.orderInd):(t=e.objInfo,l=e.ind,o.orderInfo=t,o.orderInd=l),"huodong"==o.currMod.mod){if(0==t.going)return o.confirmCancelOrder(),!1;o.modelType="tui",o.content.tui=t.price>0?[{text:"确定申请退票？",style:"font-size:32rpx; font-weight:bold; "},{text:"退票后可能无法再购买当前的票哦",style:"font-size:24rpx; color:#666; margin-top:10rpx;"}]:[{text:"确定取消报名？",style:"font-size:32rpx; font-weight:bold; "},{text:"取消后可能无法再报名哦",style:"font-size:24rpx; color:#666; margin-top:10rpx;"}],o.cancelBtns.tui=t.price>0?{cancelBtn:{text:"再想想",style:"border-radius:0rpx 0rpx 0rpx 10rpx; color:#666; font-size:30rpx;"},confirmBtn:{text:"申请退票",style:"border-radius:0rpx 0rpx 10rpx 0rpx; color:#F23D18; font-weight:bold;"}}:{cancelBtn:{text:"再想想",style:"border-radius:0rpx 0rpx 0rpx 10rpx; color:#666; font-size:30rpx;"},confirmBtn:{text:"取消报名",style:"border-radius:0rpx 0rpx 10rpx 0rpx; color:#F23D18; font-weight:bold;"}}}else e.is_yuyue?(o.modelType="tui",o.content.tui=[{text:"确定取消预约？",style:"font-size:32rpx; font-weight:bold; "}],o.cancelBtns.tui={cancelBtn:{text:"取消",style:"border-radius:0rpx 0rpx 0rpx 10rpx; color:#666;"},confirmBtn:{text:"确定",style:"border-radius:0rpx 0rpx 10rpx 0rpx;"}}):o.modelType="cancel";o.showModel=!0},delOrder(e){const a=this;let o=e.objInfo,t=e.ind;a.orderInfo=o,a.orderInd=t,a.showModel=!0,a.modelType="del"},confirmOpt(){const e=this;"cancel"==e.modelType||"tui"==e.modelType?e.confirmCancelOrder():"del"==e.modelType?e.confirmDelOrder():"receive"==e.modelType&&e.confirmReceiveOrder()},async confirmDelOrder(){const e=this;var a;let o=this.orderInfo;if(a=`service=${e.currMod.mod}&action=delOrder&id=${o.id}`){var t=Le.encodeUrl(a);let o=(await e.$ajax.post({url:"include/ajax.php?",data:t})).data;100==o.state?(e.$refs.toasts.showToast(o.info),e.currMod.splice(0,e.orderInd,1)):e.$refs.toasts.showToast(o.info)}},async confirmCancelOrder(){const e=this;var a="";let o=this.orderInfo;if(a="paotui"==e.currMod.mod?`service=waimai&action=cancelPaotuiOrder&id=${o.id}`:["travel","education","tuan","awardlegou"].includes(e.currMod.mod)?`service=${e.currMod.mod}&action=delOrder&id=${o.id}`:"homemaking"==e.currMod.mod?`service=homemaking&action=operOrder&oper=cancel&id=${o.id}`:"huodong"==e.currMod.mod?`service=huodong&action=cancelJoin&id=${o.id}`:`service=${e.currMod.mod}&action=cancelOrder&id=${o.id}`){var t=Le.encodeUrl(a);let o=(await e.$ajax.post({url:"include/ajax.php?",data:t})).data;100==o.state?(e.$refs.toasts.showToast(o.info),e.changeState("cancel")):e.$refs.toasts.showToast(o.info)}},changeState(e){this.initLoadList()},getCancelFn(){this.showModel=!1},toLink(e){Le.linkTo(e,!1,!1)},confirmOrder(e){const a=this;let o=e.objInfo,t=e.ind;a.orderInfo=o,a.orderInd=t,a.showModel=!0,a.modelType="receive"},async confirmReceiveOrder(){const e=this;var a;if(a=`service=${e.currMod.mod}&action=receipt&id=${e.orderInfo.id}`){var o=Le.encodeUrl(a);let t=(await e.$ajax.post({url:"include/ajax.php?",data:o})).data;100==t.state?(e.$refs.toasts.showToast(t.info),e.initLoadList()):e.$refs.toasts.showToast(t.info)}},async getHdDetail(){const e=this;let a="service=huodong&action=regDetail&id="+e.orderInfo.id;var o=Le.encodeUrl(a);let t=(await e.$ajax.post({url:"include/ajax.php?",data:o})).data;100==t.state&&(e.hdDetail=t.info)},makePhone(e){Le.globalData.appBoolean&&"web"==this.platForm?location.href="tel:"+e:L({phoneNumber:e})},openMap(e){if(!e.lng||!e.lat)return!1;if("web"!=this.platForm)J({latitude:Number(e.lat),longitude:Number(e.lng),address:e.address,success:function(){console.log("success")},fail:function(e){console.log(e)}});else if(Le.globalData.webWeixin)jWeixin.openLocation({latitude:e.lat,longitude:e.lng,name:"",address:e.address,scale:15});else if(Le.globalData.appBoolean)window.setupWebViewJavascriptBridge((function(a){a.callHandler("skipAppMap",{lat:e.lat,lng:e.lng,addrTitle:e.title||"",addrDetail:e.address},(function(e){}))}));else{let s="";switch(window.site_map){case"baidu":s="https://api.map.baidu.com/marker?location="+e.lat+","+e.lng+"&title=&content="+e.address+"&output=html";break;case"amap":s="https://uri.amap.com/marker?position="+e.lng+","+e.lat+"&name="+e.address;break;case"google":s="https://maps.google.com/?q="+e.lat+","+e.lng+"&g="+e.address;break;case"tmap":var a=52.35987755982988,o=e.lng-.0065,t=e.lat-.006,l=Math.sqrt(o*o+t*t)-2e-5*Math.sin(t*a),n=Math.atan2(t,o)-3e-6*Math.cos(o*a);let r=l*Math.cos(n);s="https://api.map.baidu.com/marker?location="+l*Math.sin(n)+","+r+"&title="+(e.title||"")+"&content="+e.address+"&output=html"}Le.linkTo(s)}},async getSiteMod(e){const a=this;var o=Le.encodeUrl("service=siteConfig&action=siteModule&type=0");let t=(await a.$ajax.post({url:"include/ajax.php?",data:o})).data;if(100==t.state){let o=t.info,l={};for(let e=0;e<o.length;e++){l[o[e].code]=o[e]}let n=Object.keys(l);Be.sort(((e,a)=>n.indexOf(e.mod)-n.indexOf(a.mod)));let s=[];for(let e=0;e<Be.length;e++){let a=Be[e].mod;if(l[a]||l.waimai&&"paotui"==Be[e].mod){let o={...Be[e]};o.modName="paotui"==a?"跑腿订单":l[a].name,s.push(o)}}a.modArr=s,a.initPage(e)}},toOrderUrl(e){if("homemaking"==e){let e=`${Le.globalData.appConfig.cfg_user_index}/homemaking-courierorder.html`;Le.linkTo(e)}},async getOrderDetail(e){const a=this;let o=`service=${e}&action=orderDetail&id=${a.orderInfo.id}`;var t=Le.encodeUrl(o);let l=(await a.$ajax.post({url:"include/ajax.php?",data:t})).data;100==l.state&&(a.hdDetail=l.info)},async confirmHomeOrder(){const e=this;let a="",o=0;"0"==e.orderInfo.online&&e.orderInfo.price>0?(a=`service=homemaking&action=servicepay&aid=${e.orderInfo.proid}&amount=${e.orderInfo.price}&ordernumid=${e.orderInfo.ordernum}`,o=1):a=`service=homemaking&action=operOrder&oper=verify&id=${e.orderInfo.id}`;var t=Le.encodeUrl(a);let l=(await e.$ajax.post({url:"include/ajax.php?",data:t})).data;100==l.state?1==o?(e.payFrom="otherFee",e.payComp.service="homemaking",e.payComp.action="pay",e.payComp.payInfo=l.info,e.payComp.showPayPop=!0,e.$refs.payEl.payCutDown(l.info,l.info.timeout)):(e.initLoadList(),e.showBottomPop=!1,e.$refs.toasts.showToast(l.info)):e.$refs.toasts.showToast(l.info)},async getModConfig(){const e=this;let a=`service=${e.currMod.mod}&action=config`;var o=Le.encodeUrl(a);let t=(await e.$ajax.post({url:"include/ajax.php?",data:o})).data;100==t.state&&e.$set(e.modConfig,`${e.currMod.mod}Config`,t.info)},async cancelrefund(){const e=this;let a=`service=travel&action=operOrder&oper=cancelrefund&id=${e.orderInfo.id}`;var o=Le.encodeUrl(a);let t=(await e.$ajax.post({url:"include/ajax.php?",data:o})).data;100==t.state?(e.$refs.toasts.showToast(t.info),e.initLoadList()):e.$refs.toasts.showToast(t.info)},hidepop(e){const a=this;e?a.showPop=!0:a.slideShow=!1},goBack(){const e=this;if(e.click_disabled)return!1;e.click_disabled=!0;let a=_();if(e.$nextTick((()=>{e.click_disabled=!1})),"web"==Le.globalData.platForm){document.body.style.overflow="",document.removeEventListener("touchmove",(function(e){e.preventDefault()}),!1)}if("web"==Le.globalData.platForm&&Le.globalData.webMini)return jWeixin.miniProgram.navigateBack(),!1;"web"!=Le.globalData.platForm||Le.globalData.appBoolean||a&&a.length>1?Le.backFn("/pages/index/index",Le.globalData.masterDomain):window.history.go(-1)},checkPopInfo(e){if(e)Le.wxShareFn(this.shareInfo),Le.iosShare(this.shareInfo);else{let e={url:window.location.href,litpic:Le.globalData.siteConfig.sharePic,title:"我的订单",description:Le.globalData.siteConfig.description};Le.wxShareFn(e),Le.iosShare(e)}}},watch:{showPop(e){const a=q().uniPlatform;if(e&&(this.slideShaiShow=!1),"web"==a){var o=function(e){e.preventDefault()};e?(document.body.style.overflow="hidden",document.addEventListener("touchmove",o,!1)):(document.body.style.overflow="",document.removeEventListener("touchmove",o,!1))}setTimeout((()=>{this.slideShow=e}),10)},shaiShowPop(e){if("web"==q().uniPlatform){var a=function(e){e.preventDefault()};e?(document.body.style.overflow="hidden",document.addEventListener("touchmove",a,!1)):(document.body.style.overflow="",document.removeEventListener("touchmove",a,!1))}e&&setTimeout((()=>{this.slideShaiShow=e}),10)},slideShow(e){e||setTimeout((()=>{this.showPop=e}),10)},slideShaiShow(e){e||setTimeout((()=>{this.shaiShowPop=e}),10)}}},[["render",function(e,u,h,y,_,k){const I=f,w=b,C=K(j("webTop"),ee),D=K(j("order_header"),oe),v=m,P=K(j("orderlist"),ve),$=K(j("public_pay"),Fe),F=K(j("showModel"),Se),M=K(j("toast"),Pe),S=K(j("bottom_pop"),Te);return a(),n(w,{class:x({page:!0,huoniao_Android:_.isAndroid&&_.appFullscreen})},{default:i((()=>["integral"==_.mod?(a(),n(w,{key:0,class:"pageImg",style:s(!_.globalData.appBoolean||_.isAndroid&&_.appFullscreen?"web"!=_.globalData.platForm||_.isAndroid&&_.appFullscreen?"":"top:-88rpx;":"top:-176rpx;")},{default:i((()=>[g(I,{src:`${_.imgpath}integral_bg.png?v=${_.imgVersion}`,mode:"widthFix"},null,8,["src"])])),_:1},8,["style"])):p("",!0),g(w,{class:x({headerBox:!0})},{default:i((()=>["integral"!=_.mod&&"huodong"!=_.mod?(a(),n(w,{key:0,class:"head"},{default:i((()=>["web"==_.platForm?(a(),o(l,{key:0},[g(C,{hideHead:!0,title:_.shareInfo.title||"我的订单",ref:"sharePop",onWxShareClose:u[0]||(u[0]=e=>{k.checkPopInfo(e)}),shareInfo:_.shareInfo,appShare:_.shareInfo,module:"siteConfig"},null,8,["title","shareInfo","appShare"]),"huodong"!=_.mod?(a(),n(D,{key:0,ref:"order_header",inpFocus:_.inpFocus,onInpfocus:u[1]||(u[1]=e=>{_.slideShow=!1,_.inpFocus=!0}),modName:_.currMod.modName,appFullscreen:_.appFullscreen,showBack:"web"==_.platForm&&(!_.globalData.appBoolean||_.isAndroid&&_.appFullscreen),mod:_.mod,placeholder:_.currMod.placeholder,onShowpop:k.hidepop,onSearchkey:k.toSearch},null,8,["inpFocus","modName","appFullscreen","showBack","mod","placeholder","onShowpop","onSearchkey"])):p("",!0)],64)):(a(),o(l,{key:1},[g(w,{class:"head",style:s(`padding-top:${_.globalData.navTop}px;background-color:#fff;`)},{default:i((()=>[g(w,{class:"headerCon",style:s(`margin-top:${_.offTop}px;`)},{default:i((()=>[g(w,{class:"navBack navbtn",onClick:k.goBack},{default:i((()=>[g(I,{class:"navbtnImg img",src:_.globalData.imgPath+"/info/navBack.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"]),g(w,{class:"modChange",onClick:u[2]||(u[2]=e=>_.showPop=!0)},{default:i((()=>[g(w,{class:"modName"},{default:i((()=>[d(c("integral"==_.currMod.mod?"积分兑商品":_.currMod.modName),1)])),_:1}),g(w,{class:"icon"},{default:i((()=>[g(I,{src:_.imgpath+"arr_grey.png?"+_.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1},8,["style"]),"huodong"!=_.mod?(a(),n(w,{key:0},{default:i((()=>[g(D,{ref:"order_header",is:"order_header",onInpfocus:u[3]||(u[3]=e=>{_.slideShow=!1,_.inpFocus=!0}),modName:_.currMod.shortName,showBack:!1,mod:_.mod,placeholder:_.currMod.placeholder,onShowpop:k.hidepop,onSearchkey:k.toSearch},null,8,["modName","mod","placeholder","onShowpop","onSearchkey"])])),_:1})):p("",!0)],64))])),_:1})):!_.globalData.appBoolean||_.isAndroid&&_.appFullscreen?(a(),n(w,{key:1,class:"head",style:s(_.showPop?`padding-top:${_.globalData.navTop}px;${"web"==_.platForm&&(!_.globalData.appBoolean||_.isAndroid&&_.appFullscreen)?"":"background:#fff"}`:`padding-top:${_.globalData.navTop}px;${"integral"==_.mod?`background:url(${_.imgpath}integral_bg.png?v=${_.imgVersion}) no-repeat  center ${"web"!=_.globalData.platForm||_.globalData.appBoolean?"top":"-88rpx"}/100% auto;`:""}`)},{default:i((()=>[g(w,{class:"headerCon",style:s(`margin-top:${_.offTop}px;`)},{default:i((()=>[g(w,{class:"navBack navbtn",onClick:k.goBack},{default:i((()=>[g(I,{class:"navbtnImg img",src:_.globalData.imgPath+"/info/navBack.png?v="+_.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1},8,["onClick"]),g(w,{class:"modChange",onClick:u[4]||(u[4]=e=>_.showPop=!0)},{default:i((()=>[g(w,{class:"modName"},{default:i((()=>[d(c("integral"==_.currMod.mod?"积分兑商品":_.currMod.modName),1)])),_:1}),g(w,{class:"icon"},{default:i((()=>[g(I,{src:_.imgpath+"arr_grey.png?"+_.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1},8,["style"])):p("",!0),g(w,{class:x({popBox:!0,bgWhite:"web"!=_.platForm||_.globalData.appBoolean&&(!_.isAndroid||!_.appFullscreen),show:_.slideShow&&_.showPop}),onTouchmove:u[7]||(u[7]=r((()=>{}),["stop"])),onTouch:u[8]||(u[8]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"popMask",onClick:u[5]||(u[5]=e=>_.slideShow=!1)}),_.showPop?(a(),n(w,{key:0,class:"popCon",style:s(`top:${_.tabTop}px;`)},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d("频道")])),_:1}),g(w,{class:"ul"},{default:i((()=>[(a(!0),o(l,null,t(_.modArr,(e=>(a(),n(w,{class:x({li:!0,on_chose:e.mod==_.currMod.mod}),key:e.mod,onClick:a=>k.choseMod(e)},{default:i((()=>[d(c(e.modName),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),_.is_person?(a(),n(w,{key:0,class:"homeService"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d("更多")])),_:1}),g(w,{class:"ul"},{default:i((()=>[g(w,{class:"li",onClick:u[6]||(u[6]=e=>k.toOrderUrl("homemaking"))},{default:i((()=>[d("我服务的订单")])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1},8,["style"])):p("",!0)])),_:1},8,["class"]),"integral"!=_.mod?(a(),o(l,{key:2},[_.currMod.tabList?(a(),n(w,{key:0,class:x({shaiBox:!0,bgWhite:"web"!=_.platForm||_.globalData.appBoolean&&(!_.isAndroid||!_.appFullscreen),huodongShai:"huodong"==_.mod,topPop:_.shaiShowPop}),onTouchmove:u[10]||(u[10]=r((()=>{}),["stop"])),onTouch:u[11]||(u[11]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"flex_l flexbox tabListBox"},{default:i((()=>["huodong"==_.currMod.mod&&_.globalData.appBoolean&&!_.isAndroid?(a(),n(w,{key:0,class:"modBox"},{default:i((()=>[g(w,{class:"modShow",onClick:k.hidepop},{default:i((()=>[g(w,{class:"modName"},{default:i((()=>[d(c(_.currMod.modName),1)])),_:1}),g(w,{class:"icon"},{default:i((()=>[g(I,{src:_.imgpath+"arr_grey.png?"+_.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1},8,["onClick"])])),_:1})):p("",!0),g(w,{class:"ul"},{default:i((()=>[(a(!0),o(l,null,t(_.currMod.tabList,((e,o)=>(a(),n(w,{class:x({li:!0,onChose:_.currMod.state==e.state||_.currMod.state&&e.state.indexOf(_.currMod.state)>-1&&e.state.includes(",")&&e.levelList,hide:0==e.count&&_.urlParam.state!=e.state&&("shop"==_.currMod.mod&&["6,3","6,4","6,5"].includes(e.state)||"tuan"==_.currMod.mod&&["1","2","8"].includes(e.state))}),key:o,onClick:a=>k.changeModState(e)},{default:i((()=>[d(c(e.tabName),1),e.count&&""!=e.state?(a(),n(v,{key:0},{default:i((()=>[d("("+c(e.count)+")",1)])),_:2},1024)):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),_.currMod.shai?(a(),n(w,{key:0,class:"flex_r shaiBtn",onClick:u[9]||(u[9]=e=>_.shaiShowPop=!0)},{default:i((()=>[g(w,{style:s(_.shaiShowPop||_.currMod.shaiObj.val?"color:var(--global-user-btn-labBorder-bgcolor);":"")},{default:i((()=>[d(c(_.currMod.shaiObj.val?k.getShaiName(_.currMod):"筛选"),1)])),_:1},8,["style"]),g(w,{class:"shai_icon"},{default:i((()=>[g(I,{src:`${_.imgpath}shai_${_.shaiShowPop||_.currMod.shaiObj.val?"red":"black"}.png`,mode:"scaleToFill"},null,8,["src"])])),_:1})])),_:1})):p("",!0)])),_:1},8,["class"])):p("",!0),"travel"==_.currMod.mod?(a(),n(w,{key:1,class:x({popBox:!0,bgWhite:"web"!=_.platForm||_.globalData.appBoolean&&(!_.isAndroid||!_.appFullscreen),show:_.shaiShowPop&&_.slideShaiShow}),onTouchmove:u[13]||(u[13]=r((()=>{}),["stop"])),onTouch:u[14]||(u[14]=r((()=>{}),["stop"]))},{default:i((()=>[g(w,{class:"popMask",onClick:u[12]||(u[12]=e=>_.slideShaiShow=!1)}),_.shaiShowPop?(a(),n(w,{key:0,class:"popCon"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d("类型")])),_:1}),g(w,{class:"ul"},{default:i((()=>[(a(!0),o(l,null,t(_.currMod.shaiObj.list,((e,o)=>(a(),n(w,{class:x({li:!0,on_chose:e.val==_.currMod.shaiObj.val}),key:o,onClick:a=>k.changeType(e)},{default:i((()=>[d(c(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):p("",!0)])),_:1},8,["class"])):p("",!0),"paimai"==_.currMod.mod&&_.levelList.length?(a(),n(w,{key:2,class:x({"shaiBox levelShai":!0,bgWhite:"web"!=_.platForm||_.globalData.appBoolean&&(!_.isAndroid||!_.appFullscreen),topPop:_.shaiShowPop})},{default:i((()=>[g(w,{class:"flex_l"},{default:i((()=>[g(w,{class:"ul"},{default:i((()=>[(a(!0),o(l,null,t(_.levelList,((e,o)=>(a(),n(w,{class:x({li:!0,onChose:_.currMod.state==e.state}),key:o,onClick:a=>k.changeModState(e,1)},{default:i((()=>[d(c(e.tabName),1),e.count&&""!=e.state?(a(),n(v,{key:0},{default:i((()=>[d("("+c(e.count)+")",1)])),_:2},1024)):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"])):p("",!0)],64)):p("",!0)])),_:1}),"integral"==_.mod?(a(),o(l,{key:1},[g(w,{class:"tabBox flexbox integralTabBox",style:s(_.globalData.appBoolean&&_.showPop?"background:#fff;":"")},{default:i((()=>[!_.globalData.appBoolean||_.isAndroid&&_.appFullscreen?(a(),n(w,{key:1,class:"icon_bg"},{default:i((()=>[g(I,{src:`${_.imgpath}intergal_icon_big.png?v=${_.imgVersion}`,mode:"aspectFill"},null,8,["src"])])),_:1})):(a(),n(w,{key:0,class:"modChange",onClick:u[15]||(u[15]=e=>_.showPop=!0)},{default:i((()=>[g(w,{class:"modName"},{default:i((()=>[d(c(_.currMod.modName),1)])),_:1}),g(w,{class:"icon"},{default:i((()=>[g(I,{src:_.imgpath+"arr_grey.png?"+_.imgVersion,alt:"",mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})),g(w,{class:"integralBox flexbox"},{default:i((()=>[g(w,{class:"lab"},{default:i((()=>[d("我的积分：")])),_:1}),g(w,{class:"integral_count flexbox"},{default:i((()=>[g(w,{class:"icon"},{default:i((()=>[g(I,{src:`${_.imgpath}integral_icon.png?v=${_.imgVersion}`,mode:"apspectFill"},null,8,["src"])])),_:1}),g(w,{class:"integral_num"},{default:i((()=>[d(c(_.globalData.userInfo&&_.globalData.userInfo.point||0),1)])),_:1}),g(w,{class:"btn_qiandao",onClick:u[16]||(u[16]=e=>k.toLink(`${_.globalData.appConfig&&_.globalData.appConfig.cfg_user_index}/qiandao.html`))},{default:i((()=>[d("签到领>")])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),g(w,{class:"integralCon",style:s(`top:calc(${(_.globalData.navTop||0)+_.offTop}px + ${_.globalData.appBoolean?_.isAndroid&&_.appFullscreen?176:0:88}rpx);`)},{default:i((()=>[_.showTabBg?(a(),n(w,{key:0,class:"bg"},{default:i((()=>[g(I,{style:s(`top:calc(${(-_.globalData.navTop||0)-_.offTop}px + ${_.globalData.appBoolean?(_.isAndroid&&_.appFullscreen,-176):-176}rpx);`),src:`${_.imgpath}integral_bg.png?v=${_.imgVersion}`,mode:"widthFix"},null,8,["style","src"])])),_:1})):p("",!0),g(w,{class:x("shaiBox radiusBox "+(0==_.currMod.list.length?"fullRadius":""))},{default:i((()=>[g(w,{class:"ul flexbox"},{default:i((()=>[(a(!0),o(l,null,t(_.currMod.tabList,((e,o)=>(a(),n(w,{class:x({li:!0,onChose:_.currMod.state==e.state}),key:o,onClick:a=>k.changeModState(e)},{default:i((()=>[d(c(e.tabName),1),e.count&&""!=e.state?(a(),n(v,{key:0},{default:i((()=>[d("("+c(e.count)+")",1)])),_:2},1024)):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["class"])])),_:1},8,["style"]),g(w,{class:"integronShadow",style:s(`top:calc(${(_.globalData.navTop||0)+_.offTop}px + ${_.globalData.appBoolean?_.isAndroid&&_.appFullscreen?176:0:88}rpx);`)},null,8,["style"])],64)):p("",!0),g(w,{class:"pageCon"},{default:i((()=>[g(w,{class:x({orderBox:!0,hasBgColor:("web"!=_.platForm||_.globalData.appBoolean&&(!_.isAndroid||!_.appFullscreen))&&"integral"!=_.mod&&"huodong"!=_.mod})},{default:i((()=>[g(P,{modInfo:_.currMod,quan:_.shopQuan,onChangestate:k.changeQuanState,modConfig:_.modConfig},null,8,["modInfo","quan","onChangestate","modConfig"])])),_:1},8,["class"]),"integral"==_.currMod.mod?(a(),n(w,{key:0,class:"bottom_btn",onClick:u[17]||(u[17]=e=>k.toLink(`${_.globalData.masterDomain}/integral`))},{default:i((()=>[g(w,{class:"btn"},{default:i((()=>[d("兑换更多商品")])),_:1})])),_:1})):p("",!0)])),_:1}),g($,{ref:"payEl",showPayPop:_.payComp.showPayPop,service:_.payComp.service,action:_.payComp.action,payInfo:_.payComp.payInfo,onKeepToCall:k.paySuccess,onPaypopb:u[18]||(u[18]=e=>{_.payComp.showPayPop=!1})},null,8,["showPayPop","service","action","payInfo","onKeepToCall"]),g(F,{onModels:u[19]||(u[19]=e=>_.showModel=!1),model:_.showModel,confirmBtn:"tui"!=_.modelType?_.cancelBtns.cancel.confirmBtn:_.cancelBtns.tui.confirmBtn,cancelBtn:"tui"!=_.modelType?_.cancelBtns.cancel.cancelBtn:_.cancelBtns.tui.cancelBtn,content:_.content[_.modelType||"cancel"],getCancelFn:k.getCancelFn,getConfirmFn:k.confirmOpt},null,8,["model","confirmBtn","cancelBtn","content","getCancelFn","getConfirmFn"]),g(w,{style:{position:"relative","z-index":"9999999999"}},{default:i((()=>[g(M,{id:"toast",ref:"toasts"},null,512)])),_:1}),["integral","huodong","tuan","homemaking","travel"].includes(_.currMod.mod)?(a(),n(S,{key:2,maskClick:"showBottomPop",showPop:_.showBottomPop,onHidepop:u[28]||(u[28]=e=>{_.showBottomPop=!1})},{default:i((()=>[_.orderInfo&&_.orderInfo.id&&"integral"==_.currMod.mod?(a(),n(w,{key:0,class:"bottomPop"},{default:i((()=>[g(w,{class:"pop_header"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[g(w,{class:"h_title"},{default:i((()=>[d(c(_.orderInfo.product.title),1)])),_:1}),d("物流")])),_:1})])),_:1}),g(w,{class:"pop_con"},{default:i((()=>[g(w,{class:"step curr"},{default:i((()=>[g(w,{class:"info flexbox"},{default:i((()=>[g(w,{class:"flexl dot"},{default:i((()=>[g(I,{src:`${_.imgpath}wuliu_icon.png?v=${_.imgVersion}`,mode:"aspectFill"},null,8,["src"])])),_:1}),g(w,{class:"flexr"},{default:i((()=>[g(w,{class:"h3"},{default:i((()=>[d("已发货")])),_:1}),g(w,{class:"p"},{default:i((()=>[d(c(k.timeTrans(_.orderInfo.expdate)),1)])),_:1})])),_:1})])),_:1}),g(w,{class:"wuliu flexbox"},{default:i((()=>[g(w,{class:"grey dot"}),g(w,{class:"wuliu_info"},{default:i((()=>[d(c(_.orderInfo.expcompany)+" "+c(_.orderInfo.expnumber),1)])),_:1})])),_:1})])),_:1})])),_:1}),g(w,{class:"pop_foot"},{default:i((()=>[g(w,{class:"ok_btn"},{default:i((()=>[d("好的")])),_:1})])),_:1})])),_:1})):_.orderInfo&&_.orderInfo.id&&"huodong"==_.currMod.mod?(a(),n(w,{key:1,class:"bottomTicketPop",style:s(`background: url(${_.orderInfo.litpic}) no-repeat center top/100% 750rpx `)},{default:i((()=>[g(w,{class:"bg_img"}),g(w,{class:"pop_header flexbox"},{default:i((()=>[g(w,{class:"flexbox"},{default:i((()=>[g(w,{class:"pop_tit"},{default:i((()=>[d("门票详情")])),_:1}),"2"==_.orderInfo.state?(a(),n(w,{key:0,class:"ticket_lab hasUsed"},{default:i((()=>[d("已使用")])),_:1})):_.orderInfo.going&&"1"==_.orderInfo.state?(a(),n(w,{key:1,class:"ticket_lab"},{default:i((()=>[d("待使用")])),_:1})):(a(),n(w,{key:2,class:"ticket_lab hasUsed"},{default:i((()=>[d(c("4"==_.orderInfo.state?"已退款":0==_.orderInfo.going||"0"==_.orderInfo.going?"已过期":"已取消"),1)])),_:1}))])),_:1}),g(w,{class:"down_arr",onClick:u[20]||(u[20]=e=>{_.showBottomPop=!1})},{default:i((()=>[g(I,{mode:"aspectFill",src:`${_.imgpath}down_arr.png?v=${_.imgVersion}`},null,8,["src"])])),_:1})])),_:1}),g(w,{class:"pop_con",style:s(`max-height:calc(100vh - 226rpx - ${_.globalData.navTop}px);`)},{default:i((()=>[g(w,{class:"ticketCon conBox"},{default:i((()=>[g(w,{class:"ticket_info flexbox"},{default:i((()=>[g(w,{class:"hd_pic"},{default:i((()=>[g(w,{class:"imgMask"},{default:i((()=>[g(I,{mode:"aspectFill",class:"bottomImg",src:_.orderInfo.litpic||e.defaultPro,onError:u[21]||(u[21]=a=>_.orderInfo.litpic=e.defaultPro)},null,8,["src"])])),_:1}),g(I,{mode:"aspectFill",src:_.orderInfo.litpic||e.defaultPro,onError:u[22]||(u[22]=a=>_.orderInfo.litpic=e.defaultPro)},null,8,["src"])])),_:1}),g(w,{class:"hd_info"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d(c(_.orderInfo.title),1)])),_:1}),g(w,{class:"addr"},{default:i((()=>[d(c(_.orderInfo.addrname&&_.orderInfo.addrname.length?_.orderInfo.addrname[_.orderInfo.addrname.length-1]:"")+" ",1),g(v),d(" "+c(_.orderInfo.address),1)])),_:1}),g(w,{class:"date"},{default:i((()=>[d(c(k.timeTrans(_.orderInfo.began))+" - "+c(k.timeTrans(_.orderInfo.end)),1)])),_:1})])),_:1})])),_:1}),g(w,{class:"ticket_code"},{default:i((()=>[g(w,{class:"pcount"},{default:i((()=>[d("共"),g(v,null,{default:i((()=>[d("1")])),_:1}),d("张")])),_:1}),g(w,{class:x({qrBox:!0,greyQr:"1"!=_.orderInfo.state||0==_.orderInfo.going})},{default:i((()=>["2"==_.orderInfo.state||"1"==_.orderInfo.state&&0==_.orderInfo.going?(a(),n(I,{key:0,class:"usedIcon",mode:"aspectFill",src:`${_.imgpath}${"2"==_.orderInfo.state?"used_icon":"guoqi_icon"}.png?v=${_.imgVersion}`},null,8,["src"])):p("",!0),g(I,{class:"qr",src:`${_.masterDomain}/include/qrcode.php?data=${_.hdDetail.code}`},null,8,["src"])])),_:1},8,["class"]),g(w,{class:"ticket_price"},{default:i((()=>[g(w,{class:"ftitle"},{default:i((()=>[d(c(_.orderInfo.feetitle),1)])),_:1}),_.orderInfo.prcie>0?(a(),n(w,{key:0,class:"price"},{default:i((()=>[d(c(_.globalData.appConfig.currency&&_.globalData.appConfig.currency.symbol||"￥"),1),g(v,null,{default:i((()=>[d(c(_.orderInfo.price),1)])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1}),g(w,{class:"bottom_code flexbox"},{default:i((()=>[g(w,{class:"code_num"},{default:i((()=>[d(" 票号"),g(v,null,{default:i((()=>[d(c(_.hdDetail.code),1)])),_:1})])),_:1}),0!=_.orderInfo.sign?(a(),n(w,{key:0,class:"is_tui"},{default:i((()=>[g(w,{class:"icon"},{default:i((()=>[g(I,{mode:"aspectFill",src:`${_.imgpath}tui_icon.png?v=${_.imgVersion}`},null,8,["src"])])),_:1}),g(v,null,{default:i((()=>[d("不支持"+c(_.orderInfo.price>0&&1!=_.orderInfo.sign?"退款":"取消"),1)])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1}),g(w,{class:"huodongCon conBox"},{default:i((()=>[g(w,{class:"con addrCon flexbox"},{default:i((()=>[g(w,{class:"flex_l"},{default:i((()=>[g(w,{class:"con_title"},{default:i((()=>[d("活动地址")])),_:1}),g(w,{class:"con_info"},{default:i((()=>[d(c(_.orderInfo.address),1)])),_:1})])),_:1}),_.orderInfo.lng||_.orderInfo.lat?(a(),n(w,{key:0,class:"btn",onClick:u[23]||(u[23]=e=>k.openMap(_.orderInfo))},{default:i((()=>[g(w,{class:"icon"},{default:i((()=>[g(I,{mode:"aspectFill",src:`${_.imgpath}guid_icon.png?v=${_.imgVersion}`},null,8,["src"])])),_:1}),g(v,null,{default:i((()=>[d("导航")])),_:1})])),_:1})):p("",!0)])),_:1}),g(w,{class:"con orgCon flexbox",onClick:u[24]||(u[24]=e=>k.makePhone(_.hdDetail.contact))},{default:i((()=>[g(w,{class:"flex_l"},{default:i((()=>[g(w,{class:"con_title"},{default:i((()=>[d("主办单位")])),_:1}),g(w,{class:"con_info"},{default:i((()=>[d(c(_.hdDetail.nickname),1)])),_:1})])),_:1}),_.hdDetail.contact?(a(),n(w,{key:0,class:"btn"},{default:i((()=>[g(v,null,{default:i((()=>[d("电话咨询")])),_:1})])),_:1})):p("",!0)])),_:1}),g(w,{class:"detailCon"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d("订单详情")])),_:1}),g(w,{class:"ul"},{default:i((()=>[_.orderInfo.price>0?(a(),n(w,{key:0,class:"li flexbox price"},{default:i((()=>[g(w,{class:"label"},{default:i((()=>[d("付款金额")])),_:1}),g(w,{class:"text"},{default:i((()=>[d(c(_.globalData.appConfig.currency&&_.globalData.appConfig.currency.symbol||"￥"),1),g(v,null,{default:i((()=>[d(c(_.orderInfo.price),1)])),_:1})])),_:1})])),_:1})):p("",!0),(a(!0),o(l,null,t(_.hdDetail.property,((e,s)=>(a(),n(w,{class:"li flexbox",key:s},{default:i((()=>[(a(!0),o(l,null,t(e,((e,t)=>(a(),o(l,{key:t},[g(w,{class:"label"},{default:i((()=>[d(c(t),1)])),_:2},1024),g(w,{class:"text"},{default:i((()=>[d(c(e),1)])),_:2},1024)],64)))),128))])),_:2},1024)))),128)),g(w,{class:"li flexbox"},{default:i((()=>[g(w,{class:"label"},{default:i((()=>[d("下单时间")])),_:1}),g(w,{class:"text"},{default:i((()=>[d(c(k.timeTrans(_.hdDetail.date,1)),1)])),_:1})])),_:1}),_.hdDetail.ordernum?(a(),n(w,{key:1,class:"li flexbox"},{default:i((()=>[g(w,{class:"label"},{default:i((()=>[d("订单编号")])),_:1}),g(w,{class:"text"},{default:i((()=>[d(c(_.hdDetail.ordernum),1)])),_:1})])),_:1})):p("",!0),_.hdDetail.paytype?(a(),n(w,{key:2,class:"li flexbox"},{default:i((()=>[g(w,{class:"label"},{default:i((()=>[d("付款方式")])),_:1}),g(w,{class:"text"},{default:i((()=>[d(c(_.hdDetail.paytype),1)])),_:1})])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1}),g(w,{class:"pop_foot"},{default:i((()=>["4"!=_.orderInfo.state&&"3"!=_.orderInfo.state?(a(),n(w,{key:0,class:"btn_tui",onClick:u[25]||(u[25]=e=>k.cancelOrder("",1))},{default:i((()=>[d(c(_.orderInfo.price>0?(_.orderInfo.going?"申请":"")+"退款":"取消报名"),1)])),_:1})):p("",!0)])),_:1})])),_:1},8,["style"])])),_:1},8,["style"])):_.orderInfo&&_.orderInfo.id&&("tuan"==_.currMod.mod||"travel"==_.currMod.mod)?(a(),n(w,{key:2,class:"tuanPop"},{default:i((()=>[g(w,{class:"pop_header"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d("请出示给商家扫一扫")])),_:1})])),_:1}),g(w,{class:"pop_con"},{default:i((()=>[g(w,{class:"qrBox"},{default:i((()=>[g(I,{class:"qr",src:`${_.masterDomain}/include/qrcode.php?data=${_.cardnumUrl}`,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})])),_:1})):_.orderInfo&&_.orderInfo.id&&"homemaking"==_.currMod.mod?(a(),n(w,{key:3,class:"homemakingPop"},{default:i((()=>["confirm"==_.wuliu_opt?(a(),o(l,{key:0},[g(w,{class:"pop_header"},{default:i((()=>[g(w,{class:"h4"},{default:i((()=>[d(c("0"==_.hdDetail.online?"该服务需收取额外费用":"商家已确认线下收取额外费用"),1)])),_:1})])),_:1}),g(w,{class:"pop_con"},{default:i((()=>[g(w,{class:"priceBox"},{default:i((()=>[g(w,{class:"price"},{default:i((()=>[d(c(_.globalData.appConfig.currency&&_.globalData.appConfig.currency.symbol||"￥"),1),g(v,null,{default:i((()=>[d(c(_.hdDetail.price),1)])),_:1})])),_:1}),g(w,{class:"p"},{default:i((()=>[d(c("0"==_.hdDetail.online?"如金额不一，请向商家沟通确认":"如对价格有异议，请与商家协商沟通"),1)])),_:1})])),_:1}),g(w,{class:"canbaoBox"},{default:i((()=>[g(w,{class:"p"},{default:i((()=>[d("参保订单保修期内可在线售后维权保修，参保详情：")])),_:1}),g(w,{class:"inpCon"},{default:i((()=>[d(c(_.hdDetail.guarantee),1)])),_:1})])),_:1})])),_:1}),"0"==_.hdDetail.online?(a(),n(w,{key:0,class:"pop_foot"},{default:i((()=>[g(w,{class:"p"},{default:i((()=>[d("注意核对付款金额，其作为付款依据将影响售后服务")])),_:1}),g(w,{class:"btn",onClick:u[26]||(u[26]=e=>k.confirmHomeOrder())},{default:i((()=>[d("确认验收")])),_:1})])),_:1})):(a(),n(w,{key:1,class:"pop_foot"},{default:i((()=>[g(w,{class:"p"},{default:i((()=>[d("如您满意此次服务，请确认付款 ")])),_:1}),g(w,{class:"btn",onClick:u[27]||(u[27]=e=>k.confirmHomeOrder())},{default:i((()=>[d("确认付款")])),_:1})])),_:1}))],64)):(a(),o(l,{key:1},[g(w,{class:"pop_header"},{default:i((()=>[g(w,{class:"h4 code_tit"},{default:i((()=>[d("服务码")])),_:1})])),_:1}),g(w,{class:"pop_con"},{default:i((()=>[g(w,{class:"t2 p"},{default:i((()=>[d("商家上门后告知对方")])),_:1}),(a(!0),o(l,null,t(_.orderInfo.cardnum,((e,o)=>(a(),n(w,{class:"code",key:o},{default:i((()=>[d(c(e.cardnum),1)])),_:2},1024)))),128)),g(w,{class:"pop_tip"},{default:i((()=>[g(w,{class:"t3 p"},{default:i((()=>[d("服务码一经验证 ")])),_:1}),g(w,{class:"t4 p"},{default:i((()=>[d("预付金将不可退还 ")])),_:1})])),_:1})])),_:1}),g(w,{class:"pop_foot"},{default:i((()=>[g(w,{class:"btn okbtn"},{default:i((()=>[d("好的，知道了")])),_:1})])),_:1})],64))])),_:1})):p("",!0)])),_:1},8,["showPop"])):p("",!0)])),_:1},8,["class"])}],["__scopeId","data-v-49d83535"]]);export{Oe as default};
