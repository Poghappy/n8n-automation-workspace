import{a,P as t,i as e,j as l,h as o,b as s,d as i,e as n,r,n as d,k as c,o as u,l as p,w as g,H as m,m as h,q as f,A as k,t as b,v as _,y as v,G as D,F as w,x,B as C,C as y,D as B}from"./index-cF6skFzP.js";import{r as F,_ as $}from"./uni-app.es.J1otcSEF.js";import{p as j}from"./task.9CwFAmAC.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";let T=h();var E;const V=S({data:()=>({globalData:T.globalData,wh:T.globalData.navTop+T.globalData.appFullWh,masterDomain:T.globalData.masterDomain,biasTop_88:T.globalData.biasTop_88,appBack:T.globalData.appBack,userError:T.globalData.userError,imgurl:T.globalData.imgPath+"/task/",httpurl:null,loadingb:!0,privateb:!1,loginb:!1,depositb:!1,themedata:{},userdata:{level:{},statistics:{}},taskdata:{pageInfo:{}},uid:null,page:1,pageSize:5,imgVersion:null,id:"",bgcolor:"",fontcolor:"",name:"",count:"",amount:"",totalCount:!1,pages:"",platForm:T.globalData.platForm,appBoolean:T.globalData.appBoolean,channelDomain:T.globalData.channelDomain,appFullScreen:T.globalData.appFullScreen}),onLoad(a){E=this,-1==T.globalData.wxprivate?T.watchG("wxprivate",(function(t){E.wxprivate=t,t?E.privateb=!0:E.onload(a)})):T.globalData.wxprivate?E.privateb=!0:E.onload(a)},onReady(){},onShow(){},onHide(){},onUnload(){},onPullDownRefresh(){T.reloadFn()},onReachBottom(){this.$ajax.post({url:"include/ajax.php?"+T.encodeUrl(`service=task&action=list&uid=${this.uid}`),data:{page:++this.page,pageSize:this.pageSize}}).then((a=>{a.data.info.list.length<5&&(E.loadingb=!1),this.taskdata.list=this.taskdata.list.concat(a.data.info.list),E.taskdata=this.taskdata,E.page=this.page}))},onShareAppMessage(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic}},methods:{onload(i){E.uid=i?i.uid:this.uid,E.imgVersion=T.globalData.imgVersion,a({title:"加载中",mask:!0,success:()=>{t({key:"warnColor",success:a=>{t({key:"warnColor",success:a=>{E.themedata=a.data.themeDate,E.setBgColor(this.themedata.themeBackgroundColor),a.data.outtime<Date.parse(new Date)&&e({key:"warnColor",success:()=>{E.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(E.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),E.setBgColor(this.themedata.themeBackgroundColor),o()):(o(),s({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),o()},fail:a=>{E.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(E.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),E.setBgColor(this.themedata.themeBackgroundColor),o()):(o(),s({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),E.$ajax.post({url:"include/ajax.php?"+T.encodeUrl(`service=task&action=memberInfo&id=${this.uid}`)}).then((a=>{E.userdata=a.data.info,E.httpurl=T.addUrlParam(T.globalData.appConfig.cfg_user_index+"/im/chat-"+a.data.info.uid+".html")})),E.$ajax.post({url:"include/ajax.php?"+T.encodeUrl(`service=task&action=list&uid=${this.uid}`),data:{page:1,pageSize:this.pageSize}}).then((a=>{100==a.data.state?(E.loadingb=!(a.data.info.list.length<5),E.taskdata=a.data.info):E.loadingb=!1})),E.loginb=Boolean(T.globalData.userid),E.pages=T.pageFn(j)},backFn(){if(E.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=i();a&&a.length>1?n({delta:1}):"web"==E.platForm?location.href=`${E.masterDomain}${window.pathname}${E.pages.index}`:r({url:"/pages/packages/task/index/index"})}},linkTo(a){if(a)if("web"==E.platForm){if(window.appBoolean)return window.setupWebViewJavascriptBridge((function(t){t.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;a.indexOf("http")>-1?location.href=a:d({url:a})}else{if(a.includes("tomini")){let t=a.split("?")[1].split("&");for(let e=0;e<t.length;e++)if(t[e].includes("tomini")){a=t[e].replace("tomini=",""),t.splice(e,1);break}a+=`?${t.join("&")}`}d({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},setBgColor(a){"web"!=E.platForm&&uni.setBackgroundColor({backgroundColor:a,fail:a=>{console.log(a)}})},loginFn(){T.loginCheck(E.pages.merdetail)},depositFn(a){a.currentTarget.dataset.close?E.depositb=!1:E.depositb=!this.depositb}}},[["render",function(a,t,e,l,o,s){const i=f,n=y,r=B,d=F(c("private_tip"),$);return u(),p(i,{onClick:m(s.depositFn,["stop","prevent"]),"data-close":!0},{default:g((()=>[o.appBack?(u(),k(w,{key:0},[b(i,{style:_("height:"+o.wh+"px;background-color: "+o.themedata.themeBackgroundColor+";position: sticky;top: 0rpx;z-index: 99;padding-bottom: 88rpx;")},null,8,["style"]),b(i,{class:"rec-title",style:_("background-color: "+o.themedata.themeBackgroundColor+";top: "+(o.wh+o.biasTop_88)+"px;")},{default:g((()=>[b(n,{src:o.imgurl+"bl-arrow.png?v="+o.imgVersion,onClick:s.backFn,class:"back",mode:"aspectFill"},null,8,["src","onClick"]),b(i,{class:"title"},{default:g((()=>[v("ID："+D(o.userdata.uid),1)])),_:1})])),_:1},8,["style"])],64)):x("",!0),b(i,{class:"merchant"},{default:g((()=>[b(i,{class:"m-detail"},{default:g((()=>[b(n,{class:"md-photo",src:o.userdata.photo||o.userError,mode:"aspectFill",onError:t[0]||(t[0]=a=>o.userdata.photo=o.userError)},null,8,["src"]),b(i,{class:"md-right"},{default:g((()=>[b(i,{class:"mdr-nickname"},{default:g((()=>[b(i,{class:"nickname"},{default:g((()=>[v(D(o.userdata.nickname),1)])),_:1}),b(i,{class:"label"},{default:g((()=>[b(i,{class:"certify",style:_(0==o.userdata.certifyState?"background:#D4D4D4":"")},{default:g((()=>[v(D(1==o.userdata.certifyState?"已实名":"未实名"),1)])),_:1},8,["style"]),o.userdata.promotion?(u(),p(i,{key:0,class:"money",onClick:m(s.depositFn,["stop","prevent"])},{default:g((()=>[v("保证金")])),_:1},8,["onClick"])):x("",!0),b(i,{onClick:t[1]||(t[1]=a=>s.linkTo(`${o.appBoolean?o.channelDomain:""}${o.pages.vip}?index=0&${o.appFullScreen}`))},{default:g((()=>[o.userdata.level.id?(u(),p(i,{key:0,class:"vip",style:_("padding-right: 20rpx;background:"+o.userdata.level.bgcolor+";color: "+o.userdata.level.fontcolor+";")},{default:g((()=>[v(D(o.userdata.level.name),1)])),_:1},8,["style"])):x("",!0)])),_:1}),b(i,{class:"cashDeposit",style:_("transform: scale("+(o.depositb?"1":"0")+");")},{default:g((()=>[b(i,{class:"triangle"}),b(i,{class:"text"},{default:g((()=>[v(" 改商家已缴纳 "),b(r,null,{default:g((()=>[v(D(o.globalData.appConfig.currency?o.globalData.appConfig.currency.symbol:"￥")+D(o.userdata.promotion),1)])),_:1}),v(" 保证金，请放心领取。 ")])),_:1})])),_:1},8,["style"])])),_:1})])),_:1}),b(i,{class:"mdr-talk",onClick:t[2]||(t[2]=m((a=>o.loginb?s.linkTo(o.httpurl):s.loginFn()),["stop","prevent"]))},{default:g((()=>[b(n,{class:"logo",src:o.imgurl+"news.png?v="+o.imgVersion,mode:"aspectFill"},null,8,["src"]),b(i,null,{default:g((()=>[v("联系TA")])),_:1})])),_:1})])),_:1})])),_:1}),b(i,{class:"m-order"},{default:g((()=>[b(i,{class:"mo-left"},{default:g((()=>[b(i,{class:"data"},{default:g((()=>[v(D(o.userdata.statistics.count),1)])),_:1}),b(i,{class:"text"},{default:g((()=>[v("审核通过订单")])),_:1})])),_:1}),b(i,{class:"mo-right"},{default:g((()=>[b(i,{class:"data"},{default:g((()=>[v(D(o.userdata.statistics.amount),1)])),_:1}),b(i,{class:"text"},{default:g((()=>[v("发放赏金共计")])),_:1})])),_:1})])),_:1})])),_:1}),b(i,{class:"task"},{default:g((()=>[b(i,{class:"t-title"},{default:g((()=>[v("可领取任务("+D(o.taskdata.pageInfo.totalCount?o.taskdata.pageInfo.totalCount:0)+")",1)])),_:1}),(u(!0),k(w,null,C(o.taskdata.list,((a,t)=>(u(),p(i,{class:"tabdetails",key:t},{default:g((()=>[b(i,{onClick:t=>s.linkTo(`${o.appBoolean?o.channelDomain:""}${o.pages.details}?id=${a.id}&number=${a.number}&${o.appFullScreen}`),style:{display:"flex"}},{default:g((()=>[b(i,{class:"td-headimg"},{default:g((()=>[b(n,{src:a.photo||o.userError,mode:"aspectFill",onError:t=>a.photo=o.userError},null,8,["src","onError"])])),_:2},1024),b(i,{class:"td-right"},{default:g((()=>[b(i,{class:"title"},{default:g((()=>[b(i,{class:"left"},{default:g((()=>[v(D(a.title),1)])),_:2},1024),b(i,{style:{"max-width":"122rpx",overflow:"hidden","white-space":"nowrap"}},{default:g((()=>[b(n,{src:o.imgurl+"reward.png?v="+o.imgVersion,mode:"aspectFill"},null,8,["src"]),b(r,null,{default:g((()=>[v(D(a.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),b(i,{class:"label"},{default:g((()=>[b(i,null,{default:g((()=>[v(D(a.typename),1)])),_:2},1024),b(i,null,{default:g((()=>[v(D(a.project),1)])),_:2},1024)])),_:2},1024),b(i,{class:"more"},{default:g((()=>[b(i,null,{default:g((()=>[v(" 已赚 "),b(r,null,{default:g((()=>[v(D(a.statistics.valid),1)])),_:2},1024),v(" 人 ")])),_:2},1024),b(i,null,{default:g((()=>[v(" 人均用 "),b(r,null,{default:g((()=>[v(D(a.statistics.avg_time),1)])),_:2},1024),v(" 分钟 ")])),_:2},1024),b(i,{style:{"margin-right":"0rpx"}},{default:g((()=>[v(" 平均审核 "),b(r,null,{default:g((()=>[v(D(a.statistics.avg_audit),1)])),_:2},1024),v(" 分钟 ")])),_:2},1024),b(n,{src:o.imgurl+"dotted.png?v="+o.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),b(i,{class:"loading"},{default:g((()=>[v(D(o.loadingb?"加载中..":"没有更多喽~"),1)])),_:1}),b(d,{privateShow:o.privateb},null,8,["privateShow"])])),_:1},8,["onClick"])}],["__scopeId","data-v-10255d38"]]);export{V as default};
