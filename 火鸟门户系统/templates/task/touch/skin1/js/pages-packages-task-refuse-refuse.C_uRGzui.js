import{c as a,a as t,P as e,i as s,j as l,h as i,b as o,d as n,e as r,r as d,R as c,k as m,o as p,l as u,w as g,m as h,q as f,A as k,t as b,v as x,y,F as w,x as _,G as C,B as v,H as F,C as D,D as B,X as T}from"./index-cF6skFzP.js";import{r as j,_ as S}from"./uni-app.es.J1otcSEF.js";import{p as V}from"./task.9CwFAmAC.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";let I=h();var J;const O=$({data:()=>({wh:I.globalData.navTop+I.globalData.appFullWh,bottomh:0,masterDomain:I.globalData.masterDomain,biasTop_88:I.globalData.biasTop_88,appBack:I.globalData.appBack,imgurl:I.globalData.imgPath+"/task/",themedata:{},popb:!1,warningb:!1,selb:!1,privateb:!1,selectdata:[{id:1,title:"门槛问题类",example:"例：不属于新用户"},{id:2,title:"数据问题类",example:"例：后台没有数据"},{id:3,title:"恶意提交类",example:"例：提交无关截图"},{id:4,title:"门槛问题类",example:"例：未按指定要求"},{id:5,title:"其他原因"}],formdata:{type:"",images:"",note:[]},activeIndex:0,oid:null,info:null,imgVersion:null,tid:null,pages:"",platForm:I.globalData.platForm}),onLoad(a){J=this,-1==I.globalData.wxprivate?I.watchG("wxprivate",(function(t){J.wxprivate=t,t?J.privateb=!0:J.onload(a)})):I.globalData.wxprivate?J.privateb=!0:J.onload(a),J.pages=I.pageFn(V)},onReady(){setTimeout((()=>{let t=a();t.select(".botbtn").boundingClientRect(),t.exec((a=>{J.bottomh=a[0].height}))}),1e3)},onShow(){},onHide(){},onUnload(){},onPullDownRefresh(){},onReachBottom(){},onShareAppMessage(a){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},methods:{onload(a){J.oid=a.id,J.imgVersion=I.globalData.imgVersion,J.tid=a.tid,t({title:"加载中",mask:!0,success:()=>{e({key:"warnColor",success:a=>{e({key:"warnColor",success:a=>{J.themedata=a.data.themeDate,J.setBgColor(this.themedata.themeBackgroundColor),a.data.outtime<Date.parse(new Date)&&s({key:"warnColor",success:()=>{J.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(J.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),J.setBgColor(this.themedata.themeBackgroundColor),i()):(i(),o({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),i()},fail:a=>{J.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(J.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),J.setBgColor(this.themedata.themeBackgroundColor),i()):(i(),o({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}})},backFn(){if(J.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=n();a&&a.length>1?r({delta:1}):"web"==J.platForm?location.href=`${J.masterDomain}${window.pathname}${J.pages.index}`:d({url:"/pages/packages/task/index/index"})}},setBgColor(a){"web"!=J.platForm&&uni.setBackgroundColor({backgroundColor:a,fail:a=>{console.log(a)}})},warningFn(){J.warningb=!this.warningb,setTimeout((()=>{J.warningb=!this.warningb}),2e3)},selectFn(a){let t=a.currentTarget.dataset.index;a.currentTarget.dataset.confirm?(this.formdata.type=this.selectdata[this.activeIndex].title,J.selb=!1,setTimeout((()=>{J.popb=!1,J.formdata=this.formdata}),500)):J.activeIndex=t},selpopFn(a){a.currentTarget.dataset.state?(J.popb=!0,setTimeout((()=>{J.selb=!0}),20)):(J.selb=!1,setTimeout((()=>{J.popb=!1}),500))},textFn(a){this.formdata.note=a.detail.value},pictureFn(){this.formdata.images||(this.formdata.images=[]);let a=this.formdata.images.length,t={count:6-this.formdata.images.length,sizeType:[],sourceType:["album","camera"]};this.$ajax.upMedia({seFile:!0,type:"image",formData:{mod:"task",type:"atlas"},upConfig:t}).then((t=>{for(let e=0;e<t.length;e++){let s=JSON.parse(t[e].data);"SUCCESS"!=s.state?(this.info=s.state,this.warnFn()):this.formdata.images[a+e]=s.turl}this.formdata=JSON.parse(JSON.stringify(this.formdata))}))},delFn(a){let t=a.currentTarget.dataset.index;this.formdata.images.splice(t,1),J.formdata=this.formdata},clickimgFn(a){let t=a.currentTarget.dataset.index;c({urls:this.formdata.images,current:this.formdata.images[t]})},confirmFn(){let a=JSON.parse(JSON.stringify(this.formdata));this.formdata.images&&!this.warningb&&(a.images=a.images.join("||")),this.formdata.note.length<5&&!this.warningb?(J.info="具体原因至少5个字",this.warningFn()):this.warningb||(t({title:"加载中",mask:!0}),J.$ajax.post({url:"include/ajax.php?"+I.encodeUrl("service=task&action=refuseOrder&id="+this.oid),data:a}).then((a=>{i(),J.info=a.data.info,this.warningFn(),101==a.data.state&&setTimeout((()=>{d({url:`${J.pages.orderhistory}?orderid=${this.oid}&merchant=1&tid=${this.tid}&state=3`})}),2e3)})))}}},[["render",function(a,t,e,s,l,i){const o=f,n=D,r=B,d=T,c=j(m("private_tip"),S);return p(),u(o,{style:{height:"100%"}},{default:g((()=>[l.appBack?(p(),k(w,{key:0},[b(o,{style:x("height:"+l.wh+"px;background-color: "+l.themedata.themeBackgroundColor+";position: sticky;top: 0rpx;z-index: 99;"),catchtouchmove:""},null,8,["style"]),b(o,{class:"rec-title",style:x("background-color: "+l.themedata.themeBackgroundColor+";top: "+(l.wh+l.biasTop_88)+"px;")},{default:g((()=>[b(n,{src:l.imgurl+"bl-arrow.png?v="+l.imgVersion,onClick:i.backFn,mode:"aspectFill"},null,8,["src","onClick"]),b(o,null,{default:g((()=>[y("审核不通过")])),_:1})])),_:1},8,["style"])],64)):_("",!0),b(o,{class:"warning"},{default:g((()=>[y("小贴士：请认真选择/填写失败原因，如您多次恶意审核，将对您的账户进行冻结处理，余额不退!")])),_:1}),b(o,{class:"form"},{default:g((()=>[b(o,{class:"f-cause",onClick:i.selpopFn,"data-state":"1"},{default:g((()=>[b(o,{class:"title"},{default:g((()=>[b(r,null,{default:g((()=>[y("*")])),_:1}),y(" 不通过原因 ")])),_:1}),l.formdata.type?_("",!0):(p(),u(o,{key:0,class:"selitem"},{default:g((()=>[y(" 请选择 "),b(n,{src:l.imgurl+"r-arrow.png?v="+l.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})),l.formdata.type?(p(),u(o,{key:1,class:"selitem"},{default:g((()=>[y(C(l.formdata.type)+" ",1),b(n,{src:l.imgurl+"r-arrow.png?v="+l.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1})):_("",!0)])),_:1},8,["onClick"]),b(o,{class:"f-text"},{default:g((()=>[b(o,{class:"title"},{default:g((()=>[b(r,null,{default:g((()=>[y("*")])),_:1}),y(" 补充具体原因 ")])),_:1}),b(o,{class:"content"},{default:g((()=>[b(d,{"auto-height":"",placeholder:"(必填)请文明填写不通过原因，最少五个字","placeholder-style":"font-size:26rpx;color:#999999",onInput:i.textFn},null,8,["onInput"])])),_:1})])),_:1}),b(o,{class:"f-picture"},{default:g((()=>[b(o,{class:"title"},{default:g((()=>[y(" 补充图片 "),b(r,null,{default:g((()=>[y("( 最多添加6张 )")])),_:1})])),_:1}),b(o,{class:"picture"},{default:g((()=>[l.formdata.images?(p(!0),k(w,{key:0},v(l.formdata.images,((a,t)=>(p(),u(o,{style:{position:"relative","margin-right":"60rpx"},key:t},{default:g((()=>[b(n,{src:a,class:"exhibition",mode:"aspectFill","data-index":t,onClick:F(i.clickimgFn,["stop","prevent"])},null,8,["src","data-index","onClick"]),b(n,{src:l.imgurl+"circleClose.png?v="+l.imgVersion,class:"close",onClick:F(i.delFn,["stop","prevent"]),"data-index":t,mode:"aspectFill"},null,8,["src","onClick","data-index"])])),_:2},1024)))),128)):_("",!0),l.formdata.images.length<6||!l.formdata.images?(p(),u(o,{key:1,class:"add",onClick:i.pictureFn},{default:g((()=>[b(n,{src:l.imgurl+"crossadd.png?v="+l.imgVersion,mode:"aspectFill"},null,8,["src"]),b(o,null,{default:g((()=>[y("添加图片")])),_:1})])),_:1},8,["onClick"])):_("",!0)])),_:1})])),_:1})])),_:1}),b(o,{style:x("height: "+l.bottomh+"px;")},null,8,["style"]),b(o,{class:"botbtn"},{default:g((()=>[b(o,{onClick:i.confirmFn,style:x("background: "+l.themedata.themeBackgroundColor+";")},{default:g((()=>[y("确认提交")])),_:1},8,["onClick","style"])])),_:1}),l.popb?(p(),u(o,{key:1,class:"pop",onClick:F(i.selpopFn,["stop","prevent"])},{default:g((()=>[b(o,{class:"p-items",style:x("transform: translateY("+(l.selb?"0":"100%")+");"),onClick:t[0]||(t[0]=F((()=>{}),["stop"]))},{default:g((()=>[b(o,{class:"pi-title"},{default:g((()=>[b(o,{class:"btn",onClick:i.selpopFn},{default:g((()=>[y("取消")])),_:1},8,["onClick"]),b(o,{class:"text"},{default:g((()=>[y("不通过原因")])),_:1})])),_:1}),b(o,{class:"pi-warning"},{default:g((()=>[y("提示：请认真选择不通过原因，恶意选择将影响信誉积分!")])),_:1}),b(o,{class:"pi-item"},{default:g((()=>[(p(!0),k(w,null,v(l.selectdata,((a,t)=>(p(),u(o,{class:"item","data-index":t,onClick:i.selectFn,key:t},{default:g((()=>[l.activeIndex!=t?(p(),u(o,{key:0,class:"left"})):_("",!0),l.activeIndex==t?(p(),u(n,{key:1,src:l.imgurl+"confirm.png?v="+l.imgVersion,mode:"aspectFill"},null,8,["src"])):_("",!0),b(o,{class:"right"},{default:g((()=>[b(o,{class:"title"},{default:g((()=>[y(C(a.title),1)])),_:2},1024),b(o,{class:"text"},{default:g((()=>[y(C(a.example),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["data-index","onClick"])))),128))])),_:1}),b(o,{class:"pi-btn"},{default:g((()=>[b(o,{onClick:F(i.selectFn,["stop","prevent"]),"data-confirm":"1",style:x("background: "+l.themedata.themeBackgroundColor+";")},{default:g((()=>[y("确定")])),_:1},8,["onClick","style"])])),_:1})])),_:1},8,["style"])])),_:1},8,["onClick"])):_("",!0),b(o,{class:"pop-warning",style:x(l.warningb?"transform:scale(1);":"transform:scale(0);z-index:-1;")},{default:g((()=>[b(o,{class:"text",style:{transform:"translate(-50%, -50%)"}},{default:g((()=>[y(C(l.info),1)])),_:1})])),_:1},8,["style"]),b(c,{privateShow:l.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-4223ba7f"]]);export{O as default};
