import{c as a,n as e,d as t,e as l,r as i,k as n,o,l as s,w as r,m as p,q as c,A as d,t as u,v as h,y as m,F as g,x as b,z as f,B as v,H as k,C as x,S as _,G as w,a as D,h as y,J as $}from"./index-cF6skFzP.js";import{_ as B}from"./mp-html.Ca-HKQgI.js";import{r as F,_ as j}from"./uni-app.es.J1otcSEF.js";import{p as C}from"./task.9CwFAmAC.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";let T=p();var U;const P=S({data:()=>({wh:T.globalData.navTop+T.globalData.appFullWh,masterDomain:T.globalData.masterDomain,imgStaticPath:T.globalData.imgStaticPath,biasTop_88:T.globalData.biasTop_88,appBack:T.globalData.appBack,imgurl:T.globalData.imgPath+"/task/",tabActive:0,privateb:!1,bannerdata:{},tabdata:null,tabbody:null,themedata:{},shareimg:null,sharetitle:null,imgVersion:null,article_detailBody:"",pages:"",platForm:T.globalData.platForm,appBoolean:T.globalData.appBoolean,channelDomain:T.globalData.channelDomain,appFullScreen:T.globalData.appFullScreen}),onLoad(a){U=this,-1==T.globalData.wxprivate?T.watchG("wxprivate",(function(e){U.wxprivate=e,e?U.privateb=!0:U.onload(a)})):T.globalData.wxprivate?U.privateb=!0:U.onload(a)},onReady(){},onShow(){},onHide(){},onUnload(){},onPullDownRefresh(){},onReachBottom(){},onShareAppMessage(){return{title:this.sharetitle+" 商家入驻",imageUrl:this.shareimg}},onShareTimeline(){return{title:this.sharetitle+" 商家入驻",imageUrl:this.shareimg}},methods:{onload(e){U.imgVersion=T.globalData.imgVersion,U.$ajax.post({url:"include/ajax.php?"+T.encodeUrl("service=task&action=config")}).then((a=>{U.themedata=a.data.info,U.sharetitle=a.data.info.title,U.shareimg=a.data.info.sharePic})),U.$ajax.post({url:"include/ajax.php?"+T.encodeUrl("service=siteConfig&action=adv&model=task"),data:{title:"任务悬赏_小程序端_模板一_推广中心_广告一"}}).then((a=>{U.bannerdata=a.data.info})),U.$ajax.post({url:"include/ajax.php?"+T.encodeUrl("service=siteConfig&action=helps&type=商家推广中心")}).then((e=>{U.tabdata=e.data.info.list;let t=a();U.$nextTick((a=>{t.select(".active").boundingClientRect(),t.exec((a=>{U.$ajax.post({url:"include/ajax.php?"+T.encodeUrl("service=siteConfig&action=helpsDetail"),data:{id:a[0].dataset.id}}).then((a=>{U.article_detailBody=a.data.info.body}))}))}))})),U.pages=T.pageFn(C)},tabFn(a){U.tabActive=a.target.dataset.index,U.$ajax.post({url:"include/ajax.php?"+T.encodeUrl("service=siteConfig&action=helpsDetail"),data:{id:a.target.dataset.id}}).then((a=>{U.article_detailBody=a.data.info.body}))},linkTo(a){if(a)if("web"==U.platForm){if(window.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;a.indexOf("http")>-1?location.href=a:e({url:a})}else{if(a.includes("tomini")){let e=a.split("?")[1].split("&");for(let t=0;t<e.length;t++)if(e[t].includes("tomini")){a=e[t].replace("tomini=",""),e.splice(t,1);break}a+=`?${e.join("&")}`}e({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},publishFn(){var a=T.globalData.userid;if(null==a||""==a)return T.loginCheck(U.pages.merjoin),!1;D({title:"加载中",mask:!0}),U.$ajax.post({url:"include/ajax.php?"+T.encodeUrl("service=task&action=memberInfo")}).then((a=>{if(y(),0==a.data.info.certifyState){let a=T.globalData.appConfig.cfg_user_index+"/security-shCertify.html";U.linkTo(T.addUrlParam(a))}else 0==a.data.info.surplusReleaseCount?$({title:"友情提示",content:"您的账户剩余发布任务数量不足，请结束正在进行中的任务或者升级会员等级后发布！",confirmText:"升级会员",success(a){a.confirm?U.linkTo(`${U.appBoolean?U.channelDomain:""}${U.pages.vip}&${U.appFullScreen}`):a.cancel&&console.log("用户点击取消")}}):U.linkTo(`${U.appBoolean?U.channelDomain:""}${U.pages.publish}?step=1&${U.appFullScreen}&clear=1`)}))},backFn(){if(U.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=t();a&&a.length>1?l({delta:1}):"web"==U.platForm?location.href=`${U.masterDomain}${window.pathname}${U.pages.index}`:i({url:"/pages/packages/task/index/index"})}}}},[["render",function(a,e,t,l,i,p){const D=c,y=x,$=_,C=F(n("mp-html"),B),S=F(n("private_tip"),j);return o(),s(D,{style:{height:"100%"}},{default:r((()=>[i.appBack?(o(),d(g,{key:0},[u(D,{style:h("width: 100%; height:"+i.wh+"px;background-color: transparent;position: absolute;top: 0;")},null,8,["style"]),u(D,{class:"rec-title",style:h("top: "+(i.wh+i.biasTop_88)+"px;")},{default:r((()=>[u(y,{src:i.imgurl+"bl-arrow.png?v="+i.imgVersion,onClick:p.backFn,mode:"aspectFill"},null,8,["src","onClick"]),u(D,null,{default:r((()=>[m("商家推广中心")])),_:1})])),_:1},8,["style"])],64)):b("",!0),u(D,{style:h(`margin-top: -calc(${i.wh}px + 100rpx);position:relative`)},{default:r((()=>[u(y,{src:i.bannerdata.turl,class:"themeimg",mode:"aspectFill"},null,8,["src"]),1==i.bannerdata.advMarkState&&0==i.bannerdata.markState?(o(),s(y,{key:0,src:`${i.imgStaticPath}/advMarkTouch.png?v=${i.imgVersion}`,class:f(`advLabel _${i.bannerdata.advMarkPostion}_`)},null,8,["src","class"])):b("",!0)])),_:1},8,["style"]),u(D,{class:"tabchange"},{default:r((()=>[u($,{"scroll-x":"",enhanced:!0,"show-scrollbar":!1},{default:r((()=>[(o(!0),d(g,null,v(i.tabdata,((a,e)=>(o(),s(D,{class:f(i.tabActive==e?"active":""),"data-id":a.id,"data-index":e,onClick:p.tabFn,key:e},{default:r((()=>[m(w(a.title),1)])),_:2},1032,["class","data-id","data-index","onClick"])))),128)),u(D,null,{default:r((()=>[u(D,{onClick:e[0]||(e[0]=a=>p.linkTo(`${i.appBoolean?i.channelDomain:""}${i.pages.vip}?index=0&${i.appFullScreen}`))},{default:r((()=>[m("成为会员 ")])),_:1})])),_:1})])),_:1})])),_:1}),u(C,{content:i.article_detailBody},null,8,["content"]),u(D,{class:"pubworking"},{default:r((()=>[u(D,{style:h("background: "+i.themedata.themeBackgroundColor+";"),onClick:k(p.publishFn,["stop","prevent"])},{default:r((()=>[m("前往发布任务 ")])),_:1},8,["style","onClick"])])),_:1}),u(S,{privateShow:i.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-3a1f0c70"]]);export{P as default};
