import{a,P as t,i as e,j as l,h as i,b as s,f as o,n,d as r,e as d,r as c,k as u,o as p,l as h,w as m,m as f,q as g,A as b,t as _,v as k,y as x,G as v,F as D,x as y,z as w,B as C,C as $,H as F,D as B}from"./index-cF6skFzP.js";import{r as S,_ as I}from"./uni-app.es.J1otcSEF.js";import{p as j}from"./task.9CwFAmAC.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";let L=f();var T,U=[];const P=z({data:()=>({wh:L.globalData.navTop+L.globalData.appFullWh,privateb:!1,masterDomain:L.globalData.masterDomain,biasTop_88:L.globalData.biasTop_88,appBack:L.globalData.appBack,imgurl:L.globalData.imgPath+"/task/",globalData:L.globalData,merchantb:!1,loadingb:!0,firstb:!0,listdata:[],themedata:{},activeIndex:0,timeout:[],uid:null,page:1,pageSize:3,imgVersion:"",hour:"",minutes:"",seconds:"",pages:"",platForm:L.globalData.platForm,appFullWh:L.globalData.appFullWh,appBoolean:L.globalData.appBoolean,channelDomain:L.globalData.channelDomain,appFullScreen:L.globalData.appFullScreen}),onLoad(a){T=this,-1==L.globalData.wxprivate?L.watchG("wxprivate",(function(t){T.wxprivate=t,t?T.privateb=!0:T.onload(a)})):L.globalData.wxprivate?T.privateb=!0:T.onload(a)},onReady(){},onShow(){this.firstb?T.firstb=!1:L.reloadFn()},onHide(){this.clearInterFn()},onUnload(){this.clearInterFn()},onPullDownRefresh(){L.reloadFn()},onReachBottom(){this.$ajax.post({url:"include/ajax.php?"+L.encodeUrl("service=task&action=reportList"+(this.merchantb?"&from=store":"")),data:{state:this.activeIndex,page:++this.page,pageSize:this.pageSize}}).then((a=>{if(100==a.data.state){if(T.loadingb=!(a.data.info.list.length<this.pageSize),T.listdata=this.listdata.concat(a.data.info.list),0==this.activeIndex){let a=[];this.listdata.map(((t,e)=>{a[e]={time:t.expired_second,hour:"00",minutes:"00",seconds:"00",state:t.state}})),a.map(((a,t)=>{if(0==a.state){let a=setInterval((()=>{this.countdown(t)}),1e3);U.push(a)}})),T.timeout=a}}else T.loadingb=!1}))},onShareAppMessage(a){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},onShareTimeline(){return{title:this.themedata.title,imageUrl:this.themedata.sharePic,path:"/pages/packages/task/my/my"}},methods:{onload(n){a({title:"加载中",mask:!0,success:()=>{t({key:"warnColor",success:a=>{t({key:"warnColor",success:a=>{a.data.themeDate.helpLink7=L.addUrlParam(a.data.themeDate.helpLink7),T.themedata=a.data.themeDate,T.setBgColor(this.themedata.themeBackgroundColor),a.data.outtime<Date.parse(new Date)&&e({key:"warnColor",success:()=>{T.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(a.data.info.helpLink7=L.addUrlParam(a.data.info.helpLink7),T.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),T.setBgColor(this.themedata.themeBackgroundColor),i()):(i(),s({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),i()},fail:a=>{T.$ajax.post({url:"include/ajax.php?service=task&action=config"}).then((a=>{null!=a.data.info.themeBackgroundColor?(a.data.info.helpLink7=L.addUrlParam(a.data.info.helpLink7),T.themedata=a.data.info,l({key:"warnColor",data:{themeDate:this.themedata,outtime:Date.parse(new Date)+36e5}}),T.setBgColor(this.themedata.themeBackgroundColor),i()):(i(),s({title:"服务器出错",icon:"error",mask:!0,duration:5e3}))}))}})}}),n&&(T.merchantb=0!=n.state),T.$ajax.post({url:"include/ajax.php?"+L.encodeUrl("service=task&action=reportList"+(this.merchantb?"&from=store":"")),data:{page:1,pageSize:this.pageSize,state:this.activeIndex}}).then((a=>{if(T.uid=o("userid"),100==a.data.state){T.loadingb=!(a.data.info.list.length<this.pageSize),T.listdata=a.data.info.list;let t=[];this.listdata.map(((a,e)=>{t[e]={time:a.expired_second,hour:"00",minutes:"00",seconds:"00",state:a.state}})),t.map(((a,t)=>{if(0==a.state){let a=setInterval((()=>{this.countdown(t)}),1e3);U.push(a)}})),T.timeout=t}else T.loadingb=!1})),T.pages=L.pageFn(j)},linkTo(a){if(a)if("web"==T.platForm){if(window.appBoolean)return window.setupWebViewJavascriptBridge((function(t){t.callHandler("redirectNative",{name:"",code:"",link:a},(function(){}))})),!1;a.indexOf("http")>-1?location.href=a:n({url:a})}else{if(a.includes("tomini")){let t=a.split("?")[1].split("&");for(let e=0;e<t.length;e++)if(t[e].includes("tomini")){a=t[e].replace("tomini=",""),t.splice(e,1);break}a+=`?${t.join("&")}`}n({url:a.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(a):a})}},clearInterFn(){for(let a=0;a<U.length;a++)clearInterval(U[a])},backFn(){if(T.appBoolean)return window.setupWebViewJavascriptBridge((function(a){a.callHandler("goBack",{},(function(a){}))})),!1;{let a=r();if(a&&a.length>1)d({delta:1});else{let a=this.merchantb?"mercenter":"my";"web"==T.platForm?location.href=`${T.masterDomain}${window.pathname}${T.pages[a]}`:c({url:`/pages/packages/task/${a}/${a}`})}}},setBgColor(a){"web"!=T.platForm&&uni.setBackgroundColor({backgroundColor:a,fail:a=>{console.log(a)}})},tabFn(a){let t=a.currentTarget.dataset.index;T.activeIndex=t,T.listdata=[],T.loadingb=!0,T.page=1,this.clearInterFn(),0==t?T.$ajax.post({url:"include/ajax.php?"+L.encodeUrl("service=task&action=reportList"+(this.merchantb?"&from=store":"")),data:{state:0,page:1,pageSize:this.pageSize}}).then((a=>{if(100==a.data.state){T.loadingb=!(a.data.info.list.length<this.pageSize),T.listdata=a.data.info.list;let t=[];this.listdata.map(((a,e)=>{t[e]={time:a.expired_second,hour:"00",minutes:"00",seconds:"00",state:a.state}})),t.map(((a,t)=>{if(0==a.state){let a=setInterval((()=>{this.countdown(t)}),1e3);U.push(a)}})),T.timeout=t}else T.loadingb=!1})):T.$ajax.post({url:"include/ajax.php?"+L.encodeUrl("service=task&action=reportList"+(this.merchantb?"&from=store":"")),data:{state:1,page:1,pageSize:this.pageSize}}).then((a=>{100==a.data.state?(T.loadingb=!(a.data.info.list.length<this.pageSize),T.listdata=a.data.info.list):T.loadingb=!1}))},countdown(a){console.log(1),--this.timeout[a].time,T.timeout=this.timeout;let t=this.timeout[a].time,e=t%60,l=Math.floor(t%3600/60),i=Math.floor(t/3600);e<0?L.reloadFn():(i/10<1&&(i="0"+i),l/10<1&&(l="0"+l),e/10<1&&(e="0"+e)),this.timeout[a].hour=i,this.timeout[a].minutes=l,this.timeout[a].seconds=e,T.timeout=this.timeout}}},[["render",function(a,t,e,l,i,s){const o=g,n=$,r=B,d=S(u("private_tip"),I);return p(),h(o,{style:{height:"100%"}},{default:m((()=>[i.appBack?(p(),b(D,{key:0},[_(o,{style:k("height:"+i.wh+"px;background-color: "+i.themedata.themeBackgroundColor+";position: sticky;top: 0rpx;z-index: 99;padding-bottom: 88rpx;"),catchtouchmove:""},null,8,["style"]),_(o,{class:"rec-title",style:k("background-color: "+i.themedata.themeBackgroundColor+";top: "+(i.wh+i.biasTop_88)+"px;")},{default:m((()=>[_(n,{src:i.imgurl+"bl-arrow.png?v="+i.imgVersion,onClick:s.backFn,mode:"aspectFill"},null,8,["src","onClick"]),_(o,null,{default:m((()=>[x(v(i.merchantb?"商家举报中心":"用户举报中心"),1)])),_:1})])),_:1},8,["style"])],64)):y("",!0),_(o,{class:"complainRules",style:k(i.appBack?`top: calc(${i.wh}px + 88rpx);`:"top:0rpx")},{default:m((()=>[x(" 该页面显示"+v(i.merchantb?"您举报用户或用户举报您":"您举报商家或商家举报您")+"的任务 ",1),_(o,{onClick:t[0]||(t[0]=a=>s.linkTo(i.themedata.helpLink7))},{default:m((()=>[x("《举报规则》")])),_:1})])),_:1},8,["style"]),_(o,{class:"tabs",style:k(i.appBack?`top: calc(${i.wh}px + 88rpx + 72rpx);`:"top:72rpx")},{default:m((()=>[_(o,{class:w(0==i.activeIndex?"active":""),onClick:s.tabFn,"data-index":"0"},{default:m((()=>[x("进行中")])),_:1},8,["class","onClick"]),_(o,{class:w(1==i.activeIndex?"active":""),onClick:s.tabFn,"data-index":"1"},{default:m((()=>[x("已完结")])),_:1},8,["class","onClick"])])),_:1},8,["style"]),_(o,{class:"list"},{default:m((()=>[0==i.activeIndex?(p(),h(o,{key:0},{default:m((()=>[(p(!0),b(D,null,C(i.listdata,((a,t)=>(p(),h(o,{key:t},{default:m((()=>[0==a.state&&a.mid!=i.uid?(p(),h(o,{key:0,class:"l-item"},{default:m((()=>[_(o,{class:"li-title"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x(v(a.title),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x(" 纠纷金额 "),_(r,null,{default:m((()=>[x(v(a.price)+v(i.globalData.appConfig.currency?i.globalData.appConfig.currency.short:"元"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),_(o,{class:"li-label"},{default:m((()=>[_(o,null,{default:m((()=>[x(v(a.typename),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(a.project),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(i.merchantb?"我举报用户":"我举报商家"),1)])),_:1})])),_:2},1024),_(o,{class:"li-state"},{default:m((()=>[_(o,{class:"lis-state"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x("订单ID："+v(a.ordernum),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x("等待对方辩诉")])),_:1})])),_:2},1024),_(o,{class:"lis-text"},{default:m((()=>[x(" 若"+v(i.merchantb?"用户":"商家")+v(i.timeout[t].hour+":"+i.timeout[t].minutes+":"+i.timeout[t].seconds)+"内未提交证据，将判您胜诉 ",1)])),_:2},1024)])),_:2},1024),_(o,{class:"li-btn",onClick:F((t=>s.linkTo(`${i.appBoolean?i.channelDomain:""}${i.pages.orderhistory}?orderid=${a.oid}&date=0&explain=0&state=0&tid=${a.tid}&merchant=${i.merchantb?1:0}&${i.appFullScreen}`)),["stop","prevent"])},{default:m((()=>[_(n,{src:i.imgurl+"looksub.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"]),_(r,null,{default:m((()=>[x("查看举报")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):y("",!0),0==a.state&&a.mid==i.uid?(p(),h(o,{key:1,class:"l-item"},{default:m((()=>[_(o,{class:"li-title"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x(v(a.title),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x(" 纠纷金额 "),_(r,null,{default:m((()=>[x(v(a.price)+v(i.globalData.appConfig.currency?i.globalData.appConfig.currency.short:"元"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),_(o,{class:"li-label"},{default:m((()=>[_(o,null,{default:m((()=>[x(v(a.typename),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(a.project),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(i.merchantb?"用户举报我":"商家举报我"),1)])),_:1})])),_:2},1024),_(o,{class:"li-state"},{default:m((()=>[_(o,{class:"lis-state"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x("订单ID："+v(a.ordernum),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x("待您辩诉")])),_:1})])),_:2},1024),_(o,{class:"lis-text"},{default:m((()=>[x(" 您已被"+v(i.merchantb?"用户":"商家")+"举报。请您在： ",1),_(r,null,{default:m((()=>[x(v(i.timeout[t].hour+":"+i.timeout[t].minutes+":"+i.timeout[t].seconds),1)])),_:2},1024),x(" 内提交证据，逾期将 判对方胜诉 ")])),_:2},1024)])),_:2},1024),_(o,{class:"li-btn",onClick:F((t=>s.linkTo(`${i.appBoolean?i.channelDomain:""}${i.pages.orderhistory}?orderid=${a.oid}&date=0&explain=0&state=0&tid=${a.tid}&merchant=${i.merchantb?1:0}&${i.appFullScreen}`)),["stop","prevent"])},{default:m((()=>[_(n,{src:i.imgurl+"looksub.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"]),_(r,null,{default:m((()=>[x("查看举报并提交证据")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):y("",!0),1==a.state?(p(),h(o,{key:2,class:"l-item"},{default:m((()=>[_(o,{class:"li-title"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x(v(a.title),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x(" 纠纷金额 "),_(r,null,{default:m((()=>[x(v(a.price)+v(i.globalData.appConfig.currency?i.globalData.appConfig.currency.short:"元"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),_(o,{class:"li-label"},{default:m((()=>[_(o,null,{default:m((()=>[x(v(a.typename),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(a.project),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(i.merchantb?a.mid==i.uid?"用户举报我":"我举报用户":a.mid==i.uid?"商家举报我":"我举报商家"),1)])),_:2},1024)])),_:2},1024),_(o,{class:"li-state"},{default:m((()=>[_(o,{class:"lis-state"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x("订单ID："+v(a.ordernum),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x("等待平台判定")])),_:1})])),_:2},1024),_(o,{class:"lis-text"},{default:m((()=>[x(v(a.mid==i.uid?"您":"对方")+"已提供辩诉证据，平台将介入判定",1)])),_:2},1024)])),_:2},1024),_(o,{class:"li-btn",onClick:F((t=>s.linkTo(`${i.appBoolean?i.channelDomain:""}${i.pages.orderhistory}?orderid=${a.oid}&date=0&explain=0&state=0&tid=${a.tid}&merchant=${i.merchantb?1:0}&${i.appFullScreen}`)),["stop","prevent"])},{default:m((()=>[_(n,{src:i.imgurl+"looksub.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"]),_(r,null,{default:m((()=>[x("查看举报")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):y("",!0)])),_:2},1024)))),128))])),_:1})):y("",!0),1==i.activeIndex?(p(),h(o,{key:1},{default:m((()=>[(p(!0),b(D,null,C(i.listdata,((a,t)=>(p(),h(o,{class:"l-item",key:t},{default:m((()=>[_(o,{class:"li-title"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x(v(a.title),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x(" 纠纷金额 "),_(r,null,{default:m((()=>[x(v(a.price)+v(i.globalData.appConfig.currency?i.globalData.appConfig.currency.short:"元"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),_(o,{class:"li-label"},{default:m((()=>[_(o,null,{default:m((()=>[x(v(a.typename),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(a.project),1)])),_:2},1024),_(o,null,{default:m((()=>[x(v(i.merchantb?a.mid==i.uid?"用户举报我":"我举报用户":a.mid==i.uid?"商家举报我":"我举报商家"),1)])),_:2},1024)])),_:2},1024),_(o,{class:"li-state"},{default:m((()=>[_(o,{class:"lis-state"},{default:m((()=>[_(o,{class:"left"},{default:m((()=>[x("订单ID："+v(a.ordernum),1)])),_:2},1024),_(o,{class:"right"},{default:m((()=>[x(v(0==a.winner?"对方胜诉":"您胜诉"),1)])),_:2},1024)])),_:2},1024),_(o,{class:"lis-text"},{default:m((()=>[x(v(a.note),1)])),_:2},1024)])),_:2},1024),_(o,{class:"li-btn",onClick:F((t=>s.linkTo(`${i.appBoolean?i.channelDomain:""}${i.pages.orderhistory}?orderid=${a.oid}&date=0&explain=0&state=0&tid=${a.tid}&merchant=${i.merchantb?1:0}&${i.appFullScreen}`)),["stop","prevent"])},{default:m((()=>[_(n,{src:i.imgurl+"looksub.png?v="+i.imgVersion,mode:"aspectFill"},null,8,["src"]),_(r,null,{default:m((()=>[x("查看举报")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):y("",!0)])),_:1}),_(o,{class:"loading"},{default:m((()=>[x(v(i.loadingb?"加载中...":"没有更多咯~"),1)])),_:1}),_(d,{privateShow:i.privateb},null,8,["privateShow"])])),_:1})}],["__scopeId","data-v-7e9be723"]]);export{P as default};
