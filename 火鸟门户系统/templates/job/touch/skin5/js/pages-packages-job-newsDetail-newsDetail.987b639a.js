import{k as a,l as e,o as t,a as l,w as i,C as s,g as o,i as n,b as r,e as c,d,t as m,B as p,E as h,F as f,H as u,I as g,K as b,f as D}from"./index-160de7c6.js";import{_}from"./webTop.5c2884c8.js";import{r as w}from"./uni-app.es.bf317389.js";import{_ as y}from"./mp-html.70cfb26f.js";import{h as k}from"./public_header.cca239c9.js";import{_ as P,j}from"./job.cbea1f04.js";const x=o();const v=P({components:{headerTop:k},data:()=>({id:"",articleData:{},uniPlatform:"",masterDomain:x.globalData.masterDomain,imgPath:x.globalData.masterDomain+"/static/images/miniprograme/job",imgVersion:"?v="+x.globalData.imgVersion,isApp:!1,hotList:[],hisload:!1,hloadEnd:!1,hpage:1,shareDetail:{description:"",imgUrl:"",title:""},pages:{}}),onLoad(e){const t=this;e.id&&(t.id=e.id,t.getArticleInfo()),t.uniPlatform=a().uniPlatform,"web"==t.uniPlatform&&null!=typeof window.appBoolean&&window.appBoolean&&(t.isApp=!0),t.pages=x.pageFn(j)},onReachBottom(){const a=this;a.hisload||a.hloadEnd||a.getMoreList()},onPullDownRefresh(){setTimeout((()=>{e()}),1e3),this.getArticleInfo()},onShareAppMessage(){if(x.globalData.cityInfo.name)var a=x.globalData.cityInfo.name;else a="";var e=this.shareDetail.title;if(e=e.replace("$city",a),x.globalData.userid)var t="fromShare="+x.globalData.userid;else t="";return{title:x.globalData.appConfig.share.title,description:e,path:"/pages/packages/job/newsDetail/newsDetail?id="+this.id+(t?"&"+t:"")}},onShareTimeline(){return{title:this.shareDetail.title,description:this.shareDetail.description}},methods:{showSlidePop(){this.$refs.headerH5.popFn(1)},getArticleInfo(){const a=this,e="service=job&action=newsDetail&id="+a.id;var t=x.encodeUrl(e);a.$ajax.post({url:"include/ajax.php?"+t}).then((e=>{let t=e.data;100==t.state&&(a.articleData=t.info,"web"==a.uniPlatform&&(document.title=a.articleData.title),a.shareDetail.description=t.info.description,a.shareDetail.imgUrl=t.info.litpic,a.shareDetail.title=t.info.title,a.getMoreList(),"web"==a.uniPlatform&&x.globalData.webWeixin&&x.wxShareFn(a.shareDetail),"web"!=a.uniPlatform||x.globalData.webWeixin||x.iosShare(a.shareDetail))}))},getMoreList(){const a=this,e="service=job&action=news&pageSize=10&page="+a.hpage+"&orderby=1";var t=x.encodeUrl(e);a.$ajax.post({url:"include/ajax.php?"+t}).then((e=>{let t=e.data;100==t.state?(a.hotList=1===a.hpage?t.info.list:a.hotList.concat(t.info.list),a.hpage++,a.hpage>t.info.pageInfo.totalPage&&(a.hisload=!0,a.hloadEnd=!0)):(a.hotList=[],a.hloadEnd=!0,a.hisload=!0)}))},linkTo(a,e){let t=this.pages.newsDetail;"detail"==e&&(t=t+"?id="+a.id),console.log(t),x.linkTo(t)}}},[["render",function(a,e,o,k,P,j){const x=w(u("webTop"),_),v=g,F=n,S=b("headerTop"),$=D,L=w(u("mp-html"),y);return t(),l(F,{class:s({"pagebox newsDetail":!0,loading:!P.articleData.id})},{default:i((()=>[r(F,{class:s({headerBox:!0,webHeader:"web"==P.uniPlatform})},{default:i((()=>["web"==P.uniPlatform?(t(),l(x,{key:0,module:"job",hideHead:!0,title:P.articleData.title,index:!1,appShare:P.shareDetail,ref:"headerH5"},null,8,["title","appShare"])):c("",!0),r(S,{show:!0,module:"job",backOnly:!0,noBorder:!0},{rightbtns:i((()=>["web"==P.uniPlatform?(t(),l(F,{key:0,class:"dropnav",onClick:j.showSlidePop},{default:i((()=>[r(v,{src:`${P.masterDomain}/static/images/header_la.png?v=${P.imgVersion}`,mode:"aspectFit"},null,8,["src"]),a.$refs.headerH5&&a.$refs.headerH5.msgData.total>0?(t(),l(F,{key:0,class:"msgData"},{default:i((()=>[r(v,{src:`${P.masterDomain}/static/images/dot.png?v=${P.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):c("",!0)])),_:1},8,["onClick"])):c("",!0)])),_:1})])),_:1},8,["class"]),r(F,{class:"content"},{default:i((()=>[r(F,{class:"article"},{default:i((()=>[r(F,{class:"title"},{default:i((()=>[d(m(P.articleData.title),1)])),_:1}),r(F,{class:"little-title a fn-clear"},{default:i((()=>[r(F,{class:"classify"},{default:i((()=>[d(m(P.articleData.typename),1)])),_:1}),r(F,{class:"origin"},{default:i((()=>[d("来源："+m(P.articleData.source),1)])),_:1}),r(F,{class:"number"},{default:i((()=>[r(v,{mode:"aspectFill",src:P.imgPath+"/read.png"+P.imgVersion,class:"img before"},null,8,["src"]),r($,{class:"span"},{default:i((()=>[d(m(P.articleData.click),1)])),_:1})])),_:1})])),_:1}),r(F,{class:"article-content"},{default:i((()=>[r(L,{content:P.articleData.body},null,8,["content"])])),_:1}),r(F,{class:"end"},{default:i((()=>[r(F,{class:"line"}),r(F,null,{default:i((()=>[d("END")])),_:1}),r(F,{class:"line"})])),_:1})])),_:1}),r(F,{class:"for-recommend-you"},{default:i((()=>[r(F,{class:"title"},{default:i((()=>[d("更多热门")])),_:1}),(t(!0),p(f,null,h(P.hotList,(a=>(t(),l(F,{class:"article",key:a.id,onClick:e=>j.linkTo(a,"detail")},{default:i((()=>[a.litpic?(t(),l(F,{key:0,class:"right-img"},{default:i((()=>[r(v,{mode:"aspectFill",class:"img",src:a.litpic},null,8,["src"])])),_:2},1024)):c("",!0),r(F,{class:s({"left-text":!0,noPic:!a.litpic})},{default:i((()=>[a.title?(t(),l(F,{key:0,class:"title"},{default:i((()=>[d(m(a.title),1)])),_:2},1024)):c("",!0),r(F,{style:{position:"absolute",bottom:"0","line-height":"28rpx"}},{default:i((()=>[0==a.recommend?(t(),l(F,{key:0,class:"recommend"},{default:i((()=>[d("推荐")])),_:1})):c("",!0),a.typename?(t(),l(F,{key:1,class:"classify"},{default:i((()=>[d(m(a.typename),1)])),_:2},1024)):c("",!0),a.date_b?(t(),l(F,{key:2,class:"time"},{default:i((()=>[d(m(a.date_b),1)])),_:2},1024)):c("",!0),a.click?(t(),l(F,{key:3,class:"number"},{default:i((()=>[r(v,{mode:"aspectFill",src:P.imgPath+"/read.png"+P.imgVersion,class:"img before"},null,8,["src"]),r($,{class:"span"},{default:i((()=>[d(m(a.click),1)])),_:2},1024)])),_:2},1024)):c("",!0)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128)),P.hloadEnd?(t(),l(F,{key:1,class:"bottom-loading p"},{default:i((()=>[d(m(P.hisload?"没有更多咯":"加载中..."),1)])),_:1})):(t(),l(F,{key:0,class:"bottom-loading p"},{default:i((()=>[d(m(P.hisload?"加载中...":"下拉加载更多"),1)])),_:1}))])),_:1})])),_:1}),P.articleData.id?c("",!0):(t(),l(F,{key:0,class:"loadAfter"},{default:i((()=>[r(v,{class:"img",src:P.imgPath+"/load.png"+P.imgVersion,mode:"aspectFill"},null,8,["src"])])),_:1}))])),_:1},8,["class"])}],["__scopeId","data-v-68c4edec"]]);export{v as default};
