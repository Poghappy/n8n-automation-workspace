import{l as a,c as e,o as t,B as l,b as s,w as i,F as o,g as n,i as c,a as d,d as r,e as p,E as u,D as h,t as f,Q as g,H as b,I as m,S as y,J as _,K as k,W as w,C as x,L as v,f as D}from"./index-160de7c6.js";import{_ as I}from"./page-meta.97cc335b.js";import{r as L}from"./uni-app.es.bf317389.js";import{h as P}from"./public_header.cca239c9.js";import{b as E}from"./bottom_pop.36ddb1af.js";import{_ as j,j as T}from"./job.cbea1f04.js";const C=n();const S=j({data:()=>({offTop:C.globalData.biasTop_88,navTop:C.globalData.navTop,masterDomain:C.globalData.masterDomain,imgPath:C.globalData.masterDomain+"/static/images/miniprograme/job",imgVersion:"?v="+C.globalData.imgVersion,searchKeywords:[],currKeywords:"",currKeyInd:0,keywords:"",searchPage:!0,bannerSwiper:[],banner:[],defaultPic:C.globalData.masterDomain+"/static/images/404.jpg",tabData:[{id:"",title:"最新",isload:!1,loadEnd:!1,page:1,list:[]}],activeIndex:0,isload:!1,loadEnd:!1,page:1,searchList:[],hisload:!1,hloadEnd:!1,hotList:[],hpage:1,showAll:!1,pages:[],scrollLeft:0,contentScrollW:0}),components:{headerTop:P,bottomPop:E},onLoad(a){const e=this;e.pages=C.pageFn(T),e.keywords=a.keywords?a.keywords:"",e.$nextTick((()=>{e.loadData()}))},onReachBottom(){const a=this;a.isload||a.loadEnd||a.getNewsList(),a.searchPage&&!a.searchList.length&&(a.hisload||a.hloadEnd||a.getMoreList())},onPullDownRefresh(){setTimeout((()=>{a()}),1e3),this.loadData(1)},onShareAppMessage:()=>({title:"招聘信息搜索",path:"/pages/packages/job/searchNews/searchNews"}),onShareTimeline:()=>({title:"招聘信息搜索"}),methods:{loadData(a){const e=this;e.searchPage||(e.getSearchKey(),e.getAdvBanner("招聘求职_模板四_移动端_职场资讯1","bannerSwiper"),e.getAdvBanner("招聘求职_模板四_移动端_职场资讯2","banner"),e.getNewsType()),a?e.reGetList():e.getNewsList(),"web"==e.uniPlatform&&C.globalData.webWeixin&&C.wxShareFn(),"web"!=e.uniPlatform||C.globalData.webWeixin||C.iosShare()},goLink(a){const e=this;if(e.searchPage)e.reGetList();else{let t=e.pages.searchNews,l=e.currKeywords;a.detail.value&&(l=a.detail.value),t=t+(t.indexOf("?")>-1?"&":"?")+"keywords="+l,C.linkTo(t)}},getSearchKey(){const a=this;var e=C.encodeUrl("service=siteConfig&action=hotkeywords&module=job");a.$ajax.post({url:"include/ajax.php?"+e}).then((e=>{let t=e.data;100==t.state&&(a.searchKeywords=t.info,a.currKeywords=a.searchKeywords[0].oldkeyword)}))},onSlideChange(a){const e=this;e.currKeywords=e.searchKeywords[a.detail.current].oldkeyword,e.currKeyInd=a.detail.current},changeTab(a,t){const l=this;l.tabData[l.activeIndex].lowerid="",l.tabData[l.activeIndex].isload=l.isload,l.tabData[l.activeIndex].loadEnd=l.loadEnd,l.tabData[l.activeIndex].page=l.page,l.activeIndex=a;e().in(this).select("#tab_"+t.id).boundingClientRect((a=>{let e=l.scrollLeft;l.scrollLeft=e+a.left-l.contentScrollW/2+a.width/2})).exec(),l.isload=null!=l.tabData[l.activeIndex].isload&&l.tabData[l.activeIndex].isload,l.loadEnd=null!=l.tabData[l.activeIndex].loadEnd&&l.tabData[l.activeIndex].loadEnd,l.page=null==l.tabData[l.activeIndex].page?1:l.tabData[l.activeIndex].page,l.tabData[l.activeIndex].list&&l.tabData[l.activeIndex].list.length?console.log("已有数据，不需要加载"):(l.tabData[l.activeIndex].list=[],l.getNewsList())},getAdvBanner(a,e){const t=this,l="service=siteConfig&action=adv&model=job&title="+a;var s=C.encodeUrl(l);t.$ajax.post({url:"include/ajax.php?"+s}).then((a=>{let l=a.data;100==l.state&&(t[e]=l.info.list)}))},getNewsType(){const a=this;var t=C.encodeUrl("service=job&action=newsType&son=1");a.$ajax.post({url:"include/ajax.php?"+t}).then((t=>{let l=t.data;if(100==l.state){let t={id:"",title:"最新",isload:!1,loadEnd:!1,page:1,list:[]};a.tabData=[t].concat(l.info),a.$nextTick((()=>{e().in(this).select(".tab-title").boundingClientRect((a=>{this.contentScrollW=a.width})).exec()}))}}))},getLowerPageList(a){const e=this;e.tabData[e.activeIndex].isload=!1,e.tabData[e.activeIndex].loadEnd=!1,e.tabData[e.activeIndex].page=1,e.tabData[e.activeIndex].lowerid=e.tabData[e.activeIndex].lowerid==a?"":a,e.reGetList()},reGetList(){const a=this;a.isload=!1,a.loadEnd=!1,a.page=1,a.getNewsList()},getNewsList(){const a=this;if(a.isload)return!1;a.isload=!0;const e=a.tabData[a.activeIndex].lowerid?a.tabData[a.activeIndex].lowerid:a.activeIndex>0?a.tabData[a.activeIndex].id:"",t=a.searchPage?"&skeyWord="+a.keywords:"&orderby="+(a.activeIndex?"":1)+"&typeid="+e,l="service=job&action=news&pageSize=10&page="+a.page+t;var s=C.encodeUrl(l);a.$ajax.post({url:"include/ajax.php?"+s}).then((e=>{let t=e.data;a.isload=!1,100==t.state?(a.searchPage?a.searchList=1===a.page?t.info.list:a.searchList.concat(t.info.list):1==a.page?a.tabData[a.activeIndex].list=t.info.list:a.tabData[a.activeIndex].list=a.tabData[a.activeIndex].list.concat(t.info.list),a.page=a.page+1,a.page>t.info.pageInfo.totalPage&&(a.isload=!0,a.loadEnd=!0)):(a.searchList=[],a.tabData[a.activeIndex].list=[],a.loadEnd=!0,a.isload=!1,a.searchPage&&a.getMoreList())}))},getMoreList(){const a=this;if(a.hisload)return!1;a.hisload=!0;const e="service=job&action=news&pageSize=10&page="+a.hpage+"&orderby=1";var t=C.encodeUrl(e);a.$ajax.post({url:"include/ajax.php?"+t}).then((e=>{a.hisload=!1;let t=e.data;100==t.state?(a.searchPage&&(a.hotList=1===a.hpage?t.info.list:a.hotList.concat(t.info.list)),a.hpage=a.hpage+1,a.hpage>t.info.pageInfo.totalPage&&(a.hisload=!0,a.hloadEnd=!0)):(a.hotList=[],a.loadEnd=!0,a.hisload=!0)}))},linkTo(a,e){let t=this.pages.newsDetail;"detail"==e&&(t=t+"?id="+a.id),C.linkTo(t)}}},[["render",function(a,e,n,P,E,j){const T=L(b("page-meta"),I),C=c,S=m,K=v,A=y,B=_,V=k("headerTop"),F=w,N=D,U=k("bottomPop");return t(),l(o,null,[s(T,{"page-style":"overflow:"+(E.showAll?"hidden":"visible")},null,8,["page-style"]),s(C,{class:"newsBox"},{default:i((()=>[s(C,{class:"headerBox"},{default:i((()=>[s(V,{show:!0,module:"job",backOnly:!0,noBorder:!0,rightGrow:!0},{headTitle:i((()=>[E.searchPage?p("",!0):(t(),d(C,{key:0,class:"h-title"},{default:i((()=>[r("职场资讯")])),_:1}))])),rightbtns:i((()=>[s(C,{class:"h-search"},{default:i((()=>[s(C,{class:"formbox"},{default:i((()=>[s(S,{class:"before",src:E.imgPath+"/search_icon.png"+E.imgVersion,mode:"aspectFill"},null,8,["src"]),s(C,{class:"afterCon"},{default:i((()=>[!E.searchKeywords.length||E.searchPage||E.keywords?p("",!0):(t(),d(A,{key:0,style:{height:"64rpx"},circular:!0,autoplay:!0,class:"newsSwiper",ref:"newsSwiper",interval:"3000",loop:!0,vertical:!0,onChange:j.onSlideChange},{default:i((()=>[(t(!0),l(o,null,u(E.searchKeywords,((a,e)=>(t(),d(K,{key:e},{default:i((()=>[r(f(a.oldkeyword),1)])),_:2},1024)))),128))])),_:1},8,["onChange"])),s(B,{name:"keywords",class:"h-search-input",placeholder:E.searchKeywords&&E.searchKeywords.length?"":"HR最喜欢看到的简历","placeholder-style":"font-size: 26rpx; color: #9DA0A6;",modelValue:E.keywords,"onUpdate:modelValue":e[0]||(e[0]=a=>E.keywords=a),onConfirm:j.goLink},null,8,["placeholder","modelValue","onConfirm"]),E.keywords?(t(),d(S,{key:1,class:"clear",onClick:e[1]||(e[1]=a=>E.keywords=""),src:E.imgPath+"/clear.png"+E.imgVersion},null,8,["src"])):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),s(C,{class:"contentBox"},{default:i((()=>[E.searchPage?(t(),d(C,{key:1,class:"content"},{default:i((()=>[s(C,{class:"content-article"},{default:i((()=>[(t(!0),l(o,null,u(E.searchList,(a=>(t(),d(C,{class:"article",key:a.id,onClick:e=>j.linkTo(a,"detail")},{default:i((()=>[a.litpic?(t(),d(C,{key:0,class:"right-img"},{default:i((()=>[s(S,{mode:"aspectFill",src:a.litpic,onError:e=>a.litpic=E.defaultPic,class:"img"},null,8,["src","onError"])])),_:2},1024)):p("",!0),s(C,{class:"left-text"},{default:i((()=>[a.title?(t(),d(C,{key:0,class:"title"},{default:i((()=>[r(f(a.title),1)])),_:2},1024)):p("",!0),s(C,{style:{position:"absolute",bottom:"-8rpx"}},{default:i((()=>[0==a.recommend?(t(),d(C,{key:0,class:"recommend"},{default:i((()=>[r("推荐")])),_:1})):p("",!0),a.typename?(t(),d(C,{key:1,class:"classify"},{default:i((()=>[r(f(a.typename),1)])),_:2},1024)):p("",!0),a.date_b?(t(),d(C,{key:2,class:"time"},{default:i((()=>[r(f(a.date_b),1)])),_:2},1024)):p("",!0),a.click?(t(),d(C,{key:3,class:"number"},{default:i((()=>[s(S,{mode:"aspectFill",src:E.imgPath+"/read.png"+E.imgVersion,class:"img before"},null,8,["src"]),s(N,null,{default:i((()=>[r(f(a.click),1)])),_:2},1024)])),_:2},1024)):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),E.loadEnd?(t(),d(C,{key:1},{default:i((()=>[E.searchList.length?(t(),d(C,{key:0,class:"p"},{default:i((()=>[r("没有更多了")])),_:1})):(t(),d(C,{key:1,class:"noData"},{default:i((()=>[g("img",{src:E.imgPath+"/noData.png"+E.imgVersion,class:"before",alt:""},null,8,["src"]),s(C,{class:"p"},{default:i((()=>[r("暂无数据")])),_:1})])),_:1}))])),_:1})):(t(),d(C,{key:0,class:"p"},{default:i((()=>[r(f(E.isload?"加载中...":"下拉加载更多"),1)])),_:1}))])),_:1}),E.loadEnd&&!E.searchList.length?(t(),d(C,{key:0,class:"hotListBox"},{default:i((()=>[s(C,{class:"h4"},{default:i((()=>[r("更多热门")])),_:1}),s(C,{class:"content-article"},{default:i((()=>[(t(!0),l(o,null,u(E.hotList,(a=>(t(),d(C,{class:"article",key:a.id,onClick:e=>j.linkTo(a,"detail")},{default:i((()=>[a.litpic?(t(),d(C,{key:0,class:"right-img"},{default:i((()=>[s(S,{mode:"aspectFill",src:a.litpic,onError:e=>a.litpic=E.defaultPic,class:"img"},null,8,["src","onError"])])),_:2},1024)):p("",!0),s(C,{class:"left-text"},{default:i((()=>[a.title?(t(),d(C,{key:0,class:"title"},{default:i((()=>[r(f(a.title),1)])),_:2},1024)):p("",!0),s(C,{style:{position:"absolute",bottom:"-.08rem"}},{default:i((()=>[0==a.recommend?(t(),d(C,{key:0,class:"recommend"},{default:i((()=>[r("推荐")])),_:1})):p("",!0),a.typename?(t(),d(C,{key:1,class:"classify"},{default:i((()=>[r(f(a.typename),1)])),_:2},1024)):p("",!0),a.date_b?(t(),d(C,{key:2,class:"time"},{default:i((()=>[r(f(a.date_b),1)])),_:2},1024)):p("",!0),a.click?(t(),d(C,{key:3,class:"number"},{default:i((()=>[s(S,{mode:"aspectFill",src:E.imgPath+"/read.png"+E.imgVersion,class:"img before"},null,8,["src"]),s(N,null,{default:i((()=>[r(f(a.click),1)])),_:2},1024)])),_:2},1024)):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),E.hloadEnd?(t(),d(C,{key:1},{default:i((()=>[E.hotList.length?(t(),d(C,{key:0,class:"p"},{default:i((()=>[r("没有更多了")])),_:1})):(t(),d(C,{key:1,class:"noData"},{default:i((()=>[s(C,{class:"p"},{default:i((()=>[r("暂无数据")])),_:1})])),_:1}))])),_:1})):(t(),d(C,{key:0,class:"p"},{default:i((()=>[r(f(E.isload?"加载中...":"下拉加载更多"),1)])),_:1}))])),_:1})])),_:1})):p("",!0)])),_:1})):(t(),d(C,{key:0,class:"content"},{default:i((()=>[E.bannerSwiper&&E.bannerSwiper.length?(t(),d(C,{key:0,class:"content-top"},{default:i((()=>[s(C,{class:"banner"},{default:i((()=>[s(C,{class:"wrapper"},{default:i((()=>[s(A,{class:"bannerSwiper"},{default:i((()=>[(t(!0),l(o,null,u(E.bannerSwiper,(a=>(t(),d(K,{key:a},{default:i((()=>[s(C,{href:a.link?a.link:"javascript:;",class:"bImg a"},{default:i((()=>[s(S,{mode:"aspectFill",class:"img",src:a.turl,alt:"",onError:e=>a.turl=E.defaultPic},null,8,["src","onError"]),s(C,{class:"h2"},{default:i((()=>[r(f(a.title),1)])),_:2},1024)])),_:2},1032,["href"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),s(C,{class:"banner2"},{default:i((()=>[(t(!0),l(o,null,u(E.banner,(a=>(t(),d(C,{class:"bannerBox",key:a},{default:i((()=>[s(C,{"data-url":a.link?a.link:"javascript:;",class:"bImg a"},{default:i((()=>[s(S,{class:"img",src:a.turl,alt:"",onError:e=>a.turl=E.defaultPic},null,8,["src","onError"])])),_:2},1032,["data-url"])])),_:2},1024)))),128))])),_:1})])),_:1})):p("",!0),s(C,{class:"content-swipertab",style:h("top:calc("+E.navTop+"px + 88rpx)")},{default:i((()=>[s(C,{class:"tab-class",onClick:e[2]||(e[2]=a=>E.showAll=!0)},{default:i((()=>[s(C,{class:"more a"},{default:i((()=>[s(S,{class:"img",src:E.imgPath+"/more_btn.png"+E.imgVersion},null,8,["src"])])),_:1}),s(C,{class:"show"})])),_:1}),s(F,{class:"tab-title",ref:"tabLine","scroll-x":!0,"show-scrollbar":!1,"scroll-left":E.scrollLeft},{default:i((()=>[s(C,{class:"ul tabUl",ref:"tabUl"},{default:i((()=>[(t(!0),l(o,null,u(E.tabData,((a,e)=>(t(),d(C,{id:"tab_"+a.id,ref_for:!0,ref:"tab"+e,"data-id":a.id,key:a.id,class:x({active:e==E.activeIndex,li:!0}),onClick:t=>j.changeTab(e,a)},{default:i((()=>[r(f(a.title),1)])),_:2},1032,["id","data-id","class","onClick"])))),128))])),_:1},512)])),_:1},8,["scroll-left"])])),_:1},8,["style"]),E.tabData[E.activeIndex]&&E.tabData[E.activeIndex].lower?(t(),d(C,{key:1,class:"second-tab ul",style:h("top:calc("+E.navTop+"px + 192rpx)")},{default:i((()=>[(t(!0),l(o,null,u(E.tabData[E.activeIndex].lower,(a=>(t(),d(C,{class:x({active:E.tabData[E.activeIndex].lowerid==a.id,li:!0}),"data-id":a.id,key:a.id,onClick:e=>j.getLowerPageList(a.id)},{default:i((()=>[r(f(a.title),1)])),_:2},1032,["class","data-id","onClick"])))),128))])),_:1},8,["style"])):p("",!0),s(C,{class:"content-article",ref:"content"},{default:i((()=>[(t(!0),l(o,null,u(E.tabData[E.activeIndex].list,(a=>(t(),d(C,{class:"article",onClick:e=>j.linkTo(a,"detail"),key:a.id},{default:i((()=>[a.litpic?(t(),d(C,{key:0,class:"right-img"},{default:i((()=>[s(S,{mode:"aspectFill",class:"img",src:a.litpic,onError:e=>a.litpic=E.defaultPic},null,8,["src","onError"])])),_:2},1024)):p("",!0),s(C,{class:x({"left-text":!0,noPic:!a.litpic})},{default:i((()=>[a.title?(t(),d(C,{key:0,class:"title"},{default:i((()=>[r(f(a.title),1)])),_:2},1024)):p("",!0),s(C,{style:{position:"absolute",bottom:"-8rpx"}},{default:i((()=>[0==a.recommend?(t(),d(C,{key:0,class:"recommend"},{default:i((()=>[r("推荐")])),_:1})):p("",!0),a.typename?(t(),d(C,{key:1,class:"classify"},{default:i((()=>[r(f(a.typename),1)])),_:2},1024)):p("",!0),a.date_b?(t(),d(C,{key:2,class:"time"},{default:i((()=>[r(f(a.date_b),1)])),_:2},1024)):p("",!0),a.click?(t(),d(C,{key:3,class:"number"},{default:i((()=>[s(S,{mode:"aspectFill",src:E.imgPath+"/read.png"+E.imgVersion,class:"img before"},null,8,["src"]),s(N,null,{default:i((()=>[r(f(a.click),1)])),_:2},1024)])),_:2},1024)):p("",!0)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128)),E.loadEnd?(t(),d(C,{key:1,class:"p"},{default:i((()=>[r(f(0==E.tabData[E.activeIndex].list.length?"暂无数据":"没有更多咯"),1)])),_:1})):(t(),d(C,{key:0,class:"p"},{default:i((()=>[r(f(E.isload?"加载中...":"下拉加载更多"),1)])),_:1}))])),_:1},512)])),_:1}))])),_:1}),s(U,{showPop:E.showAll,slideTop:!0,maskClick:"showAll",onHidepop:e[3]||(e[3]=a=>E.showAll=!1)},{default:i((()=>[s(C,{class:"popBox",style:h("padding-top:"+(E.navTop+E.offTop)+"px;")},{default:i((()=>[s(C,{class:"header"},{default:i((()=>[r("所有频道")])),_:1}),s(C,{class:"all-channel"},{default:i((()=>[(t(!0),l(o,null,u(E.tabData,((a,e)=>(t(),d(C,{"data-id":a.id,key:a.id,class:x({active:e==E.activeIndex,li:!0}),onClick:t=>{j.changeTab(e,a),E.showAll=!1}},{default:i((()=>[r(f(a.title),1)])),_:2},1032,["data-id","class","onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1},8,["showPop"])])),_:1})],64)}],["__scopeId","data-v-781b0431"]]);export{S as default};
