import{k as a,l as e,m as t,A as s,c as i,o as l,B as o,b as d,w as n,F as r,g as p,i as c,C as h,a as g,e as f,d as m,t as u,E as y,D as _,H as b,I as w,K as P,f as x}from"./index-160de7c6.js";import{_ as k}from"./page-meta.97cc335b.js";import{r as C}from"./uni-app.es.bf317389.js";import{_ as D}from"./webTop.5c2884c8.js";import{_ as T}from"./mp-html.70cfb26f.js";import{h as j}from"./public_header.cca239c9.js";import{b as v}from"./bottom_pop.36ddb1af.js";import{_ as H,j as I}from"./job.cbea1f04.js";const L=p();const E=H({data:()=>({navTop:L.globalData.navTop,uniPlatform:"",isApp:!1,shareDetail:{},imgPath:L.globalData.masterDomain+"/static/images/miniprograme/job",imgVersion:"?v="+L.globalData.imgVersion,masterDomain:L.globalData.masterDomain,default_img:L.globalData.masterDomain+"/static/images/404.jpg",listdata:[],page:1,isload:!1,loadEnd:!1,type:1,siteCityInfo:"",addrid:0,addrName:"",addrList:[],showPop:!1,headerHeight:0,fixedHeight:0,scrollTop:0,topOffset:0,pages:{}}),components:{headerTop:j,bottomPop:v},onLoad(){const e=this;e.uniPlatform=a().uniPlatform,"web"==e.uniPlatform&&null!=typeof window.appBoolean&&window.appBoolean&&(e.isApp=!0),e.pages=L.pageFn(I),e.getCityInfo(),e.getList(),e.getTopHeight(),"web"==e.uniPlatform&&L.globalData.webWeixin&&L.wxShareFn({title:"招聘会"}),"web"!=e.uniPlatform||L.globalData.webWeixin||L.iosShare({title:"招聘会"})},onPageScroll({scrollTop:a}){this.scrollTop=a},onPullDownRefresh(){const a=this;a.getCityInfo(),a.getList(),a.getTopHeight(),"web"==a.uniPlatform&&L.globalData.webWeixin&&L.wxShareFn(),"web"!=a.uniPlatform||L.globalData.webWeixin||L.iosShare({title:"招聘会"}),setTimeout((()=>{e()}),1e3)},onReachBottom(){const a=this;console.log(!a.isload,!a.loadEnd),a.isload||a.loadEnd||(console.log(2323),a.getList())},onShareAppMessage:()=>({title:"招聘会列表",path:"/pages/packages/job/zhaopinhui/zhaopinhui"}),onShareTimeline:()=>({title:"招聘会列表"}),methods:{showSlidePop(){this.$refs.headerH5.popFn(1)},getCityInfo(){const a=t("cityInfo");this.siteCityInfo=a||{},this.getAddrList()},getAddrList(){const a=this,e="service=job&action=addr&type="+a.siteCityInfo.cityid;var t=L.encodeUrl(e);a.$ajax.post({url:"include/ajax.php?"+t}).then((e=>{let t=e.data;100==t.state&&(a.addrList=t.info)}))},showAddrPop(){const a=this;s({scrollTop:a.topOffset-a.headerHeight,duration:0}),a.showPop=!0},getList(){const a=this;if(a.isload)return!1;a.isload=!0;const e="service=job&action=fairs&type="+a.type+"&addrid="+(a.addrid?a.addrid:a.siteCityInfo.cityid)+"&page="+a.page+"&pageSize=5";var t=L.encodeUrl(e);a.$ajax.post({url:"include/ajax.php?"+t}).then((e=>{let t=e.data;a.loadEnd=!1,a.isload=!1,100==t.state?(1==a.page?a.listdata=t.info.list:a.listdata=a.listdata.concat(t.info.list),a.page=a.page+1,a.page>t.info.pageInfo.totalPage&&(a.isload=!0,a.loadEnd=!0)):(a.isload=!0,a.loadEnd=!0,1==a.page&&(a.listdata=[]))}))},reGetList(){const a=this;a.isload=!1,a.loadEnd=!1,a.page=1,a.getList()},choseAddr(a){const e=this;a?(e.addrid=a.id,e.addrName=a.typename):(e.addrid=e.siteCityInfo.cityid,e.addrName=e.siteCityInfo.typename),e.showPop=!1,e.reGetList()},getTopHeight(){const a=this,e=i().in(this);setTimeout((()=>{e.select(".p-items").boundingClientRect((e=>{a.topOffset=e.top+a.scrollTop})).exec(),e.select(".pii-address").boundingClientRect((e=>{a.fixedHeight=e.height})).exec(),e.select(".header").boundingClientRect((e=>{a.headerHeight=e.height})).exec()}),300)},toDetail(a,e){let t=this.pages.zhaopinhuiDetail+"?id="+a.id+"&type="+e;L.linkTo(t)},htmlToUni:a=>`<div style="display:inline-flex">${a}</div>`}},[["render",function(a,e,t,s,i,p){const j=C(b("page-meta"),k),v=C(b("webTop"),D),H=c,I=w,L=P("headerTop"),E=P("bottomPop"),F=x,S=C(b("mp-html"),T);return l(),o(r,null,[d(j,{"page-style":"overflow:"+(i.showPop?"hidden":"visible")},null,8,["page-style"]),d(H,{class:"zhaopin"},{default:n((()=>[d(H,{class:h({header:!0,webHeader:"web"==i.uniPlatform}),id:"header"},{default:n((()=>["web"==i.uniPlatform?(l(),g(v,{key:0,module:"job",hideHead:!0,title:"招聘会",index:!1,appShare:i.shareDetail,ref:"headerH5",class:"headerH5"},null,8,["appShare"])):f("",!0),d(L,{module:"job",backDefine:i.imgPath+"/header_back_index.png"+i.imgVersion,headerBg:"#3377FF",show:!0,backOnly:!0,noBorder:!0},{headTitle:n((()=>[d(H,{class:"h4"},{default:n((()=>[m("招聘会")])),_:1})])),rightbtns:n((()=>["web"==i.uniPlatform?(l(),g(H,{key:0,class:"dropnav",onClick:p.showSlidePop},{default:n((()=>[d(I,{src:`${i.masterDomain}/static/images/header_la_index.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"]),a.$refs.headerH5&&a.$refs.headerH5.msgData.total>0?(l(),g(H,{key:0,class:"msgData"},{default:n((()=>[d(I,{src:`${i.masterDomain}/static/images/dot.png?v=${i.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0)])),_:1},8,["onClick"])):f("",!0)])),_:1},8,["backDefine"])])),_:1},8,["class"]),d(H,{class:"adv"}),d(E,{slideTop:!0,showPop:i.showPop,maskClick:"showPop",onHidepop:e[1]||(e[1]=a=>{i.showPop=!1}),slidetopFixed:i.headerHeight+i.fixedHeight+"px",zIndex:2},{default:n((()=>[d(H,{class:h({areaCodeChosePop:!0,showPop:i.showPop})},{default:n((()=>[d(H,{class:"ul"},{default:n((()=>[d(H,{onClick:e[0]||(e[0]=a=>p.choseAddr()),class:h({on_chose:i.addrid==i.siteCityInfo.cityid||""==i.addrid,li:!0})},{default:n((()=>[m(u(i.siteCityInfo.name),1)])),_:1},8,["class"]),(l(!0),o(r,null,y(i.addrList,(a=>(l(),g(H,{key:a.id,class:h({on_chose:i.addrid==a.id,li:!0}),onClick:e=>p.choseAddr(a)},{default:n((()=>[m(u(a.typename),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["class"])])),_:1},8,["showPop","slidetopFixed"]),d(H,{class:"plate"},{default:n((()=>[d(H,{class:"p-top"},{default:n((()=>[d(H,{class:h({active:1===i.type,txt:!0}),"data-type":"1",onClick:e[2]||(e[2]=a=>{i.type=1,p.reGetList()})},{default:n((()=>[m("现场招聘会")])),_:1},8,["class"]),d(H,{class:h({active:2===i.type,txt:!0}),"data-type":"2",onClick:e[3]||(e[3]=a=>{i.type=2,p.reGetList()})},{default:n((()=>[m("网络招聘")])),_:1},8,["class"]),d(I,{class:"img",src:i.imgPath+"/tabLeft.png"+i.imgVersion,style:_(2==i.type?"transform: rotateZ(180deg) rotateX(180deg);right: 0;":"")},null,8,["src","style"])])),_:1}),d(H,{class:"p-items"},{default:n((()=>[1===i.type?(l(),g(H,{key:0,class:"pii-address",onClick:e[4]||(e[4]=a=>p.showAddrPop()),ref:"topFixed",style:_("top:calc("+i.navTop+"px + 88rpx);")},{default:n((()=>[d(H,{class:"left a",href:"javascript:;"},{default:n((()=>[d(H,{class:"addr"},{default:n((()=>[m(u(i.addrName?i.addrName:i.siteCityInfo.name),1)])),_:1}),d(I,{class:"img",src:i.imgPath+"/d-arrow.png"+i.imgVersion},null,8,["src"])])),_:1}),d(H,{class:"right"},{default:n((()=>[m("现场招聘会 第一时间面对面")])),_:1})])),_:1},8,["style"])):f("",!0),2===i.type?(l(),g(H,{key:1,class:"pi-labelBox"},{default:n((()=>[d(H,{class:"pi-label"},{default:n((()=>[d(H,{class:"pi-lab"},{default:n((()=>[d(I,{class:"img",src:i.imgPath+"/internet.png"+i.imgVersion},null,8,["src"]),d(F,{class:"span"},{default:n((()=>[m("随时随地求职，省力更高效")])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),d(H,{class:"container"},{default:n((()=>[(l(!0),o(r,null,y(i.listdata,(a=>(l(),g(H,{class:"item",key:a.id,onClick:e=>p.toDetail(a,i.type)},{default:n((()=>[i.isApp?f("",!0):(l(),g(H,{key:0,class:"pii-detail",to:{name:"zhaopinhuiDetail",query:{id:a.id,type:i.type,appFullScreen:1}}},{default:n((()=>[d(H,{class:"left"},{default:n((()=>[d(I,{class:"img",src:a.picture[0].pic?a.picture[0].pic:i.default_img,onError:e=>a.picture[0].pic=i.default_img,mode:"aspectFill"},null,8,["src","onError"]),2==a.stating?(l(),g(H,{key:0,class:"end"},{default:n((()=>[d(H,{class:"solid"},{default:n((()=>[d(H,{class:"txt"},{default:n((()=>[m("已结束")])),_:1})])),_:1})])),_:1})):f("",!0)])),_:2},1024),d(H,{class:"right"},{default:n((()=>[d(H,{class:"title"},{default:n((()=>[m(u(a.title),1)])),_:2},1024),a.fairs?(l(),g(H,{key:0,class:"address"},{default:n((()=>[m(u(a.fairs.addr[a.fairs.addr.length-1])+" "+u(a.fairs.title),1)])),_:2},1024)):f("",!0),d(H,{class:"time"},{default:n((()=>[d(S,{class:"inlineText span",content:p.htmlToUni(a.show_text.split(" - ")[0])},null,8,["content"]),2!=a.stating?(l(),g(H,{key:0,class:h(["txt",{soon:0==a.stating}])},{default:n((()=>[m(u(0==a.stating?"即将开始":"进行中"),1)])),_:2},1032,["class"])):f("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"]))])),_:2},1032,["onClick"])))),128)),i.loadEnd&&i.isload&&0==i.listdata.length?(l(),g(H,{key:0,class:"loading noData"},{default:n((()=>[m(" 暂无数据")])),_:1})):i.loadEnd&&i.isload?(l(),g(H,{key:1,class:"loading loadEnd"},{default:n((()=>[m("没有更多了")])),_:1})):i.isload?(l(),g(H,{key:2,class:h({loading:!0,loadEnd:i.listdata.length>0})},{default:n((()=>[m("加载中")])),_:1},8,["class"])):(l(),g(H,{key:3,class:"loading loadEnd"},{default:n((()=>[m("下拉加载更多")])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})],64)}],["__scopeId","data-v-84298b4a"]]);export{E as default};
