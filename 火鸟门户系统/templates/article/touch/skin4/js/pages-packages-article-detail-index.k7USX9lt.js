import{o as e,h as t,w as i,K as a,y as n,j as s,L as o,H as r,M as l,N as c,O as d,c as h,P as u,m as p,k as f,Q as m,R as g,G as x,E as b,n as y,r as v,T as w,a as _,b as k,U as C,d as F,V as S,s as z,f as I,i as P,p as T,u as j,q as B,F as V,t as W,A as E,v as M,W as O,X as D,l as L,Y as R,x as A,I as H,Z as U,z as N,S as Y,_ as q,$ as J,C as X,J as G,B as Q}from"./index-BfhdaSGz.js";import{_ as Z}from"./mp-html.KQam4B07.js";import{_ as K,r as ee,a as te}from"./private_tip.Cj56aYgc.js";import{_ as ie,a as ae}from"./complain.qy2gX0GO.js";import{_ as ne}from"./popWarn.B1WhhsWw.js";import{a as se}from"./article.ByLku1bF.js";const oe=(e="")=>e.split(";").filter((e=>e&&!/^[\n\s]+$/.test(e))).map((e=>{const t=e.slice(0,e.indexOf(":")),i=e.slice(e.indexOf(":")+1);return{[t.replace(/-([a-z])/g,(function(){return arguments[1].toUpperCase()})).replace(/\s+/g,"")]:i.replace(/^\s+/,"").replace(/\s+$/,"")||""}}));function re(e){return{provide(){return{[e]:this}},data:()=>({el:{id:null,css:{},views:[]}}),watch:{css:{handler(e){this.canvasId&&(this.el.css=("object"==typeof e?e:e&&Object.assign(...oe(e)))||{},this.canvasWidth=this.el.css&&this.el.css.width||this.canvasWidth,this.canvasHeight=this.el.css&&this.el.css.height||this.canvasHeight)},immediate:!0}}}}function le(e,t={}){return t.indexKey,{inject:{[e]:{default:null}},watch:{el:{handler(e,t){JSON.stringify(e)!=JSON.stringify(t)&&this.bindRelation()},deep:!0,immediate:!0},src:{handler(e,t){e!=t&&this.bindRelation()},immediate:!0},text:{handler(e,t){e!=t&&this.bindRelation()},immediate:!0},css:{handler(e,t){e!=t&&(this.el.css=("object"==typeof e?e:e&&Object.assign(...oe(e)))||{})},immediate:!0},replace:{handler(e,t){JSON.stringify(e)!=JSON.stringify(t)&&this.bindRelation()},deep:!0,immediate:!0}},created(){this._uid||(this._uid=this._.uid),Object.defineProperty(this,"parent",{get:()=>this[e]||[]}),Object.defineProperty(this,"index",{get:()=>{this.bindRelation();const{parent:{el:{views:e=[]}={}}={}}=this;return e.indexOf(this.el)}}),this.el.type=this.type,this.uid&&(this.el.uid=this.uid),this.bindRelation()},beforeUnmount(){this.removeEl()},methods:{removeEl(){this.parent&&(this.parent.el.views=this.parent.el.views.filter((e=>e._uid!==this._uid)))},bindRelation(){if(this.el._uid||(this.el._uid=this._uid),["text","qrcode"].includes(this.type)&&(this.el.text=this.$slots&&this.$slots.default&&this.$slots.default[0].text||`${this.text||""}`.replace(/\\n/g,"\n")),"image"==this.type&&(this.el.src=this.src),!this.parent)return;let e=this.parent.el.views||[];-1!==e.indexOf(this.el)?this.parent.el.views=e.map((e=>e._uid==this._uid?this.el:e)):this.parent.el.views=[...e,this.el]}},mounted(){}}}const ce=K({name:"lime-painter-image",mixins:[le("painter")],props:{id:String,css:[String,Object],src:String},data:()=>({type:"image",el:{css:{},src:null}})},[["render",function(e,t,i,a,n,s){return null}]]);const de=K({name:"lime-painter-text",mixins:[le("painter")],props:{uid:String,css:[String,Object],text:[String,Number],replace:Object},data:()=>({type:"text",el:{css:{},text:null}})},[["render",function(s,o,r,l,c,d){const h=n;return e(),t(h,{style:{opacity:"0",height:"0"}},{default:i((()=>[a(s.$slots,"default")])),_:3})}]]);const he=K({name:"lime-painter-view",mixins:[le("painter"),re("painter")],props:{id:String,css:[String,Object]},data:()=>({type:"view",el:{css:{},views:[]}}),mounted(){}},[["render",function(n,o,r,l,c,d){const h=s;return e(),t(h,null,{default:i((()=>[a(n.$slots,"default")])),_:3})}]]);const ue=K({name:"lime-painter-qrcode",mixins:[le("painter")],props:{id:String,css:[String,Object],text:String},data:()=>({type:"qrcode",el:{css:{},text:null}})},[["render",function(e,t,i,a,n,s){return null}]]),pe={props:{board:Object,pathType:String,fileType:{type:String,default:"png"},hidden:Boolean,quality:{type:Number,default:1},css:[String,Object],width:[Number,String],height:[Number,String],pixelRatio:Number,customStyle:String,isCanvasToTempFilePath:Boolean,sleep:{type:Number,default:1e3/30},beforeDelay:{type:Number,default:100},afterDelay:{type:Number,default:100},performance:Boolean,useCORS:Boolean,hidpi:{type:Boolean,default:!0}}},fe=e=>/^data:image\/(\w+);base64/.test(e);function me(e){return new Promise((t=>setTimeout(t,e)))}let{platform:ge,SDKVersion:xe}=o();const be=/windows|mac/.test(ge);let ye={};function ve(e,t,i=!1){if("number"==typeof e)return e;if(function(e){return/^-?\d+(\.\d+)?$/.test(e)}(e))return 1*e;if("string"==typeof e){const a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|px|%)$/g.exec(e);if(!e||!a)return 0;const n=a[3];e=parseFloat(e);let s=0;return"rpx"===n?s=r(e):"px"===n?s=1*e:"%"===n?s=e*ve(t)/100:"em"===n&&(s=e*ve(t||14)),i?1*s.toFixed(2):Math.round(s)}return 0}function we(e){return/^data:/.test(e)?e:new Promise(((t,i)=>{let a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.onload=function(){let e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(a,0,0);let i=e.toDataURL("image/png");t(i),e.height=e.width=0},a.src=e+"?v="+Math.random(),a.onerror=e=>{i(e)}}))}function _e(e,t){const i=this&&this.canvas&&this.canvas.createImage;return new Promise((async(a,n)=>{let s=e.replace(/^@\//,"/");if(ye[e]&&ye[e].errMsg)a(ye[e]);else{try{t&&(s=await we(e))}catch(o){n({...o,src:s})}if(i&&!be){const t=this.canvas.createImage();return t.onload=function(){const i={path:t,width:t.width,height:t.height};ye[e]=i,a(ye[e])},t.onerror=function(t){n({err:t,path:e})},void(t.src=s)}l({src:s,success:t=>{if(i){const i=this.canvas.createImage();return i.onload=function(){t.path=i,ye[e]=t,a(ye[e])},i.onerror=function(t){n({err:t,path:e})},void(i.src=s)}ye[e]=t,a(ye[e])},fail(t){console.error({err:t,path:e}),n({err:t,path:e})}})}}))}var ke=function(){return(ke=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function $e(e,t,i,a){return new(i||(i=Promise))((function(n,s){function o(e){try{l(a.next(e))}catch(t){s(t)}}function r(e){try{l(a.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((a=a.apply(e,t||[])).next())}))}function Ce(e,t){var i,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(r){s=[6,r],a=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}}var Fe={MP_WEIXIN:"mp-weixin",MP_QQ:"mp-qq",MP_ALIPAY:"mp-alipay",MP_BAIDU:"mp-baidu",MP_TOUTIAO:"mp-toutiao",MP_DINGDING:"mp-dingding",H5:"h5",WEB:"web",PLUS:"plus"},Se="width",ze=["Top","Right","Bottom","Left"],Ie="right",Pe="bottom",Te=["contentSize","clientSize","borderSize","offsetSize"],je={TOP:"top",MIDDLE:"middle",BOTTOM:Pe},Be={LEFT:"left",CENTER:"center",RIGHT:Ie},Ve="view",We="text",Ee="image",Me="qrcode",Oe="block",De="absolute",Le="fixed",Re={display:Oe,color:"#000000",lineHeight:"1.4em",fontSize:14,fontWeight:400,fontFamily:"sans-serif",lineCap:"butt",flexDirection:"row",flexWrap:"nowrap",textAlign:"left",alignItems:"flex-start",justifyContent:"flex-start",position:"static",transformOrigin:"center center"},Ae={upx2px:function(e){return window.innerWidth/750*e},getSystemInfoSync:function(){return{screenWidth:window.innerWidth,screenHeight:window.innerHeight}},getImageInfo:function(e){var t=e.src,i=e.success,a=e.fail,n=new Image;n.onload=function(){i({width:n.naturalWidth,height:n.naturalHeight,path:n.src,src:t})},n.onerror=a,n.src=t}},He="object"==typeof window?"undefined"==typeof uni||"undefined"!=typeof uni&&!d?Fe.WEB:Fe.H5:"object"==typeof swan?Fe.MP_BAIDU:"object"==typeof tt?Fe.MP_TOUTIAO:"object"==typeof plus?Fe.PLUS:"object"==typeof wx?Fe.MP_WEIXIN:void 0,Ue=He==Fe.MP_WEIXIN?wx:"undefined"!=typeof uni?l?{upx2px:function(e){return r(e)},getSystemInfoSync:function(){return o()},getImageInfo:function(e){return l(e)},downloadFile:function(e){return c(e)}}:Object.assign(uni,Ae):"undefined"!=typeof window?Ae:uni;if(!Ue.upx2px){var Ne=((Ue.getSystemInfoSync&&Ue.getSystemInfoSync()).screenWidth||375)/750;Ue.upx2px=function(e){return Ne*e}}function Ye(e){return/^-?\d+(\.\d+)?$/.test(e)}function qe(e,t,i){if(Ye(e))return 1*e;if("string"==typeof e){var a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|vw|vh|px|%)$/g.exec(e);if(!e||!a)return 0;var n=a[3];e=parseFloat(e);var s=0;if("rpx"===n)s=Ue.upx2px(e);else if("px"===n)s=1*e;else if("%"===n&&t)s=e*qe(t)/100;else if("em"===n&&t)s=e*qe(t||14);else if(["vw","vh"].includes(n)){var o=Ue.getSystemInfoSync(),r=o.screenWidth,l=o.screenHeight;s=e*("vw"==n?r:l)/100}return 1*s.toFixed(2)}return 0}function Je(e){return/%$/.test(e)}function Xe(e){for(var t=[],i=[],a=0,n=e.substring(0,e.length-1).split("%,");a<n.length;a++){var s=n[a];t.push(s.substring(0,s.lastIndexOf(" ")).trim()),i.push(s.substring(s.lastIndexOf(" "),s.length)/100)}return{colors:t,percents:i}}function Ge(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function et(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ke(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function it(e){return"number"==typeof e}function at(e){return"auto"===e||null===e}function nt(e){return/%$/.test(e)}var st=Ee,ot=We,rt=Me,lt=De,ct=Le;function dt(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))}function ht(e){e=e.trim();for(var t=new Array,i="+",a="",n=e.length,s=0;s<n;++s){if("."===e[s]||!isNaN(Number(e[s]))&&" "!==e[s])a+=e[s];else if("("===e[s]){for(var o=1,r=s;o>0;)"("===e[r+=1]&&(o+=1),")"===e[r]&&(o-=1);a=""+ht(e.slice(s+1,r)),s=r}if(isNaN(Number(e[s]))&&"."!==e[s]||s===n-1){var l=parseFloat(a);switch(i){case"+":t.push(l);break;case"-":t.push(-l);break;case"*":t.push(t.pop()*l);break;case"/":t.push(t.pop()/l)}i=e[s],a=""}}for(var c=0;t.length;)c+=t.pop();return c}var ut,pt=0,ft=function(){function e(){Ge(this,"elements",[]),Ge(this,"afterElements",[]),Ge(this,"beforeElements",[]),Ge(this,"ids",[]),Ge(this,"width",0),Ge(this,"height",0),Ge(this,"top",0),Ge(this,"left",0),Ge(this,"pre",null),Ge(this,"offsetX",0),Ge(this,"offsetY",0),pt++,this.id=pt}var t=e.prototype;return t.fixedBind=function(e,t){void 0===t&&(t=0),this.container=t?e.parent:e.root,this.container.fixedLine=this,this.fixedAdd(e)},t.fixedAdd=function(e){if(!this.ids.includes(e.id)){this.ids.push(e.id),this.elements.push(e);var t=e.computedStyle.zIndex;(void 0===t?0:t)>=0?this.afterElements.push(e):this.beforeElements.push(e),this.refreshLayout()}},t.bind=function(e){this.container=e.parent,this.container.line=null,this.container.lines?(this.container.lines.push(this),this.pre=this.getPreLine(),this.top=this.pre.top+this.pre.height,this.left=this.container.contentSize.left):(this.top=this.container.contentSize.top,this.left=this.container.contentSize.left,this.container.lines=[this]),this.isInline=e.isInline(),this.container.line=this,this.outerWidth=e.parent&&e.parent.contentSize.width?e.parent.contentSize.width:1/0,this.add(e)},t.getPreLine=function(){return this.container.lines[this.container.lines.length-2]},t.canIEnter=function(e){return!((100*e.offsetSize.width+100*this.width)/100>this.outerWidth&&(this.closeLine(),1))},t.closeLine=function(){delete this.container.line},t.add=function(e){this.ids.includes(e.id)||(this.ids.push(e.id),this.elements.push(e),this.refreshWidthHeight(e))},t.refreshWidthHeight=function(e){e.offsetSize.height>this.height&&(this.height=e.offsetSize.height),this.width+=e.offsetSize.width||0,(this.container.lineMaxWidth||0)<this.width&&(this.container.lineMaxWidth=this.width)},t.refreshXAlign=function(){if(this.isInline){var e=this.container.contentSize.width-this.width,t=this.container.style.textAlign;"center"===t?e/=2:"left"===t&&(e=0),this.offsetX=e}},t.getOffsetY=function(e){if(!e||!e.style)return 0;var t=(e.style||{}).verticalAlign;return t===Pe?this.height-e.contentSize.height:"middle"===t?(this.height-e.contentSize.height)/2:0},t.setIndent=function(e){var t=e.style.textIndent;if(t&&/^calc/.test(t)){var i=/^calc\((.+)\)$/.exec(t);if(i&&i[1]){var a=ht(i[1].replace(/([^\s\(\+\-\*\/]+)\.(left|right|bottom|top|width|height)/g,(function(t){var i=t.split("."),a=i[0],n=i[1],s=e.parent.querySelector(a);if(s&&s.offsetSize){var o={right:s.offsetSize.left+s.offsetSize.width,bottom:s.offsetSize.top+s.offsetSize.height};return s.offsetSize[n]||o[n]||0}})).replace(new RegExp(/-?[0-9]+(\.[0-9]+)?(rpx|px|%)/,"g"),qe));e.style.textIndent=a}}},t.layout=function(e,t){var i=this;this.refreshXAlign(),this.pre?(this.top=this.pre.top+this.pre.height+this.offsetY,this.left=t+this.offsetX):(this.top=Math.max(this.top,this.container.contentSize.top,e)+this.offsetY,this.left=Math.max(this.left,this.container.contentSize.left,t)+this.offsetX),this.elements.forEach((function(e,t){i.setIndent(e);var a=i.elements[t-1],n=i.getOffsetY(e);e.style.top=i.top+n,e.style.left=a?a.offsetSize.left+a.offsetSize.width:i.left,e.getBoxPosition()}))},t.refreshLayout=function(){this.afterElements=this.afterElements.sort((function(e,t){return e.computedStyle.zIndex-t.computedStyle.zIndex})),this.beforeElements=this.beforeElements.sort((function(e,t){return e.computedStyle.zIndex-t.computedStyle.zIndex}))},e}(),mt=((ut={}).row={width:Se,contentWidth:Se,lineMaxWidth:"lineMaxWidth",left:"left",top:"top",height:"height",lineMaxHeight:"lineMaxHeight",marginLeft:"marginLeft"},ut.column={width:"height",contentWidth:"height",lineMaxWidth:"lineMaxWidth",left:"top",top:"left",height:Se,lineMaxHeight:"lineMaxHeight",marginLeft:"marginTop"},ut),gt=function(e){var t,i;function a(){var t;return Ge(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=e.call(this)||this),"outerWidth",0),t.exactValue=0,t.flexTotal=0,t.width=0,t.key=null,t.flexDirection="row",t}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,Ze(t,i);var n=a.prototype;return n.bind=function(e){this.container=e.parent,this.container.line=this,this.container.lines?(this.container.lines.push(this),this.pre=this.getPreLine(),this.top=this.pre.top+this.pre.height,this.left=this.container.contentSize.left):(this.top=this.container.contentSize.top,this.left=this.container.contentSize.left,this.container.lines=[this]),e.parent&&(this.flexDirection=e.parent.style.flexDirection,this.key=mt[this.flexDirection]),this.initHeight(e),this.outerWidth=e.parent&&e.parent.contentSize[this.key.contentWidth]?e.parent.contentSize[this.key.contentWidth]:1/0,this.add(e)},n.add=function(e){this.ids.push(e.id);var t=e.style.flex;it(t)?this.flexTotal+=t:it(this.getWidth(e.style))&&(this.exactValue+=this.getWidth(e.offsetSize)),this.elements.push(e),this.refreshWidthHeight(e),e.next||this.closeLine()},n.closeLine=function(){this.calcFlex()},n.initHeight=function(e){this[this.key.height]=0},n.getWidth=function(e){return e[this.key.width]||0},n.getHeight=function(e){return e[this.key.height]||0},n.setWidth=function(e,t){e[this.key.width]=t},n.setHeight=function(e,t){e[this.key.height]=t},n.calcFlex=function(){var e=this,t=this.container.contentSize[this.key.contentWidth],i=0;this.elements.forEach((function(a){var n=a.style,s=a.contentSize,o=e.getWidth(n)||e.getWidth(s);it(n.flex)&&(o=n.flex/e.flexTotal*(t-e.exactValue)),e.setWidth(a.computedStyle,o),a.isFlexCalc=!0,delete a.line,delete a.lines,delete a.lineMaxWidth,a.getBoxWidthHeight(),i=Math.max(i,e.getHeight(a.offsetSize))})),this.setHeight(this,i)},n.refreshWidthHeight=function(e){var t=this.container.style.alignItems;t&&!e.style.alignSelf&&(e.style.alignSelf=t);var i=this.getHeight(e.offsetSize);i>this[this.key.height]&&(this.container[this.key.lineMaxHeight]=this[this.key.height]=i),this[this.key.width]+=this.getWidth(e.offsetSize);var a=Math.min(this.getWidth(this),!this.getWidth(this.container.contentSize)&&1/0);(this.container[this.key.lineMaxWidth]||0)<a&&(this.container[this.key.lineMaxWidth]=a)},n.refreshXAlign=function(){var e,t,i=this,a=this.elements.reduce((function(e,t){return e+i.getWidth(t.offsetSize)}),0),n=(this.outerWidth==1/0?0:this.outerWidth-a)||0,s=this.container.style.justifyContent;"center"===s?n/=2:"flex-start"===s?n=0:["space-between","space-around"].includes(s)&&(e="space-between"==s,void 0===(t=n)&&(t=0),t/=i.elements.length+(e?-1:1),i.elements.forEach((function(a,n){var s;e&&!n||(a.style.margin?a.style.margin[i.key.marginLeft]+=t:a.style.margin=((s={})[i.key.marginLeft]=t,s),a.getBoxPosition())})),t=0,n=0),this.offsetX=n||0,this.refreshYAlign()},n.refreshYAlign=function(){var e=this;if(1==this.container.lines.length)return 0;var t=this.container.lines.reduce((function(t,i){return t+e.getHeight(i)}),0),i=this.container.style.alignItems,a=this.getHeight(this.container.contentSize);if("center"===i){var n=(a-t)/(this.container.lines.length+1);this.container.lines.forEach((function(e){e.offsetY=n}))}if("flex-end"===i){var s=a-t;this.container.lines[0].offsetY=s}},n.getOffsetY=function(e){if(this.container.lines.length>1)return 0;var t=e.style.alignSelf,i=this.getHeight(this.container.contentSize),a=i-this.getHeight(e.offsetSize);return"flex-end"===t?a:"center"===t?a/2:"stretch"===t?(a&&e.name==Ve&&(e.style[this.key.width]=this.getWidth(e.offsetSize),e.style[this.key.height]=i,delete e.line,delete e.lines,e.getBoxWidthHeight()),0):0},n.layout=function(e,t){var i=this;this.refreshXAlign(),this.pre?(this.top=this.pre.top+this.pre.height+this.offsetY,this.left=t+this.offsetX):(this.top=Math.max(this.top,this.container.contentSize.top,e)+this.offsetY,this.left=Math.max(this.left,this.container.contentSize.left,t)+this.offsetX),this.elements.forEach((function(e,t){i.setIndent(e);var a=i.elements[t-1],n=i.getOffsetY(e);e.style[i.key.top]=i[i.key.top]+n,e.style[i.key.left]=a?a.offsetSize[i.key.left]+i.getWidth(a.offsetSize):i[i.key.left],e.getBoxPosition()}))},a}(ft),xt=We,bt=Ve,yt=De,vt=0,wt={left:null,top:null,width:null,height:null},_t=new Map,kt=function(){function e(e,t,i,a){var n=this;Ge(this,"id",vt++),Ge(this,"style",{left:null,top:null,width:null,height:null}),Ge(this,"computedStyle",{}),Ge(this,"originStyle",{}),Ge(this,"children",{}),Ge(this,"layoutBox",Qe({},wt)),Ge(this,"contentSize",Qe({},wt)),Ge(this,"clientSize",Qe({},wt)),Ge(this,"borderSize",Qe({},wt)),Ge(this,"offsetSize",Qe({},wt)),this.ctx=a,this.root=i,t&&(this.parent=t),this.name=e.type||e.name,this.attributes=this.getAttributes(e);var s=function(e,t){var i,a=["color","fontSize","lineHeight","verticalAlign","fontWeight","textAlign"],n=e.type,s=void 0===n?"view":n,o=e.styles,r=void 0===o?{}:o,l=(t||{}).computedStyle,c=Object.assign({},Re);if([ot,st,rt].includes(s)&&!r.display&&(c.display="inline-block"),l)for(var d=0;d<a.length;d++){var h=a[d];(r[h]||l[h])&&(r[h]=r[(i=h,i.replace(/([A-Z])/g,"-$1").toLowerCase())]||r[h]||l[h])}for(var u=function(e){var t,i,a,n,o=r[e];if(/-/.test(e)&&(e=dt(e),c[e]=o),/^(box|text)?shadow$/i.test(e)){var l=[];return o.replace(/((-?\d+(rpx|px|vw|vh)?\s+?){3})(.+)/,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l=e[1].match(/-?\d+(rpx|px|vw|vh)?/g).map((function(e){return qe(e)})).concat(e[4])})),/^text/.test(e)?c.textShadow=l:c.boxShadow=l,"continue"}if(/^border/i.test(e)&&!/radius$/i.test(e)){var d=e.match(/^border([BTRLa-z]+)?/)[0],h=e.match(/[W|S|C][a-z]+/),u=o.replace(/([\(,])\s+|\s+([\),])/g,"$1$2").split(" ").map((function(e){return/^\d/.test(e)?qe(e,""):e}));return c[d]||(c[d]={}),1==u.length&&h?c[d][d+h[0]]=u[0]:c[d]=((t={})[d+Se]=Ye(u[0])?u[0]:0,t[d+"Style"]=u[1]||"solid",t[d+"Color"]=u[2]||"black",t),"continue"}if(/^background(color)?$/i.test(e))return c.backgroundColor=o,"continue";if(/^objectPosition$/i.test(e))return c[e]=o.split(" "),"continue";if(/padding|margin|radius/i.test(e)){var p=/radius$/i.test(e),f="borderRadius",m=p?f:e.match(/[a-z]+/)[0],g=function(e,t){return"border"+e+t+"Radius"},x=[0,0,0,0].map((function(e,t){return p?[g(ze[0],ze[3]),g(ze[0],ze[1]),g(ze[2],ze[1]),g(ze[2],ze[3])][t]:m+ze[t]}));if("padding"===e||"margin"===e||/^(border)?radius$/i.test(e)){u=(""+o).split(" ").map((function(t){return/^-?\d+(rpx|px|vh|vw)?$/.test(t)?qe(t):"margin"!=e&&/auto/.test(t)?0:t}),[])||[0];var b=p?f:e,y=u[0],v=u[1],w=u[2],_=u[3];c[b]=((i={})[x[0]]=at(y)?0:y,i[x[1]]=Ye(v)||at(v)?v:y,i[x[2]]=at(Ye(w)?w:y)?0:Ye(w)?w:y,i[x[3]]=Ye(_)?_:v||y,i)}else"object"==typeof c[m]||(c[m]=((a={})[x[0]]=c[m]||0,a[x[1]]=c[m]||0,a[x[2]]=c[m]||0,a[x[3]]=c[m]||0,a)),c[m][e]="margin"==m&&at(o)||nt(o)?o:qe(o);return"continue"}if(/^transform$/i.test(e))return c[e]={},o.replace(/([a-zA-Z]+)\(([0-9,-\.%rpxdeg\s]+)\)/g,(function(t,i,a){var n=a.split(",").map((function(e){return e.replace(/(^\s*)|(\s*$)/g,"")})),s=function(e,t){return e.includes("deg")?1*e:t&&!nt(t)?qe(e,t):e};i.includes("matrix")?c[e][i]=n.map((function(e){return 1*e})):i.includes("rotate")?c[e][i]=1*a.match(/^-?\d+(\.\d+)?/)[0]:/[X, Y]/.test(i)?c[e][i]=/[X]/.test(i)?s(n[0],r.width):s(n[0],r.height):(c[e][i+"X"]=s(n[0],r.width),c[e][i+"Y"]=s(n[1]||n[0],r.height))})),"continue";if(/^font$/i.test(e)&&console.warn("font 不支持简写"),/^textindent/i.test(e)&&(c[e]=/^calc/.test(o)?o:qe(o)),/^textstroke/i.test(e)){var k=e.match(/color|width|type$/i),$=(d="textStroke",o.split(" ").map((function(e){return/^\d+(rpx|px|vh|vw)?$/.test(e)?qe(e):e})));return k?c[d]?c[d][k[0]]=$[0]:c[d]=((n={})[k[0]]=$[0],n):c[d]={width:$[0],color:$[1],type:$[2]},"continue"}/^left|top$/i.test(e)&&![lt,ct].includes(r.position)?c[e]=0:c[e]=/^-?[\d\.]+(px|rpx|vw|vh)?$/.test(o)?qe(o):/em$/.test(o)&&s==ot?qe(o,r.fontSize):o},p=0,f=Object.keys(r);p<f.length;p++)u(f[p]);return c}(e,t);this.isAbsolute=s.position==yt,this.isFixed="fixed"==s.position,this.originStyle=s,Object.keys(s).forEach((function(e){Object.defineProperty(n.style,e,{configurable:!0,enumerable:!0,get:function(){return s[e]},set:function(t){s[e]=t}})}));var o={contentSize:Qe({},this.contentSize),clientSize:Qe({},this.clientSize),borderSize:Qe({},this.borderSize),offsetSize:Qe({},this.offsetSize)};Object.keys(o).forEach((function(e){Object.keys(n[e]).forEach((function(t){Object.defineProperty(n[e],t,{configurable:!0,enumerable:!0,get:function(){return o[e][t]},set:function(i){o[e][t]=i}})}))})),this.computedStyle=this.style}var t=e.prototype;return t.add=function(e){e.parent=this,this.children[e.id]=e},t.getChildren=function(){var e=this;return Object.keys(this.children).map((function(t){return e.children[t]}))},t.prev=function(e){void 0===e&&(e=this);var t=e.parent.getChildren();return t[t.findIndex((function(t){return t.id==e.id}))-1]},t.querySelector=function(e){var t=this.getChildren();return"string"!=typeof e?null:t.find((function(t){var i=t.id,a=t.attributes;return i==e||a&&a.uid==e}))||this.parent&&this.parent.querySelector&&this.parent.querySelector(e)||null},t.getLineRect=function(e,t){var i=t?t.lines:this.parent&&this.parent.lines;return i&&i.find((function(t){return t.ids.includes(e)}))||{width:0,height:0}},t.setPosition=function(e,t){var i={left:Se,top:"height",right:Se,bottom:"height"};Object.keys(i).forEach((function(a){var n=a==Ie?"left":"top";[Ie,Pe].includes(a)&&void 0!==e.style[a]&&!Ye(e.originStyle[n])?e.style[n]=t[i[a]]-e.offsetSize[i[a]]-qe(e.style[a],t[i[a]]):e.style[a]=qe(e.style[a],t[i[a]])}))},t.getAttributes=function(e){var t=e.attributes,i=void 0===t?{}:t,a=e.uid,n=e.url,s=e.src,o=e.replace,r=e.text;return a&&(i.uid=a),(n||s)&&(i.src=i.src||n||s),o&&(i.replace=o),r&&(i.text=r),i},t.getOffsetSize=function(e,t,i){void 0===i&&(i=Te[3]);var a=t||{},n=a.margin,s=(n=void 0===n?{}:n).marginLeft,o=void 0===s?0:s,r=n.marginTop,l=void 0===r?0:r,c=n.marginRight,d=void 0===c?0:c,h=n.marginBottom,u=void 0===h?0:h,p=a.padding,f=(p=void 0===p?{}:p).paddingLeft,m=void 0===f?0:f,g=p.paddingTop,x=void 0===g?0:g,b=p.paddingRight,y=void 0===b?0:b,v=p.paddingBottom,w=void 0===v?0:v,_=a.border,k=(_=void 0===_?{}:_).borderWidth,$=void 0===k?0:k,C=a.borderTop,F=(C=void 0===C?{}:C).borderTopWidth,S=void 0===F?$:F,z=a.borderBottom,I=(z=void 0===z?{}:z).borderBottomWidth,P=void 0===I?$:I,T=a.borderRight,j=(T=void 0===T?{}:T).borderRightWidth,B=void 0===j?$:j,V=a.borderLeft,W=(V=void 0===V?{}:V).borderLeftWidth,E=void 0===W?$:W,M=o<0&&d<0?Math.abs(o+d):0,O=l<0&&u<0?Math.abs(l+u):0,D=o>=0&&d<0,L=l>=0&&u<0;return i==Te[0]&&(this[i].left=e.left+o+m+E+(D?2*-d:0),this[i].top=e.top+l+x+S+(L?2*-u:0),this[i].width=e.width+(this[i].widthAdd?0:M),this[i].height=e.height+(this[i].heightAdd?0:O),this[i].widthAdd=M,this[i].heightAdd=O),i==Te[1]&&(this[i].left=e.left+o+E+(D<0?-d:0),this[i].top=e.top+l+S+(L?-u:0),this[i].width=e.width+m+y,this[i].height=e.height+x+w),i==Te[2]&&(this[i].left=e.left+o+E/2+(D<0?-d:0),this[i].top=e.top+l+S/2+(L?-u:0),this[i].width=e.width+m+y+E/2+B/2,this[i].height=e.height+x+w+P/2+S/2),i==Te[3]&&(this[i].left=e.left+(D<0?-d:0),this[i].top=e.top+(L?-u:0),this[i].width=e.width+m+y+E+B+o+d,this[i].height=e.height+x+w+P+S+u+l),this[i]},t.layoutBoxUpdate=function(e,t,i,a){var n=this;if(void 0===i&&(i=-1),"border-box"==t.boxSizing){var s=t||{},o=s.border,r=(o=void 0===o?{}:o).borderWidth,l=void 0===r?0:r,c=s.borderTop,d=(c=void 0===c?{}:c).borderTopWidth,h=void 0===d?l:d,u=s.borderBottom,p=(u=void 0===u?{}:u).borderBottomWidth,f=void 0===p?l:p,m=s.borderRight,g=(m=void 0===m?{}:m).borderRightWidth,x=void 0===g?l:g,b=s.borderLeft,y=(b=void 0===b?{}:b).borderLeftWidth,v=void 0===y?l:y,w=s.padding,_=(w=void 0===w?{}:w).paddingTop,k=void 0===_?0:_,$=w.paddingRight,C=void 0===$?0:$,F=w.paddingBottom,S=void 0===F?0:F,z=w.paddingLeft,I=void 0===z?0:z;i||(e.width-=I+C+x+v),1!==i||a||(e.height-=k+S+h+f)}this.layoutBox&&(Te.forEach((function(i){return n.layoutBox[i]=n.getOffsetSize(e,t,i)})),this.layoutBox=Object.assign({},this.layoutBox,this.layoutBox.borderSize))},t.getBoxPosition=function(){var e=this.computedStyle,t=this.fixedLine,i=this.lines,a=e.left,n=void 0===a?0:a,s=e.top,o=void 0===s?0:s,r=e.padding||{},l=r.paddingBottom,c=void 0===l?0:l,d=r.paddingRight,h=void 0===d?0:d,u=Qe({},this.contentSize,{left:n,top:o}),p=this.contentSize.top-this.offsetSize.top,f=this.contentSize.left-this.offsetSize.left;if(this.root.fixedLine&&!this.root.isDone){this.root.isDone=!0;for(var m,g=et(this.root.fixedLine.elements);!(m=g()).done;){var x=m.value;x.setPosition(x,this.root.offsetSize),x.getBoxPosition()}}if(t)for(var b,y=et(t.elements);!(b=y()).done;){var v=b.value;v.setPosition(v,u),v.style.left+=n+f+h,v.style.top+=o+p+c,v.getBoxPosition()}if(i)for(var w,_=et(i);!(w=_()).done;)w.value.layout(u.top+p,u.left+f);return this.layoutBoxUpdate(u,e),this.layoutBox},t.getBoxState=function(e,t){return this.isBlock(e)||this.isBlock(t)},t.isBlock=function(e){return void 0===e&&(e=this),e&&"block"==e.style.display},t.isFlex=function(e){return void 0===e&&(e=this),e&&"flex"==e.style.display},t.isInFlow=function(){return!(this.isAbsolute||this.isFixed)},t.inFlexBox=function(e){return void 0===e&&(e=this),!!e.isInFlow()&&!!e.parent&&(!(!e.parent||"flex"!==e.parent.style.display)||void 0)},t.isInline=function(e){return void 0===e&&(e=this),e&&"inline-block"==e.style.display},t.contrastSize=function(e,t,i){var a=e;return i&&(a=Math.min(a,i)),t&&(a=Math.max(a,t)),a},t.measureText=function(e,t){var i=this.ctx.measureText(e),a=i.width,n=i.actualBoundingBoxAscent,s=i.actualBoundingBoxDescent;return{ascent:n,descent:s,width:a,fontHeight:n+s||.7*t+1}},t.getParentSize=function(e,t){if(void 0===e&&(e=this),void 0===t&&(t=!1),e&&e.parent){if(e.parent.contentSize.width)return e.parent.contentSize;if(t)return this.getParentSize(e.parent,t)}return null},t.getBoxWidthHeight=function(){var e=this,t=this.name,i=this.computedStyle,a=this.attributes,n=this.parent,s=void 0===n?{}:n,o=this.ctx,r=this.getChildren(),l=i.left,c=void 0===l?0:l,d=i.top,h=void 0===d?0:d,u=i.bottom,p=i.right,f=i.width,m=void 0===f?0:f,g=i.minWidth,x=i.maxWidth,b=i.minHeight,y=i.maxHeight,v=i.height,w=void 0===v?0:v,_=i.fontSize,k=i.fontWeight,$=i.fontFamily,C=i.fontStyle,F=i.position;i.textIndent;var S=i.lineClamp,z=i.lineHeight,I=i.padding,P=void 0===I?{}:I,T=i.margin,j=void 0===T?{}:T,B=i.border,V=(B=void 0===B?{}:B).borderWidth,W=void 0===V?0:V,E=i.borderRight,M=(E=void 0===E?{}:E).borderRightWidth,O=void 0===M?W:M,D=i.borderLeft,L=(D=void 0===D?{}:D).borderLeftWidth,R=void 0===L?W:L,A=s.contentSize&&s.contentSize.width,H=s.contentSize&&s.contentSize.height;if(nt(m)&&A&&(m=qe(m,A)),nt(m)&&!A&&(m=null),nt(w)&&H&&(w=qe(w,H)),nt(w)&&!H&&(w=null),nt(g)&&A&&(g=qe(g,A)),nt(x)&&A&&(x=qe(x,A)),nt(b)&&H&&(b=qe(b,H)),nt(y)&&H&&(y=qe(y,H)),i.padding&&A)for(var U in i.padding)Object.hasOwnProperty.call(P,U)&&(P[U]=qe(P[U],A));var N=P.paddingRight,Y=void 0===N?0:N,q=P.paddingLeft,J=void 0===q?0:q;if(i.margin&&[j.marginLeft,j.marginRight].includes("auto"))if(m){var X=A&&A-m-Y-J-R-O||0;j.marginLeft==j.marginRight?j.marginLeft=j.marginRight=X/2:at(j.marginLeft)?j.marginLeft=X:j.marginRight=X}else j.marginLeft=j.marginRight=0;var G=j.marginRight,Q=void 0===G?0:G,Z=j.marginLeft,K={width:m,height:w,left:0,top:0},ee=J+Y+R+O+(void 0===Z?0:Z)+Q;if(this.offsetWidth=ee,t==xt&&!this.attributes.widths){var te=a.text||"";o.save(),o.setFonts({fontFamily:$,fontSize:_,fontWeight:k,fontStyle:C}),te.length,"\n"==te&&(te="",this.isBr=!0),(""+te).split("\n").map((function(t){var i=Array.from(t).map((function(t){var i=""+(/^[\u4e00-\u9fa5]+$/.test(t)?"cn":t)+$+_+k+C,a=_t.get(i);if(a)return{width:a,text:t};var n=e.measureText(t,_).width;return _t.set(i,n),{width:n,text:t}})),a=e.measureText(t,_),n=a.fontHeight,s=a.ascent,o=a.descent;e.attributes.fontHeight=n,e.attributes.ascent=s,e.attributes.descent=o,e.attributes.widths||(e.attributes.widths=[]),e.attributes.widths.push({widths:i,total:i.reduce((function(e,t){return e+t.width}),0)})})),o.restore()}if("image"==t&&null==m){var ie=a.width,ae=a.height;K.width=this.contrastSize(Math.round(ie*w/ae)||0,g,x),this.layoutBoxUpdate(K,i,0)}if(t==xt&&null==m){var ne=this.attributes.widths,se=Math.max.apply(Math,ne.map((function(e){return e.total})));s&&A>0&&(se>A||this.isBlock(this))&&!this.isAbsolute&&!this.isFixed&&(se=A),K.width=this.contrastSize(se,g,x),this.layoutBoxUpdate(K,i,0)}if(t==xt&&(s.style.flex||!this.attributes.lines)){var oe=this.attributes.widths.length;this.attributes.widths.forEach((function(e){return e.widths.reduce((function(e,t,i){return e+t.width>K.width?(oe++,t.width):e+t.width}),0)})),oe=S&&oe>S?S:oe,this.attributes.lines=oe}if("image"==t&&null==w){var re=a.width,le=a.height;a.text,K.height=this.contrastSize(qe(K.width*le/re)||0,b,y),this.layoutBoxUpdate(K,i,1)}t==xt&&null==w&&(z=qe(z,_),K.height=this.contrastSize(qe(this.attributes.lines*z),b,y),this.layoutBoxUpdate(K,i,1,!0)),!m&&s&&s.children&&A&&(!this.isFlex(s)||s.isFlexCalc)&&([bt,xt].includes(t)&&this.isFlex()||t==bt&&this.isBlock(this)&&this.isInFlow())&&(K.width=this.contrastSize(A-(s.isFlexCalc?0:ee),g,x),this.layoutBoxUpdate(K,i)),m&&!nt(m)&&(K.width=this.contrastSize(m,g,x),this.layoutBoxUpdate(K,i,0)),w&&!nt(w)&&(K.height=this.contrastSize(K.height,b,y),this.layoutBoxUpdate(K,i,1));var ce=0;if(r.length){var de=null,he=!1;r.forEach((function(t,a){t.getBoxWidthHeight();var n=r[a+1];if(n&&n.isInFlow()&&(t.next=n),t.isInFlow()&&!t.inFlexBox()){var s=e.getBoxState(de,t);if(t.isBr)return he=!0;e.line&&e.line.canIEnter(t)&&!s&&!he?e.line.add(t):(he=!1,(new ft).bind(t)),de=t}else t.inFlexBox()?e.line&&(e.line.canIEnter(t)||"nowrap"==i.flexWrap)?e.line.add(t):(new gt).bind(t):t.isFixed?e.root.fixedLine?e.root.fixedLine.fixedAdd(t):(new ft).fixedBind(t):e.fixedLine?e.fixedLine.fixedAdd(t):(new ft).fixedBind(t,1)})),this.lines&&(ce=this.lines.reduce((function(e,t){return e+t.height}),0))}var ue=0,pe=0;if(!m&&(this.isAbsolute||this.isFixed)&&A){var fe=F==yt?A:this.root.width,me=fe-(nt(c)?qe(c,fe):c)-(nt(p)?qe(p,fe):p);ue=i.left?me:this.lineMaxWidth}if(!w&&(null!=h?h:this.isAbsolute||this.isFixed&&H)){var ge=F==yt?H:this.root.height,xe=ge-(nt(h)?qe(h,ge):h)-(nt(u)?qe(u,ge):u);pe=i.top?xe:0}if(m&&!nt(m)||K.width||(K.width=ue||this.contrastSize((this.isBlock(this)&&!this.isInFlow()?A||s.lineMaxWidth:this.lineMaxWidth)||this.lineMaxWidth,g,x),this.layoutBoxUpdate(K,i,0)),w||!ce&&!pe||(K.height=pe||this.contrastSize(ce,b,y),this.layoutBoxUpdate(K,i)),i.borderRadius&&this.borderSize&&this.borderSize.width)for(var be in i.borderRadius)Object.hasOwnProperty.call(i.borderRadius,be)&&(i.borderRadius[be]=qe(i.borderRadius[be],this.borderSize.width));return this.layoutBox},t.layout=function(){return this.getBoxWidthHeight(),this.root.offsetSize=this.offsetSize,this.root.contentSize=this.contentSize,this.getBoxPosition(),this.offsetSize},e}(),$t=function(){var e,t,i,a,n,s,o=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],r=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],l=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],c=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],d=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],h=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],u=[],p=[],f=[],m=[],g=[],x=2;function b(e,t){var i;e>t&&(i=e,e=t,t=i),i=t,i*=t,i+=t,i>>=1,m[i+=e]=1}function y(e,i){var a;for(f[e+t*i]=1,a=-2;a<2;a++)f[e+a+t*(i-2)]=1,f[e-2+t*(i+a+1)]=1,f[e+2+t*(i+a)]=1,f[e+a+1+t*(i+2)]=1;for(a=0;a<2;a++)b(e-1,i+a),b(e+1,i-a),b(e-a,i-1),b(e+a,i+1)}function v(e){for(;e>=255;)e=((e-=255)>>8)+(255&e);return e}var w=[];function _(e,t,i,a){var n,s,o;for(n=0;n<a;n++)u[i+n]=0;for(n=0;n<t;n++){if(255!=(o=d[u[e+n]^u[i]]))for(s=1;s<a;s++)u[i+s-1]=u[i+s]^h[v(o+w[a-s])];else for(s=i;s<i+a;s++)u[s]=u[s+1];u[i+a-1]=255==o?0:h[v(o+w[0])]}}function k(e,t){var i;return e>t&&(i=e,e=t,t=i),i=t,i+=t*t,i>>=1,m[i+=e]}function $(e){var i,a,n,s;switch(e){case 0:for(a=0;a<t;a++)for(i=0;i<t;i++)i+a&1||k(i,a)||(f[i+a*t]^=1);break;case 1:for(a=0;a<t;a++)for(i=0;i<t;i++)1&a||k(i,a)||(f[i+a*t]^=1);break;case 2:for(a=0;a<t;a++)for(n=0,i=0;i<t;i++,n++)3==n&&(n=0),n||k(i,a)||(f[i+a*t]^=1);break;case 3:for(s=0,a=0;a<t;a++,s++)for(3==s&&(s=0),n=s,i=0;i<t;i++,n++)3==n&&(n=0),n||k(i,a)||(f[i+a*t]^=1);break;case 4:for(a=0;a<t;a++)for(n=0,s=a>>1&1,i=0;i<t;i++,n++)3==n&&(n=0,s=!s),s||k(i,a)||(f[i+a*t]^=1);break;case 5:for(s=0,a=0;a<t;a++,s++)for(3==s&&(s=0),n=0,i=0;i<t;i++,n++)3==n&&(n=0),(i&a&1)+!(!n|!s)||k(i,a)||(f[i+a*t]^=1);break;case 6:for(s=0,a=0;a<t;a++,s++)for(3==s&&(s=0),n=0,i=0;i<t;i++,n++)3==n&&(n=0),(i&a&1)+(n&&n==s)&1||k(i,a)||(f[i+a*t]^=1);break;case 7:for(s=0,a=0;a<t;a++,s++)for(3==s&&(s=0),n=0,i=0;i<t;i++,n++)3==n&&(n=0),(n&&n==s)+(i+a&1)&1||k(i,a)||(f[i+a*t]^=1)}}function C(e){var t,i=0;for(t=0;t<=e;t++)g[t]>=5&&(i+=3+g[t]-5);for(t=3;t<e-1;t+=2)g[t-2]==g[t+2]&&g[t+2]==g[t-1]&&g[t-1]==g[t+1]&&3*g[t-1]==g[t]&&(0==g[t-3]||t+3>e||3*g[t-3]>=4*g[t]||3*g[t+3]>=4*g[t])&&(i+=40);return i}function F(){var e,i,a,n,s,o=0,r=0;for(i=0;i<t-1;i++)for(e=0;e<t-1;e++)(f[e+t*i]&&f[e+1+t*i]&&f[e+t*(i+1)]&&f[e+1+t*(i+1)]||!(f[e+t*i]||f[e+1+t*i]||f[e+t*(i+1)]||f[e+1+t*(i+1)]))&&(o+=3);for(i=0;i<t;i++){for(g[0]=0,a=n=e=0;e<t;e++)(s=f[e+t*i])==n?g[a]++:g[++a]=1,r+=(n=s)?1:-1;o+=C(a)}r<0&&(r=-r);var l=r,c=0;for(l+=l<<2,l<<=1;l>t*t;)l-=t*t,c++;for(o+=10*c,e=0;e<t;e++){for(g[0]=0,a=n=i=0;i<t;i++)(s=f[e+t*i])==n?g[a]++:g[++a]=1,n=s;o+=C(a)}return o}var S=null;return{api:{get ecclevel(){return x},set ecclevel(e){x=e},get size(){return _size},set size(e){_size=e},get canvas(){return S},set canvas(e){S=e},getFrame:function(g){return function(g){var C,S,z,I,P,T,j,B;I=g.length,e=0;do{if(e++,z=4*(x-1)+16*(e-1),i=c[z++],a=c[z++],n=c[z++],s=c[z],I<=(z=n*(i+a)+a-3+(e<=9)))break}while(e<40);for(t=17+4*e,P=n+(n+s)*(i+a)+a,I=0;I<P;I++)p[I]=0;for(u=g.slice(0),I=0;I<t*t;I++)f[I]=0;for(I=0;I<(t*(t+1)+1)/2;I++)m[I]=0;for(I=0;I<3;I++){for(z=0,S=0,1==I&&(z=t-7),2==I&&(S=t-7),f[S+3+t*(z+3)]=1,C=0;C<6;C++)f[S+C+t*z]=1,f[S+t*(z+C+1)]=1,f[S+6+t*(z+C)]=1,f[S+C+1+t*(z+6)]=1;for(C=1;C<5;C++)b(S+C,z+1),b(S+1,z+C+1),b(S+5,z+C),b(S+C+1,z+5);for(C=2;C<4;C++)f[S+C+t*(z+2)]=1,f[S+2+t*(z+C+1)]=1,f[S+4+t*(z+C)]=1,f[S+C+1+t*(z+4)]=1}if(e>1)for(I=o[e],S=t-7;;){for(C=t-7;C>I-3&&(y(C,S),!(C<I));)C-=I;if(S<=I+9)break;y(6,S-=I),y(S,6)}for(f[8+t*(t-8)]=1,S=0;S<7;S++)b(7,S),b(t-8,S),b(7,S+t-7);for(C=0;C<8;C++)b(C,7),b(C+t-8,7),b(C,t-8);for(C=0;C<9;C++)b(C,8);for(C=0;C<8;C++)b(C+t-8,8),b(8,C);for(S=0;S<7;S++)b(8,S+t-7);for(C=0;C<t-14;C++)1&C?(b(8+C,6),b(6,8+C)):(f[8+C+6*t]=1,f[6+t*(8+C)]=1);if(e>6)for(I=r[e-7],z=17,C=0;C<6;C++)for(S=0;S<3;S++,z--)1&(z>11?e>>z-12:I>>z)?(f[5-C+t*(2-S+t-11)]=1,f[2-S+t-11+t*(5-C)]=1):(b(5-C,2-S+t-11),b(2-S+t-11,5-C));for(S=0;S<t;S++)for(C=0;C<=S;C++)f[C+t*S]&&b(C,S);for(P=u.length,T=0;T<P;T++)p[T]=u.charCodeAt(T);if(u=p.slice(0),P>=(C=n*(i+a)+a)-2&&(P=C-2,e>9&&P--),T=P,e>9){for(u[T+2]=0,u[T+3]=0;T--;)I=u[T],u[T+3]|=255&I<<4,u[T+2]=I>>4;u[2]|=255&P<<4,u[1]=P>>4,u[0]=64|P>>12}else{for(u[T+1]=0,u[T+2]=0;T--;)I=u[T],u[T+2]|=255&I<<4,u[T+1]=I>>4;u[1]|=255&P<<4,u[0]=64|P>>4}for(T=P+3-(e<10);T<C;)u[T++]=236,u[T++]=17;for(w[0]=1,T=0;T<s;T++){for(w[T+1]=1,j=T;j>0;j--)w[j]=w[j]?w[j-1]^h[v(d[w[j]]+T)]:w[j-1];w[0]=h[v(d[w[0]]+T)]}for(T=0;T<=s;T++)w[T]=d[w[T]];for(z=C,S=0,T=0;T<i;T++)_(S,n,z,s),S+=n,z+=s;for(T=0;T<a;T++)_(S,n+1,z,s),S+=n+1,z+=s;for(S=0,T=0;T<n;T++){for(j=0;j<i;j++)p[S++]=u[T+j*n];for(j=0;j<a;j++)p[S++]=u[i*n+T+j*(n+1)]}for(j=0;j<a;j++)p[S++]=u[i*n+T+j*(n+1)];for(T=0;T<s;T++)for(j=0;j<i+a;j++)p[S++]=u[C+T+j*s];for(u=p,C=S=t-1,z=P=1,B=(n+s)*(i+a)+a,T=0;T<B;T++)for(I=u[T],j=0;j<8;j++,I<<=1){128&I&&(f[C+t*S]=1);do{P?C--:(C++,z?0!=S?S--:(z=!z,6==(C-=2)&&(C--,S=9)):S!=t-1?S++:(z=!z,6==(C-=2)&&(C--,S-=8))),P=!P}while(k(C,S))}for(u=f.slice(0),I=0,S=3e4,z=0;z<8&&($(z),(C=F())<S&&(S=C,I=z),7!=I);z++)f=u.slice(0);for(I!=z&&$(I),S=l[I+(x-1<<3)],z=0;z<8;z++,S>>=1)1&S&&(f[t-1-z+8*t]=1,z<6?f[8+t*z]=1:f[8+t*(z+1)]=1);for(z=0;z<7;z++,S>>=1)1&S&&(f[8+t*(t-7+z)]=1,z?f[6-z+8*t]=1:f[7+8*t]=1);return f}(g)},utf16to8:function(e){var t,i,a,n;for(t="",a=e.length,i=0;i<a;i++)(n=e.charCodeAt(i))>=1&&n<=127?t+=e.charAt(i):n>2047?(t+=String.fromCharCode(224|n>>12&15),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|n>>0&63)):(t+=String.fromCharCode(192|n>>6&31),t+=String.fromCharCode(128|n>>0&63));return t},draw:function(e,i,a,n,s){i.drawView(a,n);var o=i.ctx,r=a.contentSize,l=r.width,c=r.height,d=r.left,h=r.top;n.borderRadius,n.backgroundColor;var u=n.color,p=void 0===u?"#000000":u;if(n.border,a.contentSize.left,a.borderSize.left,a.contentSize.top,a.borderSize.top,x=s||x,o){o.save(),i.setOpacity(n),i.setTransform(a,n);var f=Math.min(l,c);e=this.utf16to8(e);var m=this.getFrame(e),g=f/t;o.setFillStyle(p);for(var b=0;b<t;b++)for(var y=0;y<t;y++)m[y*t+b]&&o.fillRect(d+g*b,h+g*y,g,g);o.restore(),i.setBorder(a,n)}else console.warn("No canvas provided to draw QR code in!")}}}}(),Ct=Ee,Ft=We,St=Me,zt=Ve,It=je.TOP,Pt=je.MIDDLE,Tt=je.BOTTOM,jt=Be.LEFT,Bt=Be.CENTER,Vt=Be.RIGHT,Wt=function(){function e(e){var t,i=this;this.v="1.9.5.1",this.id=null,this.pixelRatio=1,this.width=0,this.height=0,this.sleep=1e3/30,this.count=0,this.isRate=!1,this.isDraw=!0,this.isCache=!0,this.fixed="",this.useCORS=!1,this.performance=!1,this.imageBus=[],this.createImage=function(e,t){return new Promise((function(a,n){var s=null;window||i.canvas.createImage?(s=i.canvas&&i.canvas.createImage?i.canvas.createImage():new Image,t&&s.setAttribute("crossOrigin","Anonymous"),s.src=e,s.onload=function(){a({width:s.naturalWidth||s.width,height:s.naturalHeight||s.height,path:s,src:this.src})},s.onerror=function(e){n(e)}):n({fail:"getImageInfo fail",src:e})}))},this.options=e,Object.assign(this,e),this.ctx=((t=e.context).setFonts=function(e){var i=e.fontFamily,a=void 0===i?"sans-serif":i,n=e.fontSize,s=void 0===n?14:n,o=e.fontWeight,r=void 0===o?"normal":o,l=e.fontStyle,c=void 0===l?"normal":l;He==Fe.MP_TOUTIAO&&(r="bold"==r?"bold":"",c="italic"==c?"italic":""),t.font=c+" "+r+" "+Math.round(s)+"px "+a},t.draw&&t.setFillStyle?t:Object.assign(t,{setStrokeStyle:function(e){t.strokeStyle=e},setLineWidth:function(e){t.lineWidth=e},setLineCap:function(e){t.lineCap=e},setFillStyle:function(e){t.fillStyle=e},setFontSize:function(e){t.font=String(e)+"px sans-serif"},setGlobalAlpha:function(e){t.globalAlpha=e},setLineJoin:function(e){t.lineJoin=e},setTextAlign:function(e){t.textAlign=e},setMiterLimit:function(e){t.miterLimit=e},setShadow:function(e,i,a,n){t.shadowOffsetX=e,t.shadowOffsetY=i,t.shadowBlur=a,t.shadowColor=n},setTextBaseline:function(e){t.textBaseline=e},createCircularGradient:function(){},draw:function(){}})),this.progress=0,this.root={width:e.width,height:e.height,fontSizeRate:1,fixedLine:null},this.size=this.root;var a=0;Object.defineProperty(this,"progress",{configurable:!0,set:function(e){a=e,i.lifecycle("onProgress",e/i.count)},get:function(){return a||0}})}return e.prototype.lifecycle=function(e,t){this.options.listen&&this.options.listen[e]&&this.options.listen[e](t)},e.prototype.setContext=function(e){e&&(this.ctx=e)},e.prototype.init=function(){if(this.canvas.height||Fe.WEB==He){this.ctx.setTransform(1,0,0,1,0,0);var e=this.size.height*this.pixelRatio,t=this.size.width*this.pixelRatio;this.canvas.height=e,this.canvas.width=t,this.ctx.scale(this.pixelRatio,this.pixelRatio)}},e.prototype.clear=function(){this.ctx.clearRect(0,0,this.size.width,this.size.height)},e.prototype.clipPath=function(e,t,i,a,n,s,o){void 0===s&&(s=!1),void 0===o&&(o=!1);var r=this.ctx;if(/polygon/.test(n)){var l=n.match(/-?\d+(rpx|px|%)?\s+-?\d+(rpx|px|%)?/g)||[];r.beginPath(),l.map((function(n){var s=n.split(" "),o=s[0],r=s[1];return[qe(o,i)+e,qe(r,a)+t]})).forEach((function(e,t){0==t?r.moveTo(e[0],e[1]):r.lineTo(e[0],e[1])})),r.closePath(),o&&r.stroke(),s&&r.fill()}},e.prototype.roundRect=function(e,t,i,a,n,s,o){if(void 0===s&&(s=!1),void 0===o&&(o=!1),!(n<0)){var r=this.ctx;if(r.beginPath(),n){var l=n||{},c=l.borderTopLeftRadius,d=void 0===c?n||0:c,h=l.borderTopRightRadius,u=void 0===h?n||0:h,p=l.borderBottomRightRadius,f=void 0===p?n||0:p,m=l.borderBottomLeftRadius,g=void 0===m?n||0:m;r.arc(e+i-f,t+a-f,f,0,.5*Math.PI),r.lineTo(e+g,t+a),r.arc(e+g,t+a-g,g,.5*Math.PI,Math.PI),r.lineTo(e,t+d),r.arc(e+d,t+d,d,Math.PI,1.5*Math.PI),r.lineTo(e+i-u,t),r.arc(e+i-u,t+u,u,1.5*Math.PI,2*Math.PI),r.lineTo(e+i,t+a-f)}else r.rect(e,t,i,a);r.closePath(),o&&r.stroke(),s&&r.fill()}},e.prototype.setTransform=function(e,t){var i=t.transform,a=t.transformOrigin,n=this.ctx,s=i||{},o=s.scaleX,r=void 0===o?1:o,l=s.scaleY,c=void 0===l?1:l,d=s.translateX,h=void 0===d?0:d,u=s.translateY,p=void 0===u?0:u,f=s.rotate,m=void 0===f?0:f,g=s.skewX,x=void 0===g?0:g,b=s.skewY,y=void 0===b?0:b,v=e.left,w=e.top,_=e.width,k=e.height;h=qe(h,_)||0,p=qe(p,k)||0;var $=qe("0%",1),C=qe("50%",1),F=qe("100%",1),S={top:$,center:C,bottom:F},z={left:$,center:C,right:F};if(a=a.split(" ").filter((function(e,t){return t<2})).reduce((function(e,t){if(/\d+/.test(t)){var i=qe(t,1)/(/px|rpx$/.test(t)?Ye(e.x)?k:_:1);return Ye(e.x)?Object.assign(e,{y:i}):Object.assign(e,{x:i})}return Ye(z[t])&&!Ye(e.x)?Object.assign(e,{x:z[t]}):Object.assign(e,{y:S[t]||.5})}),{}),(h||p)&&n.translate(h,p),(r||c)&&n.scale(r,c),m){var I=v+_*a.x,P=w+k*a.y;n.translate(I,P),n.rotate(m*Math.PI/180),n.translate(-I,-P)}(x||y)&&n.transform(1,Math.tan(y*Math.PI/180),Math.tan(x*Math.PI/180),1,0,0)},e.prototype.setBackground=function(e,t,i,a,n){var s=this.ctx;e&&"transparent"!=e?function(e){return!(!e||!e.startsWith("linear")&&!e.startsWith("radial"))}(e)?function(e,t,i,a,n,s){e.startsWith("linear")?function(e,t,i,a,n,s){for(var o=function(e,t,i,a,n){void 0===a&&(a=0),void 0===n&&(n=0);var s=e.match(/([-]?\d{1,3})deg/),o=s&&s[1]?parseFloat(s[1]):0;if(o>=360&&(o-=360),o<0&&(o+=360),0===(o=Math.round(o)))return{x0:Math.round(t/2)+a,y0:i+n,x1:Math.round(t/2)+a,y1:n};if(180===o)return{x0:Math.round(t/2)+a,y0:n,x1:Math.round(t/2)+a,y1:i+n};if(90===o)return{x0:a,y0:Math.round(i/2)+n,x1:t+a,y1:Math.round(i/2)+n};if(270===o)return{x0:t+a,y0:Math.round(i/2)+n,x1:a,y1:Math.round(i/2)+n};var r=Math.round(180*Math.asin(t/Math.sqrt(Math.pow(t,2)+Math.pow(i,2)))/Math.PI);if(o===r)return{x0:a,y0:i+n,x1:t+a,y1:n};if(o===180-r)return{x0:a,y0:n,x1:t+a,y1:i+n};if(o===180+r)return{x0:t+a,y0:n,x1:a,y1:i+n};if(o===360-r)return{x0:t+a,y0:i+n,x1:a,y1:n};var l,c=0,d=0,h=0,u=0;if(o<r||o>180-r&&o<180||o>180&&o<180+r||o>360-r){var p=o*Math.PI/180,f=o<r||o>360-r?i/2:-i/2,m=Math.tan(p)*f,g=o<r||o>180-r&&o<180?t/2-m:-t/2-m;c=-(h=m+(l=Math.pow(Math.sin(p),2)*g)),d=-(u=f+l/Math.tan(p))}return(o>r&&o<90||o>90&&o<90+r||o>180+r&&o<270||o>270&&o<360-r)&&(p=(90-o)*Math.PI/180,m=o>r&&o<90||o>90&&o<90+r?t/2:-t/2,f=Math.tan(p)*m,g=o>r&&o<90||o>270&&o<360-r?i/2-f:-i/2-f,c=-(h=m+(l=Math.pow(Math.sin(p),2)*g)/Math.tan(p)),d=-(u=f+l)),{x0:c=Math.round(c+t/2)+a,y0:d=Math.round(i/2-d)+n,x1:h=Math.round(h+t/2)+a,y1:u=Math.round(i/2-u)+n}}(n,e,t,i,a),r=o.x0,l=o.y0,c=o.x1,d=o.y1,h=s.createLinearGradient(r,l,c,d),u=n.match(/linear-gradient\((.+)\)/)[1],p=Xe(u.substring(u.indexOf(",")+1)),f=0;f<p.colors.length;f++)h.addColorStop(p.percents[f],p.colors[f]);s.setFillStyle(h)}(t,i,a,n,e,s):e.startsWith("radial")&&function(e,t,i,a,n,s){for(var o=Xe(n.match(/radial-gradient\((.+)\)/)[1]),r=Math.round(e/2)+i,l=Math.round(t/2)+a,c=s.createRadialGradient(r,l,0,r,l,Math.max(e,t)/2),d=0;d<o.colors.length;d++)c.addColorStop(o.percents[d],o.colors[d]);s.setFillStyle(c)}(t,i,a,n,e,s)}(e,t,i,a,n,s):s.setFillStyle(e):[Fe.MP_TOUTIAO,Fe.MP_BAIDU].includes(He)?s.setFillStyle("rgba(0,0,0,0)"):s.setFillStyle("transparent")},e.prototype.setShadow=function(e){var t=e.boxShadow,i=void 0===t?[]:t,a=this.ctx;if(i.length){var n=i[0],s=i[1],o=i[2],r=i[3];a.setShadow(n,s,o,r)}},e.prototype.setBorder=function(e,t){var i=this.ctx,a=e.width,n=e.height,s=e.left,o=e.top,r=t.border,l=t.borderBottom,c=t.borderTop,d=t.borderRight,h=t.borderLeft,u=t.borderRadius,p=t.lineCap,f=r||{},m=f.borderWidth,g=void 0===m?0:m,x=f.borderStyle,b=f.borderColor,y=l||{},v=y.borderBottomWidth,w=void 0===v?g:v,_=y.borderBottomStyle,k=void 0===_?x:_,$=y.borderBottomColor,C=void 0===$?b:$,F=c||{},S=F.borderTopWidth,z=void 0===S?g:S,I=F.borderTopStyle,P=void 0===I?x:I,T=F.borderTopColor,j=void 0===T?b:T,B=d||{},V=B.borderRightWidth,W=void 0===V?g:V,E=B.borderRightStyle,M=void 0===E?x:E,O=B.borderRightColor,D=void 0===O?b:O,L=h||{},R=L.borderLeftWidth,A=void 0===R?g:R,H=L.borderLeftStyle,U=void 0===H?x:H,N=L.borderLeftColor,Y=void 0===N?b:N,q=u||{},J=q.borderTopLeftRadius,X=void 0===J?u||0:J,G=q.borderTopRightRadius,Q=void 0===G?u||0:G,Z=q.borderBottomRightRadius,K=void 0===Z?u||0:Z,ee=q.borderBottomLeftRadius,te=void 0===ee?u||0:ee;if(l||h||c||d||r){var ie=function(e,t,a){"dashed"==t?/mp/.test(He)?i.setLineDash([Math.ceil(4*e/3),Math.ceil(4*e/3)]):i.setLineDash([Math.ceil(6*e),Math.ceil(6*e)]):"dotted"==t&&i.setLineDash([e,e]),i.setStrokeStyle(a)},ae=function(e,t,a,n,s,o,r,l,c,d,h,u,f,m,g){i.save(),i.setLineCap(g?"square":p),i.setLineWidth(u),ie(u,f,m),i.beginPath(),i.arc(e,t,r,Math.PI*c,Math.PI*d),i.lineTo(a,n),i.arc(s,o,l,Math.PI*d,Math.PI*h),i.stroke(),i.restore()};if(i.save(),r&&!l&&!h&&!c&&!d)return i.setLineWidth(g),ie(g,x,b),this.roundRect(s,o,a,n,u,!1,!!b),void i.restore();w&&ae(s+a-K,o+n-K,s+te,o+n,s+te,o+n-te,K,te,.25,.5,.75,w,k,C,A&&W),A&&ae(s+te,o+n-te,s,o+X,s+X,o+X,te,X,.75,1,1.25,A,U,Y,z&&w),z&&ae(s+X,o+X,s+a-Q,o,s+a-Q,o+Q,X,Q,1.25,1.5,1.75,z,P,j,A&&W),W&&ae(s+a-Q,o+Q,s+a,o+n-K,s+a-K,o+n-K,Q,K,1.75,2,.25,W,M,D,z&&w)}},e.prototype.setOpacity=function(e){var t=e.opacity,i=void 0===t?1:t;this.ctx.setGlobalAlpha(i)},e.prototype.drawPattern=function(e,t,i){return $e(this,void 0,void 0,(function(){var a=this;return Ce(this,(function(n){return[2,new Promise((function(n,s){a.drawView(t,i,!0,!1,!0);var o=a,r=o.ctx;o.canvas;var l,c,d=t.width,h=t.height,u=t.left,p=t.top,f=i||{},m=f.borderRadius,g=void 0===m?0:m,x=f.backgroundImage,b=f.backgroundRepeat,y=void 0===b?"repeat":b;x&&(l=e,c=r.createPattern(l.src,y),r.setFillStyle(c),a.roundRect(u,p,d,h,g,!0,!1),a.setBorder(t,i),n())}))]}))}))},e.prototype.drawView=function(e,t,i,a,n){void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===n&&(n=!0);var s=this.ctx,o=e.width,r=e.height,l=e.left,c=e.top,d=t||{},h=d.borderRadius,u=void 0===h?0:h,p=d.backgroundColor,f=void 0===p?"transparent":p,m=d.overflow;t.opacity&&this.setOpacity(t),this.setTransform(e,t),n&&(s.save(),this.setShadow(t)),i&&this.setBackground(f,o,r,l,c),t.clipPath?this.clipPath(l,c,o,r,t.clipPath,i,!1):this.roundRect(l,c,o,r,u,i,!1),n&&s.restore(),a&&this.setBorder(e,t),"hidden"==m&&s.clip()},e.prototype.drawImage=function(e,t,i,a){return void 0===t&&(t={}),void 0===i&&(i={}),void 0===a&&(a=!0),$e(this,void 0,void 0,(function(){var n=this;return Ce(this,(function(s){switch(s.label){case 0:return[4,new Promise((function(s,o){return $e(n,void 0,void 0,(function(){var n,o,r,l,c,d,h,u,p,f,m,g,x,b,y,v,w,_,k,$,C=this;return Ce(this,(function(F){return n=this.ctx,o=i.borderRadius,r=void 0===o?0:o,l=i.backgroundColor,c=void 0===l?"transparent":l,d=i.objectFit,h=void 0===d?"fill":d,u=i.backgroundSize,p=void 0===u?"fill":u,f=i.objectPosition,m=i.backgroundPosition,g=i.boxShadow,i.backgroundImage&&(h=p,f=m),g&&this.drawView(t,Object.assign(i,{backgroundColor:c||g&&(c||"#ffffff")}),!0,!1,!0),x=t.width,b=t.height,y=t.left,v=t.top,n.save(),w=t.contentSize.left-t.borderSize.left,_=t.contentSize.top-t.borderSize.top,a||(this.setOpacity(i),this.setTransform(t,i),this.setBackground(c,x,b,y,v),this.roundRect(y,v,x,b,r,!!(r||!g&&c),!1)),y+=w,v+=_,n.clip(),k=function(e){if("fill"!==h){var i=function(e,t,i){var a=e.objectFit,n=e.objectPosition,s=t.width/t.height,o=i.width/i.height,r=1,l="contain",c="cover";a==l&&s>=o||a==c&&s<o?r=t.height/i.height:(a==l&&s<o||a==c&&s>=o)&&(r=t.width/i.width);var d=i.width*r,h=i.height*r,u=n||[],p=u[0],f=u[1],m=Ye(p)?qe(p,t.width):(t.width-d)*(Je(p)?qe(p,1):{left:0,center:.5,right:1}[p||"center"]),g=Ye(f)?qe(f,t.height):(t.height-h)*(Je(f)?qe(f,1):{top:0,center:.5,bottom:1}[f||"center"]),x=function(e,t){return[(e-m)/r,(t-g)/r]},b=x(0,0),y=b[0],v=b[1],w=x(t.width,t.height),_=w[0],k=w[1],$=Math.max,C=Math.min;return{sx:$(y,0),sy:$(v,0),sw:C(_-y,i.width),sh:C(k-v,i.height),dx:$(m,0),dy:$(g,0),dw:C(d,t.width),dh:C(h,t.height)}}({objectFit:h,objectPosition:f},t.contentSize,e),a=i.sx,s=i.sy,o=i.sh,r=i.sw,l=i.dx,c=i.dy,d=i.dh,u=i.dw;He==Fe.MP_BAIDU?n.drawImage(e.src,l+y,c+v,u,d,a,s,r,o):n.drawImage(e.src,a,s,r,o,l+y,c+v,u,d)}else n.drawImage(e.src,y,v,x,b)},$=function(){n.restore(),C.drawView(t,i,!1,!0,!1),s(1)},k(e),$(),[2]}))}))}))];case 1:return s.sent(),[2]}}))}))},e.prototype.drawText=function(e,t,i,a){var n=this,s=this.ctx,o=t.borderSize,r=t.contentSize,l=t.left,c=t.top,d=r.width,h=r.height,u=r.left-o.left||0,p=r.top-o.top||0,f=i.color,m=i.lineHeight,g=i.fontSize,x=i.fontWeight,b=i.fontFamily,y=i.fontStyle,v=i.textIndent,w=void 0===v?0:v,_=i.textAlign,k=i.textStroke,$=i.verticalAlign,C=void 0===$?Pt:$,F=i.backgroundColor,S=i.lineClamp,z=i.backgroundClip,I=i.textShadow,P=i.textDecoration;if(w=Ye(w)?w:0,this.drawView(t,i,z!=Ft),m=qe(m,g),e){s.save(),l+=u,c+=p;var T=a.fontHeight,j=a.descent,B=void 0===j?0:j,V=a.ascent,W=B+(void 0===V?0:V);switch(s.setFonts({fontFamily:b,fontSize:g,fontWeight:x,fontStyle:y}),s.setTextBaseline(Pt),s.setTextAlign(_),z?this.setBackground(F,d,h,l,c):s.setFillStyle(f),_){case jt:break;case Bt:l+=.5*d;break;case Vt:l+=d}var E=a.lines*m,M=Math.ceil((h-E)/2);switch(M<0&&(M=0),C){case It:break;case Pt:c+=M;break;case Tt:c+=2*M}var O=(m-T)/2,D=m/2,L=function(e){var t=s.measureText(e),i=t.actualBoundingBoxDescent,a=void 0===i?0:i,n=t.actualBoundingBoxAscent;return C==It?{fix:W?void 0===n?0:n:D-O/2,lineY:W?0:O-O/2}:C==Pt?{fix:W?D+a/4:D,lineY:W?0:O}:C==Tt?{fix:W?m-a:D+O/2,lineY:W?2*O:O+O/2}:{fix:0,height:0,lineY:0}},R=function(e,t,i){var n=e;switch(_){case jt:n+=i;break;case Bt:n=(e-=i/2)+i;break;case Vt:n=e,e-=i}if(P){s.setLineWidth(g/13),s.beginPath();var o=.1*a.fontHeight;/\bunderline\b/.test(P)&&(s.moveTo(e,t+a.fontHeight+o),s.lineTo(n,t+a.fontHeight+o)),/\boverline\b/.test(P)&&(s.moveTo(e,t-o),s.lineTo(n,t-o)),/\bline-through\b/.test(P)&&(s.moveTo(e,t+.5*a.fontHeight),s.lineTo(n,t+.5*a.fontHeight)),s.closePath(),s.setStrokeStyle(f),s.stroke()}},A=function(e,t,i){var a=function(){s.setLineWidth(k.width),s.setStrokeStyle(k.color),s.strokeText(e,t,i)},o="outset";k&&k.type!==o?(s.save(),n.setShadow({boxShadow:I}),s.fillText(e,t,i),s.restore(),a()):k&&k.type==o?(s.save(),n.setShadow({boxShadow:I}),a(),s.restore(),s.save(),s.fillText(e,t,i),s.restore()):(n.setShadow({boxShadow:I}),s.fillText(e,t,i))};if(!a.widths||1==a.widths.length&&a.widths[0].total+w<=r.width){var H=L(e),U=H.fix,N=void 0===U?0:U,Y=H.lineY;return A(e,l+w,c+N),R(l+w,c+Y,a&&a.widths&&a.widths[0].total||a.text),c+=m,s.restore(),void this.setBorder(t,i)}for(var q=c,J=l,X="",G=0,Q=s.measureText("...").width,Z=a.widths,K=0;K<Z.length;K++){var ee=Z[K].widths,te=0;X="",c+=1==(G+=1)?0:m,1==G&&w&&(te=w,J=l+w);for(var ie=0;ie<ee.length;ie++){1!==G&&w&&(J=l);var ae=ee[ie],ne=ae.width,se=ae.text,oe=(ee[ie+1]||{}).width;if(X+=se,(te+=ne)+(void 0===oe?0:oe)+(0==G?w:0)+(G==S?Q:0)>r.width){G>=S&&(X+="…"),G++,te=0;var re=L(X);N=re.fix,Y=re.lineY,A(X,J,c+N),R(J,c+Y,te),c+=m,X=""}else if(ie==ee.length-1){K!=Z.length-1&&G==S&&Q+te<r.width&&(X+="…");var le=L(X);N=le.fix,Y=le.lineY,A(X,J,c+N),R(J,c+Y,te)}if(c>q+h||G>S)break}}s.restore()}},e.prototype.source=function(e){return $e(this,void 0,void 0,(function(){var t,i,a,n,s=this;return Ce(this,(function(o){switch(o.label){case 0:if(this.node=null,t=+new Date,"{}"==JSON.stringify(e))return[2];if(!e.type)for(i in e.type=zt,e.styles=e.styles||e.css||{},e)["views","children","type","css","styles"].includes(i)||(e.styles[i]=e[i],delete e[i]);return e.styles.boxSizing||(e.styles.boxSizing="border-box"),[4,this.create(e)];case 1:return(a=o.sent())?(n=a.layout()||{},this.size=n,this.node=a,this.onEffectFinished().then((function(e){return s.lifecycle("onEffectSuccess",e)})).catch((function(e){return s.lifecycle("onEffectFail",e)})),this.performance&&console.log("布局用时："+(+new Date-t)+"ms"),[2,this.size]):[2,console.warn("no node")]}}))}))},e.prototype.getImageInfo=function(e){return this.imageBus[e]||(this.imageBus[e]=this.createImage(e,this.useCORS)),this.imageBus[e]},e.prototype.create=function(e,t){return $e(this,void 0,void 0,(function(){function i(e,t,a){void 0===t&&(t={}),void 0===a&&(a=!0);var n=[];return e.forEach((function(e){var s,o=e.styles,r=void 0===o?{}:o,l=e.children,c=void 0===l?[]:l,d=e.text,h=void 0===d?"":d,u=e.type,p=void 0===u?"":u;s=ke(a?ke({},t):{},r);var f={},m={},g={};if(Object.keys(s).map((function(e){if(e.includes("padding")||e.includes("margin")){var t=function(e,t){var i,a,n,s,o=[s=(n=e).match(/([a-z]+)/)[1],dt(n.split(s)[1])],r=o[0],l=o[1],c=t.split(" ");if(l)return(i={})[r+l]=t,i;if(c.length&&!l){var d=c[0],h=c[1],u=c[2],p=c[3];return(a={})[r+ze[0]]=d,a[r+ze[1]]=h||d,a[r+ze[2]]=u||d,a[r+ze[3]]=p||h||d,a}}(e,s[e]);Object.keys(t).map((function(e){e.includes("Left")?m[e]=t[e]:e.includes("Right")?g[e]=t[e]:f[e]=t[e]}))}})),s.textIndent&&(m.textIndent=s.textIndent,delete t.textIndent),""!==h){var x=Array.from(h);x.forEach((function(e,t){var i=Object.assign({},s,f);0===t?Object.assign(i,m):t==x.length-1&&Object.assign(i,g),delete i.padding,delete i.margin,n.push({type:"text",text:e,styles:i})}))}if(p==Ct||p==St)n.push(e);else if("block"===r.display&&c.length>0){var b=i(c,s,!1);e.children=b,e.flattened=!0,n.push(e)}else c.length>0&&(b=i(c,s,a),n=n.concat(b))})),n}var a,n,s,o,r,l,c,d,h,u,p,f,m,g,x,b,y,v,w,_,k;return Ce(this,(function($){switch($.label){case 0:if(!e)return[2];if(e.styles||(e.styles=e.css||{}),a=e.type,n=a==Ct,s=[Ft,St].includes(a),o="textBox"==a,r=e.styles||{},l=r.backgroundImage,c=r.display,n&&!e.src&&!e.url)return[2];if("none"==c)return[2];if(s||o){if(d=e.children,!e.text&&(!d||d&&!d.length))return[2];d&&d.length&&!e.flattened&&(h=i(e.children),e.type="view",e.children=h)}if(!(n||e.type==zt&&l))return[3,4];u=n?e.src:"",p=/url\((.+)\)/.exec(l),l&&p&&p[1]&&(u=p[1]||""),$.label=1;case 1:return $.trys.push([1,3,,4]),[4,this.getImageInfo(u)];case 2:return f=$.sent(),m=f.width,g=f.height,!(x=f.path)&&n?[2]:(x&&(e.attributes=Object.assign(e.attributes||{},{width:m,height:g,path:x,src:x,naturalSrc:u})),[3,4]);case 3:return b=$.sent(),e.type!=zt?[2]:(this.lifecycle("onEffectFail",ke(ke({},b),{src:u})),[3,4]);case 4:if(this.count+=1,y=new kt(e,t,this.root,this.ctx),!(v=e.views||e.children))return[3,8];w=0,$.label=5;case 5:return w<v.length?(_=v[w],[4,this.create(_,y)]):[3,8];case 6:(k=$.sent())&&y.add(k),$.label=7;case 7:return w++,[3,5];case 8:return[2,y]}}))}))},e.prototype.drawNode=function(e,t){return void 0===t&&(t=!1),$e(this,void 0,void 0,(function(){var i,a,n,s,o,r,l,c,d,h,u,p,f,m,g,x,b,y,v,w,_,k,$;return Ce(this,(function(C){switch(C.label){case 0:return i=e.layoutBox,a=e.computedStyle,n=e.attributes,s=e.name,o=e.children,r=e.fixedLine,l=e.attributes,c=l.src,d=l.text,h=a.position,u=a.backgroundImage,p=a.backgroundRepeat,["fixed"].includes(h)&&!t?[2]:(this.ctx.save(),s!==zt?[3,7]:c&&u?p?[4,this.drawPattern(n,i,a)]:[3,2]:[3,5]);case 1:return C.sent(),[3,4];case 2:return[4,this.drawImage(n,i,a,!1)];case 3:C.sent(),C.label=4;case 4:return[3,6];case 5:this.drawView(i,a),C.label=6;case 6:return[3,10];case 7:return s===Ct&&c?[4,this.drawImage(n,i,a,!1)]:[3,9];case 8:return C.sent(),[3,10];case 9:s===Ft?this.drawText(d,i,a,n):s===St&&$t.api&&$t.api.draw(d,this,i,a),C.label=10;case 10:if(this.progress+=1,m=(f=r||{}).beforeElements,g=f.afterElements,!m)return[3,14];x=0,b=m,C.label=11;case 11:return x<b.length?($=b[x],[4,this.drawNode($)]):[3,14];case 12:C.sent(),C.label=13;case 13:return x++,[3,11];case 14:if(!o)return[3,18];y=Object.values?Object.values(o):Object.keys(o).map((function(e){return o[e]})),v=0,w=y,C.label=15;case 15:return v<w.length?"absolute"===($=w[v]).computedStyle.position?[3,17]:[4,this.drawNode($)]:[3,18];case 16:C.sent(),C.label=17;case 17:return v++,[3,15];case 18:if(!g)return[3,22];_=0,k=g,C.label=19;case 19:return _<k.length?($=k[_],[4,this.drawNode($)]):[3,22];case 20:C.sent(),C.label=21;case 21:return _++,[3,19];case 22:return this.ctx.restore(),[2]}}))}))},e.prototype.render=function(e){var t=this;return void 0===e&&(e=30),new Promise((function(i,a){return $e(t,void 0,void 0,(function(){var t,n,s,o,r,l,c,d,h,u;return Ce(this,(function(p){switch(p.label){case 0:return t=+new Date,this.init(),[4,(f=e,void 0===f&&(f=0),new Promise((function(e){return setTimeout(e,f)})))];case 1:p.sent(),p.label=2;case 2:if(p.trys.push([2,14,,15]),!this.node)return[3,12];if(n=this.root.fixedLine||{},s=n.beforeElements,o=n.afterElements,!s)return[3,6];r=0,l=s,p.label=3;case 3:return r<l.length?(h=l[r],[4,this.drawNode(h,!0)]):[3,6];case 4:p.sent(),p.label=5;case 5:return r++,[3,3];case 6:return[4,this.drawNode(this.node)];case 7:if(p.sent(),!o)return[3,11];c=0,d=o,p.label=8;case 8:return c<d.length?(h=d[c],[4,this.drawNode(h,!0)]):[3,11];case 9:p.sent(),p.label=10;case 10:return c++,[3,8];case 11:return i(this.node),[3,13];case 12:this.lifecycle("onEffectFail","node is empty"),p.label=13;case 13:return[3,15];case 14:return u=p.sent(),this.lifecycle("onEffectFail",u),a(u),[3,15];case 15:return this.performance&&console.log("渲染用时："+(+new Date-t-30)+"ms"),[2]}var f}))}))}))},e.prototype.onEffectFinished=function(){var e=this,t=Object.keys(this.imageBus).map((function(t){return e.imageBus[t]}));return Promise.all(t)},e.prototype.destroy=function(){this.node=[]},e.prototype.save=function(e){try{var t=e||{},i=t.fileType,a=void 0===i?"png":i,n=t.quality,s=void 0===n?1:n;return this.canvas.toDataURL("image/"+a,s)}catch(o){return this.lifecycle("onEffectFail","image cross domain"),o}},e}();Fe.WEB==He&&(window.Painter=Wt);const Et=K({name:"lime-painter",mixins:[pe,re("painter"),{}],data:()=>({use2dCanvas:!1,canvasHeight:150,canvasWidth:null,parentWidth:0,inited:!1,progress:0,firstRender:0,done:!1}),computed:{styles(){return`${this.size}${this.customStyle||""};`+(this.hidden&&"position: fixed; left: 1500rpx;")},canvasId(){return`l-painter${this._&&this._.uid||this._uid}`},size(){if(this.boardWidth&&this.boardHeight)return`width:${this.boardWidth}px; height: ${this.boardHeight}px;`},dpr(){return this.pixelRatio||o().pixelRatio},boardWidth(){const{width:e=0}=this.elements&&this.elements.css||this.elements||this,t=ve(e||this.width);return t||Math.max(t,ve(this.canvasWidth))},boardHeight(){const{height:e=0}=this.elements&&this.elements.css||this.elements||this,t=ve(e||this.height);return t||Math.max(t,ve(this.canvasHeight))},hasBoard(){return this.board&&Object.keys(this.board).length},elements(){return this.hasBoard?this.board:JSON.parse(JSON.stringify(this.el))}},created(){this.use2dCanvas="2d"===this.type&&!1},async mounted(){await me(30),await this.getParentWeith(),this.$nextTick((()=>{setTimeout((()=>{this.$watch("elements",this.watchRender,{deep:!0,immediate:!0})}),30)}))},unmounted(){this.done=!1,this.inited=!1,this.firstRender=0,this.progress=0,this.painter=null,clearTimeout(this.rendertimer)},methods:{async watchRender(e,t){e&&e.views&&(this.firstRender?this.firstRender:e.views.length)&&Object.keys(e).length&&JSON.stringify(e)!=JSON.stringify(t)&&(this.firstRender=1,this.progress=0,this.done=!1,clearTimeout(this.rendertimer),this.rendertimer=setTimeout((()=>{this.render(e)}),this.beforeDelay))},async setFilePath(e,t){let i=e;const{pathType:a=this.pathType}=t||this;var n;return"base64"!=a||fe(e)?"url"==a&&fe(e)&&(i=await(n=e,new Promise(((e,t)=>{let i=n.split(",")[0].split(":")[1].split(";")[0],a=atob(n.split(",")[1]),s=new ArrayBuffer(a.length),o=new Uint8Array(s);for(let n=0;n<a.length;n++)o[n]=a.charCodeAt(n);e(URL.createObjectURL(new Blob([o],{type:i})))})))):i=await we(e),t&&t.isEmit&&this.$emit("success",i),i},async getSize(e){const{width:t}=e.css||e,{height:i}=e.css||e;this.size||(t||i?(this.canvasWidth=t||this.canvasWidth,this.canvasHeight=i||this.canvasHeight,await me(30)):await this.getParentWeith())},canvasToTempFilePathSync(e){this.stopWatch&&this.stopWatch(),this.stopWatch=this.$watch("done",(t=>{t&&(this.canvasToTempFilePath(e),this.stopWatch&&this.stopWatch())}),{immediate:!0})},getParentWeith(){return new Promise((e=>{h().in(this).select(".lime-painter").boundingClientRect().exec((t=>{const{width:i,height:a}=t[0]||{};this.parentWidth=Math.ceil(i||0),this.canvasWidth=this.parentWidth||300,this.canvasHeight=a||this.canvasHeight||150,e(t[0])}))}))},async render(e={}){if(!Object.keys(e).length)return console.error("空对象");this.progress=0,this.done=!1,await this.getSize(e);const t=await this.getContext();let{use2dCanvas:i,boardWidth:a,boardHeight:n,canvas:s,afterDelay:o}=this;if(i&&!s)return Promise.reject(new Error("canvas 没创建"));if(this.boundary={top:0,left:0,width:a,height:n},this.painter=null,!this.painter){const{width:i}=e.css||e;e.css,!i&&this.parentWidth&&Object.assign(e,{width:this.parentWidth});const o={context:t,canvas:s,width:a,height:n,pixelRatio:this.dpr,useCORS:this.useCORS,createImage:_e.bind(this),performance:this.performance,listen:{onProgress:e=>{this.progress=e,this.$emit("progress",e)},onEffectFail:e=>{this.$emit("faill",e)}}};this.painter=new Wt(o)}const{width:r,height:l}=await this.painter.source(JSON.parse(JSON.stringify(e)));return this.boundary.height=this.canvasHeight=l,this.boundary.width=this.canvasWidth=r,await me(this.sleep),await this.painter.render(),await new Promise((e=>this.$nextTick(e))),i||await this.canvasDraw(),o&&i&&await me(o),this.$emit("done"),this.done=!0,this.isCanvasToTempFilePath&&this.canvasToTempFilePath().then((e=>{this.$emit("success",e.tempFilePath)})).catch((e=>{this.$emit("fail",new Error(JSON.stringify(e)))})),Promise.resolve({ctx:t,draw:this.painter,node:this.node})},canvasDraw(e=!1){return new Promise(((t,i)=>this.ctx.draw(e,(()=>setTimeout((()=>t()),this.afterDelay)))))},async getContext(){if(!this.canvasWidth)return this.$emit("fail","painter no size"),console.error("[lime-painter]: 给画板或父级设置尺寸"),Promise.reject();if(this.ctx&&this.inited)return Promise.resolve(this.ctx);const{type:e,use2dCanvas:t,dpr:i,boardWidth:a,boardHeight:n}=this,s=()=>new Promise((e=>{h().in(this).select(`#${this.canvasId}`).boundingClientRect().exec((t=>{if(t){const i=m(this.canvasId,this);if(this.inited||(this.inited=!0,this.use2dCanvas=!1,this.canvas=t),!i.measureText){let e=function(e){let t=0;for(let i=0;i<e.length;i++)e.charCodeAt(i)>0&&e.charCodeAt(i)<128?t++:t+=2;return t};i.measureText=t=>{let a=i.state&&i.state.fontSize||12;const n=i.__font;return n&&12==a&&(a=parseInt(n.split(" ")[3],10)),a/=2,{width:e(t)*a}}}this.ctx=i,e(this.ctx)}else console.error("[lime-painter] no node")}))}));return t?new Promise((t=>{h().in(this).select(`#${this.canvasId}`).node().exec((i=>{let{node:a}=i&&i[0]||{};if(a){const i=a.getContext(e);this.inited||(this.inited=!0,this.use2dCanvas=!0,this.canvas=a),this.ctx=i,t(this.ctx)}else console.error("[lime-painter]: no size")}))})):s()},canvasToTempFilePath(e={}){return new Promise((async(t,i)=>{const{use2dCanvas:a,canvasId:n,dpr:s,fileType:o,quality:r}=this;this.boundary;const l=Object.assign({canvasId:n,id:n,fileType:o,quality:r},e,{success:async i=>{try{const a=await this.setFilePath(i.tempFilePath||i,e),n=Object.assign(i,{tempFilePath:a});e.success&&e.success(n),t(n)}catch(a){this.$emit("fail",a)}}});if(a){l.canvas=this.canvas;try{const i=this.canvas.toDataURL(`image/${e.fileType||o}`.replace(/pg/,"peg"),e.quality||r);if(/data:,/.test(i))u(l,this);else{const a=await this.setFilePath(i,e);e.success&&e.success({tempFilePath:a}),t({tempFilePath:a})}}catch(c){e.fail&&e.fail(c),i(c)}}else u(l,this)}))}}},[["render",function(n,o,r,l,c,d){const h=g,u=s;return e(),t(u,{class:"lime-painter",ref:"limepainter"},{default:i((()=>[d.canvasId&&d.size?(e(),t(u,{key:0,style:p(d.styles)},{default:i((()=>[c.use2dCanvas?(e(),t(h,{key:0,class:"lime-painter__canvas",id:d.canvasId,type:"2d",style:p(d.size)},null,8,["id","style"])):(e(),t(h,{key:1,class:"lime-painter__canvas","canvas-id":d.canvasId,style:p(d.size),id:d.canvasId,width:d.boardWidth*d.dpr,height:d.boardHeight*d.dpr,hidpi:n.hidpi},null,8,["canvas-id","style","id","width","height","hidpi"]))])),_:1},8,["style"])):f("",!0),a(n.$slots,"default",{},void 0,!0)])),_:3},512)}],["__scopeId","data-v-b590c84e"]]);var Mt,Ot,Dt;const Lt=P();const Rt=K({components:{popWarn:ne,sponsor:ie,complain:ae},data:()=>({wh:Lt.globalData.navTop,appConfig:"",masterDomain:Lt.globalData.masterDomain,userInfo:Lt.globalData.userInfo,globalData:Lt.globalData,userError:Lt.globalData.userError,imgError:Lt.globalData.imgError,imgsrc:`${Lt.globalData.masterDomain}/static/images`,imgVersion:Lt.globalData.imgVersion,imgurl:Lt.globalData.imgPath+"/article/",imgPath:Lt.globalData.imgStaticPath,posterImg:"",detail:{mold:-1},sponsor:[],comment:[],recommend:[],pageC:1,pageSizeC:10,pageR:1,pageSizeR:5,toutiao:{scrollTop:0,changeComm:!0,commentText_3:"",auserTop:0,topPhoto:!1,app:!1,commentPopb:!1},tuji:{currIndex:0,extendb:!1,fold:!1,commentText_1:"",commonb:!1,fullb:!1},recall:{text:"",textMy:"",name:"",index:-1,id:"",popId:"",recallb:!1},xiaoshipin:{commentText:"",commontb:!1,recallb:!1,careSucess:!1,resetComment:!0,recallId:-1,page:1,pageSize:10,detailId:0,activeIndex:0},backComment:{},zanItem:"",config:Lt.globalData.moduleConfig.article||{},scrolldis:0,warningb:!1,info:"",loadingb:!1,sponsorb:!1,complainb:!1,complainInfo:{},complainList:["垃圾广告","色情淫秽","政治反动","钓鱼诈骗","网络敲诈","内容侵权","其他"],privateb:!1,ajaxb:!1,recallb:!1,pointb:!1,loadComment:!1,qrb:!1,qrconb:!1,wxshareb:!1,refreshStart:!1,scrollYb:!0,shareItem:{web:[{id:1,title:"生成海报",src:`${Lt.globalData.imgPath}/article/poster.png?v=${Lt.globalData.imgVersion}`},{id:2,title:"微信好友",src:`${Lt.globalData.imgPath}/article/wechat.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:3,title:"朋友圈",src:`${Lt.globalData.imgPath}/article/friends.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:4,title:"微博",src:`${Lt.globalData.imgPath}/article/weibo.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:5,title:"QQ好友",src:`${Lt.globalData.imgPath}/article/QQ.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:6,title:"QQ空间",src:`${Lt.globalData.imgPath}/article/QQspace.png?v=${Lt.globalData.imgVersion}`,fn:""}],"mp-weixin":[{id:1,title:"生成海报",src:`${Lt.globalData.imgPath}/article/poster.png?v=${Lt.globalData.imgVersion}`},{id:7,title:"复制链接",src:`${Lt.globalData.imgPath}/article/link.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:9,title:"收藏",src:`${Lt.globalData.imgPath}/article/collect.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:10,title:"浏览记录",src:`${Lt.globalData.imgPath}/article/history.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:11,title:"举报",src:`${Lt.globalData.imgPath}/article/warn.png?v=${Lt.globalData.imgVersion}`,fn:""}],"mp-toutiao":[{id:7,title:"复制链接",src:`${Lt.globalData.imgPath}/article/link.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:9,title:"收藏",src:`${Lt.globalData.imgPath}/article/collect.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:10,title:"浏览记录",src:`${Lt.globalData.imgPath}/article/history.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:11,title:"举报",src:`${Lt.globalData.imgPath}/article/warn.png?v=${Lt.globalData.imgVersion}`,fn:""}]},shareOperate:[{id:7,title:"复制链接",src:`${Lt.globalData.imgPath}/article/link.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:8,title:"当面扫码",src:`${Lt.globalData.imgPath}/article/2Dcode.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:9,title:"收藏",src:`${Lt.globalData.imgPath}/article/collect.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:10,title:"浏览记录",src:`${Lt.globalData.imgPath}/article/history.png?v=${Lt.globalData.imgVersion}`,fn:""},{id:11,title:"举报",src:`${Lt.globalData.imgPath}/article/warn.png?v=${Lt.globalData.imgVersion}`,fn:""}],shareb:!1,shareconb:!1,postShow:!1,postExhib:!1,postCode:"",postWx:"",topShare:!0,topback:!0,topFlex:"space-between",biasTop:0,platForm:Lt.globalData.platForm,shareLink:"",pages:"",appBoolean:!1,webdyMini:Lt.globalData.webdyMini,Android:!0,safarib:!1,copySuccessb:!1,loadAdv:{mold:"article",page:"detail",config:[{title:"资讯移动端信息流广告",page:"index"},{title:"资讯移动端详情页内容广告",page:"detail"}]}}),onLoad(e){Mt=this,-1==Lt.globalData.wxprivate?Lt.watchG("wxprivate",(function(t){Mt.wxprivate=t,t?Mt.privateb=!0:Mt.onload(e)})):Lt.globalData.wxprivate?Mt.privateb=!0:Mt.onload(e)},methods:{onload(e){Lt.watchG("userInfo",(function(e){Mt.userInfo=e})),Mt.pages=Lt.pageFn(se),"{}"==JSON.stringify(Mt.config)&&Mt.configData(),Mt.detailData(e.id);let t={service:"member",action:"getComment",type:"article-detail",son:"1",aid:e.id,page:1,pageSize:10};if(Mt.commentList(t),Lt.globalData.appConfig)Mt.appConfig=Lt.globalData.appConfig;else{let e=setInterval((t=>{Lt.globalData.appConfig&&(Mt.appConfig=Lt.globalData.appConfig,clearInterval(e))}),100)}let i=Lt.globalData.platForm,a=Lt.globalData.userid?"&fromShare="+Lt.globalData.userid:"";if("web"==i){let e=function(e){window.setupWebViewJavascriptBridge((function(t){Mt.detail.length>0?t.callHandler("appShare",{platform:e,title:Mt.detail[0].title,url:Mt.shareLink,imageUrl:Mt.detail[0].litpic,summary:Mt.detail[0].description},(function(e){JSON.parse(e)})):t.callHandler("appShare",{platform:e,title:Mt.detail.title,url:Mt.shareLink,imageUrl:Mt.detail.litpic,summary:Mt.detail.description},(function(e){JSON.parse(e)}))}))},t=function(){navigator.share?(Mt.shareFn(0),s?Mt.safarib=!0:Mt.detail.length>0?navigator.share({url:Mt.shareLink,title:Mt.detail[0].title,text:Mt.detail[0].title}):navigator.share({url:Mt.shareLink,title:Mt.detail.title,text:Mt.detail.title})):S({data:`${Mt.detail.title} ${Mt.shareLink}`,success:e=>{Mt.copySuccessb=!0}}),Mt.shareconb=!1},i=window.params.get("from");Mt.toutiao.app=Boolean("app"==i)&&window.appBoolean,Mt.appBoolean=window.appBoolean,Mt.Android=window.Android,Mt.shareLink=`${window.location.href}${a}`,Mt.appBoolean&&(Mt.wh=r(60),window.Android||(Mt.topShare=!1,Mt.topback=!1),Mt.appPulldown("off"));let n=navigator.userAgent.toLowerCase(),s=-1!==n.indexOf("safari")&&-1===n.indexOf("browser")&&-1===n.indexOf("android");for(let a=0;a<Mt.shareItem.web.length;a++){switch(Mt.shareItem.web[a].id){case 1:Mt.shareItem.web[a].fn=function(){Mt.createPosterFn(0),Mt.shareFn(0)};break;case 2:Mt.shareItem.web[a].fn=function(){Mt.appBoolean?e("weixin"):Lt.globalData.webWeixin?(Mt.wxshareb=!0,Mt.shareFn(0)):t()};break;case 3:Mt.shareItem.web[a].fn=function(){Mt.appBoolean?e("timeline"):Lt.globalData.webWeixin?(Mt.wxshareb=!0,Mt.shareFn(0)):t()};break;case 4:Mt.shareItem.web[a].fn=function(){Mt.appBoolean?e("weibo"):Mt.linkTo(`https://service.weibo.com/share/share.php?url=${encodeURIComponent(Mt.shareLink)}`),Mt.shareFn(0)};break;case 5:Mt.shareItem.web[a].fn=function(){Mt.appBoolean?e("qq"):Lt.globalData.webWeixin?(Mt.wxshareb=!0,Mt.shareFn(0)):t()};break;case 6:Mt.shareItem.web[a].fn=function(){Mt.appBoolean?e("qzone"):Mt.linkTo(`https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${encodeURIComponent(Mt.shareLink)}`),Mt.shareFn(0)}}}for(let a=0;a<Mt.shareOperate.length;a++){let e=Mt.shareOperate[a].id;switch(Mt.shareOperate[a],e){case 7:Mt.shareOperate[a].fn=Mt.copyShareFn;break;case 8:Mt.shareOperate[a].fn=function(){Mt.qrCodeFn(1)};break;case 9:Mt.shareOperate[a].fn=Mt.collectFn;break;case 10:Mt.shareOperate[a].fn=function(){Mt.linkTo(`${Lt.globalData.appConfig.cfg_user_index}/history?module=article`)};break;case 11:Mt.shareOperate[a].fn=function(){Mt.complainb=!0,Mt.$refs.complaint.phoneAreaData(),Mt.shareFn(0)}}}}else if("mp-weixin"==i){this.biasTop=Lt.globalData.biasTop_88,Mt.topFlex="flex-start",Mt.topShare=!1,Mt.shareLink=`${Mt.masterDomain}/article/detail?id=${e.id}${a}`;for(let e=0;e<Mt.shareItem["mp-weixin"].length;e++){let t=Mt.shareItem["mp-weixin"][e].id;switch(Mt.shareItem["mp-weixin"][e],t){case 1:Mt.shareItem["mp-weixin"][e].fn=function(){Mt.createPosterFn(0),Mt.shareFn(0)};break;case 7:Mt.shareItem["mp-weixin"][e].fn=Mt.copyShareFn;break;case 9:Mt.shareItem["mp-weixin"][e].fn=Mt.collectFn;break;case 10:Mt.shareItem["mp-weixin"][e].fn=function(){Mt.linkTo(`${Lt.globalData.appConfig.cfg_user_index}/history?module=article`)};break;case 11:Mt.shareItem["mp-weixin"][e].fn=function(){Mt.complainb=!0,Mt.$refs.complaint.phoneAreaData(),Mt.shareFn(0)}}}}else if("mp-toutiao"==i){Mt.topback=!1,Mt.topFlex="center",Mt.topShare=!1,Mt.shareLink=`${Mt.masterDomain}/article/detail?id=${e.id}${a}`;for(let e=0;e<Mt.shareItem["mp-toutiao"].length;e++){let t=Mt.shareItem["mp-toutiao"][e].id;switch(Mt.shareItem["mp-toutiao"][e],t){case 7:Mt.shareItem["mp-toutiao"][e].fn=Mt.copyShareFn;break;case 9:Mt.shareItem["mp-toutiao"][e].fn=Mt.collectFn;break;case 10:Mt.shareItem["mp-toutiao"][e].fn=function(){Mt.linkTo(`${Lt.globalData.appConfig.cfg_user_index}/history?module=article`)};break;case 11:Mt.shareItem["mp-toutiao"][e].fn=function(){Mt.complainb=!0,Mt.$refs.complaint.phoneAreaData(),Mt.shareFn(0)}}}}},linkTo(e){if(e){if(Mt.appBoolean)return location.href=e,!1;"web"==Lt.globalData.platForm?e.indexOf("http")>-1?location.href=e:x({url:e}):x({url:e.indexOf("http")>-1?"/pages/redirect/index?url="+encodeURIComponent(e):e})}},warnFn(e=2e3){Mt.warningb=!0,clearTimeout(Ot),Ot=setTimeout((e=>{Mt.warningb=!1}),e)},reloadFn(){Lt.reloadFn()},backFn(){if(Mt.appBoolean)return window.setupWebViewJavascriptBridge((function(e){e.callHandler("goBack",{},(function(e){}))})),!1;{let e=b();e&&e.length>1?y({delta:1}):"web"==Mt.platForm?location.href=`${Mt.masterDomain}${window.pathname}${Mt.pages.index}`:v({url:"/pages/packages/article/index/index"})}},detailData(e){w({title:"加载中"});let t={service:"article",action:"detail",id:e};Mt.appBoolean&&(t.from="app"),Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:t}).then((t=>{if(100==t.data.state){let i=t.data.info;_({title:Mt.Android||!Lt.webWeixin?i.title:i.typeName.split(" > ").reverse()[0]});let a=i.mold;2==a&&v({url:`${Mt.pages.detailVideo}?id=${e}`});let n=new Date(1e3*i.pubdate),s=(n.getMonth()+1<10?"0":"")+(n.getMonth()+1),o=(n.getDate()<10?"0":"")+n.getDate(),l=n.getHours(),c=(n.getMinutes()<10?"0":"")+n.getMinutes();switch(i.pubdate=`${s}-${o} ${l}:${c}`,i.collect&&(Mt.shareItem["mp-weixin"][2].src=`${Mt.imgurl}collected.png?v=${Mt.imgVersion}`,Mt.shareItem["mp-toutiao"][1].src=`${Mt.imgurl}collected.png?v=${Mt.imgVersion}`,Mt.shareOperate[2].src=`${Mt.imgurl}collected.png?v=${Mt.imgVersion}`,Mt.shareItem["mp-weixin"][2].title="已收藏",Mt.shareItem["mp-toutiao"][1].title="已收藏",Mt.shareOperate[2].title="已收藏"),Mt.complainInfo={service:"member",template:"complain",module:"article",dopost:"detail",aid:i.id},Lt.wxShareFn({title:i.title,link:Mt.shareLink,imgUrl:i.litpic,description:i.description}),Mt.appBoolean&&!Mt.Android&&window.setupWebViewJavascriptBridge((function(e){let t={apptitle:"",share:1,report:1,shareContent:{platform:"all",title:i.title,url:Mt.shareLink,imageUrl:i.litpic,summary:i.description}};e.callHandler("initAppConfig",{value:t},(function(e){})),e.callHandler("getAppInfo",{},(function(e){}))})),Number(a)){case 0:{let t={service:"article",action:"alist",uid:i.member.userid,page:1,pageSize:5};Mt.recommendList(t),Mt.sponsorList(e),setTimeout((e=>{h().in(Mt).selectAll(".commentArea,.a-user,.artContent").boundingClientRect((e=>{e.length>0&&(e[2]?(Mt.toutiao.scrollTop=e[2].top-e[0].top,Mt.toutiao.auserTop=e[1].top-e[0].top):(Mt.toutiao.scrollTop=e[1].top,Mt.toutiao.auserTop=e[0].top))})).exec()}),1500),i.posterArr=Lt.posterProcess(i.mbody);break}case 1:setTimeout((e=>{h().in(Mt).select("#intro_0").boundingClientRect((e=>{if(e){Math.round(e.height/r(42))>2&&(Mt.tuji.extendb=!0)}})).exec()}),200);break;case 3:return k("tvVideo"),Mt.xiaoshipin.detailId=i.id,i.play=!1,Mt.detail=[i],"web"==Mt.platForm&&($('link[rel="canonical"]').attr("href",Mt.shareLink),$('meta[property="og:title"]').attr("content",i.title),$('meta[property="og:description"]').attr("content",i.description||""),i.litpic&&$('meta[property="og:image"]').attr("content",i.litpic)),Mt.videoData(),void C()}"web"==Mt.platForm&&($('link[rel="canonical"]').attr("href",Mt.shareLink),$('meta[property="og:title"]').attr("content",i.title),$('meta[property="og:description"]').attr("content",i.description||""),i.litpic&&($('meta[property="og:image"]').attr("content",i.litpic),$("#firstImage").attr("src",i.litpic))),Mt.detail=i}else Mt.info="信息不存在或已经删除~",setTimeout((e=>{"web"==Mt.platForm?location.href=`${Mt.masterDomain}${window.pathname}${Mt.pages.index}`:v({url:"/pages/packages/article/index/index"})}),3e3);C()}))},commentList(e,t=!1){Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:e}).then((e=>{if(100==e.data.state){let i=e.data.info.list;Mt.comment=t?Mt.comment.concat(i):[...i],i.length<Mt.pageSizeC?Mt.loadComment=!1:Mt.loadComment=!0}else Mt.loadComment=!1;Mt.ajaxb=!1}))},sponsorList(e){let t={service:"article",action:"rewardList",aid:e};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:t}).then((e=>{100==e.data.state&&(Mt.sponsor=e.data.info.list.splice(0,7))}))},sponsorSuccess(){let e=Number(Mt.xiaoshipin.detailId>0?Mt.detail[Mt.xiaoshipin.activeIndex].id:Mt.detail.id);return Mt.sponsorList(e),Mt.detail.rewardcount++,1},careFn(e){if(Mt.ajaxb)return!1;if(!Lt.loginCheck(`${Mt.pages.detail}?id=${Mt.detail.id}`))return!1;function t(e){Mt.ajaxb=!0;let t={service:"member",action:"followMember",for:"media",id:e>=0?Mt.detail[e].media.id:Mt.detail.media.id};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:t}).then((t=>{if(100==t.data.state)if(Mt.xiaoshipin.detailId>0){let t=Mt.detail[e].media.isfollow;Mt.detail[e].media.isfollow=!t,t||(Mt.xiaoshipin.careSucess=!0,setTimeout((e=>{Mt.xiaoshipin.careSucess=!1}),2e3))}else{let e=Mt.detail.media.isfollow;Mt.detail.media.isfollow=!e}Mt.ajaxb=!1}))}0==Mt.xiaoshipin.detailId&&Mt.detail.media.isfollow?F({title:"确认不再关注？",cancelColor:"#666",confirmColor:"#f21818",success:i=>{i.confirm&&t(e)}}):t(e)},commentFn(e){if(Mt.ajaxb)return!1;if(!Lt.loginCheck(`${Mt.pages.detail}?id=${Mt.detail.id}`))return!1;Mt.ajaxb=!0;let t={service:"member",action:"sendComment",type:"article-detail",format:"json",aid:Mt.detail[Mt.xiaoshipin.activeIndex]?Mt.detail[Mt.xiaoshipin.activeIndex].id:Mt.detail.id,content:e};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:t}).then((e=>{if(100==e.data.state){if(Mt.backComment=e.data.info,Mt.recallb=!1,Mt.toutiao.commentPopb=!1,Mt.pageC=1,Mt.xiaoshipin.detailId>0)Mt.xiaoshipin.resetComment=!0,Mt.targetCommentFn();else{let e={service:"member",action:"getComment",type:"article-detail",son:"1",aid:Mt.detail.id,page:1,pageSize:10};Mt.commentList(e)}Mt.toutiao.commentText_3="",Mt.xiaoshipin.commentText="",Mt.tuji.commentText_1="",Mt.pointb=!0,setTimeout((e=>{Mt.pointb=!1}),3e3)}else Mt.info=e.data.info;Mt.ajaxb=!1}))},recallFn(e,t){if(Mt.ajaxb)return!1;if(!Lt.loginCheck(`${Mt.pages.detail}?id=${Mt.detail.id}`))return!1;Mt.ajaxb=!0;let i={service:"member",action:"replyComment",id:e||Mt.recall.id,content:t||Mt.recall.text};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:i}).then((e=>{if(100==e.data.state)if(Mt.recall.text="",Mt.recall.textMy="",Mt.recallb=!1,Mt.xiaoshipin.detailId>0)Mt.xiaoshipin.resetComment=!0,Mt.targetCommentFn();else{let e={service:"member",action:"getComment",type:"article-detail",son:"1",aid:Mt.detail.id,page:1,pageSize:10*Mt.pageC};Mt.commentList(e)}Mt.info=e.data.info,Mt.ajaxb=!1}))},recallPopFn(e){e>=0?(Mt.recall.index=e,Mt.recall.popId=Mt.comment[e].id,setTimeout((e=>{Mt.recall.recallb=!0}),0)):(Mt.recall.recallb=!1,setTimeout((e=>{Mt.recall.index=-1}),200))},zanCommentFn(e){if(Mt.ajaxb)return!1;if(!Lt.loginCheck(`${Mt.pages.detail}?id=${Mt.detail.id}`))return!1;Mt.ajaxb=!0;let t={service:"member",action:"dingComment",type:0==e.zan_has?"add":"del",id:e.id};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:t}).then((t=>{if(100==t.data.state){let t=e.zan_has;e.zan_has=!t,e.zan_has?(++e.zan,Mt.zanItem=e,setTimeout((e=>{Mt.zanItem=""}),800)):--e.zan}else Mt.info=t.data.info;Mt.ajaxb=!1}))},zanArticleFn(e){if(Mt.ajaxb)return!1;if(!Lt.loginCheck(`${Mt.pages.detail}?id=${Mt.detail.id}`))return!1;Mt.ajaxb=!0;let t={service:"member",action:"getZan",module:"article",temp:"detail",uid:e>=0?Mt.detail[e].admin:Mt.detail.admin,id:e>=0?Mt.detail[e].id:Mt.detail.id};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:t}).then((t=>{if(100==t.data.state){let t;t=Mt.xiaoshipin.detailId>0?Mt.detail[e]:Mt.detail,t.zan=!t.zan,t.zan?++t.zannum:--t.zannum,Mt.zanItem=t,Dt&&clearTimeout(Dt),Dt=setTimeout((e=>{Mt.zanItem=""}),2e3)}else Mt.info=t.data.info;Mt.ajaxb=!1}))},shareFn(e){1==e?(Mt.shareb=!0,setTimeout((e=>{Mt.shareconb=!0}),0)):(this.copySuccessb=!1,Mt.shareconb=!1,setTimeout((e=>{Mt.shareb=!1}),200))},copyShareFn(){Mt.shareFn(0),S({data:Mt.shareLink,fail:e=>{Mt.info="复制失败！"}})},collectFn(){if(Mt.ajaxb)return!1;if(!Lt.loginCheck(`${Mt.pages.detail}?id=${Mt.detail.id}`))return!1;Mt.ajaxb=!0;let e={service:"member",action:"collect",type:0==Mt.detail.collect?"add":"del",module:"article",temp:"detail",id:Mt.detail.id};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:e}).then((e=>{if(100==e.data.state){let e=Mt.detail;e.collect=!e.collect,e.collect?(Mt.shareItem["mp-weixin"][2].src=`${Mt.imgurl}collected.png?v=${Mt.imgVersion}`,Mt.shareItem["mp-toutiao"][1].src=`${Mt.imgurl}collected.png?v=${Mt.imgVersion}`,Mt.shareOperate[2].src=`${Mt.imgurl}collected.png?v=${Mt.imgVersion}`,Mt.shareItem["mp-weixin"][2].title="已收藏",Mt.shareItem["mp-toutiao"][1].title="已收藏",Mt.shareOperate[2].title="已收藏"):(Mt.shareItem["mp-weixin"][2].src=`${Mt.imgurl}collect.png?v=${Mt.imgVersion}`,Mt.shareItem["mp-toutiao"][1].src=`${Mt.imgurl}collect.png?v=${Mt.imgVersion}`,Mt.shareOperate[2].src=`${Mt.imgurl}collect.png?v=${Mt.imgVersion}`,Mt.shareItem["mp-weixin"][2].title="收藏",Mt.shareItem["mp-toutiao"][1].title="收藏",Mt.shareOperate[2].title="收藏")}else Mt.info=e.data.info;Mt.ajaxb=!1}))},qrCodeFn(e){0==e?(Mt.qrconb=!1,setTimeout((e=>{Mt.qrb=!1}),220)):(Mt.qrb=!0,setTimeout((e=>{Mt.qrconb=!0}),0))},sponsorFn(){let e;e=Mt.xiaoshipin.detailId>0?Mt.detail[Mt.xiaoshipin.activeIndex].admin:Mt.detail.admin,Mt.userInfo.userid==e?Mt.info="自己无法赞赏自己哦！":Mt.sponsorb=!0},configData(){Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:{service:"article",action:"config"}}).then((e=>{100==e.data.state&&(Mt.config=e.data.info,Lt.globalData.moduleConfig.article=e.data.info)}))},savePosterFn(){Mt.appBoolean&&(z("huoniao_poster",Mt.posterImg),window.setupWebViewJavascriptBridge((function(e){e.callHandler("saveImage",{value:"huoniao_poster"},(function(){}))})))},createPosterFn(e,t){if(Mt.posterImg&&1!=e)Mt.postShow=!0,Mt.scrollYb=!1;else if(0==e){w({title:"海报生成中"}),Mt.postShow=!0,Mt.scrollYb=!1,Mt.ajaxb=!0;let e={service:"siteConfig",action:"getWeixinQrPost",module:"article",type:"detail",aid:Mt.detail.id,title:Mt.detail.title,description:Mt.detail.description,imgUrl:Mt.detail.litpic,link:Mt.detail.url};Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:e}).then((e=>{100==e.data.state?e.data.info.includes("https")?Mt.postWx=e.data.info:e.data.info.includes("http")?Mt.postCode=e.data.info:Mt.postCode=Mt.shareLink:Mt.postCode=Mt.shareLink,Mt.ajaxb=!1}))}else Mt.ajaxb||(C(),Mt.postExhib=!0,Mt.posterImg=t)},appPulldown(e){Mt.appBoolean&&window.setupWebViewJavascriptBridge((function(t){t.callHandler("setDragRefresh",{value:e},(function(){}))}))},resetScroll(){"ios"==Lt.globalData.osName&&J({scrollTop:0,duration:100})},scrollTargetFn(e){Mt.scrolldis=e+.001*Math.random()},recommendList(e,t=!1){Mt.ajaxb=!0,Mt.$ajax.post({url:Lt.encodeUrl("include/ajax.php?"),data:e}).then((e=>{if(100==e.data.state){let i=e.data.info.list;for(let e=0;e<i.length;e++){let t=new Date(1e3*i[e].pubdate),a=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1),n=(t.getDate()<10?"0":"")+t.getDate();i[e].pubdate=`${a}-${n}`}Mt.recommend=t?Mt.recommend.concat(i):[...i],i.length<Mt.pageSizeR?Mt.loadingb=!1:Mt.loadingb=!0}else Mt.loadingb=!1;Mt.ajaxb=!1}))},moreCommonFn(){let e={service:"member",action:"getComment",type:"article-detail",son:"1",aid:Mt.detail.id,page:++Mt.pageC,pageSize:10};!Mt.ajaxb&&Mt.loadComment&&(Mt.ajaxb=!0,Mt.commentList(e,!0))},extendFn(){Mt.tuji.fold,Mt.tuji.fold=!Mt.tuji.fold},checkFoldFn(e){Mt.tuji.currIndex=e.detail.current,Mt.$nextTick((e=>{h().in(Mt).select(`#intro_${Mt.tuji.currIndex}`).boundingClientRect((e=>{if(e){let t=Math.round(e.height/r(42));Mt.tuji.extendb=Boolean(t>2)}})).exec()}))},playOrpause(e,t=!1){let i=k(`tvVideo_${e}`);t?(i.pause(),Mt.detail[e].play=!1):Mt.detail[e].ended?i.play():(Mt.detail[e].play?i.pause():i.play(),Mt.detail[e].play=!Mt.detail[e].play)},videoData(e=!1){e&&++Mt.xiaoshipin.page;let t={service:"article",action:"alist",mold:3,dynamicid:Mt.xiaoshipin.detailId,page:Mt.xiaoshipin.page,pageSize:10};Mt.$ajax.post({url:"include/ajax.php?",data:t}).then((e=>{if(100==e.data.state){for(let t=0;t<e.data.info.list.length;t++)e.data.info.list[t].play=!1,e.data.info.list[t].ended=!1;Mt.detail=Mt.detail.concat(e.data.info.list)}}))},targetCommentFn(){if(Mt.xiaoshipin.commontb=!0,Mt.xiaoshipin.resetComment){Mt.pageC=1,Mt.xiaoshipin.resetComment=!1,Mt.comment=[];let e=Mt.xiaoshipin.activeIndex,t={service:"member",action:"getComment",type:"article-detail",son:"1",aid:Mt.detail[e].id,page:1,pageSize:10};Mt.commentList(t)}},nextVideoFn(e){let t=e.detail.current;Mt.playOrpause(t>Mt.xiaoshipin.activeIndex?t-1:t+1,!0),Mt.playOrpause(t,!1),Mt.xiaoshipin.activeIndex=t,Mt.xiaoshipin.resetComment=!0},PageScroll(e){if(0===Number(Mt.detail.mold))e.detail.scrollTop>=parseInt(Math.abs(Mt.toutiao.scrollTop))?Mt.toutiao.changeComm&&(Mt.toutiao.changeComm=!1):Mt.toutiao.changeComm||(Mt.toutiao.changeComm=!0),e.detail.scrollTop<parseInt(Math.abs(Mt.toutiao.auserTop))||0==parseInt(Mt.toutiao.auserTop)?Mt.toutiao.topPhoto&&(Mt.toutiao.topPhoto=!1):Mt.toutiao.topPhoto||(Mt.toutiao.topPhoto=!0)},refreshFn(){Mt.reloadFn()},ReachBottom(){let e=Mt.detail;if(0==e.mold||2==e.mold){let t={service:"article",action:"alist",uid:e.member.userid,page:++Mt.pageR,pageSize:5};!Mt.ajaxb&&Mt.loadingb&&Mt.recommendList(t,!0)}}},watch:{globalData:{handler(e,t){Mt.imgVersion=e.imgVersion},deep:!0},info(e,t){""!=e&&(Mt.warnFn(),setTimeout((e=>{Mt.info=""}),2200))}},onShareAppMessage(){return{title:this.detail.title,desc:this.detail.description}},onShareTimeline(){return{title:this.detail.title,imageUrl:this.detail.litpic}}},[["render",function(a,o,r,l,c,d){const h=s,u=A,m=ee(I("mp-html"),Z),g=n,x=H,b=X,y=G,v=U,w=Q,_=N,k=Y,$=q,C=ee(I("sponsor"),ie),F=ee(I("complain"),ae),S=ee(I("l-painter-image"),ce),z=ee(I("l-painter-text"),de),P=ee(I("l-painter-view"),he),J=ee(I("l-painter-qrcode"),ue),K=ee(I("l-painter"),Et),se=ee(I("private_tip"),te),oe=ee(I("popWarn"),ne);return e(),t(h,null,{default:i((()=>[c.detail.id||0!=c.xiaoshipin.detailId?(e(),j(V,{key:1},[T(u,{src:c.detail.litpic||c.detail[0].litpic||c.imgError,id:"firstImage",style:{display:"none"}},null,8,["src"]),0==c.detail.mold&&c.toutiao.app?(e(),t(h,{key:0,class:"a-body app",style:{"background-color":"white","min-height":"100vh","margin-top":"0"}},{default:i((()=>[T(m,{content:c.detail.mbody,adv:c.loadAdv,selectable:!0},null,8,["content","adv"]),T(g,{class:"appBlank"},{default:i((()=>[B(" ")])),_:1})])),_:1})):(e(),t(k,{key:1,"scroll-y":c.scrollYb,style:{height:"calc(100vh - 1rpx)"},"refresher-enabled":!c.postShow&&0==c.detail.mold,"scroll-top":c.scrolldis,"scroll-with-animation":!0,"refresher-background":0==c.detail.mold?"white":"black",onRefresherrefresh:d.refreshFn,onScroll:d.PageScroll,onScrolltolower:d.ReachBottom,class:"Shell"},{default:i((()=>[-1==c.detail.mold?(e(),t(h,{key:0,style:{height:"100%",width:"100%","background-color":"white"}})):0==c.detail.mold?(e(),t(h,{key:1,class:"articleDetail"},{default:i((()=>[c.toutiao.app?f("",!0):(e(),j(V,{key:0},[c.topShare||c.topback?(e(),t(h,{key:0,class:"fixTop",style:p(`padding-top:${c.wh+c.biasTop}px`)},{default:i((()=>[T(h,{class:"f-back"},{default:i((()=>[c.topback?(e(),t(h,{key:0,class:"back",onClick:d.backFn},{default:i((()=>[T(u,{src:`${c.imgurl}detail_back.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])):f("",!0),T(h,{class:"user",style:p(c.toutiao.topPhoto?"display:flex":"display:none"),onClick:o[1]||(o[1]=e=>d.linkTo(c.appBoolean?c.detail.media.url:`${c.pages.mddetail}?id=${c.detail.media.id}`))},{default:i((()=>[T(u,{src:c.detail.media?c.detail.media.ac_photo:c.userError,mode:"aspectFill",onError:o[0]||(o[0]=e=>c.detail.media.ac_photo=c.userError),style:{"border-radius":"50%"}},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.detail.media?c.detail.media.ac_name:c.detail.admin_nickname),1)])),_:1})])),_:1},8,["style"])])),_:1}),c.topShare?(e(),t(h,{key:0,class:"f-more",onClick:o[2]||(o[2]=e=>d.shareFn(1)),style:{height:"auto"}},{default:i((()=>[T(u,{src:`${c.imgurl}dot_more.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0)])),_:1},8,["style"])):f("",!0),T(h,{class:"artContent"},{default:i((()=>[T(h,{class:"a-title"},{default:i((()=>[B(W(c.detail.title),1)])),_:1}),c.detail.media?(e(),t(h,{key:0,class:"a-user",onClick:o[4]||(o[4]=e=>d.linkTo(c.appBoolean?c.detail.media.url:`${c.pages.mddetail}?id=${c.detail.media.id}`))},{default:i((()=>[T(u,{src:c.detail.media?c.detail.media.ac_photo:c.userError,mode:"aspectFill",class:"au-picture",onError:o[3]||(o[3]=e=>c.detail.media.ac_photo=c.userError)},null,8,["src"]),T(h,{class:"au-info"},{default:i((()=>[T(h,{class:"aui-info"},{default:i((()=>[T(h,{class:"title"},{default:i((()=>[B(W(c.detail.media?c.detail.media.ac_name:c.detail.admin_nickname),1)])),_:1}),T(h,{class:"details"},{default:i((()=>[1==c.detail.article_prop?(e(),t(h,{key:0,class:"label"},{default:i((()=>[B("原创")])),_:1})):f("",!0),T(h,{class:"time"},{default:i((()=>[B(W(c.detail.pubdate),1)])),_:1}),T(h,{class:"click"},{default:i((()=>[T(u,{src:`${c.imgurl}detail_read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.detail.click)+"阅读",1)])),_:1})])),_:1})])),_:1})])),_:1}),0==c.detail.media.isfollow?(e(),t(h,{key:0,class:"aui-btn",onClick:E(d.careFn,["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}more_white.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B("关注")])),_:1})])),_:1},8,["onClick"])):(e(),t(h,{key:1,class:"aui-has",onClick:E(d.careFn,["stop"])},{default:i((()=>[B("已关注")])),_:1},8,["onClick"]))])),_:1})])),_:1})):(e(),t(h,{key:1,class:"a-origin"},{default:i((()=>[c.detail.sourceurl?(e(),t(h,{key:0,class:"ao-label",onClick:o[5]||(o[5]=e=>d.linkTo(c.detail.sourceurl))},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.detail.source),1)])),_:1}),T(u,{src:`${c.imgurl}go_left_red.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):(e(),t(h,{key:1,class:"ao-text"},{default:i((()=>[B(W(c.detail.source),1)])),_:1})),T(h,{class:"ao-time"},{default:i((()=>[B(W(c.detail.pubdate),1)])),_:1}),T(h,{class:"ao-click"},{default:i((()=>[T(u,{src:`${c.imgurl}detail_read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.detail.click)+"阅读",1)])),_:1})])),_:1})])),_:1})),T(h,{class:"a-body"},{default:i((()=>[T(m,{content:c.detail.mbody,adv:c.loadAdv,selectable:!0},null,8,["content","adv"])])),_:1}),T(h,{class:"a-from"},{default:i((()=>[c.detail.source?(e(),t(h,{key:0,class:"af-text"},{default:i((()=>[T(g,{class:"source",onClick:o[6]||(o[6]=e=>d.linkTo(c.detail.sourceurl))},{default:i((()=>[B("来源："),T(g,null,{default:i((()=>[B(W(c.detail.source),1)])),_:1})])),_:1}),c.detail.media?(e(),t(g,{key:0,class:"edit"},{default:i((()=>[B("编辑/"+W(c.detail.writer),1)])),_:1})):f("",!0)])),_:1})):f("",!0),c.detail.zhuanti.title?(e(),t(h,{key:1,class:"af-theme",onClick:o[7]||(o[7]=E((e=>d.linkTo(c.appBoolean?c.detail.zhuanti.url:`${c.pages.zt_detail}?id=${c.detail.zhuanti.id}`)),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}flower.png?v=${c.imgVersion}`,mode:"aspectFit",class:"flower"},null,8,["src"]),T(g,{class:"title"},{default:i((()=>[B("专题")])),_:1}),T(g,{class:"text"},{default:i((()=>[B(W(c.detail.zhuanti.title),1)])),_:1}),T(u,{src:`${c.imgurl}go_left_red.png?v=${c.imgVersion}`,mode:"aspectFit",class:"right"},null,8,["src"])])),_:1})):f("",!0)])),_:1}),0==c.config.rewardSwitch&&0==c.detail.reward_switch?(e(),t(h,{key:2,class:"a-sponsor"},{default:i((()=>[T(h,{class:"as-btn",onClick:d.sponsorFn},{default:i((()=>[T(u,{src:`${c.imgurl}diamond.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon"},null,8,["src"]),T(g,null,{default:i((()=>[B("赞赏")])),_:1}),T(u,{src:`${c.imgurl}sponsor_bg.png?v=${c.imgVersion}`,mode:"aspectFill",class:"shadow"},null,8,["src"])])),_:1},8,["onClick"]),T(h,{class:"as-people"},{default:i((()=>[T(h,{class:"list"},{default:i((()=>[(e(!0),j(V,null,M(c.sponsor,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(`z-index:${n};margin-left:-${0==n?0:20}rpx`)},{default:i((()=>[T(u,{src:a.photo||c.userError,mode:"aspectFill",onError:e=>a.photo=c.userError},null,8,["src","onError"])])),_:2},1032,["style"])))),128))])),_:1}),T(h,{class:"text"},{default:i((()=>[B(W(0==c.sponsor.length?"觉得文章不错就支持一下小编吧":1==c.sponsor.length?c.sponsor[0].username+"已赞赏支持":c.sponsor[0].username+"等"+c.detail.rewardcount+"人已赞赏支持"),1)])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1}),T(h,{class:"commentArea"},{default:i((()=>[T(h,null,{default:i((()=>[T(h,{class:"c-title",id:"c-title"},{default:i((()=>[B("评论 "),T(g,null,{default:i((()=>[B(W(c.comment.length),1)])),_:1})])),_:1}),T(h,{onClick:o[8]||(o[8]=e=>c.toutiao.commentPopb=!0)},{default:i((()=>[T(x,{type:"text",placeholder:c.appConfig.cfg_commentPlaceholder,disabled:!0,"placeholder-style":"color:#B3B3B3;",class:"c-input"},null,8,["placeholder"])])),_:1})])),_:1}),T(h,{class:"c-comment"},{default:i((()=>[(e(!0),j(V,null,M(c.comment,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(n!=c.comment.length-1||c.loadComment?"":"border:0"),onClick:e=>{c.recallb=!0,c.recall.name=a.user.nickname,c.recall.id=a.id}},{default:i((()=>[T(u,{src:a.user.photo||c.userError,mode:"aspectFill",class:"cc-photo",onError:e=>a.user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"cc-name"},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(a.user.nickname),1)])),_:2},1024),0==a.zan_has?(e(),t(h,{key:0,class:"zan",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zan.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])):(e(),t(h,{key:1,class:"zan has",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zaned.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])),c.zanItem==a?(e(),t(u,{key:2,src:`${c.imgurl}zan_add.png?v=${c.imgVersion}`,mode:"aspectFit",class:"add_zan"},null,8,["src"])):f("",!0)])),_:2},1024),T(h,{class:"cc-content"},{default:i((()=>[B(W(a.content),1)])),_:2},1024),a.lower.count>0?(e(),t(h,{key:0,class:"cc-more"},{default:i((()=>[(e(!0),j(V,null,M(a.lower.list.slice(0,3),((n,s)=>(e(),t(h,{key:s,style:{"padding-top":"22rpx"},onClick:E((e=>{c.recallb=!0,c.recall.name=n.user.nickname,c.recall.id=n.id}),["stop"])},{default:i((()=>[n.reply_to_user.userid==a.user.userid||n.reply_to_user.userid==n.user.userid?(e(),t(h,{key:0},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(n.user.nickname),1)])),_:2},1024),T(g,{class:"text"},{default:i((()=>[B("："+W(n.content),1)])),_:2},1024)])),_:2},1024)):(e(),t(h,{key:1},{default:i((()=>[T(g,null,{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(n.user.nickname),1)])),_:2},1024),B(" 回复 "),T(g,{class:"name"},{default:i((()=>[B(W(n.reply_to_user.nickname),1)])),_:2},1024)])),_:2},1024),T(g,{class:"text"},{default:i((()=>[B("："+W(n.content),1)])),_:2},1024)])),_:2},1024))])),_:2},1032,["onClick"])))),128)),a.lower.count>3?(e(),t(h,{key:0,class:"checkAll",onClick:E((e=>d.recallPopFn(n)),["stop"])},{default:i((()=>[B(" 全部"+W(a.lower.count)+"条回复>",1)])),_:2},1032,["onClick"])):f("",!0)])),_:2},1024)):f("",!0),T(h,{class:"cc-time"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(a.ftime)+" "+W(a.iphome?" · "+a.iphome:""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1}),c.loadComment?(e(),t(h,{key:0,class:"c-more",onClick:d.moreCommonFn},{default:i((()=>[B(" 加载更多评论 ")])),_:1},8,["onClick"])):f("",!0)])),_:1}),c.recommend.length>0?(e(),t(h,{key:1,class:"recommend"},{default:i((()=>[T(h,{class:"r-title"},{default:i((()=>[B("为你推荐")])),_:1}),(e(!0),j(V,null,M(c.recommend,((a,n)=>(e(),j(V,{key:n},[1==a.mold?(e(),t(h,{key:0,class:"simple_2",onClick:e=>d.linkTo(c.appBoolean?a.url:`${c.pages.detail}?id=${a.id}`)},{default:i((()=>[T(b,{class:"title",nodes:a.title},null,8,["nodes"]),T(h,{class:"picture"},{default:i((()=>[(e(!0),j(V,null,M(a.group_img,((i,a)=>(e(),t(u,{key:a,src:i.path||c.imgError,mode:"aspectFill",onError:e=>i.path=c.imgError},null,8,["src","onError"])))),128))])),_:2},1024),T(h,{class:"art_info"},{default:i((()=>[T(h,{class:"nickname"},{default:i((()=>[B(W(a.source)+" · "+W(a.pubdate),1)])),_:2},1024),T(h,{class:"browser"},{default:i((()=>[T(u,{src:`${c.imgurl}read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):0==a.mold&&1==a.typeset||2==a.mold||3==a.mold?(e(),t(h,{key:1,class:"simple_3",onClick:e=>d.linkTo(c.appBoolean?a.url:`${c.pages.detail}?id=${a.id}`)},{default:i((()=>[T(b,{class:"title",nodes:a.title},null,8,["nodes"]),0==a.mold?(e(),t(u,{key:0,src:a.litpic||c.imgError,mode:"aspectFill",class:"picture",onError:e=>a.litpic=c.imgError},null,8,["src","onError"])):f("",!0),2==a.mold||3==a.mold?(e(),t(y,{key:1,src:a.videourl,class:"video",objectFit:"contain",style:{"object-fit":"contain"},"enable-progress-gesture":!1},null,8,["src"])):f("",!0),T(h,{class:"art_info"},{default:i((()=>[T(h,{class:"nickname"},{default:i((()=>[B(W(a.source)+" · "+W(a.pubdate),1)])),_:2},1024),T(h,{class:"browser"},{default:i((()=>[T(u,{src:`${c.imgurl}read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):3!=a.mold?(e(),t(h,{key:2,class:"simple_1",onClick:e=>d.linkTo(c.appBoolean?a.url:`${c.pages.detail}?id=${a.id}`)},{default:i((()=>[a.litpic?(e(),j(V,{key:0},[T(h,{class:"left"},{default:i((()=>[T(b,{class:"title",nodes:a.title},null,8,["nodes"]),T(h,{class:"art_info"},{default:i((()=>[T(h,{class:"nickname"},{default:i((()=>[B(W(a.source)+" · "+W(a.pubdate),1)])),_:2},1024),T(h,{class:"browser"},{default:i((()=>[T(u,{src:`${c.imgurl}read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),T(h,{class:"right"},{default:i((()=>[T(u,{src:a.litpic||c.imgError,mode:"aspectFill",onError:e=>a.litpic=c.imgError},null,8,["src","onError"])])),_:2},1024)],64)):(e(),t(h,{key:1,class:"left"},{default:i((()=>[T(b,{class:"title",nodes:a.title},null,8,["nodes"]),T(h,{class:"art_info",style:{"margin-top":"40rpx"}},{default:i((()=>[T(h,{class:"nickname"},{default:i((()=>[B(W(a.source)+" · "+W(a.pubdate),1)])),_:2},1024),T(h,{class:"browser"},{default:i((()=>[T(u,{src:`${c.imgurl}read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.click_),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1032,["onClick"])):f("",!0)],64)))),128)),T(h,{class:"loadingText"},{default:i((()=>[B(W(c.loadingb?"加载中...":"没有更多了~"),1)])),_:1})])),_:1})):f("",!0),T(h,{class:"fixbottom",style:p("position:"+("mp-weixin"==c.platForm?"sticky":"fixed"))},{default:i((()=>[T(h,{class:"f-comment",onClick:o[9]||(o[9]=e=>c.toutiao.commentPopb=!0)},{default:i((()=>[T(u,{src:`${c.imgurl}edit.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(x,{type:"text",placeholder:c.appConfig.cfg_commentPlaceholder,"always-embed":!0,disabled:!0,"adjust-position":!0,"cursor-spacing":"30","placeholder-style":"color:#666666"},null,8,["placeholder"])])),_:1}),c.toutiao.changeComm?(e(),t(h,{key:0,class:"f-scroll",onClick:o[10]||(o[10]=e=>d.scrollTargetFn(c.toutiao.scrollTop))},{default:i((()=>[T(u,{src:`${c.imgurl}comment.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),c.detail.common?(e(),t(h,{key:0},{default:i((()=>[B(W(c.detail.common),1)])),_:1})):f("",!0)])),_:1})):(e(),t(h,{key:1,class:"f-text",onClick:o[11]||(o[11]=e=>d.scrollTargetFn(0))},{default:i((()=>[T(u,{src:`${c.imgurl}text.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(h,null,{default:i((()=>[B("正文")])),_:1})])),_:1})),T(h,{class:"f-zan",onClick:E(d.zanArticleFn,["stop"])},{default:i((()=>[0==c.detail.zan?(e(),t(u,{key:0,src:`${c.imgurl}zan_big.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])):(e(),t(u,{key:1,src:`${c.imgurl}zaned_big.png?v=${c.imgVersion}`,mode:"aspectFill",class:"zaned"},null,8,["src"])),c.detail.zannum?(e(),t(h,{key:2,class:"number"},{default:i((()=>[B(W(c.detail.zannum),1)])),_:1})):f("",!0),O(T(h,{class:"animation"},{default:i((()=>[T(u,{src:`${c.imgurl}img_news_detail_up_icon1.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon1"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon2.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon2"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon3.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon3"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon4.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon4"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon5.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon5"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon6.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon6"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon7.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon7"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon8.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon8"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon9.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon9"},null,8,["src"]),T(u,{src:`${c.imgurl}img_news_detail_up_icon10.png?v=${c.imgVersion}`,mode:"aspectFit",class:"icon10"},null,8,["src"])])),_:1},512),[[D,1==c.detail.zan&&c.zanItem==c.detail]])])),_:1},8,["onClick"]),"mp-weixin"==c.platForm?(e(),t(v,{key:2,"open-type":"share",class:"f-share","hover-class":"none"},{default:i((()=>[T(u,{src:`${c.imgurl}share.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0),T(u,{src:`${c.imgurl}dot_more.png?v=${c.imgVersion}`,mode:"aspectFit",class:"f-more",onClick:o[12]||(o[12]=E((e=>d.shareFn(1)),["stop"]))},null,8,["src"])])),_:1},8,["style"])],64))])),_:1})):1==c.detail.mold?(e(),t(h,{key:2,class:"tujiDetail",onClick:o[35]||(o[35]=e=>{c.tuji.commonb=!1,c.tuji.fullb=!c.tuji.fullb})},{default:i((()=>[T(h,{class:"fixTop",style:p(`padding-top:${c.wh+c.biasTop}px;justify-content:${c.topFlex}`)},{default:i((()=>[c.topback?(e(),t(h,{key:0,class:"f-back",onClick:E(d.backFn,["stop"]),style:{height:"50rpx"}},{default:i((()=>[T(u,{src:`${c.imgurl}back_white.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])):f("",!0),T(h,{class:"f-user",onClick:o[14]||(o[14]=e=>c.detail.media?d.linkTo(c.appBoolean?c.detail.media.url:`${c.pages.mddetail}?id=${c.detail.media.id}`):"")},{default:i((()=>[T(h,{class:"fu-photo"},{default:i((()=>[T(u,{src:c.detail.media?c.detail.media.ac_photo:c.userError,mode:"aspectFill",onError:o[13]||(o[13]=e=>c.detail.media.ac_photo=c.userError)},null,8,["src"])])),_:1}),T(g,{class:"fu-name"},{default:i((()=>[B(W(c.detail.media?c.detail.media.ac_name:c.detail.admin_nickname),1)])),_:1}),c.detail.media?(e(),t(h,{key:0,class:"fu-btn",onClick:E(d.careFn,["stop"])},{default:i((()=>[0==c.detail.media.isfollow?(e(),t(h,{key:0,class:"have"},{default:i((()=>[T(u,{src:`${c.imgurl}more_white.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B("关注")])),_:1})])),_:1})):(e(),t(h,{key:1,class:"has"},{default:i((()=>[B("已关注")])),_:1}))])),_:1},8,["onClick"])):f("",!0)])),_:1}),c.topShare?(e(),t(h,{key:1,class:"f-more",onClick:o[15]||(o[15]=E((e=>d.shareFn(1)),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}dot_more_white.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0)])),_:1},8,["style"]),T(_,{circular:!0,duration:300,class:"picture",onChange:d.checkFoldFn},{default:i((()=>[(e(!0),j(V,null,M(c.detail.imglist,((a,n)=>(e(),t(w,{key:n,class:"item"},{default:i((()=>[T(u,{src:a.path||c.imgError,mode:"aspectFit",onError:e=>a.path=c.imgError},null,8,["src","onError"])])),_:2},1024)))),128))])),_:1},8,["onChange"]),T(h,{class:"intro",style:p(`transform: translateY(${c.tuji.fullb?"100%":"0%"});`),onClick:o[24]||(o[24]=E((()=>{}),["stop"]))},{default:i((()=>[T(h,{class:"i-origin"},{default:i((()=>[1==c.detail.prop?(e(),t(h,{key:0,class:"io-label"},{default:i((()=>[B("原创")])),_:1})):(e(),t(h,{key:1,class:"io-source",onClick:o[16]||(o[16]=e=>d.linkTo(c.detail.sourceurl))},{default:i((()=>[B("来源："+W(c.detail.source),1)])),_:1})),T(h,{class:"io-click"},{default:i((()=>[T(u,{src:`${c.imgurl}detail_read.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.detail.click),1)])),_:1})])),_:1})])),_:1}),T(h,{class:"i-title"},{default:i((()=>[T(h,{class:"it-title"},{default:i((()=>[B(W(c.detail.title),1)])),_:1}),T(h,{class:"it-index"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.tuji.currIndex+1),1)])),_:1}),B("/"+W(c.detail.imglist.length),1)])),_:1})])),_:1}),c.detail.imglist[c.tuji.currIndex].info?(e(),t(h,{key:0,class:"i-text"},{default:i((()=>[c.tuji.extendb&&!c.tuji.fold?(e(),t(h,{key:0,class:"it-unfold",onClick:E(d.extendFn,["stop"])},{default:i((()=>[T(h,null,{default:i((()=>[B("展开")])),_:1}),T(u,{src:`${c.imgurl}down_gray.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])):f("",!0),c.tuji.fold?(e(),t(h,{key:2,class:"it-text",style:{"-webkit-line-clamp":"9999",overflow:"auto","max-height":"666rpx"}},{default:i((()=>[T(h,{id:"intro"},{default:i((()=>[B(W(c.detail.imglist[c.tuji.currIndex].info)+" ",1),T(h,{class:"fold",onClick:E(d.extendFn,["stop"])},{default:i((()=>[T(g,null,{default:i((()=>[B("收起")])),_:1}),T(u,{src:`${c.imgurl}down_gray.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])])),_:1})])),_:1})):(e(),t(h,{key:1,class:"it-text"},{default:i((()=>[c.tuji.extendb?(e(),t(h,{key:0,class:"dot"},{default:i((()=>[B("...")])),_:1})):f("",!0),c.tuji.extendb?(e(),t(h,{key:1,class:"blank"})):f("",!0),T(g,{id:`intro_${c.tuji.currIndex}`},{default:i((()=>[B(W(c.detail.imglist[c.tuji.currIndex].info),1)])),_:1},8,["id"])])),_:1}))])),_:1})):f("",!0),T(h,{class:L(["i-bottm",{comm:c.tuji.commonb}]),onClick:o[22]||(o[22]=E((()=>{}),["stop"]))},{default:i((()=>[T(h,{class:"ib-input"},{default:i((()=>[T(x,{type:"text",placeholder:c.appConfig.cfg_commentPlaceholder,"placeholder-style":"color:#999999;",modelValue:c.tuji.commentText_1,"onUpdate:modelValue":o[17]||(o[17]=e=>c.tuji.commentText_1=e),"always-embed":!0,"adjust-position":!0,"cursor-spacing":"30",onConfirm:o[18]||(o[18]=e=>d.commentFn(c.tuji.commentText_1)),style:p(c.tuji.commonb?"color:black":"")},null,8,["placeholder","modelValue","style"]),T(u,{src:`${c.imgurl}edit.png?v=${c.imgVersion}`,mode:"aspectFit",class:"edit"},null,8,["src"]),0==c.config.rewardSwitch&&0==c.detail.reward_switch?(e(),t(u,{key:0,src:`${c.imgurl}gift.png?v=${c.imgVersion}`,mode:"aspectFit",class:"gift",onClick:E(d.sponsorFn,["stop"])},null,8,["src","onClick"])):f("",!0)])),_:1}),T(h,{class:"ib-comment",onClick:o[19]||(o[19]=E((e=>c.tuji.commonb=!0),["stop"]))},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.detail.common),1)])),_:1}),T(u,{src:`${c.imgurl}comment.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),T(h,{class:"ib-zan",onClick:E(d.zanArticleFn,["stop"])},{default:i((()=>[O(T(g,null,{default:i((()=>[B(W(c.detail.zannum),1)])),_:1},512),[[D,0!=c.detail.zannum]]),O(T(u,{src:`${c.imgurl}zan_big.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),[[D,0==c.detail.zan]]),O(T(u,{src:`${c.imgurl}zaned_big.png?v=${c.imgVersion}`,mode:"aspectFit",class:L([{had:""!=c.zanItem}]),style:{filter:"none"}},null,8,["src","class"]),[[D,1==c.detail.zan]])])),_:1},8,["onClick"]),"mp-weixin"==c.platForm?(e(),j(V,{key:0},[T(v,{class:"ib-share","open-type":"share","hover-class":"none"},{default:i((()=>[T(u,{src:`${c.imgurl}share.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),T(h,{class:"ib-more",onClick:o[20]||(o[20]=e=>d.shareFn(1))},{default:i((()=>[T(u,{src:`${c.imgurl}dot_more.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})],64)):(e(),t(h,{key:1,class:"ib-more",onClick:o[21]||(o[21]=e=>d.shareFn(1))},{default:i((()=>[T(u,{src:`${c.imgurl}share.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}))])),_:1},8,["class"]),T(h,{class:"comment",style:p(c.tuji.commonb?"transform:translateY(0)":""),onClick:o[23]||(o[23]=E((()=>{}),["stop"]))},{default:i((()=>[T(h,{class:"c-title"},{default:i((()=>[B("评论")])),_:1}),T(h,{class:"c-all"},{default:i((()=>[B(" 全部评论 · "+W(c.detail.common),1)])),_:1}),T(h,{class:"c-comment"},{default:i((()=>[T(k,{"scroll-y":!0,style:{height:"600rpx"}},{default:i((()=>[(e(!0),j(V,null,M(c.comment,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(n!=c.comment.length-1||c.loadComment?"":"border:0"),onClick:E((e=>{c.recallb=!0,c.recall.name=a.user.nickname,c.recall.id=a.id}),["stop"])},{default:i((()=>[T(u,{src:a.user.photo||c.userError,mode:"aspectFill",class:"cc-photo",onError:e=>a.user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"cc-name"},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(a.user.nickname),1)])),_:2},1024),0==a.zan_has?(e(),t(h,{key:0,class:"zan",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zan.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])):(e(),t(h,{key:1,class:"zan has",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zaned.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])),c.zanItem==a?(e(),t(u,{key:2,src:`${c.imgurl}zan_add.png?v=${c.imgVersion}`,mode:"aspectFit",class:"add_zan"},null,8,["src"])):f("",!0)])),_:2},1024),T(h,{class:"cc-content"},{default:i((()=>[B(W(a.content),1)])),_:2},1024),a.lower.count>0?(e(),t(h,{key:0,class:"cc-more"},{default:i((()=>[(e(!0),j(V,null,M(a.lower.list.slice(0,3),((n,s)=>(e(),t(h,{key:s,style:{"padding-top":"22rpx"},onClick:E((e=>{c.recallb=!0,c.recall.name=n.user.nickname,c.recall.id=n.id}),["stop"])},{default:i((()=>[n.reply_to_user.userid==a.user.userid||n.reply_to_user.userid==n.user.userid?(e(),t(h,{key:0},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(n.user.nickname),1)])),_:2},1024),T(g,{class:"text"},{default:i((()=>[B("："+W(n.content),1)])),_:2},1024)])),_:2},1024)):(e(),t(h,{key:1},{default:i((()=>[T(g,null,{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(n.user.nickname),1)])),_:2},1024),B(" 回复 "),T(g,{class:"name"},{default:i((()=>[B(W(n.reply_to_user.nickname),1)])),_:2},1024)])),_:2},1024),T(g,{class:"text"},{default:i((()=>[B("："+W(n.content),1)])),_:2},1024)])),_:2},1024))])),_:2},1032,["onClick"])))),128)),a.lower.count>3?(e(),t(h,{key:0,class:"checkAll",onClick:E((e=>d.recallPopFn(n)),["stop"])},{default:i((()=>[B(" 全部"+W(a.lower.count)+"条回复>",1)])),_:2},1032,["onClick"])):f("",!0)])),_:2},1024)):f("",!0),T(h,{class:"cc-time"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(a.ftime)+" "+W(a.iphome?" · "+a.iphome:""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["style"])])),_:1},8,["style"]),T(h,{class:"full",style:p(`transform: translateY(${c.tuji.fullb?"0%":"100%"});`)},{default:i((()=>[T(h,{class:"i-title"},{default:i((()=>[T(h,{class:"it-title"},{default:i((()=>[B(W(c.detail.title),1)])),_:1}),T(h,{class:"it-index"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.tuji.currIndex+1),1)])),_:1}),B("/"+W(c.detail.imglist.length),1)])),_:1})])),_:1})])),_:1},8,["style"]),c.recall.index>-1?(e(),t(h,{key:0,class:"recall",onClick:o[34]||(o[34]=E((e=>d.recallPopFn()),["stop"]))},{default:i((()=>[T(h,{class:"r-content",onClick:o[33]||(o[33]=E((()=>{}),["stop"])),style:p(`transform:translateY(${c.recall.recallb?"0%":"100%"})`)},{default:i((()=>[T(h,{class:"rc-title"},{default:i((()=>[B("回复")])),_:1}),T(h,{class:"item",style:{border:"0"},onClick:o[28]||(o[28]=e=>{c.recallb=!0,c.recall.name=c.comment[c.recall.index].user.nickname,c.recall.id=c.comment[c.recall.index].id})},{default:i((()=>[T(u,{src:c.comment[c.recall.index].user.photo||c.userError,mode:"aspectFill",class:"rc-photo",onError:o[25]||(o[25]=e=>c.comment[c.recall.index].user.photo=c.userError)},null,8,["src"]),T(h,{class:"rc-name"},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(c.comment[c.recall.index].user.nickname),1)])),_:1}),0==c.comment[c.recall.index].zan_has?(e(),t(h,{key:0,class:"zan",onClick:o[26]||(o[26]=E((e=>d.zanCommentFn(c.comment[c.recall.index])),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}zan.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].zan||""),1)])),_:1})])),_:1})):(e(),t(h,{key:1,class:"zan has",onClick:o[27]||(o[27]=E((e=>d.zanCommentFn(c.comment[c.recall.index])),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}zaned.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].zan),1)])),_:1})])),_:1})),c.zanItem==c.comment[c.recall.index]?(e(),t(u,{key:2,src:`${c.imgurl}zan_add.png?v=${c.imgVersion}`,mode:"aspectFit",class:"add_zan"},null,8,["src"])):f("",!0)])),_:1}),T(h,{class:"rc-content"},{default:i((()=>[B(W(c.comment[c.recall.index].content),1)])),_:1}),T(h,{class:"rc-time"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].ftime)+" "+W(c.comment[c.recall.index].iphome?" · "+c.comment[c.recall.index].iphome:""),1)])),_:1})])),_:1})])),_:1}),T(h,{class:"rc-my"},{default:i((()=>[T(u,{src:c.userInfo.photo||c.userError,mode:"aspectFit",onError:o[29]||(o[29]=e=>c.userInfo.photo=c.userError)},null,8,["src"]),T(x,{type:"text",placeholder:c.appConfig.cfg_commentPlaceholder,"placeholder-style":"color:#B3B3B3",modelValue:c.recall.textMy,"onUpdate:modelValue":o[30]||(o[30]=e=>c.recall.textMy=e),onConfirm:o[31]||(o[31]=e=>d.recallFn(!1,c.recall.textMy)),onFocus:o[32]||(o[32]=e=>c.recall.id=c.recall.popId)},null,8,["placeholder","modelValue"])])),_:1}),T(k,{"scroll-y":!0,style:{height:"700rpx"}},{default:i((()=>[T(h,{class:"rc-all"},{default:i((()=>[B("全部回复 · "+W(c.comment[c.recall.index].lower.list.length),1)])),_:1}),(e(!0),j(V,null,M(c.comment[c.recall.index].lower.list,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(n==c.comment[c.recall.index].lower.list?"border:0":""),onClick:e=>{c.recallb=!0,c.recall.name=a.user.nickname,c.recall.id=a.id}},{default:i((()=>[T(u,{src:a.user.photo||c.userError,mode:"aspectFill",class:"rc-photo",onError:e=>a.user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"rc-name"},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(a.user.nickname),1)])),_:2},1024),0==a.zan_has?(e(),t(h,{key:0,class:"zan",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zan.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])):(e(),t(h,{key:1,class:"zan has",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zaned.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])),c.zanItem==a?(e(),t(u,{key:2,src:`${c.imgurl}zan_add.png?v=${c.imgVersion}`,mode:"aspectFit",class:"add_zan"},null,8,["src"])):f("",!0)])),_:2},1024),T(h,{class:"rc-content"},{default:i((()=>[a.reply_to_user.userid!=c.comment[c.recall.index].user.userid&&a.reply_to_user.userid!=a.user.userid?(e(),j(V,{key:0},[B(" 回复"),T(g,null,{default:i((()=>[B(W(a.reply_to_user.nickname),1)])),_:2},1024),B(":")],64)):f("",!0),B(" "+W(a.content),1)])),_:2},1024),T(h,{class:"rc-time"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(a.ftime)+" "+W(a.iphome?" · "+a.iphome:""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):f("",!0)])),_:1})):c.xiaoshipin.detailId>0?(e(),t(h,{key:3,class:"xiaoshipinDetail"},{default:i((()=>[c.topShare||c.topback?(e(),t(h,{key:0,class:"fixTop",style:p(`padding-top:${c.wh+c.biasTop}px`)},{default:i((()=>[c.topback?(e(),t(h,{key:0,class:"f-close",onClick:E(d.backFn,["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}back_btn.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1},8,["onClick"])):f("",!0),c.topShare?(e(),t(h,{key:1,class:"f-share",onClick:o[36]||(o[36]=E((e=>d.shareFn(1)),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}dot_more_white.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0)])),_:1},8,["style"])):f("",!0),T(_,{vertical:!0,style:{height:"100vh"},onChange:d.nextVideoFn},{default:i((()=>[(e(!0),j(V,null,M(c.detail,((a,n)=>(e(),t(w,{key:n},{default:i((()=>[T(y,{src:a.video,"show-fullscreen-btn":!1,controls:a.play,objectFit:"contain",style:{"object-fit":"contain"},"show-center-play-btn":!1,poster:a.litpic,id:`tvVideo_${n}`,onEnded:e=>a.ended=!0},null,8,["src","controls","poster","id","onEnded"]),0==a.play?(e(),t(h,{key:0,class:"pauseMask",onClick:e=>d.playOrpause(n)},{default:i((()=>[T(u,{src:`${c.imgurl}pause2.png?v=${c.imgVersion}`,mode:"aspectFit",class:"centerPause"},null,8,["src"])])),_:2},1032,["onClick"])):f("",!0),T(h,{class:"userInfo"},{default:i((()=>[T(h,{class:"u-photo",onClick:e=>a.media?d.linkTo(c.appBoolean?c.detail.media.url:`${c.pages.mddetail}?id=${a.media.id}`):""},{default:i((()=>[T(h,{class:"photo"},{default:i((()=>[T(u,{src:a.media?a.media.ac_photo:c.userError,mode:"aspectFill",onError:e=>a.media.ac_photo=c.userError},null,8,["src","onError"])])),_:2},1024),c.xiaoshipin.careSucess?(e(),t(h,{key:0,class:"careSucess"},{default:i((()=>[B("关注成功")])),_:1})):f("",!0),a.media&&!a.media.isfollow?(e(),t(h,{key:1,class:"btn",onClick:E((e=>d.careFn(n)),["stop"])},{default:i((()=>[0==a.media.isfollow?(e(),t(u,{key:0,src:`${c.imgurl}care_btn.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])):(e(),t(u,{key:1,src:`${c.imgurl}care_btn.png?v=${c.imgVersion}`,mode:"aspectFit",class:"has"},null,8,["src"]))])),_:2},1032,["onClick"])):f("",!0)])),_:2},1032,["onClick"]),T(h,{class:"u-zan",onClick:E((e=>d.zanArticleFn(n)),["stop"])},{default:i((()=>[T(h,{class:"zan"},{default:i((()=>[T(u,{src:`${c.imgurl}${a.zan?"up_icon1":"up_icon"}.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),a.zan&&c.zanItem==a?(e(),t(u,{key:0,src:`${c.imgurl}click_icon.png?v=${c.imgVersion}`,mode:"aspectFit",class:"has"},null,8,["src"])):f("",!0)])),_:2},1024),T(g,null,{default:i((()=>[B(W(a.zannum),1)])),_:2},1024)])),_:2},1032,["onClick"]),T(h,{class:"u-comment",onClick:o[37]||(o[37]=E((e=>d.targetCommentFn()),["stop"]))},{default:i((()=>[T(h,{class:"comment"},{default:i((()=>[T(u,{src:`${c.imgurl}common_icon.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),T(g,null,{default:i((()=>[B(W(a.common),1)])),_:2},1024)])),_:2},1024),"mp-weixin"==c.platForm?(e(),t(v,{key:0,class:"u-share","open-type":"share","hover-class":"none"},{default:i((()=>[T(h,{class:"share"},{default:i((()=>[T(u,{src:`${c.imgurl}share_sv.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),T(g,null,{default:i((()=>[B("分享")])),_:1})])),_:1})):f("",!0),0==c.config.rewardSwitch&&0==a.reward_switch?(e(),t(h,{key:1,class:"u-sponsor",onClick:E(d.sponsorFn,["stop"])},{default:i((()=>[T(h,{class:"sponsor"},{default:i((()=>[T(u,{src:`${c.imgurl}gift.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1}),T(g,null,{default:i((()=>[B("打赏")])),_:1})])),_:1},8,["onClick"])):f("",!0),T(h,{class:"u-more",onClick:o[38]||(o[38]=E((e=>d.shareFn(1)),["stop"]))},{default:i((()=>[T(h,{class:"more"},{default:i((()=>[T(u,{src:`${c.imgurl}dot_more_white.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})])),_:1})])),_:2},1024),T(h,{class:"videoInfo"},{default:i((()=>[T(h,{class:"v-name"},{default:i((()=>[B("@"+W(a.media?a.media.ac_name:a.admin_nickname),1)])),_:2},1024),T(h,{class:"v-intro"},{default:i((()=>[B(W(a.title),1)])),_:2},1024),a.zhuanti?(e(),t(h,{key:0,class:"af-theme",onClick:E((e=>d.linkTo(c.appBoolean?a.zhuanti.url:`${c.pages.zt_detail}?id=${a.zhuanti.id}`)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}flower.png?v=${c.imgVersion}`,mode:"aspectFit",class:"flower"},null,8,["src"]),T(g,{class:"title"},{default:i((()=>[B("专题")])),_:1}),T(g,{class:"text"},{default:i((()=>[B(W(a.zhuanti.title),1)])),_:2},1024),T(u,{src:`${c.imgurl}go_left_red.png?v=${c.imgVersion}`,mode:"aspectFit",class:"right"},null,8,["src"])])),_:2},1032,["onClick"])):f("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onChange"]),c.xiaoshipin.commontb?(e(),t(h,{key:1,class:"mask",onClick:o[39]||(o[39]=e=>c.xiaoshipin.commontb=!1)})):f("",!0),T(h,{class:"fixedComment",style:p(c.xiaoshipin.commontb?"transform:translateY(0)":"")},{default:i((()=>[T(h,{class:"fc-title"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.detail[c.xiaoshipin.activeIndex].common)+"条评论",1)])),_:1}),T(u,{src:`${c.imgurl}close_btn1.png?v=${c.imgVersion}`,mode:"aspectFit",onClick:o[40]||(o[40]=e=>c.xiaoshipin.commontb=!1)},null,8,["src"])])),_:1}),T(k,{"scroll-y":!0,style:{height:"600rpx",padding:"0rpx 30rpx","box-sizing":"border-box"}},{default:i((()=>[(e(!0),j(V,null,M(c.comment,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(n!=c.comment.length-1||c.loadComment?"":"border:0"),onClick:e=>{c.recallb=!0,c.recall.name=a.user.nickname,c.recall.id=a.id}},{default:i((()=>[T(u,{src:a.user.photo||c.userError,mode:"aspectFill",class:"fc-photo",onError:e=>a.user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"fc-content"},{default:i((()=>[T(h,{class:"fc-detail"},{default:i((()=>[T(h,{class:"fcd-name"},{default:i((()=>[B(W(a.user.nickname),1)])),_:2},1024),T(h,{class:"fcd-text"},{default:i((()=>[B(W(a.content),1)])),_:2},1024),T(h,{class:"fcd-time"},{default:i((()=>[B(W(a.ftime)+" "+W(a.iphome?" · "+a.iphome:""),1)])),_:2},1024)])),_:2},1024),T(h,{class:"fc-zan",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}${a.zan_has?"zan_0":"zan_no"}.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024),a.lower.count>0?(e(),t(h,{key:0,class:"fc-recall"},{default:i((()=>[T(h,{class:"content",onClick:E((e=>{c.recallb=!0,c.recall.name=a.lower.list[0].user.nickname,c.recall.id=a.lower.list[0].id}),["stop"])},{default:i((()=>[T(u,{src:a.lower.list[0].user.photo||c.userError,mode:"aspectFill",class:"photo",onError:e=>a.lower.list[0].user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"fc-content"},{default:i((()=>[T(h,{class:"fc-detail"},{default:i((()=>[T(h,{class:"fcd-name"},{default:i((()=>[B(W(a.lower.list[0].user.nickname),1)])),_:2},1024),T(h,{class:"fcd-text"},{default:i((()=>[B(W(a.lower.list[0].content),1)])),_:2},1024),T(h,{class:"fcd-time"},{default:i((()=>[B(W(a.lower.list[0].ftime)+" "+W(a.lower.list[0].iphome?" · "+a.lower.list[0].iphome:""),1)])),_:2},1024)])),_:2},1024),T(h,{class:"fc-zan",onClick:E((e=>d.zanCommentFn(a.lower.list[0])),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}${a.lower.list[0].zan_has?"zan_0":"zan_no"}.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.lower.list[0].zan),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"]),a.lower.count>1?(e(),t(h,{key:0,class:"all",onClick:E((e=>{c.xiaoshipin.recallb=!0,c.recall.index=n,c.recall.id=a.id,c.xiaoshipin.recallId=a.id}),["stop"])},{default:i((()=>[B(" 查看"+W(a.lower.count)+"条回复",1)])),_:2},1032,["onClick"])):f("",!0)])),_:2},1024)):f("",!0)])),_:2},1032,["style","onClick"])))),128))])),_:1}),T(h,{class:"fc-input"},{default:i((()=>[T(x,{type:"text",placeholder:c.appConfig.cfg_commentPlaceholder,modelValue:c.xiaoshipin.commentText,"onUpdate:modelValue":o[41]||(o[41]=e=>c.xiaoshipin.commentText=e),onConfirm:o[42]||(o[42]=e=>d.commentFn(c.xiaoshipin.commentText))},null,8,["placeholder","modelValue"]),T(h,{class:"btn",onClick:o[43]||(o[43]=e=>d.commentFn(c.xiaoshipin.commentText))},{default:i((()=>[B("发送")])),_:1})])),_:1})])),_:1},8,["style"]),T(h,{class:"fixedComment",style:p(c.xiaoshipin.recallb?"transform:translateY(0)":"")},{default:i((()=>[c.recall.index>-1?(e(),j(V,{key:0},[T(h,{class:"fc-title"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].lower.count)+"条回复",1)])),_:1}),T(u,{src:`${c.imgurl}close_btn1.png?v=${c.imgVersion}`,mode:"aspectFit",onClick:o[44]||(o[44]=e=>{c.xiaoshipin.recallb=!1,c.recall.index=-1,c.recall.id="",c.xiaoshipin.recallId=-1})},null,8,["src"])])),_:1}),T(k,{"scroll-y":!0,style:{height:"600rpx",padding:"0rpx 30rpx","box-sizing":"border-box"}},{default:i((()=>[(e(!0),j(V,null,M(c.comment[c.recall.index].lower.list,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(n!=c.comment.length-1||c.loadComment?"":"border:0"),onClick:e=>{c.recallb=!0,c.recall.name=a.user.nickname,c.recall.id=a.id}},{default:i((()=>[T(u,{src:a.user.photo||c.userError,mode:"aspectFill",class:"fc-photo",onError:e=>a.user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"fc-content"},{default:i((()=>[T(h,{class:"fc-detail"},{default:i((()=>[T(h,{class:"fcd-name"},{default:i((()=>[B(W(a.user.nickname),1)])),_:2},1024),T(h,{class:"fcd-text"},{default:i((()=>[a.reply_to_user.userid!=c.comment[c.recall.index].user.userid&&a.reply_to_user.userid!=a.user.userid?(e(),j(V,{key:0},[B(" 回复"),T(g,null,{default:i((()=>[B(W(a.reply_to_user.nickname),1)])),_:2},1024),B(":")],64)):f("",!0),B(" "+W(a.content),1)])),_:2},1024),T(h,{class:"fcd-time"},{default:i((()=>[B(W(a.ftime)+" "+W(a.iphome?" · "+a.iphome:""),1)])),_:2},1024)])),_:2},1024),T(h,{class:"fc-zan",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}${a.zan_has?"zan_0":"zan_no"}.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1}),T(h,{class:"fc-input"},{default:i((()=>[T(x,{type:"text",placeholder:`回复${c.comment[c.recall.index].user.nickname}`,modelValue:c.recall.text,"onUpdate:modelValue":o[45]||(o[45]=e=>c.recall.text=e),onConfirm:o[46]||(o[46]=e=>d.recallFn(c.xiaoshipin.recallId))},null,8,["placeholder","modelValue"]),T(h,{class:"btn",onClick:o[47]||(o[47]=e=>d.recallFn(c.xiaoshipin.recallId))},{default:i((()=>[B("发送")])),_:1})])),_:1})],64)):f("",!0)])),_:1},8,["style"])])),_:1})):f("",!0)])),_:1},8,["scroll-y","refresher-enabled","scroll-top","refresher-background","onRefresherrefresh","onScroll","onScrolltolower"])),c.toutiao.commentPopb&&0==c.detail.mold?(e(),t(h,{key:2,class:"recallPop",onClick:o[51]||(o[51]=e=>c.toutiao.commentPopb=!1)},{default:i((()=>[T(h,{class:"rp-content",onClick:o[50]||(o[50]=E((()=>{}),["stop"]))},{default:i((()=>[T($,{rows:"5",placeholder:c.appConfig.cfg_commentPlaceholder,"placeholder-style":"color:#B3B3B3;","cursor-spacing":"30",onBlur:d.resetScroll,focus:!0,modelValue:c.toutiao.commentText_3,"onUpdate:modelValue":o[48]||(o[48]=e=>c.toutiao.commentText_3=e)},null,8,["placeholder","onBlur","modelValue"]),T(h,{class:"sendMess",onClick:o[49]||(o[49]=e=>d.commentFn(c.toutiao.commentText_3))},{default:i((()=>[B("发送")])),_:1})])),_:1})])),_:1})):f("",!0),c.recall.index>-1&&0==c.detail.mold?(e(),t(h,{key:3,class:"recall",onClick:o[61]||(o[61]=e=>d.recallPopFn())},{default:i((()=>[T(h,{class:"r-content",onClick:o[60]||(o[60]=E((()=>{}),["stop"])),style:p(`transform:translateY(${c.recall.recallb?"0%":"100%"})`)},{default:i((()=>[T(h,{class:"rc-title"},{default:i((()=>[B("回复")])),_:1}),T(h,{class:"item",style:{border:"0"},onClick:o[55]||(o[55]=e=>{c.recallb=!0,c.recall.name=c.comment[c.recall.index].user.nickname,c.recall.id=c.comment[c.recall.index].id})},{default:i((()=>[T(u,{src:c.comment[c.recall.index].user.photo||c.userError,mode:"aspectFill",class:"rc-photo",onError:o[52]||(o[52]=e=>c.comment[c.recall.index].user.photo=c.userError)},null,8,["src"]),T(h,{class:"rc-name"},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(c.comment[c.recall.index].user.nickname),1)])),_:1}),0==c.comment[c.recall.index].zan_has?(e(),t(h,{key:0,class:"zan",onClick:o[53]||(o[53]=E((e=>d.zanCommentFn(c.comment[c.recall.index])),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}zan.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].zan||""),1)])),_:1})])),_:1})):(e(),t(h,{key:1,class:"zan has",onClick:o[54]||(o[54]=E((e=>d.zanCommentFn(c.comment[c.recall.index])),["stop"]))},{default:i((()=>[T(u,{src:`${c.imgurl}zaned.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].zan),1)])),_:1})])),_:1})),c.zanItem==c.comment[c.recall.index]?(e(),t(u,{key:2,src:`${c.imgurl}zan_add.png?v=${c.imgVersion}`,mode:"aspectFit",class:"add_zan"},null,8,["src"])):f("",!0)])),_:1}),T(h,{class:"rc-content"},{default:i((()=>[B(W(c.comment[c.recall.index].content),1)])),_:1}),T(h,{class:"rc-time"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.comment[c.recall.index].ftime)+" "+W(c.comment[c.recall.index].iphome?" · "+c.comment[c.recall.index].iphome:""),1)])),_:1})])),_:1})])),_:1}),T(h,{class:"rc-my"},{default:i((()=>[T(u,{src:c.userInfo.photo||c.userError,mode:"aspectFit",onError:o[56]||(o[56]=e=>c.userInfo.photo=c.userError)},null,8,["src"]),T(x,{type:"text",placeholder:c.appConfig.cfg_commentPlaceholder,"placeholder-style":"color:#B3B3B3",modelValue:c.recall.textMy,"onUpdate:modelValue":o[57]||(o[57]=e=>c.recall.textMy=e),onConfirm:o[58]||(o[58]=e=>d.recallFn(!1,c.recall.textMy)),onFocus:o[59]||(o[59]=e=>c.recall.id=c.recall.popId)},null,8,["placeholder","modelValue"])])),_:1}),T(k,{"scroll-y":!0,style:{height:"700rpx"}},{default:i((()=>[T(h,{class:"rc-all"},{default:i((()=>[B("全部回复 · "+W(c.comment[c.recall.index].lower.list.length),1)])),_:1}),(e(!0),j(V,null,M(c.comment[c.recall.index].lower.list,((a,n)=>(e(),t(h,{class:"item",key:n,style:p(n==c.comment[c.recall.index].lower.list?"border:0":""),onClick:e=>{c.recallb=!0,c.recall.name=a.user.nickname,c.recall.id=a.id}},{default:i((()=>[T(u,{src:a.user.photo||c.userError,mode:"aspectFill",class:"rc-photo",onError:e=>a.user.photo=c.userError},null,8,["src","onError"]),T(h,{class:"rc-name"},{default:i((()=>[T(g,{class:"name"},{default:i((()=>[B(W(a.user.nickname),1)])),_:2},1024),0==a.zan_has?(e(),t(h,{key:0,class:"zan",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zan.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan||""),1)])),_:2},1024)])),_:2},1032,["onClick"])):(e(),t(h,{key:1,class:"zan has",onClick:E((e=>d.zanCommentFn(a)),["stop"])},{default:i((()=>[T(u,{src:`${c.imgurl}zaned.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B(W(a.zan),1)])),_:2},1024)])),_:2},1032,["onClick"])),c.zanItem==a?(e(),t(u,{key:2,src:`${c.imgurl}zan_add.png?v=${c.imgVersion}`,mode:"aspectFit",class:"add_zan"},null,8,["src"])):f("",!0)])),_:2},1024),T(h,{class:"rc-content"},{default:i((()=>[a.reply_to_user.userid!=c.comment[c.recall.index].user.userid&&a.reply_to_user.userid!=a.user.userid?(e(),j(V,{key:0},[B(" 回复"),T(g,null,{default:i((()=>[B(W(a.reply_to_user.nickname),1)])),_:2},1024),B(":")],64)):f("",!0),B(" "+W(a.content),1)])),_:2},1024),T(h,{class:"rc-time"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(a.ftime)+" "+W(a.iphome?" · "+a.iphome:""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["style","onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):f("",!0),c.recallb?(e(),t(h,{key:4,class:"recallPop",onClick:o[65]||(o[65]=e=>c.recallb=!1)},{default:i((()=>[T(h,{class:"rp-content",onClick:o[64]||(o[64]=E((()=>{}),["stop"]))},{default:i((()=>[T($,{rows:"5",placeholder:`回复@${c.recall.name}`,"placeholder-style":"color:#B3B3B3;","adjust-position":!0,onBlur:d.resetScroll,focus:!0,modelValue:c.recall.text,"onUpdate:modelValue":o[62]||(o[62]=e=>c.recall.text=e)},null,8,["placeholder","onBlur","modelValue"]),T(h,{class:"sendMess",onClick:o[63]||(o[63]=e=>d.recallFn())},{default:i((()=>[B("发送")])),_:1})])),_:1})])),_:1})):f("",!0),T(C,{service:"article",aid:Number(c.xiaoshipin.detailId>0?c.detail[c.xiaoshipin.activeIndex].id:c.detail.id),sponsorMax:Number(c.config.rewardLimit),popb:c.sponsorb,sponsorMoney:c.config.rewardOption,onCloseFn:o[66]||(o[66]=e=>c.sponsorb=!1),successFn:d.sponsorSuccess},null,8,["aid","sponsorMax","popb","sponsorMoney","successFn"]),O(T(h,{class:"comSuccess"},{default:i((()=>[T(h,{class:"title"},{default:i((()=>[B(W(c.backComment.message),1)])),_:1}),O(T(h,{class:"text"},{default:i((()=>[T(u,{src:`${c.imgurl}coin_star.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"]),T(g,{class:"txt"},{default:i((()=>[T(g,null,{default:i((()=>[B(W(c.backComment.returnPoint),1)])),_:1}),B(W(c.backComment.pointName),1)])),_:1})])),_:1},512),[[D,c.backComment.returnPoint>0]])])),_:1},512),[[D,c.pointb]]),T(F,{showPop:c.complainb,infoDetail:c.complainInfo,onHideFn:o[67]||(o[67]=e=>c.complainb=!1),complainList:c.complainList,ref:"complaint"},null,8,["showPop","infoDetail","complainList"]),c.shareb?(e(),t(h,{key:5,class:"sharePop",onClick:o[71]||(o[71]=e=>d.shareFn(0))},{default:i((()=>[T(h,{class:"s-content",style:p(`transform:translateY(${c.shareconb?"0%":"100%"})`),onClick:o[68]||(o[68]=E((()=>{}),["stop"]))},{default:i((()=>[T(h,{class:"sc-title"},{default:i((()=>[B("更多")])),_:1}),c.webdyMini?f("",!0):(e(),t(h,{key:0,class:"sc-way"},{default:i((()=>[(e(!0),j(V,null,M(c.shareItem[c.platForm],((a,n)=>(e(),j(V,{key:n},[1!=a.id&&0!=c.detail.mold||0==c.detail.mold?(e(),t(h,{key:0,class:"item",onClick:a.fn},{default:i((()=>[T(h,null,{default:i((()=>[T(u,{src:a.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),T(g,null,{default:i((()=>[B(W(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):f("",!0)],64)))),128))])),_:1})),"web"==c.platForm?(e(),t(h,{key:1,class:"sc-operate"},{default:i((()=>[(e(!0),j(V,null,M(c.shareOperate,((a,n)=>(e(),j(V,{key:n},[1!=a.id?(e(),t(h,{key:0,class:"item",onClick:a.fn},{default:i((()=>[T(h,null,{default:i((()=>[T(u,{src:a.src,mode:"aspectFit"},null,8,["src"])])),_:2},1024),T(g,null,{default:i((()=>[B(W(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):f("",!0)],64)))),128))])),_:1})):f("",!0)])),_:1},8,["style"]),c.copySuccessb?(e(),t(h,{key:0,class:"c-warn",onClick:o[70]||(o[70]=E((()=>{}),["stop"]))},{default:i((()=>[T(h,{class:"title"},{default:i((()=>[B("已复制链接")])),_:1}),T(h,{class:"tip"},{default:i((()=>[B("快去粘贴给好友吧")])),_:1}),T(h,{class:"btn",onClick:o[69]||(o[69]=e=>d.shareFn(0))},{default:i((()=>[B("我知道了")])),_:1})])),_:1})):f("",!0)])),_:1})):f("",!0),c.qrb?(e(),t(h,{key:6,class:"qrCode",onClick:o[74]||(o[74]=e=>d.qrCodeFn(0))},{default:i((()=>[T(h,{class:"q-content",style:p(`transform:translateY(${c.qrconb?"0%":"100%"})`),onClick:o[73]||(o[73]=E((()=>{}),["stop"]))},{default:i((()=>[T(h,{class:"qc-img"},{default:i((()=>[T(u,{src:`${c.masterDomain}/include/qrcode.php?data=${c.shareLink}`,mode:"aspectFit"},null,8,["src"]),T(g,null,{default:i((()=>[B("让朋友扫一扫访问当前网页")])),_:1})])),_:1}),T(h,{class:"qc-btn",onClick:o[72]||(o[72]=E((e=>d.qrCodeFn(0)),["stop"]))},{default:i((()=>[B("取消")])),_:1})])),_:1},8,["style"])])),_:1})):f("",!0),c.wxshareb?(e(),t(h,{key:7,class:"wxShare",onClick:o[75]||(o[75]=e=>c.wxshareb=!1)},{default:i((()=>[T(u,{src:`${c.imgsrc}/HN_Public_sharezhi.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0),c.safarib?(e(),t(h,{key:8,class:"safari",onClick:o[76]||(o[76]=e=>c.safarib=!1)},{default:i((()=>[T(u,{src:`${c.masterDomain}/static/images/safariShare.png?v=${c.imgVersion}`,mode:"aspectFit"},null,8,["src"])])),_:1})):f("",!0),c.postShow?(e(),t(h,{key:9,class:"poster",onClick:o[81]||(o[81]=e=>{c.postShow=!1,c.scrollYb=!0})},{default:i((()=>["web"==c.platForm?(e(),t(K,{key:0,isCanvasToTempFilePath:"",onSuccess:o[77]||(o[77]=e=>d.createPosterFn(1,e)),hidden:""},{default:i((()=>[R("template",null,[T(P,{css:"background:#F7F7F7;width:100%;"},{default:i((()=>[T(S,{src:`${c.imgPath}/poster/articleDetail.png`,css:"width:100%;height:603rpx;position:absolute;top:0rpx;left:0rpx;z-index:-1"},null,8,["src"]),T(P,{css:"padding:80rpx 26rpx 0rpx;"},{default:i((()=>[T(P,{css:"padding:0rpx 10rpx;"},{default:i((()=>[T(z,{text:c.detail.title,css:"font-weight:bold;color:white;font-size:58rpx;line-clamp:3;"},null,8,["text"])])),_:1}),T(P,{css:"margin-top:30rpx;padding:0rpx 10rpx"},{default:i((()=>[T(z,{text:`${c.detail.pubdate}  ·  ${c.detail.media?c.detail.media.ac_name:""}`,css:"font-weight:500;color:white;font-size:28rpx;opacity:0.8"},null,8,["text"])])),_:1}),T(P,{css:"background:white;margin-top:42rpx;padding-top:40rpx"},{default:i((()=>[T(P,{css:"max-height:1200rpx;overflow:hidden;line-height:56rpx"},{default:i((()=>[(e(!0),j(V,null,M(c.detail.posterArr,((a,n)=>(e(),j(V,{key:n},["text"==a.type?(e(),t(P,{key:0,css:"padding:0rpx 36rpx;"},{default:i((()=>[T(z,{text:a.value,css:"font-weight:500;color:#212121;font-size:29rpx;text-indent:2em"},null,8,["text"])])),_:2},1024)):"image"==a.type?(e(),t(S,{key:1,src:a.value,css:"width:100%;margin-top:20rpx"},null,8,["src"])):"video"==a.type?(e(),t(S,{key:2,src:a.poster,css:"width:100%;margin-top:20rpx"},null,8,["src"])):(e(),t(P,{key:3,css:"width:100%"}))],64)))),128))])),_:1}),T(S,{src:`${c.imgPath}/miniprograme/article/tranBg.png`,css:"width:100%;margin-top:-54rpx;"},null,8,["src"]),T(z,{text:"更多资讯内容",css:"color:#212121;font-weight:bold;font-size:29rpx;padding:30rpx 0rpx 48rpx 36orpx;display:block"})])),_:1})])),_:1}),T(P,{css:"width:100%;height:40rpx;background:linear-gradient(0deg, #FFFFFF 0%, #F7F7F7 100%);"}),T(P,{css:"width:100%;background-color:white;min-height:120rpx;padding:0rpx 20rpx;box-sizing:border-box;"},{default:i((()=>[T(P,{css:"padding-right:168rpx;height:118rpx;padding-top:20rpx;box-sizing:border-box;"},{default:i((()=>[T(z,{text:c.appConfig.share?c.appConfig.share.title:"",css:"color:#212121;font-size:36rpx;font-weight:bold;line-clamp:1;display:block"},null,8,["text"]),T(z,{text:c.appConfig.share?c.appConfig.share.description:"",css:"color:#212121;font-size:23rpx;opacity:0.8;margin-top:20rpx;line-clamp:1"},null,8,["text"])])),_:1}),T(P,{css:"position:absolute;right:20rpx;top:50%;transform:translateY(-50%)"},{default:i((()=>[c.postWx?(e(),t(S,{key:0,src:c.postWx,css:"width:118rpx;height:118rpx;"},null,8,["src"])):(e(),t(J,{key:1,text:c.postCode,css:"width:118rpx;height:118rpx;"},null,8,["text"]))])),_:1})])),_:1}),T(P,{css:"color:#212121;font-size:24rpx;text-align:center;padding-top:54rpx;background-color:white;padding-bottom:32rpx"},{default:i((()=>[T(z,{text:"长按识别二维码看详情",css:"opacity:0.5"})])),_:1})])),_:1})])])),_:1})):(e(),t(K,{key:1,isCanvasToTempFilePath:"",onSuccess:o[78]||(o[78]=e=>d.createPosterFn(1,e)),hidden:""},{default:i((()=>[R("template",null,[T(P,{css:"background:#F7F7F7;width:100vw;border-radius:40rpx;"},{default:i((()=>[T(S,{src:`${c.imgPath}/poster/articleDetail.png`,css:"width:100%;height:603rpx;"},null,8,["src"]),T(P,{css:"padding:80rpx 26rpx 0rpx;margin-top:-630rpx;"},{default:i((()=>[T(P,{css:"padding:0rpx 10rpx;"},{default:i((()=>[T(z,{text:c.detail.title,css:"font-weight:bold;color:white;font-size:58rpx;line-clamp:3;"},null,8,["text"])])),_:1}),T(P,{css:"margin-top:30rpx;padding:0rpx 10rpx"},{default:i((()=>[T(z,{text:`${c.detail.pubdate}  ·  ${c.detail.media?c.detail.media.ac_name:""}`,css:"font-weight:500;color:white;font-size:28rpx;opacity:0.8"},null,8,["text"])])),_:1}),T(P,{css:"background:white;margin-top:42rpx;padding-top:40rpx"},{default:i((()=>[T(P,{css:"max-height:1200rpx;overflow:hidden;line-height:56rpx"},{default:i((()=>[(e(!0),j(V,null,M(c.detail.posterArr,((a,n)=>(e(),j(V,{key:n},["text"==a.type?(e(),t(P,{key:0,css:"padding:0rpx 36rpx;"},{default:i((()=>[T(z,{text:a.value,css:"font-weight:500;color:#212121;font-size:29rpx;text-indent:2em"},null,8,["text"])])),_:2},1024)):"image"==a.type?(e(),t(S,{key:1,src:a.value,css:"width:100%;margin-top:20rpx"},null,8,["src"])):"video"==a.type?(e(),t(S,{key:2,src:a.poster,css:"width:100%;margin-top:20rpx"},null,8,["src"])):(e(),t(P,{key:3,css:"width:100%"}))],64)))),128))])),_:1}),T(S,{src:`${c.imgPath}/miniprograme/article/tranBg.png`,css:"width:100%;margin-top:-54rpx;"},null,8,["src"]),T(z,{text:"更多资讯内容",css:"color:#212121;font-weight:bold;font-size:29rpx;padding:30rpx 0rpx 48rpx 36orpx;display:block"})])),_:1})])),_:1}),T(P,{css:"width:100%;height:40rpx;background:linear-gradient(0deg, #FFFFFF 0%, #F7F7F7 100%);"}),T(P,{css:"width:100%;background-color:white;min-height:120rpx;padding:0rpx 20rpx;box-sizing:border-box;"},{default:i((()=>[T(P,{css:"padding-right:168rpx;height:118rpx;padding-top:20rpx;box-sizing:border-box;"},{default:i((()=>[T(z,{text:c.appConfig.share?c.appConfig.share.title:"",css:"color:#212121;font-size:36rpx;font-weight:bold;line-clamp:1;display:block"},null,8,["text"]),T(z,{text:c.appConfig.share?c.appConfig.share.description:"",css:"color:#212121;font-size:23rpx;opacity:0.8;margin-top:20rpx;line-clamp:1"},null,8,["text"])])),_:1}),T(P,{css:"position:absolute;right:20rpx;top:50%;transform:translateY(-50%)"},{default:i((()=>[c.postWx?(e(),t(S,{key:0,src:c.postWx,css:"width:118rpx;height:118rpx;"},null,8,["src"])):(e(),t(J,{key:1,text:c.postCode,css:"width:118rpx;height:118rpx;"},null,8,["text"]))])),_:1})])),_:1}),T(P,{css:"color:#212121;font-size:24rpx;text-align:center;padding-top:54rpx;background-color:white;padding-bottom:32rpx"},{default:i((()=>[T(z,{text:"长按识别二维码看详情",css:"opacity:0.5"})])),_:1})])),_:1})])])),_:1})),c.postExhib?(e(),t(h,{key:2,style:{position:"fixed"}},{default:i((()=>[T(h,{class:"exhibitionPoster",onLongpress:d.savePosterFn,onClick:o[79]||(o[79]=E((()=>{}),["stop"]))},{default:i((()=>[T(u,{src:c.posterImg,mode:"widthFix",class:"e-poster","show-menu-by-longpress":!0},null,8,["src"])])),_:1},8,["onLongpress"]),T(h,{class:"e-close"},{default:i((()=>[T(u,{src:`${c.imgPath}/close_btn.png`,mode:"aspectFit",onClick:o[80]||(o[80]=E((e=>{c.postShow=!1,c.scrollYb=!0}),["stop"]))},null,8,["src"]),T(g,null,{default:i((()=>[B("长按保存图片，分享给好友")])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1})):f("",!0),T(se,{privateShow:c.privateb},null,8,["privateShow"])],64)):(e(),t(h,{key:0,class:"loadBg"},{default:i((()=>[T(h,{class:"long"}),T(h,{class:"middleShort",style:{"margin-bottom":"140rpx"}}),T(h,{class:"long"}),T(h,{class:"long"}),T(h,{class:"short"}),T(h,{class:"long"}),T(h,{class:"long"}),T(h,{class:"middleShort",style:{"margin-bottom":"80rpx"}}),T(h,{class:"long"}),T(h,{class:"middleShort"})])),_:1})),T(oe,{info:c.info,warningb:c.warningb},null,8,["info","warningb"])])),_:1})}],["__scopeId","data-v-c9713213"]]);export{Rt as default};
