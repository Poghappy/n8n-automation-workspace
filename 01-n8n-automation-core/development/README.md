# 火鸟门户系统 (HuoNiao Portal)

## 📋 项目简介

火鸟门户系统是一个功能完整的PHP门户网站管理系统，提供内容管理、用户管理、支付集成等核心功能。

## 🚀 主要功能

- **内容管理**: 文章发布、分类管理、内容审核
- **用户系统**: 用户注册、登录、权限管理
- **支付集成**: 支持支付宝、微信支付、PayPal等多种支付方式
- **API接口**: 完整的RESTful API支持
- **管理后台**: 功能完善的后台管理系统
- **移动端支持**: 响应式设计，支持移动设备访问
- **自动化新闻工作流**: 基于n8n + Notion的智能新闻采集和发布系统

## 🤖 自动化新闻工作流

### 系统特性

- 🔄 **多源采集**: 支持RSS、API、网页抓取等多种数据源
- 🤖 **AI智能处理**: 内容质量评估、去重检测、自动分类
- 📊 **Notion集成**: 结构化数据存储和内容管理
- 🚀 **自动发布**: 无缝集成火鸟门户API
- 📈 **智能监控**: 全面的日志记录和性能监控
- 🛡️ **错误恢复**: 多层错误处理和自动恢复机制

### 快速开始

```bash
# 1. 安装依赖
npm install

# 2. 配置环境变量
cp .env.template .env
# 编辑 .env 文件，填入API密钥

# 3. 启动n8n服务
docker-compose -f docker-compose-n8n.yml up -d

# 4. 部署工作流
node scripts/deploy-automated-news-workflow.js --env=development

# 5. 验证部署
node scripts/run-e2e-integration-tests.js
```

### 工作流组件

- **内容采集**: 从RSS源和API自动采集新闻内容
- **AI处理**: 使用OpenAI进行内容质量评估和智能分类
- **Notion存储**: 结构化存储处理后的新闻数据
- **火鸟发布**: 自动发布到火鸟门户新闻模块
- **监控系统**: 实时监控工作流执行状态和性能指标

### 文档和支持

- 📖 [操作手册](docs/操作手册.md) - 详细的操作和维护指南
- 🔧 [故障排除指南](docs/故障排除指南.md) - 常见问题解决方案
- 📊 [监控仪表板](docs/监控仪表板.md) - 系统监控和报告
- 🚀 [部署指南](docs/部署指南.md) - 生产环境部署说明

## 📁 目录结构

```
├── admin/              # 管理后台
├── api/                # API接口
├── include/            # 核心类库和配置
├── static/             # 静态资源 (CSS, JS, 图片)
├── templates/          # 前端模板
├── log/                # 日志文件
└── templates_c/        # 编译缓存
```

## ⚙️ 系统要求

- **PHP**: 7.0 或更高版本
- **MySQL**: 5.6 或更高版本
- **Web服务器**: Apache/Nginx
- **扩展要求**:
  - GD库 (图片处理)
  - cURL (API调用)
  - JSON (数据处理)
  - PDO (数据库连接)

## 🔧 安装配置

### 1. 环境准备

确保服务器满足系统要求，并配置好PHP和MySQL环境。

### 2. 数据库配置

1. 创建数据库
2. 配置数据库连接信息 (请参考 `include/dbinfo.inc.php.example`)
3. 导入数据库结构

### 3. 文件权限

设置以下目录的写入权限：

```bash
chmod 755 log/
chmod 755 templates_c/
chmod 755 api/upload/
```

### 4. 配置文件

复制并配置必要的配置文件：

- `include/dbinfo.inc.php` (数据库配置)
- `api/appConfig.json` (应用配置)

## 🔐 安全配置

### 重要安全提醒

1. **修改默认密码**: 安装后立即修改管理员默认密码
2. **配置文件保护**: 确保敏感配置文件不可直接访问
3. **定期更新**: 保持系统和依赖库的最新版本
4. **备份策略**: 建立定期备份机制

### 文件权限建议

```bash
# 配置文件只读
chmod 644 include/dbinfo.inc.php
chmod 644 api/appConfig.json

# 日志目录可写
chmod 755 log/

# 上传目录可写
chmod 755 api/upload/
```

## 📚 API文档

系统提供完整的RESTful API接口，支持：

- 用户认证和授权
- 内容管理操作
- 文件上传处理
- 支付接口集成

详细API文档请参考 `api/` 目录下的相关文件。

## 🛠️ 开发指南

### 代码规范

- 遵循PSR-4自动加载规范
- 使用UTF-8编码
- 代码注释使用中文
- 变量和函数命名使用驼峰命名法

### 调试模式

开发环境下可以启用调试模式：

```php
// 在配置文件中设置
define('DEBUG_MODE', true);
```

## 📞 技术支持

- **问题反馈**: 请通过GitHub Issues提交问题
- **功能建议**: 欢迎提交功能改进建议
- **安全问题**: 请通过私有渠道报告安全漏洞

## 📄 许可证

本项目采用商业许可证，使用前请确保已获得合法授权。

## 🔄 更新日志

- **版本管理**: 采用语义化版本控制
- **更新通知**: 重要更新会通过系统通知
- **兼容性**: 向后兼容性保证

---

**注意**: 本系统包含敏感配置和商业代码，请妥善保管源代码，避免泄露。
