{
  "name": "AIæ™ºèƒ½ç®¡ç†èŠ‚ç‚¹é…ç½®",
  "description": "å®Œæ•´çš„AIæ™ºèƒ½ç®¡ç†èŠ‚ç‚¹é…ç½®ï¼ŒåŒ…å«å†…å®¹å®¡æ ¸ã€åˆ†ç±»ä¼˜åŒ–ã€é…ç½®ç®¡ç†å’Œè¿è¥å»ºè®®",
  "version": "1.0.0",
  "createdAt": "2025-08-23T10:45:00.000Z",
  
  "aiManagementNode": {
    "id": "ai-intelligent-management",
    "name": "AIæ™ºèƒ½ç®¡ç†èŠ‚ç‚¹",
    "type": "n8n-nodes-base.function",
    "typeVersion": 1,
    "position": [2200, 200],
    "parameters": {
      "functionCode": "// AIæ™ºèƒ½ç®¡ç†èŠ‚ç‚¹ - ä¸»è¦å¤„ç†é€»è¾‘\nconst { AIIntelligentManager } = require('./ai-intelligent-management-node.js');\n\n// åˆå§‹åŒ–AIç®¡ç†å™¨\nconst aiManager = new AIIntelligentManager({\n  aiApiKey: process.env.OPENAI_API_KEY,\n  aiModel: 'gpt-4',\n  firebirdApiUrl: 'https://hawaiihub.net/include/ajax.php',\n  firebirdSessionId: process.env.HUONIAO_SESSION_ID,\n  notionApiKey: process.env.NOTION_API_TOKEN,\n  notionDatabaseId: process.env.NOTION_DATABASE_ID,\n  \n  // åŠŸèƒ½å¼€å…³\n  enableContentReview: true,\n  enableConfigOptimization: true,\n  enablePerformanceAnalysis: true,\n  enableOperationalInsights: true,\n  \n  // é˜ˆå€¼é…ç½®\n  contentQualityThreshold: 75,\n  relevanceThreshold: 0.7,\n  performanceThreshold: 0.95\n});\n\n// è·å–è¾“å…¥æ•°æ®\nconst inputData = $input.first().json;\n\n// éªŒè¯è¾“å…¥æ•°æ®\nif (!inputData || !inputData.title) {\n  throw new Error('è¾“å…¥æ•°æ®æ— æ•ˆï¼šç¼ºå°‘å¿…è¦çš„æ ‡é¢˜å­—æ®µ');\n}\n\n// å‡†å¤‡ç®¡ç†æ•°æ®\nconst managementData = {\n  // åŸºç¡€å†…å®¹ä¿¡æ¯\n  title: inputData.title,\n  content: inputData.content || inputData.body,\n  summary: inputData.summary || inputData.description,\n  \n  // åˆ†ç±»ä¿¡æ¯\n  category: inputData.category || inputData.åˆ†ç±»åç§°,\n  categoryId: inputData.categoryId || inputData.åˆ†ç±»ID || inputData.typeid,\n  \n  // æ¥æºä¿¡æ¯\n  source: inputData.source || inputData.æ¥æº,\n  author: inputData.author || inputData.ä½œè€…,\n  source_url: inputData.source_url || inputData.åŸå§‹URL,\n  \n  // è´¨é‡ä¿¡æ¯\n  quality_score: inputData.quality_score || inputData.è´¨é‡åˆ†æ•° || inputData.qualityScore,\n  relevance_score: inputData.relevance_score || inputData.relevanceScore,\n  \n  // å¤„ç†çŠ¶æ€\n  processing_status: inputData.processing_status || inputData.å¤„ç†çŠ¶æ€,\n  \n  // Notionä¿¡æ¯\n  notionPageId: inputData.notionPageId || inputData.notion?.pageId,\n  notionUrl: inputData.notionUrl || inputData.notion?.url,\n  \n  // æ—¶é—´ä¿¡æ¯\n  publishedAt: inputData.publishedAt || inputData.å‘å¸ƒæ—¥æœŸ,\n  processedAt: inputData.processedAt || new Date().toISOString(),\n  \n  // å…ƒæ•°æ®\n  metadata: inputData.metadata || inputData.processingMetadata || {},\n  originalData: inputData\n};\n\ntry {\n  console.log('ğŸ¤– å¼€å§‹AIæ™ºèƒ½ç®¡ç†å¤„ç†:', {\n    title: managementData.title?.substring(0, 50) + '...',\n    source: managementData.source,\n    category: managementData.category,\n    qualityScore: managementData.quality_score\n  });\n  \n  // æ‰§è¡ŒAIæ™ºèƒ½ç®¡ç†\n  const managementResult = await aiManager.performIntelligentManagement(managementData, {\n    enableAI: true,\n    strictMode: false,\n    includeInsights: true,\n    includeOptimizations: true\n  });\n  \n  if (!managementResult.success) {\n    throw new Error(`AIæ™ºèƒ½ç®¡ç†å¤±è´¥: ${managementResult.error || 'Unknown error'}`);\n  }\n  \n  // å¤„ç†ç®¡ç†ç»“æœ\n  const processedData = {\n    ...inputData,\n    \n    // AIç®¡ç†ç»“æœ\n    aiManagement: {\n      success: true,\n      timestamp: managementResult.timestamp,\n      processingTime: managementResult.processingTime,\n      \n      // å†…å®¹å®¡æ ¸ç»“æœ\n      contentReview: managementResult.modules.contentReview,\n      \n      // åˆ†ç±»ä¼˜åŒ–ç»“æœ\n      categoryOptimization: managementResult.modules.categoryOptimization,\n      \n      // é…ç½®ä¼˜åŒ–ç»“æœ\n      configOptimization: managementResult.modules.configOptimization,\n      \n      // æ€§èƒ½åˆ†æç»“æœ\n      performanceAnalysis: managementResult.modules.performanceAnalysis,\n      \n      // è¿è¥å»ºè®®ç»“æœ\n      operationalInsights: managementResult.modules.operationalInsights,\n      \n      // æœ€ç»ˆå†³ç­–\n      decision: managementResult.decision\n    },\n    \n    // æ›´æ–°å¤„ç†çŠ¶æ€\n    processing_status: 'ai_managed',\n    \n    // åº”ç”¨AIå»ºè®®çš„ä¿®æ”¹\n    ...(managementResult.decision.modifications || {})\n  };\n  \n  // æ ¹æ®AIå†³ç­–ç¡®å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨\n  let nextAction = 'continue';\n  let actionReason = 'AIå®¡æ ¸é€šè¿‡';\n  \n  switch (managementResult.decision.action) {\n    case 'approve':\n      nextAction = 'publish';\n      actionReason = 'AIå»ºè®®å‘å¸ƒ';\n      processedData.readyForPublish = true;\n      break;\n      \n    case 'reject':\n      nextAction = 'reject';\n      actionReason = 'AIå»ºè®®æ‹’ç»';\n      processedData.readyForPublish = false;\n      processedData.rejectionReason = managementResult.decision.reasoning.join('; ');\n      break;\n      \n    case 'revise':\n      nextAction = 'revise';\n      actionReason = 'AIå»ºè®®ä¿®æ”¹';\n      processedData.readyForPublish = false;\n      processedData.revisionSuggestions = managementResult.decision.modifications;\n      break;\n      \n    case 'hold':\n      nextAction = 'hold';\n      actionReason = 'AIå»ºè®®æš‚åœï¼Œéœ€äººå·¥å®¡æ ¸';\n      processedData.readyForPublish = false;\n      processedData.holdReason = managementResult.decision.reasoning.join('; ');\n      break;\n      \n    default:\n      nextAction = 'continue';\n      actionReason = 'é»˜è®¤ç»§ç»­å¤„ç†';\n      processedData.readyForPublish = true;\n  }\n  \n  processedData.nextAction = nextAction;\n  processedData.actionReason = actionReason;\n  \n  // å‡†å¤‡ç«é¸Ÿé—¨æˆ·å‘å¸ƒæ•°æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰\n  if (processedData.readyForPublish) {\n    processedData.publishData = {\n      service: 'article',\n      action: 'put',\n      title: (processedData.title || '').substring(0, 60),\n      typeid: processedData.categoryId || processedData.åˆ†ç±»ID || 1,\n      body: processedData.content || processedData.å†…å®¹ || '',\n      writer: processedData.author || processedData.ä½œè€… || 'AIé‡‡é›†',\n      source: processedData.source || processedData.æ¥æº || 'AIé‡‡é›†',\n      sourceurl: processedData.source_url || processedData.åŸå§‹URL || '',\n      keywords: typeof processedData.keywords === 'string' \n        ? processedData.keywords.substring(0, 50)\n        : (Array.isArray(processedData.keywords) \n            ? processedData.keywords.join(',').substring(0, 50)\n            : (processedData.å…³é”®è¯ || '').substring(0, 50)),\n      description: (processedData.summary || processedData.æ‘˜è¦ || '').substring(0, 255),\n      litpic: processedData.image_url || processedData.ç¼©ç•¥å›¾URL || ''\n    };\n  }\n  \n  console.log('âœ… AIæ™ºèƒ½ç®¡ç†å®Œæˆ:', {\n    title: processedData.title?.substring(0, 50) + '...',\n    decision: managementResult.decision.action,\n    confidence: managementResult.decision.confidence,\n    nextAction: nextAction,\n    processingTime: managementResult.processingTime + 'ms'\n  });\n  \n  return {\n    json: processedData\n  };\n  \n} catch (error) {\n  console.error('âŒ AIæ™ºèƒ½ç®¡ç†å¤±è´¥:', {\n    title: managementData.title,\n    error: error.message,\n    stack: error.stack\n  });\n  \n  // é”™è¯¯æƒ…å†µä¸‹çš„é™çº§å¤„ç†\n  const fallbackData = {\n    ...inputData,\n    \n    aiManagement: {\n      success: false,\n      error: error.message,\n      timestamp: new Date().toISOString(),\n      fallbackApplied: true\n    },\n    \n    processing_status: 'ai_management_failed',\n    nextAction: 'continue_with_warning',\n    actionReason: `AIç®¡ç†å¤±è´¥ï¼Œä½¿ç”¨é™çº§ç­–ç•¥: ${error.message}`,\n    \n    // é™çº§æƒ…å†µä¸‹ä»ç„¶å‡†å¤‡å‘å¸ƒæ•°æ®\n    readyForPublish: true,\n    publishData: {\n      service: 'article',\n      action: 'put',\n      title: (inputData.title || '').substring(0, 60),\n      typeid: inputData.categoryId || inputData.åˆ†ç±»ID || 1,\n      body: inputData.content || inputData.å†…å®¹ || '',\n      writer: inputData.author || inputData.ä½œè€… || 'AIé‡‡é›†',\n      source: inputData.source || inputData.æ¥æº || 'AIé‡‡é›†'\n    }\n  };\n  \n  return {\n    json: fallbackData\n  };\n}"
    },
    "retryOnFail": true,
    "maxTries": 2,
    "waitBetweenTries": 3000,
    "continueOnFail": true,
    "alwaysOutputData": true
  },

  "decisionRouterNode": {
    "id": "ai-decision-router",
    "name": "AIå†³ç­–è·¯ç”±",
    "type": "n8n-nodes-base.switch",
    "typeVersion": 1,
    "position": [2420, 200],
    "parameters": {
      "dataType": "string",
      "value1": "={{$json.nextAction}}",
      "rules": {
        "rules": [
          {
            "operation": "equal",
            "value2": "publish",
            "output": 0
          },
          {
            "operation": "equal", 
            "value2": "reject",
            "output": 1
          },
          {
            "operation": "equal",
            "value2": "revise",
            "output": 2
          },
          {
            "operation": "equal",
            "value2": "hold",
            "output": 3
          }
        ]
      },
      "fallbackOutput": 0
    }
  },

  "publishPreparationNode": {
    "id": "publish-preparation",
    "name": "å‘å¸ƒå‡†å¤‡å¤„ç†",
    "type": "n8n-nodes-base.function",
    "typeVersion": 1,
    "position": [2640, 100],
    "parameters": {
      "functionCode": "// å‘å¸ƒå‡†å¤‡å¤„ç†\nconst inputData = $input.first().json;\n\n// éªŒè¯å‘å¸ƒæ•°æ®å®Œæ•´æ€§\nfunction validatePublishData(data) {\n  const errors = [];\n  \n  if (!data.publishData) {\n    errors.push('ç¼ºå°‘å‘å¸ƒæ•°æ®');\n    return { isValid: false, errors };\n  }\n  \n  const publishData = data.publishData;\n  \n  if (!publishData.title || publishData.title.trim().length === 0) {\n    errors.push('æ ‡é¢˜ä¸èƒ½ä¸ºç©º');\n  }\n  \n  if (!publishData.body || publishData.body.trim().length < 50) {\n    errors.push('å†…å®¹è¿‡çŸ­ï¼ˆå°‘äº50å­—ç¬¦ï¼‰');\n  }\n  \n  if (!publishData.typeid || publishData.typeid < 1) {\n    errors.push('åˆ†ç±»IDæ— æ•ˆ');\n  }\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n}\n\n// ä¼˜åŒ–å‘å¸ƒæ•°æ®\nfunction optimizePublishData(data) {\n  const publishData = { ...data.publishData };\n  \n  // ç¡®ä¿å­—æ®µé•¿åº¦ç¬¦åˆè¦æ±‚\n  publishData.title = publishData.title.trim().substring(0, 60);\n  publishData.writer = (publishData.writer || 'AIé‡‡é›†').substring(0, 20);\n  publishData.source = (publishData.source || 'AIé‡‡é›†').substring(0, 30);\n  publishData.sourceurl = (publishData.sourceurl || '').substring(0, 200);\n  publishData.keywords = (publishData.keywords || '').substring(0, 50);\n  publishData.description = (publishData.description || '').substring(0, 255);\n  \n  // ç¡®ä¿æ•°å€¼å­—æ®µæ­£ç¡®\n  publishData.typeid = parseInt(publishData.typeid) || 1;\n  \n  // æ·»åŠ ç³»ç»Ÿå­—æ®µ\n  publishData.cityid = 1; // å¤å¨å¤·åŸå¸‚ID\n  publishData.arcrank = 1; // å·²å®¡æ ¸çŠ¶æ€\n  publishData.weight = 1; // æ’åºæƒé‡\n  publishData.notpost = 0; // å¼€å¯è¯„è®º\n  publishData.color = ''; // æ ‡é¢˜é¢œè‰²\n  publishData.flag = 'r'; // æ¨èæ ‡è®°\n  \n  return publishData;\n}\n\ntry {\n  // éªŒè¯æ•°æ®\n  const validation = validatePublishData(inputData);\n  if (!validation.isValid) {\n    throw new Error(`å‘å¸ƒæ•°æ®éªŒè¯å¤±è´¥: ${validation.errors.join(', ')}`);\n  }\n  \n  // ä¼˜åŒ–å‘å¸ƒæ•°æ®\n  const optimizedPublishData = optimizePublishData(inputData);\n  \n  // è®°å½•å‘å¸ƒå‡†å¤‡ä¿¡æ¯\n  const publishPreparation = {\n    timestamp: new Date().toISOString(),\n    executionId: $execution.id,\n    runIndex: $runIndex,\n    \n    contentInfo: {\n      title: optimizedPublishData.title,\n      category: inputData.category || 'ç§‘æŠ€èµ„è®¯',\n      source: optimizedPublishData.source,\n      qualityScore: inputData.quality_score || inputData.è´¨é‡åˆ†æ•° || 0\n    },\n    \n    aiDecision: {\n      action: inputData.aiManagement?.decision?.action || 'approve',\n      confidence: inputData.aiManagement?.decision?.confidence || 0.5,\n      reasoning: inputData.aiManagement?.decision?.reasoning || []\n    },\n    \n    validation: validation,\n    optimizations: {\n      titleTrimmed: inputData.publishData.title !== optimizedPublishData.title,\n      fieldsValidated: true,\n      systemFieldsAdded: true\n    }\n  };\n  \n  console.log('ğŸ“ å‘å¸ƒå‡†å¤‡å®Œæˆ:', {\n    title: optimizedPublishData.title,\n    typeid: optimizedPublishData.typeid,\n    source: optimizedPublishData.source,\n    aiDecision: publishPreparation.aiDecision.action,\n    confidence: publishPreparation.aiDecision.confidence\n  });\n  \n  return {\n    json: {\n      ...inputData,\n      \n      // ä¼˜åŒ–åçš„å‘å¸ƒæ•°æ®\n      publishData: optimizedPublishData,\n      \n      // å‘å¸ƒå‡†å¤‡ä¿¡æ¯\n      publishPreparation: publishPreparation,\n      \n      // æ›´æ–°çŠ¶æ€\n      processing_status: 'ready_for_publish',\n      readyForFirebird: true\n    }\n  };\n  \n} catch (error) {\n  console.error('âŒ å‘å¸ƒå‡†å¤‡å¤±è´¥:', {\n    title: inputData.title,\n    error: error.message\n  });\n  \n  return {\n    json: {\n      ...inputData,\n      \n      publishPreparationError: {\n        message: error.message,\n        timestamp: new Date().toISOString()\n      },\n      \n      processing_status: 'publish_preparation_failed',\n      readyForFirebird: false\n    }\n  };\n}"
    }
  },

  "rejectionHandlerNode": {
    "id": "rejection-handler",
    "name": "å†…å®¹æ‹’ç»å¤„ç†",
    "type": "n8n-nodes-base.function",
    "typeVersion": 1,
    "position": [2640, 200],
    "parameters": {
      "functionCode": "// å†…å®¹æ‹’ç»å¤„ç†\nconst inputData = $input.first().json;\n\nconst rejectionRecord = {\n  timestamp: new Date().toISOString(),\n  executionId: $execution.id,\n  runIndex: $runIndex,\n  \n  contentInfo: {\n    title: inputData.title,\n    source: inputData.source || inputData.æ¥æº,\n    category: inputData.category || inputData.åˆ†ç±»åç§°,\n    qualityScore: inputData.quality_score || inputData.è´¨é‡åˆ†æ•° || 0\n  },\n  \n  rejectionDetails: {\n    reason: inputData.rejectionReason || 'AIå»ºè®®æ‹’ç»',\n    aiDecision: inputData.aiManagement?.decision || {},\n    contentReview: inputData.aiManagement?.contentReview || {}\n  },\n  \n  notionInfo: {\n    pageId: inputData.notionPageId,\n    url: inputData.notionUrl,\n    needsStatusUpdate: true\n  }\n};\n\nconsole.log('ğŸš« å†…å®¹è¢«æ‹’ç»:', {\n  title: rejectionRecord.contentInfo.title,\n  reason: rejectionRecord.rejectionDetails.reason,\n  qualityScore: rejectionRecord.contentInfo.qualityScore,\n  aiConfidence: rejectionRecord.rejectionDetails.aiDecision.confidence\n});\n\n// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ‹’ç»å†…å®¹çš„åç»­å¤„ç†\n// ä¾‹å¦‚ï¼šæ›´æ–°NotionçŠ¶æ€ã€å‘é€é€šçŸ¥ã€è®°å½•åˆ°æ—¥å¿—ç³»ç»Ÿç­‰\n\nreturn {\n  json: {\n    ...inputData,\n    \n    rejectionRecord: rejectionRecord,\n    processing_status: 'rejected_by_ai',\n    finalStatus: 'rejected',\n    \n    // æ ‡è®°ä¸éœ€è¦è¿›ä¸€æ­¥å¤„ç†\n    skipFirebirdPublish: true,\n    workflowComplete: true\n  }\n};"
    }
  },

  "revisionHandlerNode": {
    "id": "revision-handler", 
    "name": "å†…å®¹ä¿®æ”¹å¤„ç†",
    "type": "n8n-nodes-base.function",
    "typeVersion": 1,
    "position": [2640, 300],
    "parameters": {
      "functionCode": "// å†…å®¹ä¿®æ”¹å¤„ç†\nconst inputData = $input.first().json;\n\nconst revisionRecord = {\n  timestamp: new Date().toISOString(),\n  executionId: $execution.id,\n  runIndex: $runIndex,\n  \n  contentInfo: {\n    title: inputData.title,\n    source: inputData.source || inputData.æ¥æº,\n    category: inputData.category || inputData.åˆ†ç±»åç§°\n  },\n  \n  revisionDetails: {\n    suggestions: inputData.revisionSuggestions || {},\n    aiDecision: inputData.aiManagement?.decision || {},\n    optimizationSuggestions: inputData.aiManagement?.contentReview?.optimizationSuggestions || {}\n  },\n  \n  nextSteps: [\n    'åº”ç”¨AIä¼˜åŒ–å»ºè®®',\n    'é‡æ–°è¿›è¡Œè´¨é‡è¯„ä¼°',\n    'æ›´æ–°Notionè®°å½•',\n    'é‡æ–°æäº¤å®¡æ ¸'\n  ]\n};\n\nconsole.log('âœï¸ å†…å®¹éœ€è¦ä¿®æ”¹:', {\n  title: revisionRecord.contentInfo.title,\n  suggestions: Object.keys(revisionRecord.revisionDetails.suggestions),\n  nextSteps: revisionRecord.nextSteps.length\n});\n\n// åœ¨å®é™…å®ç°ä¸­ï¼Œè¿™é‡Œå¯ä»¥ï¼š\n// 1. è‡ªåŠ¨åº”ç”¨ä¸€äº›ç®€å•çš„ä¿®æ”¹å»ºè®®\n// 2. å°†å†…å®¹å‘é€åˆ°äººå·¥å®¡æ ¸é˜Ÿåˆ—\n// 3. æ›´æ–°Notionä¸­çš„çŠ¶æ€å’Œå»ºè®®\n// 4. è§¦å‘é‡æ–°å¤„ç†æµç¨‹\n\nreturn {\n  json: {\n    ...inputData,\n    \n    revisionRecord: revisionRecord,\n    processing_status: 'needs_revision',\n    finalStatus: 'pending_revision',\n    \n    // æ ‡è®°éœ€è¦äººå·¥å¹²é¢„\n    requiresManualReview: true,\n    skipFirebirdPublish: true,\n    workflowComplete: false\n  }\n};"
    }
  },

  "holdHandlerNode": {
    "id": "hold-handler",
    "name": "å†…å®¹æš‚åœå¤„ç†", 
    "type": "n8n-nodes-base.function",
    "typeVersion": 1,
    "position": [2640, 400],
    "parameters": {
      "functionCode": "// å†…å®¹æš‚åœå¤„ç†\nconst inputData = $input.first().json;\n\nconst holdRecord = {\n  timestamp: new Date().toISOString(),\n  executionId: $execution.id,\n  runIndex: $runIndex,\n  \n  contentInfo: {\n    title: inputData.title,\n    source: inputData.source || inputData.æ¥æº,\n    category: inputData.category || inputData.åˆ†ç±»åç§°,\n    qualityScore: inputData.quality_score || inputData.è´¨é‡åˆ†æ•° || 0\n  },\n  \n  holdDetails: {\n    reason: inputData.holdReason || 'AIç½®ä¿¡åº¦è¿‡ä½',\n    aiDecision: inputData.aiManagement?.decision || {},\n    confidence: inputData.aiManagement?.decision?.confidence || 0\n  },\n  \n  recommendedActions: [\n    'äººå·¥å®¡æ ¸å†…å®¹è´¨é‡',\n    'éªŒè¯å†…å®¹æ¥æºå¯é æ€§',\n    'ç¡®è®¤åˆ†ç±»å‡†ç¡®æ€§',\n    'è¯„ä¼°å‘å¸ƒæ—¶æœº'\n  ]\n};\n\nconsole.log('â¸ï¸ å†…å®¹è¢«æš‚åœ:', {\n  title: holdRecord.contentInfo.title,\n  reason: holdRecord.holdDetails.reason,\n  confidence: holdRecord.holdDetails.confidence,\n  qualityScore: holdRecord.contentInfo.qualityScore\n});\n\n// åœ¨å®é™…å®ç°ä¸­ï¼Œè¿™é‡Œå¯ä»¥ï¼š\n// 1. å‘é€é€šçŸ¥ç»™å†…å®¹ç®¡ç†å‘˜\n// 2. å°†å†…å®¹æ·»åŠ åˆ°äººå·¥å®¡æ ¸é˜Ÿåˆ—\n// 3. æ›´æ–°Notionä¸­çš„çŠ¶æ€\n// 4. è®¾ç½®å®šæ—¶é‡æ–°è¯„ä¼°\n\nreturn {\n  json: {\n    ...inputData,\n    \n    holdRecord: holdRecord,\n    processing_status: 'on_hold',\n    finalStatus: 'pending_manual_review',\n    \n    // æ ‡è®°éœ€è¦äººå·¥å¹²é¢„\n    requiresManualReview: true,\n    skipFirebirdPublish: true,\n    workflowComplete: false,\n    \n    // æ·»åŠ å®¡æ ¸é˜Ÿåˆ—ä¿¡æ¯\n    reviewQueue: {\n      priority: holdRecord.holdDetails.confidence < 0.3 ? 'high' : 'medium',\n      estimatedReviewTime: '24å°æ—¶å†…',\n      assignedReviewer: null\n    }\n  }\n};"
    }
  },

  "workflowIntegration": {
    "description": "å°†AIæ™ºèƒ½ç®¡ç†èŠ‚ç‚¹é›†æˆåˆ°ç°æœ‰å·¥ä½œæµçš„é…ç½®",
    "insertAfterNode": "Notionå­˜å‚¨çŠ¶æ€è·Ÿè¸ª",
    "connections": {
      "from": "notion-status-tracker",
      "to": "ai-intelligent-management",
      "condition": "storageSuccess === true"
    }
  },

  "environmentVariables": {
    "required": [
      "OPENAI_API_KEY",
      "HUONIAO_SESSION_ID",
      "NOTION_API_TOKEN",
      "NOTION_DATABASE_ID"
    ],
    "optional": [
      "AI_MODEL",
      "AI_TEMPERATURE",
      "AI_MAX_TOKENS",
      "AI_TIMEOUT"
    ],
    "defaults": {
      "AI_MODEL": "gpt-4",
      "AI_TEMPERATURE": "0.3",
      "AI_MAX_TOKENS": "1000",
      "AI_TIMEOUT": "30000"
    }
  },

  "monitoring": {
    "metrics": [
      "ai_management_success_rate",
      "ai_management_response_time", 
      "ai_decision_accuracy",
      "content_approval_rate",
      "content_rejection_rate"
    ],
    "alerts": [
      {
        "condition": "ai_management_success_rate < 90%",
        "severity": "warning",
        "message": "AIç®¡ç†æˆåŠŸç‡ä½äº90%"
      },
      {
        "condition": "ai_management_response_time > 15000",
        "severity": "warning", 
        "message": "AIç®¡ç†å“åº”æ—¶é—´è¶…è¿‡15ç§’"
      },
      {
        "condition": "content_rejection_rate > 30%",
        "severity": "critical",
        "message": "å†…å®¹æ‹’ç»ç‡è¶…è¿‡30%ï¼Œéœ€è¦æ£€æŸ¥è´¨é‡é˜ˆå€¼"
      }
    ]
  },

  "testingConfiguration": {
    "testCases": [
      {
        "name": "é«˜è´¨é‡å†…å®¹æµ‹è¯•",
        "input": {
          "title": "AIæŠ€æœ¯çªç ´ï¼šGPT-5å³å°†å‘å¸ƒ",
          "content": "OpenAIå…¬å¸ä»Šæ—¥å®£å¸ƒï¼Œå…¶æœ€æ–°çš„å¤§è¯­è¨€æ¨¡å‹GPT-5å°†åœ¨ä¸‹ä¸ªæœˆæ­£å¼å‘å¸ƒ...",
          "source": "TechCrunch",
          "category": "ç§‘æŠ€èµ„è®¯",
          "quality_score": 85
        },
        "expectedDecision": "approve"
      },
      {
        "name": "ä½è´¨é‡å†…å®¹æµ‹è¯•",
        "input": {
          "title": "æ ‡é¢˜è¿‡çŸ­",
          "content": "å†…å®¹è¿‡çŸ­",
          "source": "æœªçŸ¥æ¥æº",
          "quality_score": 30
        },
        "expectedDecision": "reject"
      },
      {
        "name": "éœ€è¦ä¿®æ”¹å†…å®¹æµ‹è¯•",
        "input": {
          "title": "æœ‰è¶£çš„AIæ–°é—»ä½†æ ‡é¢˜ä¸å¤Ÿå¸å¼•äºº",
          "content": "è¿™æ˜¯ä¸€ä¸ªå…³äºAIçš„æ–°é—»ï¼Œä½†æ˜¯å†…å®¹ç»“æ„ä¸å¤Ÿæ¸…æ™°ï¼Œéœ€è¦ä¼˜åŒ–...",
          "source": "AI News",
          "quality_score": 65
        },
        "expectedDecision": "revise"
      }
    ]
  }
}